import{A as R,n as k,h as u,y as T,m as N,z as Y,r as g,o as a,a as n,b as e,d as p,w as H,C as d,F as x,g as y,i as M,l as f,u as w,e as S,t as v,p as L,f as V}from"./index-CVVCImvW.js";import{h}from"./moment-Cl4UOzQZ.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const E=l=>(L("data-v-f8f557c8"),l=l(),V(),l),$={class:"mainContainer"},q={class:"DMMenuContainer"},z={class:"DMMenu"},F={key:0,class:"DMList"},U=["onClick"],b=E(()=>e("div",{class:"Profile"},"img",-1)),A={class:"DMRoom"},P={class:"DMRoomName"},j={key:0},G={class:"DMRoomLastMessage"},J={class:"DMRoomLastMessageTime"},K={class:"DMContentContainer"},O={key:0,class:"DMContent"},Q={__name:"DMHome",setup(l){const I=R(),C=k();w().state.user_ID;const c=u("Rooms"),D=u(null),i=u([{roomID:1,roomName:"room1",lastMessage:"ㅁㅁㅁ",lastMessageTime:"마지막: 1분 전"},{roomID:2,roomName:"room2",lastMessage:"ㅋㅋㅋ",lastMessageTime:"마지막: 2분 전"},{roomID:3,roomName:"room3",lastMessage:"ㅁㄴㅇ",lastMessageTime:"마지막: 3분 전"}]);return T(()=>{N.get("/Direct/print_Room").then(t=>{console.log(t.data);const{Rooms_Info:o}=t.data;i.value=o,i.value.forEach(r=>{r.lastMessageTime=h(r.lastMessageTime).format("YYYY-MM-DD HH:mm:ss")})}).catch(t=>{console.log(t)}),Y.on("receive_message",async t=>{const{Room_ID:o,User_ID:r,Message:_,Time:s}=t;i.value.forEach(m=>{m.Room_ID===o&&(m.lastMessage=_,m.lastMessageTime=h(s).format("YYYY-MM-DD HH:mm:ss"))})})}),(t,o)=>{const r=g("router-link"),_=g("router-view");return a(),n("div",$,[e("div",q,[p(r,{to:{name:"Home"},class:"logo"},{default:H(()=>[S("TripTracks")]),_:1}),e("div",z,[e("li",{class:d({select:c.value==="Rooms"}),onClick:o[0]||(o[0]=s=>c.value="Rooms")},"채팅방",2),e("li",{class:d({select:c.value==="Requests"}),onClick:o[1]||(o[1]=s=>c.value="Requests")},"요청",2)]),c.value==="Rooms"?(a(),n("div",F,[(a(!0),n(x,null,y(i.value,s=>(a(),n("div",{class:d(["DMRoomContainer",{select:D.value===s.Room_ID}]),onClick:m=>{D.value=s.Room_ID,f(C).push({name:"Room",params:{Room_ID:s.Room_ID}})}},[b,e("div",A,[e("div",P,v(s.User_Name),1),s.lastMessage?(a(),n("span",j,[e("div",G,v(s.lastMessage)+" |",1),e("div",J,"| "+v(s.lastMessageTime),1)])):M("",!0)])],10,U))),256))])):M("",!0)]),e("div",K,[f(I).name==="DirectMessage"?(a(),n("div",O,"아마 메시지 창이 들어갈 곳")):M("",!0),p(_)])])}}},es=B(Q,[["__scopeId","data-v-f8f557c8"]]);export{es as default};
