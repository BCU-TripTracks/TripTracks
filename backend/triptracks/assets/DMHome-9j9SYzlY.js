import{r as m,o as C,s as v,e as t,f as s,g as D,h as I,B as _,F as k,l as T,j as u,y as g,u as N,a as x,b as h,d as a,i as y,t as d,G as H,z as P}from"./index-CHL-2fQ3.js";import{h as w}from"./moment-C5S46NFB.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"mainContainer"},V={class:"DMMenuContainer"},Y={class:"DMMenu"},F={key:0,class:"DMList"},$=["onClick"],q=["src"],z={class:"DMRoom"},E={class:"DMRoomName"},S={key:0},U={class:"DMRoomLastMessage"},b={class:"DMRoomLastMessageTime"},j={class:"DMContentContainer"},G={key:0,class:"DMContent"},A={__name:"DMHome",setup(J){const p=H(),f=P();N().state.user_ID;const n=m("Rooms"),M=m(null),c=m([{roomID:1,roomName:"room1",lastMessage:"ㅁㅁㅁ",lastMessageTime:"마지막: 1분 전",Profile_Img:""},{roomID:2,roomName:"room2",lastMessage:"ㅋㅋㅋ",lastMessageTime:"마지막: 2분 전",Profile_Img:""},{roomID:3,roomName:"room3",lastMessage:"ㅁㄴㅇ",lastMessageTime:"마지막: 3분 전",Profile_Img:""}]),i=()=>{x.get("/Direct/print_Room",{withCredentials:!0}).then(r=>{console.log(r.data);const{Rooms_Info:o}=r.data;c.value=o,c.value.forEach(l=>{l.lastMessageTime=w(l.lastMessageTime).format("YYYY-MM-DD HH:mm:ss")})}).catch(r=>{console.log(r)})};return C(()=>{i(),v.on("receive_message",()=>{i()}),v.on("DM_Rooms_Update",()=>{i()})}),(r,o)=>{const l=h("router-link"),R=h("router-view");return a(),t("div",L,[s("div",V,[D(l,{to:{name:"HomeFeed"},class:"logo"},{default:I(()=>[y("TripTracks")]),_:1}),s("div",Y,[s("li",{class:_({select:n.value==="Rooms"}),onClick:o[0]||(o[0]=e=>n.value="Rooms")},"채팅방",2),s("li",{class:_({select:n.value==="Requests"}),onClick:o[1]||(o[1]=e=>n.value="Requests")},"요청",2)]),n.value==="Rooms"?(a(),t("div",F,[(a(!0),t(k,null,T(c.value,e=>(a(),t("div",{class:_(["DMRoomContainer",{select:M.value===e.Room_ID}]),onClick:O=>{M.value=e.Room_ID,g(f).push({name:"Room",params:{Room_ID:e.Room_ID}})}},[s("img",{src:e.Profile_Img,class:"Profile"},null,8,q),s("div",z,[s("div",E,d(e.User_Name),1),e.lastMessage?(a(),t("span",S,[s("div",U,d(e.lastMessage)+" |",1),s("div",b,"| "+d(e.lastMessageTime),1)])):u("",!0)])],10,$))),256))])):u("",!0)]),s("div",j,[g(p).name==="DirectMessage"?(a(),t("div",G)):u("",!0),D(R)])])}}},Z=B(A,[["__scopeId","data-v-ee5800c4"]]);export{Z as default};
