import{r as _,o as C,s as D,e as a,f as s,g,h as I,B as u,F as k,l as T,j as d,y as h,u as N,a as w,b as p,d as n,i as x,t as M,G as y,z as H}from"./index-LiFnMm82.js";import{h as P}from"./moment-C5S46NFB.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"mainContainer"},V={class:"DMMenuContainer"},Y={class:"DMMenu"},F={key:0,class:"DMList"},$=["onClick"],q=["src"],z={class:"DMRoom"},E={class:"DMRoomName"},S={key:0},U={class:"DMRoomLastMessage"},b={class:"DMRoomLastMessageTime"},j={class:"DMContentContainer"},G={key:0,class:"DMContent"},A={__name:"DMHome",setup(J){const f=y(),R=H();N().state.user_ID;const r=_("Rooms"),v=_(null),l=_([{roomID:1,roomName:"room1",lastMessage:"ㅁㅁㅁ",lastMessageTime:"마지막: 1분 전",Profile_Img:""},{roomID:2,roomName:"room2",lastMessage:"ㅋㅋㅋ",lastMessageTime:"마지막: 2분 전",Profile_Img:""},{roomID:3,roomName:"room3",lastMessage:"ㅁㄴㅇ",lastMessageTime:"마지막: 3분 전",Profile_Img:""}]),c=()=>{w.get("/Direct/print_Room",{withCredentials:!0}).then(i=>{console.log(i.data);const{Rooms_Info:o}=i.data;l.value=o,l.value.forEach(t=>{t.lastMessageTime=P(t.lastMessageTime).format("YYYY-MM-DD HH:mm:ss")}),l.value.sort((t,m)=>new Date(m.lastMessageTime)-new Date(t.lastMessageTime)),console.log(l.value)}).catch(i=>{console.log(i)})};return C(()=>{c(),D.on("receive_message",()=>{c()}),D.on("DM_Rooms_Update",()=>{c()})}),(i,o)=>{const t=p("router-link"),m=p("router-view");return n(),a("div",L,[s("div",V,[g(t,{to:{name:"HomeFeed"},class:"logo"},{default:I(()=>[x("TripTracks")]),_:1}),s("div",Y,[s("li",{class:u({select:r.value==="Rooms"}),onClick:o[0]||(o[0]=e=>r.value="Rooms")},"채팅방",2),s("li",{class:u({select:r.value==="Requests"}),onClick:o[1]||(o[1]=e=>r.value="Requests")},"요청",2)]),r.value==="Rooms"?(n(),a("div",F,[(n(!0),a(k,null,T(l.value,e=>(n(),a("div",{class:u(["DMRoomContainer",{select:v.value===e.Room_ID}]),onClick:O=>{v.value=e.Room_ID,h(R).push({name:"Room",params:{Room_ID:e.Room_ID}})}},[s("img",{src:e.Profile_Img,class:"Profile"},null,8,q),s("div",z,[s("div",E,M(e.User_Name),1),e.lastMessage?(n(),a("span",S,[s("div",U,M(e.lastMessage)+" |",1),s("div",b,"| "+M(e.lastMessageTime),1)])):d("",!0)])],10,$))),256))])):d("",!0)]),s("div",j,[h(f).name==="DirectMessage"?(n(),a("div",G)):d("",!0),g(m)])])}}},Z=B(A,[["__scopeId","data-v-656d0d79"]]);export{Z as default};
