import{A as k,n as T,h as d,y as N,m as Y,z as H,r as p,o as a,a as n,b as e,d as g,w as x,C as u,F as y,g as w,i as M,l as h,u as S,e as L,t as v,p as V,f as B}from"./index-VC5NMpas.js";import{h as f}from"./moment-Cl4UOzQZ.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q=m=>(V("data-v-ca30d70f"),m=m(),B(),m),z={class:"mainContainer"},E={class:"DMMenuContainer"},F={class:"DMMenu"},U={key:0,class:"DMList"},b=["onClick"],A=q(()=>e("div",{class:"Profile"},"img",-1)),P={class:"DMRoom"},j={class:"DMRoomName"},G={key:0},J={class:"DMRoomLastMessage"},K={class:"DMRoomLastMessageTime"},O={class:"DMContentContainer"},Q={key:0,class:"DMContent"},W={__name:"DMHome",setup(m){const R=k(),C=T();S().state.user_ID;const c=d("Rooms"),D=d(null),i=d([{roomID:1,roomName:"room1",lastMessage:"ㅁㅁㅁ",lastMessageTime:"마지막: 1분 전"},{roomID:2,roomName:"room2",lastMessage:"ㅋㅋㅋ",lastMessageTime:"마지막: 2분 전"},{roomID:3,roomName:"room3",lastMessage:"ㅁㄴㅇ",lastMessageTime:"마지막: 3분 전"}]);return N(()=>{Y.get("/Direct/print_Room").then(t=>{console.log(t.data);const{Rooms_Info:o}=t.data;i.value=o,i.value.forEach(r=>{r.lastMessageTime=f(r.lastMessageTime).format("YYYY-MM-DD HH:mm:ss")})}).catch(t=>{console.log(t)}),H.on("receive_message",async t=>{const{Room_ID:o,User_ID:r,Message:l,Time:s}=t,_=i.value.find(I=>I.Room_ID===o);_.lastMessage=l,_.lastMessageTime=f(s).format("YYYY-MM-DD HH:mm:ss")})}),(t,o)=>{const r=p("router-link"),l=p("router-view");return a(),n("div",z,[e("div",E,[g(r,{to:{name:"Home"},class:"logo"},{default:x(()=>[L("TripTracks")]),_:1}),e("div",F,[e("li",{class:u({select:c.value==="Rooms"}),onClick:o[0]||(o[0]=s=>c.value="Rooms")},"채팅방",2),e("li",{class:u({select:c.value==="Requests"}),onClick:o[1]||(o[1]=s=>c.value="Requests")},"요청",2)]),c.value==="Rooms"?(a(),n("div",U,[(a(!0),n(y,null,w(i.value,s=>(a(),n("div",{class:u(["DMRoomContainer",{select:D.value===s.Room_ID}]),onClick:_=>{D.value=s.Room_ID,h(C).push({name:"Room",params:{Room_ID:s.Room_ID}})}},[A,e("div",P,[e("div",j,v(s.User_Name),1),s.Content?(a(),n("span",G,[e("div",J,v(s.Content)+" |",1),e("div",K,"| "+v(s.Timestamp),1)])):M("",!0)])],10,b))),256))])):M("",!0)]),e("div",O,[h(R).name==="DirectMessage"?(a(),n("div",Q,"아마 메시지 창이 들어갈 곳")):M("",!0),g(l)])])}}},os=$(W,[["__scopeId","data-v-ca30d70f"]]);export{os as default};
