import{A as k,n as T,h as u,y as N,m as Y,z as H,r as g,o as a,a as n,b as e,d as p,w as x,C as d,F as y,g as w,i as M,l as h,u as S,e as L,t as v,p as V,f as B}from"./index-Ckl21gby.js";import{h as R}from"./moment-Cl4UOzQZ.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q=l=>(V("data-v-94194e51"),l=l(),B(),l),z={class:"mainContainer"},E={class:"DMMenuContainer"},F={class:"DMMenu"},U={key:0,class:"DMList"},b=["onClick"],A=q(()=>e("div",{class:"Profile"},"img",-1)),P={class:"DMRoom"},j={class:"DMRoomName"},G={key:0},J={class:"DMRoomLastMessage"},K={class:"DMRoomLastMessageTime"},O={class:"DMContentContainer"},Q={key:0,class:"DMContent"},W={__name:"DMHome",setup(l){const I=k(),f=T();S().state.user_ID;const r=u("Rooms"),D=u(null),i=u([{roomID:1,roomName:"room1",lastMessage:"ㅁㅁㅁ",lastMessageTime:"마지막: 1분 전"},{roomID:2,roomName:"room2",lastMessage:"ㅋㅋㅋ",lastMessageTime:"마지막: 2분 전"},{roomID:3,roomName:"room3",lastMessage:"ㅁㄴㅇ",lastMessageTime:"마지막: 3분 전"}]);return N(()=>{Y.get("/Direct/print_Room").then(t=>{console.log(t.data);const{Rooms_Info:o}=t.data;i.value=o,i.value.forEach(c=>{c.lastMessageTime=R(c.lastMessageTime).format("YYYY-MM-DD HH:mm:ss")})}).catch(t=>{console.log(t)}),H.on("receive_message",async t=>{const{Room_ID:o,User_ID:c,Message:m,Time:s}=t,_=i.value.find(C=>C.Room_ID===o);_.lastMessage=m,_.lastMessageTime=R(s).format("YYYY-MM-DD HH:mm:ss")})}),(t,o)=>{const c=g("router-link"),m=g("router-view");return a(),n("div",z,[e("div",E,[p(c,{to:{name:"Home"},class:"logo"},{default:x(()=>[L("TripTracks")]),_:1}),e("div",F,[e("li",{class:d({select:r.value==="Rooms"}),onClick:o[0]||(o[0]=s=>r.value="Rooms")},"채팅방",2),e("li",{class:d({select:r.value==="Requests"}),onClick:o[1]||(o[1]=s=>r.value="Requests")},"요청",2)]),r.value==="Rooms"?(a(),n("div",U,[(a(!0),n(y,null,w(i.value,s=>(a(),n("div",{class:d(["DMRoomContainer",{select:D.value===s.Room_ID}]),onClick:_=>{D.value=s.Room_ID,h(f).push({name:"Room",params:{Room_ID:s.Room_ID}})}},[A,e("div",P,[e("div",j,v(s.User_Name),1),s.lastMessage?(a(),n("span",G,[e("div",J,v(s.lastMessage)+" |",1),e("div",K,"| "+v(s.lastMessageTime),1)])):M("",!0)])],10,b))),256))])):M("",!0)]),e("div",O,[h(I).name==="DirectMessage"?(a(),n("div",Q,"아마 메시지 창이 들어갈 곳")):M("",!0),p(m)])])}}},os=$(W,[["__scopeId","data-v-94194e51"]]);export{os as default};
