import{z as M,h as t,A as R,y as C,C as D,D as x,o as u,a as d,b as e,t as m,F as y,g as I,j as T,v as k,i as N,B as S,p as B,f as L,m as b}from"./index-YTCxHjbL.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";const w=l=>(B("data-v-accf2ba8"),l=l(),L(),l),E={key:0,class:"RoomContainer"},V={class:"RoomHeader"},z=w(()=>e("div",{class:"RoomProfile"},null,-1)),F={class:"RoomName"},H={class:"message"},$={class:"time"},j={class:"RoomInput"},A={class:"inputBox"},P={__name:"DMRoom",setup(l){const f=M(),s=t(null),v=t(!1),i=t(!1),n=t(null),c=t({Room_ID:n,User_Name:"User_Name",Messages:[]});R(()=>f.params.Room_ID,r=>{r?(i.value=!0,n.value=r,b.get(`/Direct/print_DM/${n}`).then(a=>{const{Messages:o}=a.data;c.value.Messages=o})):i.value=!1},{immediate:!0});function _(){s.value.scrollTop===0&&g()}function g(){console.log("Loading more messages..."),c.value.Messages.unshift({Type:"Y",Message:"New Message",Time:"11:11:11"})}C(()=>{s.value&&(s.value.addEventListener("scroll",_),D(()=>{v.value||(s.value.scrollTop=s.value.scrollHeight,v.value=!0)}))}),x(()=>{s.value&&s.value.removeEventListener("scroll",_)});const p=t(""),h=()=>{console.log("Sending message...")};return(r,a)=>i.value?(u(),d("div",E,[e("div",V,[z,e("div",F,"Room "+m(n.value),1)]),e("div",{class:"RoomChat",ref_key:"RoomChatContainer",ref:s},[(u(!0),d(y,null,I(c.value.Messages,o=>(u(),d("li",{class:S(o.Type==="M"?"m":"y")},[e("div",H,m(o.Message),1),e("div",$,m(o.Time),1)],2))),256))],512),e("div",j,[e("div",A,[T(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=o=>p.value=o)},null,512),[[k,p.value]]),e("button",{onClick:a[1]||(a[1]=o=>h())},"send")])])])):N("",!0)}},G=U(P,[["__scopeId","data-v-accf2ba8"]]);export{G as default};
