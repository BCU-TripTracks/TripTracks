import{z as g,h as t,A as h,y as M,C,D,o as c,a as u,b as e,t as m,F as I,g as y,j as T,v as x,i as k,B as N,p as S,f as B,m as L}from"./index-BKmPlqrM.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";const U=l=>(S("data-v-50715a06"),l=l(),B(),l),E={key:0,class:"RoomContainer"},V={class:"RoomHeader"},b=U(()=>e("div",{class:"RoomProfile"},null,-1)),z={class:"RoomName"},F={class:"message"},H={class:"time"},$={class:"RoomInput"},j={class:"inputBox"},A={__name:"DMRoom",setup(l){const p=g(),s=t(null),d=t(!1),i=t(!1),n=t({Room_ID,User_Name:"User_Name",Messages:[]});h(()=>p.params.Room_ID,r=>{r?(i.value=!0,L.get(`/Direct/print_DM/${Room_ID.value}`).then(a=>{const{ResultRoomChat:o}=a.data;n.value=o,console.log(n.value)})):i.value=!1},{immediate:!0});function v(){s.value.scrollTop===0&&f()}function f(){console.log("Loading more messages..."),n.value.Messages.unshift({Type:"Y",Message:"New Message",Time:"11:11:11"})}M(()=>{s.value&&(s.value.addEventListener("scroll",v),C(()=>{d.value||(s.value.scrollTop=s.value.scrollHeight,d.value=!0)}))}),D(()=>{s.value&&s.value.removeEventListener("scroll",v)});const _=t(""),R=()=>{console.log("Sending message...")};return(r,a)=>i.value?(c(),u("div",E,[e("div",V,[b,e("div",z,"Room "+m(r.Room_ID),1)]),e("div",{class:"RoomChat",ref_key:"RoomChatContainer",ref:s},[(c(!0),u(I,null,y(n.value.Messages,o=>(c(),u("li",{class:N(o.Type==="M"?"m":"y")},[e("div",F,m(o.Message),1),e("div",H,m(o.Time),1)],2))),256))],512),e("div",$,[e("div",j,[T(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=o=>_.value=o)},null,512),[[x,_.value]]),e("button",{onClick:a[1]||(a[1]=o=>R())},"send")])])])):k("",!0)}},q=w(A,[["__scopeId","data-v-50715a06"]]);export{q as default};
