import{z as h,h as l,A as R,y as M,C,D,o as r,a as u,b as e,t as d,F as I,g as x,j as y,v as T,i as k,B as N,p as S,f as B,m as L}from"./index-yHC3pUuR.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";const w=n=>(S("data-v-70089ed4"),n=n(),B(),n),E={key:0,class:"RoomContainer"},V={class:"RoomHeader"},b=w(()=>e("div",{class:"RoomProfile"},null,-1)),z={class:"RoomName"},F={class:"message"},H={class:"time"},$={class:"RoomInput"},j={class:"inputBox"},A={__name:"DMRoom",setup(n){const p=h(),s=l(null),m=l(!1),i=l(!1),t=l({Room_ID,User_Name:"User_Name",Messages:[]});R(()=>p.params.Room_ID,c=>{c?(i.value=!0,L.get(`/Direct/print_DM/${c}`).then(a=>{const{ResultRoomChat:o}=a.data;t.value=o,console.log(t.value)})):i.value=!1},{immediate:!0});function v(){s.value.scrollTop===0&&f()}function f(){console.log("Loading more messages..."),t.value.Messages.unshift({Type:"Y",Message:"New Message",Time:"11:11:11"})}M(()=>{s.value&&(s.value.addEventListener("scroll",v),C(()=>{m.value||(s.value.scrollTop=s.value.scrollHeight,m.value=!0)}))}),D(()=>{s.value&&s.value.removeEventListener("scroll",v)});const _=l(""),g=()=>{console.log("Sending message...")};return(c,a)=>i.value?(r(),u("div",E,[e("div",V,[b,e("div",z,d(t.value.Room_ID),1)]),e("div",{class:"RoomChat",ref_key:"RoomChatContainer",ref:s},[(r(!0),u(I,null,x(t.value.Messages,o=>(r(),u("li",{class:N(o.Type==="M"?"m":"y")},[e("div",F,d(o.Message),1),e("div",H,d(o.Time),1)],2))),256))],512),e("div",$,[e("div",j,[y(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=o=>_.value=o)},null,512),[[T,_.value]]),e("button",{onClick:a[1]||(a[1]=o=>g())},"send")])])])):k("",!0)}},q=U(A,[["__scopeId","data-v-70089ed4"]]);export{q as default};
