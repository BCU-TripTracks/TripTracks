import{z as h,h as l,A as R,y as M,C,D,o as u,a as r,b as s,t as d,F as x,g as y,j as I,v as T,i as b,B as k,p as S,f as B,m as L}from"./index-Bs9fw3-d.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const w=n=>(S("data-v-0ab39b48"),n=n(),B(),n),E={key:0,class:"RoomContainer"},U={class:"RoomHeader"},V=w(()=>s("div",{class:"RoomProfile"},null,-1)),z={class:"RoomName"},F={class:"message"},H={class:"time"},$={class:"RoomInput"},j={class:"inputBox"},A={__name:"DMRoom",setup(n){const p=h(),a=l(null),m=l(!1),i=l(!1),t=l({Room_ID:null,User_Name:null,Messages:[]});R(()=>p.params.Room_ID,c=>{c?(i.value=!0,L.get(`/Direct/print_DM/${c}`).then(o=>{const{ResultRoomChat:e}=o.data;t.value=e,console.log(t.value)}).catch(o=>{const{message:e}=o.response.data;console.log(o.response.status),console.log(e)})):i.value=!1},{immediate:!0});function v(){a.value.scrollTop===0&&g()}function g(){console.log("Loading more messages..."),t.value.Messages.unshift({Type:"Y",Message:"New Message",Time:"11:11:11"})}M(()=>{a.value&&(a.value.addEventListener("scroll",v),C(()=>{m.value||(a.value.scrollTop=a.value.scrollHeight,m.value=!0)}))}),D(()=>{a.value&&a.value.removeEventListener("scroll",v)});const _=l(""),f=()=>{console.log("Sending message...")};return(c,o)=>i.value?(u(),r("div",E,[s("div",U,[V,s("div",z,d(t.value.Room_ID),1)]),s("div",{class:"RoomChat",ref_key:"RoomChatContainer",ref:a},[(u(!0),r(x,null,y(t.value.Messages,e=>(u(),r("li",{class:k(e.Type==="M"?"m":"y")},[s("div",F,d(e.Message),1),s("div",H,d(e.Time),1)],2))),256))],512),s("div",$,[s("div",j,[I(s("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>_.value=e)},null,512),[[T,_.value]]),s("button",{onClick:o[1]||(o[1]=e=>f())},"send")])])])):b("",!0)}},q=N(A,[["__scopeId","data-v-0ab39b48"]]);export{q as default};
