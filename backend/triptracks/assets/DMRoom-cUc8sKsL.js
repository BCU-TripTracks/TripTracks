import{z as h,h as l,A as R,y as M,C,D,o as r,a as u,b as e,t as d,F as x,g as y,j as I,v as T,i as k,B as S,p as B,f as L,m as N}from"./index-DSy_vbvI.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";const E=n=>(B("data-v-835678e8"),n=n(),L(),n),U={key:0,class:"RoomContainer"},V={class:"RoomHeader"},b=E(()=>e("div",{class:"RoomProfile"},null,-1)),z={class:"RoomName"},F={class:"message"},H={class:"time"},$={class:"RoomInput"},j={class:"inputBox"},A={__name:"DMRoom",setup(n){const p=h(),s=l(null),m=l(!1),i=l(!1),t=l({Room_ID:null,User_Name:null,Messages:[]});R(()=>p.params.Room_ID,c=>{c?(i.value=!0,N.get(`/Direct/print_DM/${c}`).then(a=>{const{ResultRoomChat:o}=a.data;t.value=o,console.log(t.value)})):i.value=!1},{immediate:!0});function v(){s.value.scrollTop===0&&f()}function f(){console.log("Loading more messages..."),t.value.Messages.unshift({Type:"Y",Message:"New Message",Time:"11:11:11"})}M(()=>{s.value&&(s.value.addEventListener("scroll",v),C(()=>{m.value||(s.value.scrollTop=s.value.scrollHeight,m.value=!0)}))}),D(()=>{s.value&&s.value.removeEventListener("scroll",v)});const _=l(""),g=()=>{console.log("Sending message...")};return(c,a)=>i.value?(r(),u("div",U,[e("div",V,[b,e("div",z,d(t.value.Room_ID),1)]),e("div",{class:"RoomChat",ref_key:"RoomChatContainer",ref:s},[(r(!0),u(x,null,y(t.value.Messages,o=>(r(),u("li",{class:S(o.Type==="M"?"m":"y")},[e("div",F,d(o.Message),1),e("div",H,d(o.Time),1)],2))),256))],512),e("div",$,[e("div",j,[I(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=o=>_.value=o)},null,512),[[T,_.value]]),e("button",{onClick:a[1]||(a[1]=o=>g())},"send")])])])):k("",!0)}},q=w(A,[["__scopeId","data-v-835678e8"]]);export{q as default};
