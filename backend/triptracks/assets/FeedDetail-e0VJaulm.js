import{B as H,y as E,c as w,r as d,o as N,a as n,b as V,d as i,e as c,f as e,g as R,h as $,t as l,x as _,l as m,C as A,F as K,k as O,w as x,m as j,n as z,i as q,v as G,p as J,j as Q,u as W}from"./index-CAQ2rWgN.js";import{l as X,s as Z}from"./like-Cq13m2ZL.js";import{h as D}from"./moment-Cl4UOzQZ.js";import{S as r}from"./sweetalert2.all-DleYb7kt.js";import{l as ee}from"./likeed-BS52KISc.js";import{i as se}from"./404img-BemuhLvh.js";/* empty css                                                                */import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";const B=p=>(J("data-v-410bd28a"),p=p(),Q(),p),oe={key:0,class:"discription"},le={class:"feedinfobox"},ae=["src"],ne={class:"commentdetail"},ie={class:"username"},ce={class:"sub"},re={class:"uploadtime"},ue={class:"userbutton"},de={key:0,class:"Ownerbox"},_e={key:1,class:"Audiencebox"},me={class:"slidewrap"},pe=B(()=>e("ul",{class:"slidelist"},[e("li",null,[e("a",null,[e("label",{for:"slide03",class:"left"}),e("label",{for:"slide02",class:"right"})])])],-1)),he=["src","data-fallback"],ve={class:"caption mt10"},fe={class:"place"},Ce={class:"makerdrop"},ge={class:"LCS"},ke={class:"LC"},we=["src"],De=B(()=>e("span",null,[e("img",{src:Z,alt:"",class:"save"})],-1)),Ie=["src"],be={class:"commentdetail"},ye={class:"username"},xe={class:"content"},Be={class:"sub"},Fe={class:"uploadtime"},Ue=["onClick"],Pe={class:"commentcontainer"},Se={__name:"FeedDetail",setup(p){const I=H(),b=E(),h=W();w(()=>h.state.isModify);const C=w(()=>h.state.User_ID),t=d(null);d(null);const v=w(()=>t.value&&C.value===t.value.post.User_ID),F=()=>{b.push({name:"modify"})},U=()=>{h.commit("Switch_isMsg")},P=()=>{t.value.isFollowedByCurrentUser&&r.fire({title:"정말 팔로우를 취소하시겠습니까?",text:" ",icon:"warning",showCancelButton:!0,confirmButtonText:"팔로우 취소",cancelButtonText:"취소"}).then(async s=>{s.isConfirmed&&await n.post("/user/unfollow",{userId:t.value.post.User_ID},{withCredentials:!0}).then(o=>{console.log(o.data),r.fire("팔로우 취소","팔로우가 취소되었습니다.","success"),h.commit("Update_Follow_Status",!1)}).catch(o=>{console.log(o)})})},S=async()=>{r.fire({title:"정말로 게시글을 삭제하시겠습니까?",text:"삭제된 게시글은 되돌릴 수 없습니다.",icon:"warning",showCancelButton:!0,confirmButtonText:"삭제",cancelButtonText:"취소"}).then(async s=>{s.isConfirmed?await n.post("/feeds/Post_delete",{postId:t.value.post.Post_ID},{withCredentials:!0}).then(o=>{console.log(o.data),r.fire("게시글이 삭제되었습니다!","홈화면으로 이동합니다.","success"),b.push({name:"HomeFeed"})}).catch(o=>{console.log(o)}):s.dismiss===r.DismissReason.cancel&&r.fire("게시글 삭제가 취소되었습니다.","ㅋㅋ봐줌","error")})},f=d(""),g=d([]),k=()=>{n.post("/feeds/Comment/list",{Post_ID:t.value.post.Post_ID},{withCredentials:!0}).then(s=>{g.value=s.data,console.log(s.data)}).catch(s=>{console.log("오류발생"),console.log(s)})},y=()=>{D().format("YYYY년 MM월 DD일 HH:mm"),n.post("/feeds/Comment/add",{Post_ID:t.value.post.Post_ID,Comment:f.value},{withCredentials:!0}).then(s=>{console.log(s.data),k()}).catch(s=>{console.log("오류발생"),console.log(s)}),f.value=""},T=s=>{s.User_ID===C.value&&r.fire({title:"정말 코멘트를 지우겠습니까?",text:" ",icon:"warning",showCancelButton:!0,confirmButtonText:"코멘트 삭제",cancelButtonText:"취소"}).then(async o=>{o.isConfirmed&&n.post("/feeds/Comment/delete",{Comment_ID:s.Comment_ID},{withCredentials:!0}).then(u=>{console.log(u.data),k()}).catch(u=>{console.log("오류발생"),console.log(u)})})};d(null),N(()=>{console.log("테스트1"),console.log(I.params.Post_ID),n.get("/Feeds/Post_detail/"+I.params.Post_ID,{withCredentials:!0}).then(s=>{console.log(s.data),t.value=s.data,k()}).catch(s=>{console.log("오류발생"),console.log(s)})});const Y=s=>{s.isLike?n.post("/feeds/Like/remove",{postId:s.Post_ID},{withCredentials:!0}).then(o=>{s.isLike=!s.isLike}).catch(o=>{o.response.status==400}):n.post("/feeds/Like/add",{postId:s.Post_ID},{withCredentials:!0}).then(o=>{s.isLike=!s.isLike}).catch(o=>{o.response.status==400})},L=s=>{s.target.src=s.target.getAttribute("data-fallback")};return(s,o)=>{const u=V("router-link");return t.value?(i(),c("div",oe,[e("div",le,[e("span",null,[e("img",{src:t.value.post.Profile_Img,alt:"",class:"profile"},null,8,ae)]),e("div",ne,[e("div",null,[e("span",ie,[R(u,{to:{name:"PersonalPage",params:{User_ID:t.value.post.User_ID}},class:"userID"},{default:$(()=>[q(l(t.value.post.User_ID),1)]),_:1},8,["to"])])]),e("div",ce,[e("span",re,l(_(D)(t.value.post.Post_Create_Timestamp).format("YYYY년 MM월 DD일 HH:mm")),1)])]),e("div",ue,[v.value?(i(),c("div",de,[e("button",{onClick:o[0]||(o[0]=a=>F()),class:"modifybutton"},"수정"),e("button",{class:"feeddelete",onClick:S},"삭제")])):m("",!0),v.value?m("",!0):(i(),c("div",_e)),v.value?m("",!0):(i(),c("button",{key:2,class:"follow",onClick:P,style:A({backgroundColor:t.value.isFollowedByCurrentUser?"#EFEFEF":"black",borderColor:t.value.isFollowedByCurrentUser?"#F2F2F2":"black",color:t.value.isFollowedByCurrentUser?"black":"white"})},l(t.value.isFollowedByCurrentUser?"팔로잉":"팔로우"),5)),v.value?m("",!0):(i(),c("button",{key:3,class:"message",onClick:U},"메시지"))])]),e("div",me,[pe,e("img",{src:t.value.post.Image_Src,onError:L,"data-fallback":_(se),alt:""},null,40,he),e("div",null,l(t.value.post.Post_Title),1),e("div",ve,l(t.value.post.Post_Caption),1)]),e("ul",fe,[e("li",null,l(t.value.tags),1)]),e("ul",Ce,[e("li",ge,[e("span",ke,"좋아요 "+l(t.value.post.likeCount)+" 댓글 "+l(g.value.length),1),e("span",null,[e("img",{src:t.value.post.isLike?_(ee):_(X),alt:"",class:"like",onClick:o[1]||(o[1]=a=>Y(t.value.post))},null,8,we)]),De])]),(i(!0),c(K,null,O(g.value,(a,M)=>(i(),c("div",{key:M,class:"commentbox"},[e("span",null,[e("img",{src:a.Profile_Img,alt:"",class:"profile"},null,8,Ie)]),e("div",be,[e("div",null,[e("span",ye," @"+l(a.User_ID)+"-"+l(a.User_Name),1),e("span",xe,l(a.Comment_Text),1)]),e("div",Be,[e("span",Fe,l(_(D)(a.Comment_Timestamp).format("YYYY년MM월DD일 HH:mm:ss")),1),x(e("span",{class:"reply",onClick:Te=>T(a)},"삭제",8,Ue),[[G,a.User_ID===C.value]])])])]))),128)),e("div",Pe,[x(e("input",{class:"comment",type:"text",placeholder:"댓글을 입력하세요.","onUpdate:modelValue":o[2]||(o[2]=a=>f.value=a),onKeypress:z(y,["enter"])},null,544),[[j,f.value]]),e("button",{class:"commenting",onClick:y},"입력")])])):m("",!0)}}},$e=te(Se,[["__scopeId","data-v-410bd28a"]]);export{$e as default};
