import{c as B,r as c,y as C,e as o,f as a,F as w,k as S,w as U,m as V,n as $,j as N,d as i,i as v,t as f,g,h as k,q as u,x as E,u as K,a as d,b as M}from"./index-Cp1J-Kyg.js";import{l as W,a as j,s as q}from"./likeed-v1A9XkUo.js";import{s as A,m as R}from"./saveed-DRyjRmH-.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"grid-container"},H={class:"bodytop"},J={id:"result",class:"tagresult"},O=["onClick"],Q={class:"tagbox"},X={key:0,class:"feedSlider"},Y=["src"],Z={class:"profile-container"},ee=["src"],se=["src","onClick"],te=["src","onClick"],ae=["src","onClick"],le={__name:"FollowingTab",setup(oe){E();const I=K(),P=B(()=>I.state.isWrite),h=c([]),p=c([]),_=c([]),m=c(""),n=c([]),y=()=>{const e=m.value.trim();e&&(n.value.push(e),m.value="")},F=e=>{n.value.splice(e,1)},L=async()=>{try{const e=await d.get("/Feeds/Following_tab",{withCredentials:!0});h.value=e.data.map(s=>({...s,isLike:s.isLike??!1,isSave:s.isSave??!1})),p.value=e.data.map(s=>s.User_ID),D()}catch(e){console.error("오류 발생",e)}},D=()=>{const e=n.value;e.length>0?_.value=h.value.filter(s=>p.value.includes(s.User_ID)&&e.some(l=>s.Post_Title.includes(l)||s.Post_Caption.includes(l))):_.value=h.value.filter(s=>p.value.includes(s.User_ID))},T=e=>{e.isLike?d.post("/feeds/Like/remove",{postId:e.Post_ID},{withCredentials:!0}).then(()=>{e.isLike=!e.isLike}).catch(s=>{s.response.status===400&&console.log("좋아요 취소 실패")}):d.post("/feeds/Like/add",{postId:e.Post_ID},{withCredentials:!0}).then(()=>{e.isLike=!e.isLike}).catch(s=>{s.response.status===400&&console.log("좋아요 실패")})},b=e=>{e.isSave?d.post("/feeds/Post_Store/delete",{postId:e.Post_ID},{withCredentials:!0}).then(()=>{e.isSave=!e.isSave}).catch(s=>{s.response.status===400&&console.log("저장 취소 실패")}):d.post("/feeds/Post_Store/add",{postId:e.Post_ID},{withCredentials:!0}).then(()=>{e.isSave=!e.isSave}).catch(s=>{s.response.status===400&&console.log("저장 실패")})},x=e=>{const{Post_ID:s}=e;I.commit("Switch_isPostDM",s),console.log("메시지 버튼 클릭")};return C(n,D,{deep:!0}),C(P,()=>{L()},{immediate:!0}),(e,s)=>{const l=M("router-link");return i(),o("div",G,[a("div",H,[a("span",J,[(i(!0),o(w,null,S(n.value,(t,r)=>(i(),o("span",{key:r,class:"tag"},[v(f(t)+" ",1),a("button",{class:"deleteTagButton",onClick:ie=>F(r)},"x",8,O)]))),128))]),a("span",Q,[U(a("input",{class:"SearchTag",type:"text","onUpdate:modelValue":s[0]||(s[0]=t=>m.value=t),onKeyup:$(y,["enter"]),placeholder:"관심있는 태그를 검색해보세요."},null,544),[[V,m.value]]),a("button",{onClick:s[1]||(s[1]=t=>e.write_Button_Click()),class:"writebutton"}," 글쓰기 ")])]),_.value.length>0?(i(),o("div",X,[(i(!0),o(w,null,S(_.value,t=>(i(),o("div",{class:"grid-article",key:t.Post_ID},[g(l,{to:{name:"FeedDetail",params:{Post_ID:t.Post_ID}}},{default:k(()=>[a("img",{src:t.Image_Src,alt:"",class:"Eximage"},null,8,Y)]),_:2},1032,["to"]),a("ul",null,[a("li",Z,[a("img",{src:t.Profile_Img,alt:"",class:"profile"},null,8,ee),g(l,{to:{name:"PersonalPage",params:{User_ID:t.User_ID}},class:"userID"},{default:k(()=>[v(f(t.User_ID),1)]),_:2},1032,["to"]),a("img",{src:t.isLike?u(W):u(j),alt:"like",class:"like",onClick:r=>T(t)},null,8,se),a("img",{src:t.isSave?u(A):u(q),alt:"save",class:"save",onClick:r=>b(t)},null,8,te),a("img",{src:u(R),alt:"message",class:"message",onClick:r=>x(t)},null,8,ae)]),a("li",null,[g(l,{to:{name:"FeedDetail",params:{Post_ID:t.Post_ID}},class:"title"},{default:k(()=>[v(f(t.Post_Title),1)]),_:2},1032,["to"])]),a("li",null,[g(l,{to:{name:"FeedDetail",params:{Post_ID:t.Post_ID}},class:"discription"},{default:k(()=>[v(f(t.Post_Caption),1)]),_:2},1032,["to"])])])]))),128))])):N("",!0)])}}},de=z(le,[["__scopeId","data-v-3edb766d"]]);export{de as default};
