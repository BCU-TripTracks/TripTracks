import{u as R,c as w,r as d,o as Y,a as C,b as q,d as o,e as n,w as F,v as X,f as s,g as f,h as k,i as h,j as g,F as b,s as H,k as I,t as D,l as Z,m as N,n as z,p as M,q as L,x as j,y as ss,z as T}from"./index-Dd8u3veE.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                               *//* empty css                                                                */import{_ as K,m as es}from"./modify-BU_-wpwB.js";import{S as ts,a as os,P as as,N as ls}from"./pagination-BsDbY0oj.js";import{h as ns}from"./moment-C5S46NFB.js";const is={class:"subscription_ambassador"},cs={class:"header_upper_menu"},rs={class:"header"},us={class:"header_menu"},ds={class:"header_menu_list"},_s={class:"header_menu_list"},vs={class:"header_menu_list"},ms={class:"logo"},ps={class:"header_menu"},gs={class:"header_menu_list"},fs={key:0,class:"header_menu_list"},hs={class:"header_menu_list"},$s={__name:"header",setup(S){const l=R(),_=w(()=>l.state.User_ID),$=d(0),m=()=>{console.log("로그아웃실행"),H.emit("logout",_),C.get("/users/logout",{withCredentials:!0}).then(u=>{l.dispatch("checkSession")}).catch(u=>{console.log(u)})};return Y(()=>{C.get("/users/check_Rule",{withCredentials:!0}).then(u=>{console.log(u.data),$.value=u.data.Rule}).catch(u=>{console.log(u)})}),(u,t)=>{const c=q("router-link");return o(),n(b,null,[F(s("div",is,[t[2]||(t[2]=s("p",null,"당신도 할 수 있다 앰버서더",-1)),f(c,{to:{name:"Subscription"}},{default:k(()=>t[1]||(t[1]=[h(" 바로 신청하기")])),_:1})],512),[[X,$.value===0]]),s("ul",cs,[s("li",null,[f(c,{to:{name:"Ambassador"},class:"mypage"},{default:k(()=>t[3]||(t[3]=[h(" 앰버서더 ")])),_:1})]),s("li",null,[f(c,{to:{name:"myPage"},class:"mypage"},{default:k(()=>t[4]||(t[4]=[h(" 마이페이지 ")])),_:1})]),s("li",{onClick:t[0]||(t[0]=P=>m()),class:"Logout"},"로그아웃")]),s("div",rs,[s("div",us,[s("ul",null,[s("li",ds,[f(c,{to:{name:"followingtab"}},{default:k(()=>t[5]||(t[5]=[h("팔로잉 ")])),_:1})]),s("li",_s,[f(c,{to:{name:"searcingtab"}},{default:k(()=>t[6]||(t[6]=[h("탐색 ")])),_:1})]),s("li",vs,[f(c,{to:{name:"popularitytab"}},{default:k(()=>t[7]||(t[7]=[h("인기 ")])),_:1})])])]),s("div",ms,[s("h1",null,[f(c,{to:{name:"HomeFeed"}},{default:k(()=>t[8]||(t[8]=[h(" TripTracks ")])),_:1})])]),s("div",ps,[s("ul",null,[s("li",gs,[f(c,{to:{name:"DirectMessage"}},{default:k(()=>t[9]||(t[9]=[h("DirectMessage ")])),_:1})]),_.value?(o(),n("li",fs,[f(c,{to:{name:"PersonalPage",params:{User_ID:_.value}}},{default:k(()=>t[10]||(t[10]=[h("프로필 ")])),_:1},8,["to"])])):g("",!0),s("li",hs,[f(c,{to:{name:"planner"}},{default:k(()=>t[11]||(t[11]=[h("Planner ")])),_:1})])])])])],64)}}},ks=U($s,[["__scopeId","data-v-c4ab5629"]]),E="/assets/ProfileImage2-DAt-H7rB.png",ws="/assets/ProfileImage3-kxNyjHTU.png",ys={class:"messagecontainer"},bs={class:"chatmenu"},xs={class:"chatcontainer"},Ds={key:0},Is=["src"],Cs={class:"chatroom"},Ps={class:"userID"},Ms={class:"userID"},Us={key:1,class:"chatroom"},Ss={class:"conversation"},Ts={class:"commentdetail"},Fs={class:"me"},Rs={class:"mychat"},Bs={class:"textcontainer"},Ns={key:2},Ls={key:3},Vs=["onClick"],As=["src"],Hs={class:"userlistbox"},Ws={class:"userID"},Ks={class:"sub"},Ys={class:"username"},qs={key:4},zs={class:"chatbox"},js={__name:"message",setup(S){R();const l=d("messages");d("message");const _=d(""),$=d([]),m=d([]),u=d([]),t=d([]),c=()=>{$.value.push(_.value),H.emit("sendComment",_.value),_.value=""};Y(()=>{C.get("/dms/followList").then(r=>{if(console.log(r.data),!r.data.success)return console.log(`${r.data.msg}`);const{userInfoMap:e}=r.data;m.value=e.follower,u.value=e.following}).catch(r=>{console.log(r)}),C.get("/dms/dmRooms").then(r=>{console.log(r.data);const{Rooms:e}=r.data;t.value=e}).catch(r=>{console.log(r)})});const P=r=>{C.post("/dms/createDM",{targetID:r}).then(e=>{if(console.log(e.data),!e.data.success)return console.log(`${e.data.msg}`);t.value=e.data.Rooms}).catch(e=>{console.log(e)})};return(r,e)=>(o(),n("div",ys,[s("div",bs,[s("span",{class:"messagebox",onClick:e[0]||(e[0]=a=>l.value="messages")},"메시지함"),s("span",{class:"follow",onClick:e[1]||(e[1]=a=>l.value="follow")},"팔로우"),s("span",{class:"following",onClick:e[2]||(e[2]=a=>l.value="following")},"팔로잉"),s("span",{class:"request",onClick:e[3]||(e[3]=a=>l.value="request")},"요청")]),s("div",xs,[l.value==="messages"?(o(),n("div",Ds,[(o(!0),n(b,null,I(t.value,a=>(o(),n("div",{class:"chatbox",onClick:e[4]||(e[4]=v=>l.value="message")},[s("span",null,[s("img",{src:a.Target_User.Profile_Img,alt:"",class:"profile"},null,8,Is)]),s("div",Cs,[s("div",null,[s("span",Ps,D(a.Target_User.User_ID),1),s("span",Ms,D(a.Target_User.User_Name),1)]),e[6]||(e[6]=s("div",{class:"sub"},[s("span",{class:"chatcontent"},"뷰 너무 어렵습니다.")],-1))])]))),256))])):g("",!0),l.value==="message"?(o(),n("div",Us,[e[9]||(e[9]=Z('<div class="roomname" data-v-ab10c39a><span data-v-ab10c39a><img src="'+E+'" alt="" class="profile" data-v-ab10c39a></span><div class="commentdetail" data-v-ab10c39a><div data-v-ab10c39a><span class="userID" data-v-ab10c39a>Juuho.0</span></div><div class="sub" data-v-ab10c39a><span class="uesrname" data-v-ab10c39a>오준호</span></div></div></div>',1)),s("div",Ss,[e[7]||(e[7]=s("div",{class:"friend"},[s("span",{class:"friendchat"},"진짜 쉬워")],-1)),e[8]||(e[8]=s("div",{class:"me"},[s("span",{class:"mychat"},"뷰 너무 어렵습니다.")],-1)),(o(!0),n(b,null,I($.value,(a,v)=>(o(),n("div",{key:v,class:"commentbox"},[s("div",Ts,[s("div",Fs,[s("span",Rs,D(a),1)])])]))),128))]),s("div",Bs,[F(s("input",{class:"text",type:"text",placeholder:"채팅을 입력하세요","onUpdate:modelValue":e[5]||(e[5]=a=>_.value=a),onKeyup:z(c,["enter"])},null,544),[[N,_.value]]),s("button",{class:"send",onClick:c},"보내기")])])):g("",!0),l.value==="follow"?(o(),n("div",Ns)):g("",!0),l.value==="following"?(o(),n("div",Ls,[e[10]||(e[10]=s("div",{class:"searchbox"},[s("input",{type:"text",class:"search",placeholder:" 친구를 찾아보세요."})],-1)),(o(!0),n(b,null,I(u.value,a=>(o(),n("div",{class:"chatbox",onClick:v=>P(a.User_ID)},[s("span",null,[s("img",{src:a.Profile_Img,alt:"",class:"profile"},null,8,As)]),s("div",Hs,[s("div",null,[s("span",Ws,D(a.User_ID),1)]),s("div",Ks,[s("span",Ys,D(a.User_Name),1)])])],8,Vs))),256))])):g("",!0),l.value==="request"?(o(),n("div",qs,[(o(!0),n(b,null,I(Array(6),a=>(o(),n("div",zs,e[11]||(e[11]=[s("span",null,[s("img",{src:ws,alt:"",class:"profile"})],-1),s("div",{class:"userlistbox"},[s("div",null,[s("span",{class:"userID"},"mxoxxo"),s("span",null," 님이 메시지를 요청하였습니다.")])],-1)])))),256))])):g("",!0)])]))}},Es=U(js,[["__scopeId","data-v-ab10c39a"]]),Js={class:"signcontainer"},Gs={class:"notification"},Os={class:"notibox"},Qs={__name:"notification",setup(S){return(l,_)=>(o(),n("div",Js,[_[1]||(_[1]=s("span",{class:"sign"},"새로운 알림",-1)),s("div",Gs,[(o(!0),n(b,null,I(Array(20),$=>(o(),n("div",Os,_[0]||(_[0]=[s("div",{class:"feedinfobox"},[s("span",null,[s("img",{src:E,alt:"",class:"profile"})]),s("div",{class:"commentdetail"},[s("div",null,[s("span",{class:"username"},"오준호님이 회원님을 팔로우하기 시작했습니다.")])])],-1)])))),256))])]))}},Xs=U(Qs,[["__scopeId","data-v-bd750d5a"]]),Zs={class:"writepot"},se={class:"writecontainer"},ee={class:"articlebox"},te={class:"photobox"},oe={key:0,for:"chooseFile",class:"selectphoto"},ae={key:1,class:"photobox",pagination:"true",modules:"[Pagination]"},le=["src"],ne={class:"commentbox"},ie={class:"userinfo"},ce=["src"],re={class:"userid"},ue={class:"articlecomment"},de={key:0,class:"tagbox"},_e={id:"result",class:"tagresult"},ve=["onClick"],me={key:1,class:"locatebox"},pe={class:"buttonzone"},ge={__name:"write",setup(S){const l=R(),_=w(()=>l.state.User_ID),$=w(()=>l.state.Profile_Img),m=d(""),u=d([]),t=d(""),c=d(""),P=d(null),r=d([]),e=d([]),a=()=>{u.value.push(m.value),m.value=""};function v(y){const i=y.target.files;for(let p=0;p<i.length;p++){const x=i[p];if(r.value.push(x),x&&x.type.startsWith("image")){const B=new FileReader;B.onload=()=>{e.value.push(B.result)},B.readAsDataURL(x)}else alert("이미지 파일을 선택해주세요.")}}const W=()=>{const y=new FormData;y.append("Title",t.value),y.append("comment",c.value),y.append("tag",u.value),r.value.forEach(i=>{y.append("image",i)}),C.post("/Feeds/Post_Save",y,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}}).then(i=>{i.status==200&&(l.commit("Switch_isWrite"),location.reload()),console.log(i)}).catch(i=>{console.log("오류발생"),console.log(i)})},J=y=>{u.value.splice(y,1)},V=d(!1),A=d(!1),G=()=>{V.value=!V.value},O=()=>{A.value=!A.value},Q=[as,ls];return(y,i)=>(o(),n("div",Zs,[s("div",se,[i[8]||(i[8]=s("span",{class:"newarticle"},"새 게시물 작성",-1)),s("div",ee,[s("div",te,[e.value.length===0?(o(),n("label",oe," 👉 CLICK 👈 ")):g("",!0),s("input",{type:"file",id:"chooseFile",name:"chooseFile",accept:"image/*",class:"inputphoto",style:{display:"none"},ref_key:"Input_Img",ref:P,multiple:"",onChange:v},null,544),e.value.length>0?(o(),n("div",ae,[f(L(os),{spaceBetween:10,slidesPerView:1,pagination:!0,navigation:!0,modules:Q,class:"mySwiper"},{default:k(()=>[(o(!0),n(b,null,I(e.value,(p,x)=>(o(),M(L(ts),{key:x},{default:k(()=>[s("img",{src:p,alt:"Image preview",style:{width:"500px",height:"580px"}},null,8,le)]),_:2},1024))),128))]),_:1})])):g("",!0)]),s("div",ne,[s("div",ie,[s("span",null,[s("img",{src:$.value,alt:"",class:"ProfileImg"},null,8,ce)]),s("span",re,D(_.value),1)]),s("div",null,[s("span",null,[F(s("input",{class:"Title",type:"text","onUpdate:modelValue":i[0]||(i[0]=p=>t.value=p),placeholder:"제목을 입력하세요."},null,512),[[N,t.value]])])]),s("div",ue,[F(s("textarea",{class:"Content",type:"text",placeholder:"글내용을 입력하세요.","onUpdate:modelValue":i[1]||(i[1]=p=>c.value=p)},null,512),[[N,c.value]]),s("button",{class:"dropdown-button",onClick:G},i[5]||(i[5]=[h(" add tag "),s("img",{src:K,alt:"",class:"down-icon"},null,-1)])),V.value?(o(),n("div",de,[F(s("input",{class:"inputtag",type:"text","onUpdate:modelValue":i[2]||(i[2]=p=>m.value=p),onKeyup:z(a,["enter"]),placeholder:"이 곳에서 Tag를 추가해보세요."},null,544),[[N,m.value]]),s("div",_e,[(o(!0),n(b,null,I(u.value,(p,x)=>(o(),n("span",{key:x,class:"tag"},[h(D(p)+" ",1),s("button",{class:"deleteTagButton",onClick:B=>J(x)},"x",8,ve)]))),128))])])):g("",!0),s("button",{class:"dropdown-button",onClick:O},i[6]||(i[6]=[h(" add location "),s("img",{src:K,alt:"",class:"down-icon"},null,-1)])),A.value?(o(),n("div",me,i[7]||(i[7]=[s("div",{id:"map"},null,-1)]))):g("",!0),s("div",pe,[s("button",{class:"complete",onClick:i[3]||(i[3]=p=>W())},"완료")])])])])]),s("div",{class:"blur",onClick:i[4]||(i[4]=p=>L(l).commit("Switch_isWrite"))})]))}},fe=U(ge,[["__scopeId","data-v-558ffaf7"]]),he={class:"MainScreen"},$e={class:"PostDMBox"},ke={class:"selectType"},we={class:"userList"},ye=["onClick"],be=["src"],xe={__name:"PostDM",setup(S){const l=R();w(()=>l.state.User_ID);const _=w(()=>l.state._PostID);w(()=>l.state.isPostDM);const $=j(),m=d([]),u=d([]),t=d(""),c=d("팔로워"),P=()=>{console.log("Sending message..."),C.post("/feeds/Post_DM_Send",{Target_User:t.value,Message:_.value,type:"1"},{withCredentials:!0}).then(async e=>{console.log(e.data);const{Room_ID:a}=e.data;H.emit("send_message",{Room_ID:a,User_ID:t.value,Message:"피드를 보냈습니다.",Time:ns().format("YYYY:MM:DD HH:mm:ss"),type:1}),$.push({name:"Room",params:{Room_ID:a}}),l.commit("Switch_isPostDM","")}).catch(e=>{console.log(e)})},r=e=>{c.value=e,u.value=c.value==="팔로워"?m.value.Follower:m.value.Following};return ss(()=>l.state.isPostDM,()=>{C.get("/profile/print_follow",{withCredentials:!0}).then(e=>{console.log(e.data);const{followersResult:a,followingsResult:v}=e.data;m.value.Follower=a,m.value.Following=v,r("팔로워")}).catch(e=>{console.log(e)})},{immediate:!0}),(e,a)=>(o(),n("div",he,[s("div",{class:"blur",onClick:a[0]||(a[0]=v=>L(l).commit("Switch_isPostDM",""))}),s("div",$e,[a[3]||(a[3]=s("p",null,"피드 보내기",-1)),s("div",ke,[s("p",{class:T({select:c.value=="팔로워"}),onClick:a[1]||(a[1]=v=>(r("팔로워"),t.value=""))},"팔로워",2),s("p",{class:T({select:c.value=="팔로잉"}),onClick:a[2]||(a[2]=v=>(r("팔로잉"),t.value=""))},"팔로잉",2)]),s("div",we,[(o(!0),n(b,null,I(u.value,v=>(o(),n("div",{class:"User",key:v,onClick:W=>t.value=v.User_ID},[s("img",{class:T({select:t.value==v.User_ID}),src:v.Profile_Img},null,10,be),s("p",{class:T({select:t.value==v.User_ID})},D(v.User_ID),3)],8,ye))),128))]),s("div",{class:T([{noneSelect:t.value==""},"sendBtn"]),onClick:P},"전송하기",2)])]))}},De=U(xe,[["__scopeId","data-v-5a060fd7"]]),Ie={class:"main-container"},Ce={class:"section"},Pe={__name:"Home",setup(S){const l=R(),_=w(()=>l.state.isNoti),$=w(()=>l.state.isMsg),m=w(()=>l.state.isWrite),u=w(()=>l.state.isPostDM),t=w(()=>l.state.isModify);return j(),(c,P)=>{const r=q("router-view");return o(),n(b,null,[m.value?(o(),M(fe,{key:0})):g("",!0),_.value?(o(),M(Xs,{key:1})):g("",!0),$.value?(o(),M(Es,{key:2})):g("",!0),u.value?(o(),M(De,{key:3})):g("",!0),t.value?(o(),M(es,{key:4})):g("",!0),f(ks),s("div",Ie,[s("div",Ce,[s("div",null,[f(r)])])])],64)}}},Ne=U(Pe,[["__scopeId","data-v-0e473a7d"]]);export{Ne as default};
