import{u as H,c as x,r as i,o as z,a as I,b as E,d as o,e as n,w as V,v as Z,f as s,g as D,h as y,i as b,j as w,F as C,s as J,k as S,t as F,l as ss,m as K,n as O,p as T,q as A,x as Q,y as W,z as R,A as es}from"./index-HUFp0Dkx.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                               */import{_ as G,m as ts}from"./modify-Du7PwAbZ.js";import{S as os,a as ls,P as as,N as ns}from"./pagination-CMOR0lCz.js";import{h as is}from"./moment-C5S46NFB.js";const rs={class:"subscription_ambassador"},cs={class:"header_upper_menu"},us={class:"header"},ds={class:"header_menu"},_s={class:"header_menu_list"},vs={class:"header_menu_list"},ms={class:"header_menu_list"},ps={class:"logo"},gs={class:"header_menu"},fs={class:"header_menu_list"},hs={key:0,class:"header_menu_list"},ws={class:"header_menu_list"},$s={__name:"header",setup(N){const l=H(),v=x(()=>l.state.User_ID),h=i(0),f=()=>{v.value?(J.emit("logout",v.value),console.log("로그아웃 성공")):console.error("User_ID is not defined."),I.get("/users/Logout",{withCredentials:!0}).then(r=>{l.dispatch("checkSession")}).catch(r=>{console.log(r)})};return z(()=>{I.get("/users/check_Rule",{withCredentials:!0}).then(r=>{console.log(r.data),h.value=r.data.Rule}).catch(r=>{console.log(r)})}),(r,t)=>{const m=E("router-link");return o(),n(C,null,[V(s("div",rs,[t[2]||(t[2]=s("p",null,"당신도 할 수 있다 앰버서더",-1)),D(m,{to:{name:"Subscription"}},{default:y(()=>t[1]||(t[1]=[b(" 바로 신청하기")])),_:1})],512),[[Z,h.value===0]]),s("ul",cs,[s("li",null,[D(m,{to:{name:"Ambassador"},class:"mypage"},{default:y(()=>t[3]||(t[3]=[b(" 앰버서더 ")])),_:1})]),s("li",null,[D(m,{to:{name:"myPage"},class:"mypage"},{default:y(()=>t[4]||(t[4]=[b(" 마이페이지 ")])),_:1})]),s("li",{onClick:t[0]||(t[0]=U=>f()),class:"Logout"},"로그아웃")]),s("div",us,[s("div",ds,[s("ul",null,[s("li",_s,[D(m,{to:{name:"followingtab"}},{default:y(()=>t[5]||(t[5]=[b("팔로잉 ")])),_:1})]),s("li",vs,[D(m,{to:{name:"searcingtab"}},{default:y(()=>t[6]||(t[6]=[b("탐색 ")])),_:1})]),s("li",ms,[D(m,{to:{name:"popularitytab"}},{default:y(()=>t[7]||(t[7]=[b("인기 ")])),_:1})])])]),s("div",ps,[s("h1",null,[D(m,{to:{name:"HomeFeed"}},{default:y(()=>t[8]||(t[8]=[b(" TripTracks ")])),_:1})])]),s("div",gs,[s("ul",null,[s("li",fs,[D(m,{to:{name:"DirectMessage"}},{default:y(()=>t[9]||(t[9]=[b("DirectMessage ")])),_:1})]),v.value?(o(),n("li",hs,[D(m,{to:{name:"PersonalPage",params:{User_ID:v.value}}},{default:y(()=>t[10]||(t[10]=[b("프로필 ")])),_:1},8,["to"])])):w("",!0),s("li",ws,[D(m,{to:{name:"planner"}},{default:y(()=>t[11]||(t[11]=[b("Planner ")])),_:1})])])])])],64)}}},Is=L($s,[["__scopeId","data-v-9720ff9e"]]),X="/assets/ProfileImage2-DAt-H7rB.png",ks="/assets/ProfileImage3-kxNyjHTU.png",Ds={class:"messagecontainer"},ys={class:"chatmenu"},bs={class:"chatcontainer"},xs={key:0},Cs=["src"],Us={class:"chatroom"},Ps={class:"userID"},Fs={class:"userID"},Ss={key:1,class:"chatroom"},Ms={class:"conversation"},Ts={class:"commentdetail"},Rs={class:"me"},Ls={class:"mychat"},Ns={class:"textcontainer"},Bs={key:2},Vs={key:3},As=["onClick"],Hs=["src"],Ws={class:"userlistbox"},Ks={class:"userID"},Ys={class:"sub"},qs={class:"username"},zs={key:4},js={class:"chatbox"},Es={__name:"message",setup(N){H();const l=i("messages");i("message");const v=i(""),h=i([]),f=i([]),r=i([]),t=i([]),m=()=>{h.value.push(v.value),J.emit("sendComment",v.value),v.value=""};z(()=>{I.get("/dms/followList").then(p=>{if(console.log(p.data),!p.data.success)return console.log(`${p.data.msg}`);const{userInfoMap:e}=p.data;f.value=e.follower,r.value=e.following}).catch(p=>{console.log(p)}),I.get("/dms/dmRooms").then(p=>{console.log(p.data);const{Rooms:e}=p.data;t.value=e}).catch(p=>{console.log(p)})});const U=p=>{I.post("/dms/createDM",{targetID:p}).then(e=>{if(console.log(e.data),!e.data.success)return console.log(`${e.data.msg}`);t.value=e.data.Rooms}).catch(e=>{console.log(e)})};return(p,e)=>(o(),n("div",Ds,[s("div",ys,[s("span",{class:"messagebox",onClick:e[0]||(e[0]=a=>l.value="messages")},"메시지함"),s("span",{class:"follow",onClick:e[1]||(e[1]=a=>l.value="follow")},"팔로우"),s("span",{class:"following",onClick:e[2]||(e[2]=a=>l.value="following")},"팔로잉"),s("span",{class:"request",onClick:e[3]||(e[3]=a=>l.value="request")},"요청")]),s("div",bs,[l.value==="messages"?(o(),n("div",xs,[(o(!0),n(C,null,S(t.value,a=>(o(),n("div",{class:"chatbox",onClick:e[4]||(e[4]=g=>l.value="message")},[s("span",null,[s("img",{src:a.Target_User.Profile_Img,alt:"",class:"profile"},null,8,Cs)]),s("div",Us,[s("div",null,[s("span",Ps,F(a.Target_User.User_ID),1),s("span",Fs,F(a.Target_User.User_Name),1)]),e[6]||(e[6]=s("div",{class:"sub"},[s("span",{class:"chatcontent"},"뷰 너무 어렵습니다.")],-1))])]))),256))])):w("",!0),l.value==="message"?(o(),n("div",Ss,[e[9]||(e[9]=ss('<div class="roomname" data-v-ab10c39a><span data-v-ab10c39a><img src="'+X+'" alt="" class="profile" data-v-ab10c39a></span><div class="commentdetail" data-v-ab10c39a><div data-v-ab10c39a><span class="userID" data-v-ab10c39a>Juuho.0</span></div><div class="sub" data-v-ab10c39a><span class="uesrname" data-v-ab10c39a>오준호</span></div></div></div>',1)),s("div",Ms,[e[7]||(e[7]=s("div",{class:"friend"},[s("span",{class:"friendchat"},"진짜 쉬워")],-1)),e[8]||(e[8]=s("div",{class:"me"},[s("span",{class:"mychat"},"뷰 너무 어렵습니다.")],-1)),(o(!0),n(C,null,S(h.value,(a,g)=>(o(),n("div",{key:g,class:"commentbox"},[s("div",Ts,[s("div",Rs,[s("span",Ls,F(a),1)])])]))),128))]),s("div",Ns,[V(s("input",{class:"text",type:"text",placeholder:"채팅을 입력하세요","onUpdate:modelValue":e[5]||(e[5]=a=>v.value=a),onKeyup:O(m,["enter"])},null,544),[[K,v.value]]),s("button",{class:"send",onClick:m},"보내기")])])):w("",!0),l.value==="follow"?(o(),n("div",Bs)):w("",!0),l.value==="following"?(o(),n("div",Vs,[e[10]||(e[10]=s("div",{class:"searchbox"},[s("input",{type:"text",class:"search",placeholder:" 친구를 찾아보세요."})],-1)),(o(!0),n(C,null,S(r.value,a=>(o(),n("div",{class:"chatbox",onClick:g=>U(a.User_ID)},[s("span",null,[s("img",{src:a.Profile_Img,alt:"",class:"profile"},null,8,Hs)]),s("div",Ws,[s("div",null,[s("span",Ks,F(a.User_ID),1)]),s("div",Ys,[s("span",qs,F(a.User_Name),1)])])],8,As))),256))])):w("",!0),l.value==="request"?(o(),n("div",zs,[(o(!0),n(C,null,S(Array(6),a=>(o(),n("div",js,e[11]||(e[11]=[s("span",null,[s("img",{src:ks,alt:"",class:"profile"})],-1),s("div",{class:"userlistbox"},[s("div",null,[s("span",{class:"userID"},"mxoxxo"),s("span",null," 님이 메시지를 요청하였습니다.")])],-1)])))),256))])):w("",!0)])]))}},Js=L(Es,[["__scopeId","data-v-ab10c39a"]]),Gs={class:"signcontainer"},Os={class:"notification"},Qs={class:"notibox"},Xs={__name:"notification",setup(N){return(l,v)=>(o(),n("div",Gs,[v[1]||(v[1]=s("span",{class:"sign"},"새로운 알림",-1)),s("div",Os,[(o(!0),n(C,null,S(Array(20),h=>(o(),n("div",Qs,v[0]||(v[0]=[s("div",{class:"feedinfobox"},[s("span",null,[s("img",{src:X,alt:"",class:"profile"})]),s("div",{class:"commentdetail"},[s("div",null,[s("span",{class:"username"},"오준호님이 회원님을 팔로우하기 시작했습니다.")])])],-1)])))),256))])]))}},Zs=L(Xs,[["__scopeId","data-v-bd750d5a"]]),se={class:"writepot"},ee={class:"writecontainer"},te={class:"articlebox"},oe={class:"photobox"},le={key:0,for:"chooseFile",class:"selectphoto"},ae={key:1,class:"photobox",pagination:"true",modules:"[Pagination]"},ne=["src"],ie={class:"commentbox"},re={class:"userinfo"},ce=["src"],ue={class:"userid"},de={class:"articlecomment"},_e={key:0,class:"tagbox"},ve={id:"result",class:"tagresult"},me=["onClick"],pe={key:1,class:"locatebox"},ge={class:"buttonzone"},fe={__name:"write",setup(N){const l=H(),v=x(()=>l.state.User_ID),h=x(()=>l.state.Profile_Img),f=i(""),r=i([]),t=i(""),m=i(""),U=i(null),p=i([]),e=i([]),a=()=>{r.value.push(f.value),f.value=""};function g(d){const _=d.target.files;for(let $=0;$<_.length;$++){const P=_[$];if(p.value.push(P),P&&P.type.startsWith("image")){const q=new FileReader;q.onload=()=>{e.value.push(q.result)},q.readAsDataURL(P)}else alert("이미지 파일을 선택해주세요.")}}const Y=()=>{const d=new FormData;d.append("Title",t.value),d.append("comment",m.value),d.append("tag",r.value),p.value.forEach(_=>{d.append("image",_)}),I.post("/Feeds/Post_Save",d,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}}).then(_=>{_.status==200&&(l.commit("Switch_isWrite"),location.reload()),console.log(_)}).catch(_=>{console.log("오류발생"),console.log(_)})},j=d=>{r.value.splice(d,1)},B=i(!1),M=i(!1),u=()=>{B.value=!B.value},c=()=>{M.value=!M.value},k=[as,ns];return(d,_)=>(o(),n("div",se,[s("div",ee,[_[8]||(_[8]=s("span",{class:"newarticle"},"새 게시물 작성",-1)),s("div",te,[s("div",oe,[e.value.length===0?(o(),n("label",le," 👉 CLICK 👈 ")):w("",!0),s("input",{type:"file",id:"chooseFile",name:"chooseFile",accept:"image/*",class:"inputphoto",style:{display:"none"},ref_key:"Input_Img",ref:U,multiple:"",onChange:g},null,544),e.value.length>0?(o(),n("div",ae,[D(A(ls),{spaceBetween:10,slidesPerView:1,pagination:!0,navigation:!0,modules:k,class:"mySwiper"},{default:y(()=>[(o(!0),n(C,null,S(e.value,($,P)=>(o(),T(A(os),{key:P},{default:y(()=>[s("img",{src:$,alt:"Image preview",style:{width:"500px",height:"580px"}},null,8,ne)]),_:2},1024))),128))]),_:1})])):w("",!0)]),s("div",ie,[s("div",re,[s("span",null,[s("img",{src:h.value,alt:"",class:"ProfileImg"},null,8,ce)]),s("span",ue,F(v.value),1)]),s("div",null,[s("span",null,[V(s("input",{class:"Title",type:"text","onUpdate:modelValue":_[0]||(_[0]=$=>t.value=$),placeholder:"제목을 입력하세요."},null,512),[[K,t.value]])])]),s("div",de,[V(s("textarea",{class:"Content",type:"text",placeholder:"글내용을 입력하세요.","onUpdate:modelValue":_[1]||(_[1]=$=>m.value=$)},null,512),[[K,m.value]]),s("button",{class:"dropdown-button",onClick:u},_[5]||(_[5]=[b(" add tag "),s("img",{src:G,alt:"",class:"down-icon"},null,-1)])),B.value?(o(),n("div",_e,[V(s("input",{class:"inputtag",type:"text","onUpdate:modelValue":_[2]||(_[2]=$=>f.value=$),onKeyup:O(a,["enter"]),placeholder:"이 곳에서 Tag를 추가해보세요."},null,544),[[K,f.value]]),s("div",ve,[(o(!0),n(C,null,S(r.value,($,P)=>(o(),n("span",{key:P,class:"tag"},[b(F($)+" ",1),s("button",{class:"deleteTagButton",onClick:q=>j(P)},"x",8,me)]))),128))])])):w("",!0),s("button",{class:"dropdown-button",onClick:c},_[6]||(_[6]=[b(" add location "),s("img",{src:G,alt:"",class:"down-icon"},null,-1)])),M.value?(o(),n("div",pe,_[7]||(_[7]=[s("div",{id:"map"},null,-1)]))):w("",!0),s("div",ge,[s("button",{class:"complete",onClick:_[3]||(_[3]=$=>Y())},"완료")])])])])]),s("div",{class:"blur",onClick:_[4]||(_[4]=$=>A(l).commit("Switch_isWrite"))})]))}},he=L(fe,[["__scopeId","data-v-558ffaf7"]]),we={class:"MainScreen"},$e={class:"PostDMBox"},Ie={class:"selectType"},ke={class:"userList"},De=["onClick"],ye=["src"],be={__name:"PostDM",setup(N){const l=H();x(()=>l.state.User_ID);const v=x(()=>l.state._PostID);x(()=>l.state.isPostDM);const h=Q(),f=i([]),r=i([]),t=i(""),m=i("팔로워"),U=()=>{console.log("Sending message..."),I.post("/feeds/Post_DM_Send",{Target_User:t.value,Message:v.value,type:"1"},{withCredentials:!0}).then(async e=>{console.log(e.data);const{Room_ID:a}=e.data;J.emit("send_message",{Room_ID:a,User_ID:t.value,Message:"피드를 보냈습니다.",Time:is().format("YYYY:MM:DD HH:mm:ss"),type:1}),h.push({name:"Room",params:{Room_ID:a}}),l.commit("Switch_isPostDM","")}).catch(e=>{console.log(e)})},p=e=>{m.value=e,r.value=m.value==="팔로워"?f.value.Follower:f.value.Following};return W(()=>l.state.isPostDM,()=>{I.get("/profile/print_follow",{withCredentials:!0}).then(e=>{console.log(e.data);const{followersResult:a,followingsResult:g}=e.data;f.value.Follower=a,f.value.Following=g,p("팔로워")}).catch(e=>{console.log(e)})},{immediate:!0}),(e,a)=>(o(),n("div",we,[s("div",{class:"blur",onClick:a[0]||(a[0]=g=>A(l).commit("Switch_isPostDM",""))}),s("div",$e,[a[3]||(a[3]=s("p",null,"피드 보내기",-1)),s("div",Ie,[s("p",{class:R({select:m.value=="팔로워"}),onClick:a[1]||(a[1]=g=>(p("팔로워"),t.value=""))},"팔로워",2),s("p",{class:R({select:m.value=="팔로잉"}),onClick:a[2]||(a[2]=g=>(p("팔로잉"),t.value=""))},"팔로잉",2)]),s("div",ke,[(o(!0),n(C,null,S(r.value,g=>(o(),n("div",{class:"User",key:g,onClick:Y=>t.value=g.User_ID},[s("img",{class:R({select:t.value==g.User_ID}),src:g.Profile_Img},null,10,ye),s("p",{class:R({select:t.value==g.User_ID})},F(g.User_ID),3)],8,De))),128))]),s("div",{class:R([{noneSelect:t.value==""},"sendBtn"]),onClick:U},"전송하기",2)])]))}},xe=L(be,[["__scopeId","data-v-5a060fd7"]]),Ce={class:"Profile_Page"},Ue={class:"Profile_Find"},Pe={class:"selectType"},Fe={class:"input-container"},Se={class:"userList"},Me=["src"],Te={class:"text-info"},Re={class:"followinfo"},Le={__name:"FollowList",setup(N){const l=es(),v=H(),h=i("팔로워"),f=i([]),r=i({Follower:[],Following:[],FindUser:[]}),t=i([]),m=i([]),U=i(0),p=i(0);x(()=>v.state.User_ID);const e=i({}),a=i([]);i("");const g=u=>{h.value=u,h.value==="팔로워"?f.value=r.value.Follower:h.value==="팔로잉"?f.value=r.value.Following:h.value==="검색"&&(f.value=r.value.FindUser),console.log(f.value)},Y=()=>{I.get("/profile/print_follow",{withCredentials:!0}).then(u=>{const{followersResult:c,followingsResult:k}=u.data;r.value.Follower=c.map(d=>({User_ID:d.User_ID,User_Name:d.User_Name,Profile_Img:d.Profile_Img||"default-profile.png"})),r.value.Following=k.map(d=>({User_ID:d.User_ID,User_Name:d.User_Name,Profile_Img:d.Profile_Img||"default-profile.png"})),g("팔로워")}).catch(u=>{console.error(u)})};z(()=>{Y()}),W(()=>v.state.isPostDM,()=>{I.get("/profile/print_follow",{withCredentials:!0}).then(u=>{console.log(u.data);const{followersResult:c,followingsResult:k}=u.data;r.value.Follower=c,r.value.Following=k,g("팔로워")}).catch(u=>{console.log(u)})},{immediate:!0});const j=()=>{I.get("/profile/print_follow",{withCredentials:!0}).then(u=>{console.log(u.data),t.value=u.data.followersResult}).catch(u=>{console.log(u)})};W(()=>v.state.isPostDM,u=>{u&&j()},{immediate:!0});const B=u=>{I.get(`/profile/search/${u}`).then(c=>{console.log(c.data);const k=c.data;e.value=k.userInfoResult,t.value=k.follower,m.value=k.following,U.value=k.follower_Len,p.value=k.following_Len,isFollow.value=t.value.includes(user_ID.value)}).catch(c=>{console.log(c)}),I.post("/profile/posts_list",{User_ID:u}).then(c=>{a.value=c.data,console.log(a.value)})};z(()=>{B(l.params.User_ID)}),W(()=>l.params.User_ID,u=>{u&&(B(u),M.value="")});const M=i("");return i([]),W(M,u=>{u.length>0&&h.value==="검색"&&I.get(`/profile/usersFind/${u}`).then(c=>{console.log(c.data),r.value.FindUser=c.data.users,f.value=r.value.FindUser,console.log(r.value)}).catch(c=>{console.log(c)})}),(u,c)=>{const k=E("router-link");return o(),n(C,null,[s("div",Ce,[s("div",Ue,[c[6]||(c[6]=s("div",{class:"Title"},[s("h3",null,"프로필 찾아보기")],-1)),s("div",Pe,[s("span",{class:R([{select:h.value=="팔로워"},"followtab"]),onClick:c[0]||(c[0]=d=>g("팔로워"))}," 팔로워 ",2),s("span",{class:R([{select:h.value=="팔로잉"},"followingtab"]),onClick:c[1]||(c[1]=d=>g("팔로잉"))}," 팔로잉 ",2),s("span",{class:R([{select:h.value=="검색"},"followingtab"]),onClick:c[2]||(c[2]=d=>g("검색"))}," 검색 ",2)]),s("div",Fe,[V(s("input",{type:"text","onUpdate:modelValue":c[3]||(c[3]=d=>M.value=d),placeholder:"검색",ref:"userInput",class:"userinput"},null,512),[[K,M.value]])]),s("div",Se,[(o(!0),n(C,null,S(f.value,d=>(o(),T(k,{to:{name:"PersonalPage",params:{User_ID:d.User_ID}},class:"userinfo",key:d.User_ID,onClick:c[4]||(c[4]=_=>A(v).commit("Switch_isSearch"))},{default:y(()=>[s("img",{src:d.Profile_Img,width:"50px"},null,8,Me),s("div",Te,[s("div",Re,F(d.User_ID),1)])]),_:2},1032,["to"]))),128))])])]),s("div",{class:"blur",onClick:c[5]||(c[5]=d=>A(v).commit("Switch_isSearch"))})],64)}}},Ne=L(Le,[["__scopeId","data-v-3fadffd6"]]),Be={class:"main-container"},Ve={class:"section"},Ae={__name:"Home",setup(N){const l=H(),v=x(()=>l.state.isNoti),h=x(()=>l.state.isMsg),f=x(()=>l.state.isWrite),r=x(()=>l.state.isPostDM),t=x(()=>l.state.isModify),m=x(()=>l.state.isSearch);return Q(),(U,p)=>{const e=E("router-view");return o(),n(C,null,[m.value?(o(),T(Ne,{key:0})):w("",!0),f.value?(o(),T(he,{key:1})):w("",!0),v.value?(o(),T(Zs,{key:2})):w("",!0),h.value?(o(),T(Js,{key:3})):w("",!0),r.value?(o(),T(xe,{key:4})):w("",!0),t.value?(o(),T(ts,{key:5})):w("",!0),D(Is),s("div",Be,[s("div",Ve,[s("div",null,[D(e)])])])],64)}}},je=L(Ae,[["__scopeId","data-v-97bab17f"]]);export{je as default};
