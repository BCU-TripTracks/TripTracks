import{c as y,r as t,o as B,y as P,e as r,f as s,i as S,t as i,j as v,D as V,F as D,k as z,A as W,a as _,d as c,g as b,h as x,x as j,u as T,b as q}from"./index-Cp1J-Kyg.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"Profile_Container"},J={class:"Profile_Photo"},K=["src"],O={class:"ID"},Q={key:0,class:"userID_Info"},X={class:"profileWrap"},Y={class:"userInfo"},Z={class:"followwrap"},ee={class:"followwrap"},oe={class:"Feed_discription"},se={class:"Feed_Container"},le=["src"],te=["src"],ae={__name:"PersonalPage",setup(ne){const d=W(),R=j(),h=T(),f=y(()=>h.state.User_ID);y(()=>h.state.isWrite);const p=()=>{h.commit("Switch_isSearch"),console.log("상태변경")},u=t(!0),l=t({}),w=t([]),$=t([]),k=t(0),C=t(0),m=t([]),F=t([]),g=t("feedzone"),L=()=>{_.post("/Feeds/Save_List",{User_ID:d.params.User_ID},{withCredentials:!0}).then(e=>{console.log(e),F.value=e.data}).catch(e=>{console.log(e)})},N=()=>{g.value="savezone",L()},I=e=>{_.get(`/profile/search/${e}`).then(o=>{console.log(o.data);const n=o.data;l.value=n.userInfoResult,w.value=n.follower,$.value=n.following,k.value=n.follower_Len,C.value=n.following_Len,u.value=w.value.includes(f.value),console.log(n)}).catch(o=>{console.log(o)}),_.post("/profile/posts_list",{User_ID:e}).then(o=>{m.value=o.data,console.log(m.value)})};B(()=>{I(d.params.User_ID)}),P(()=>d.params.User_ID,e=>{e&&(I(e),U.value="")});const E=async()=>{await _.post("/Direct/search_Room",{toUser_ID:l.value.User_ID},{withCredentials:!0}).then(e=>{console.log(e.data);const{Room_ID:o}=e.data;R.push({name:"Room",params:{Room_ID:o}})}).catch(e=>{console.log(e)})},M=async()=>{u.value?await _.post("/profile/unfollow",{fromUser:l.value.User_ID},{withCredentials:!0}).then(e=>{console.log(e.data),u.value=!1}).catch(e=>{console.log(e)}).finally(()=>{I(d.params.User_ID)}):await _.post("/profile/follow",{fromUser:l.value.User_ID},{withCredentials:!0}).then(e=>{console.log(e.data),u.value=!0}).catch(e=>{console.log(e)}).finally(()=>{I(d.params.User_ID)})},U=t(""),A=t([]);return P(U,e=>{e.length>0&&_.get(`/profile/usersFind/${e}`).then(o=>{console.log(o.data),A.value=o.data.users}).catch(o=>{console.log(o)})}),(e,o)=>{const n=q("router-link");return c(),r(D,null,[s("div",H,[s("div",J,[s("li",null,[s("img",{src:l.value.Profile_Img,alt:"",class:"profile"},null,8,K)])]),s("ul",null,[s("li",O,[l.value?(c(),r("div",Q,[S(" @"+i(l.value.User_ID),1),s("span",null,i(l.value.User_Name),1)])):v("",!0),l.value.User_ID!==f.value?(c(),r("button",{key:1,class:"follow",onClick:M,style:V({backgroundColor:u.value?"#EFEFEF":"black",borderColor:u.value?"#F2F2F2":"black",color:u.value?"black":"white"})},i(u.value?"팔로잉":"팔로우"),5)):v("",!0),l.value.User_ID!==f.value?(c(),r("button",{key:2,class:"message",onClick:E}," 메시지 ")):v("",!0)]),s("li",X,[o[5]||(o[5]=S(" 게시물 ")),s("span",Y,i(m.value.length),1),s("a",Z,[s("p",{onClick:o[0]||(o[0]=a=>p())},"팔로워"),s("span",{class:"userInfo",onClick:o[1]||(o[1]=a=>p())},i(k.value),1)]),s("a",ee,[s("p",{onClick:o[2]||(o[2]=a=>p())},"팔로잉"),s("span",{class:"userInfo",onClick:o[3]||(o[3]=a=>p())},i(C.value),1)])]),s("li",null,i(l.value.User_Msg),1)])]),s("div",oe,[s("span",{class:"feedzone",onClick:o[4]||(o[4]=a=>g.value="feedzone")},"게시물"),l.value.User_ID==f.value?(c(),r("span",{key:0,class:"savezone",onClick:N}," 저장된 게시물 ")):v("",!0)]),s("ul",se,[g.value==="feedzone"?(c(!0),r(D,{key:0},z(m.value,a=>(c(),r("li",null,[b(n,{to:{name:"FeedDetail",params:{Post_ID:a.Post_ID}}},{default:x(()=>[s("img",{src:a.Image_Src,alt:"",class:"FeedArticle"},null,8,le)]),_:2},1032,["to"])]))),256)):g.value==="savezone"?(c(!0),r(D,{key:1},z(F.value,a=>(c(),r("li",null,[b(n,{to:{name:"FeedDetail",params:{Post_ID:a.Post_ID}}},{default:x(()=>[s("img",{src:a.Image_Src,alt:"",class:"FeedArticle"},null,8,te)]),_:2},1032,["to"])]))),256)):v("",!0)])],64)}}},ue=G(ae,[["__scopeId","data-v-d551f03f"]]);export{ue as default};
