import{r as l,c as F,A as C,e as i,f as t,F as D,l as y,w as V,m as N,n as U,j as $,d as n,i as _,t as m,g as p,h as v,y as k,z as x,u as A,a as h,b as E}from"./index-CXkyRgCv.js";/* empty css                                                               */import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{l as M,s as W}from"./like-Cq13m2ZL.js";import{m as j,s as z}from"./saveed-DRyjRmH-.js";import{l as R}from"./likeed-BS52KISc.js";const q={class:"grid-container"},G={class:"bodytop"},H={id:"result",class:"tagresult"},J=["onClick"],O={class:"tagbox"},Q={key:0,class:"feedSlider",ref:"feedSliderContainer"},X=["src"],Y={class:"profile-container"},Z=["src"],ee=["src"],se=["src"],te=["src"],ae={__name:"PopularityTab",setup(oe){x();const I=A();l(!1);const g=l(!1),w=F(()=>I.state.isWrite),f=l([]),r=l([]),u=l(""),c=l([]),P=()=>{g.value=!g.value,saveImage.value=g.value?z:W},T=async e=>{console.log(e);const{Post_ID:s}=e;I.commit("Switch_isPostDM",s),console.log("메세지버튼클릭")},b=e=>{e.isLike?h.post("/feeds/Like/remove",{postId:e.Post_ID},{withCredentials:!0}).then(s=>{e.isLike=!e.isLike}).catch(s=>{s.response.status==400}):h.post("/feeds/Like/add",{postId:e.Post_ID},{withCredentials:!0}).then(s=>{e.isLike=!e.isLike}).catch(s=>{s.response.status==400})},L=()=>{const e=u.value.trim();e&&(c.value.push(e),u.value="")},B=e=>{c.value.splice(e,1)},S=()=>{const e=c.value;e.length>0?r.value=f.value.filter(s=>e.some(o=>s.Post_Title.includes(o)||s.Post_Caption.includes(o))):r.value=f.value};return C(w,()=>{h.get("/Feeds/Popular",{withCredentials:!0}).then(e=>{console.log(e),f.value=e.data,r.value=e.data}).catch(e=>{console.log("오류발생"),console.log(e)})},{immediate:!0}),C(c,S,{deep:!0}),(e,s)=>{const o=E("router-link");return n(),i("div",q,[t("div",G,[t("span",H,[(n(!0),i(D,null,y(c.value,(a,d)=>(n(),i("span",{key:d,class:"tag"},[_(m(a)+" ",1),t("button",{class:"deleteTagButton",onClick:le=>B(d)},"x",8,J)]))),128))]),t("span",O,[V(t("input",{class:"SearchTag",type:"text","onUpdate:modelValue":s[0]||(s[0]=a=>u.value=a),onKeyup:U(L,["enter"]),placeholder:"관심있는 태그를 검색해보세요."},null,544),[[N,u.value]]),t("button",{onClick:s[1]||(s[1]=a=>e.write_Button_Click()),class:"writebutton"},"글쓰기")])]),r.value.length>0?(n(),i("div",Q,[(n(!0),i(D,null,y(r.value,a=>(n(),i("div",{class:"grid-article",key:a.Post_ID},[p(o,{to:{name:"FeedDetail",params:{Post_ID:a.Post_ID}}},{default:v(()=>[t("img",{src:a.Image_Src,alt:"",class:"Eximage"},null,8,X)]),_:2},1032,["to"]),t("ul",null,[t("li",Y,[t("img",{src:e.post.Profile_Img,alt:"",class:"profile"},null,8,Z),p(o,{to:{name:"PersonalPage",params:{User_ID:e.post.User_ID}},class:"userID"},{default:v(()=>[_(m(e.post.User_ID),1)]),_:1},8,["to"]),t("img",{src:e.post.isLike?k(R):k(M),alt:"",class:"like",onClick:s[2]||(s[2]=d=>b(e.post))},null,8,ee),t("img",{src:e.saveImage,alt:"",class:"save",onClick:P},null,8,se),t("img",{src:k(j),alt:"",class:"message",onClick:s[3]||(s[3]=d=>T(e.post))},null,8,te)]),t("li",null,[p(o,{to:{name:"FeedDetail",params:{Post_ID:a.Post_ID}},class:"title"},{default:v(()=>[_(m(a.Post_Title),1)]),_:2},1032,["to"])]),t("li",null,[p(o,{to:{name:"FeedDetail",params:{Post_ID:a.Post_ID}},class:"description"},{default:v(()=>[_(m(a.Post_Caption),1)]),_:2},1032,["to"])])])]))),128))],512)):$("",!0)])}}},_e=K(ae,[["__scopeId","data-v-edb01289"]]);export{_e as default};
