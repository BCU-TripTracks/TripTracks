import{G as Px,r as ia,y as Rx,o as Ix,e as Bc,f as Gi,j as Rp,F as Ex,k as Ax,w as lu,m as cu,n as Lx,t as Um,p as Fx,L as zx,q as Ip,a as Dx,d as Vl,x as Bx}from"./index-CcO5s3s5.js";import{S as Gm}from"./sweetalert2.esm.all-D3pEHXw3.js";import{_ as Ox}from"./_plugin-vue_export-helper-DlAUqK2U.js";/*!
 * Pintura v8.89.7 - Test version
 * (c) 2018-2024 PQINA Inc. - All Rights Reserved
 * License: https://pqina.nl/pintura/license/
 * 
 * This version of Pintura is for testing purposes only.
 * Visit https://pqina.nl/pintura/ to obtain a commercial license.
 */const Wx=[{value:65504,name:"jfif"},{value:65498,name:"sos"},{value:65505,subvalue:17784,name:"exif"},{value:65505,subvalue:26740,name:"xmp"},{value:65506,subvalue:19792,name:"mpf"},{value:65506,name:"app2"}];var Xh=(t,e,n)=>{if(!t)return;const i=new DataView(t),r=(a=>{if(a.getUint16(0)!==65496)return;const s=a.byteLength;let l,c=2,d;for(;c<s&&a.getUint8(c)===255;){l=a.getUint16(c);const u=Wx.find(p=>p.value===l&&(!p.subvalue||p.subvalue===a.getUint16(c+2+2)));if(u){const{name:p}=u;d||(d={}),d[p]||(d[p]={offset:c,size:a.getUint16(c+2)})}if(l===65498)break;c+=2+a.getUint16(c+2)}return d})(i);if(!r||!r.exif)return;const o=((a,s)=>{if(a.getUint16(s)!==65505)return;const l=a.getUint16(s+2);if(s+=4,a.getUint32(s)!==1165519206)return;s+=6;const c=a.getUint16(s);if(c!==18761&&c!==19789)return;const d=c===18761;if(s+=2,a.getUint16(s,d)!==42)return;s+=a.getUint32(s+2,d);const u=p=>{const h=[];let $=s;const g=Math.min(a.byteLength,s+l-16);for(;$<g;$+=12){const f=$;a.getUint16(f,d)===p&&h.push(f)}return h};return{read:p=>{const h=u(p);if(h.length)return a.getUint16(h[0]+8,d)},write:(p,h)=>{const $=u(p);return!!$.length&&($.forEach(g=>a.setUint16(g+8,h,d)),!0)}}})(i,r.exif.offset);return o?n===void 0?o.read(e):o.write(e,n):void 0},Yh=t=>window.__pqina_webapi__?window.__pqina_webapi__[t]:window[t],pe=(...t)=>{};const _x={ArrayBuffer:"readAsArrayBuffer"};var qh=(t,e=pe,n={})=>new Promise((i,r)=>{const{dataFormat:o=_x.ArrayBuffer}=n,a=new(Yh("FileReader"));a.onload=()=>i(a.result),a.onerror=()=>r(a.error),a.onprogress=e,a[o](t)}),Vx=async(t,e)=>{const n=await(async(i,r=[0,i.size],o)=>await qh(i.slice(...r),o))(t,[0,262144],e);return Xh(n,274)||1};let Ep=null;var ar=()=>(Ep===null&&(Ep=typeof window<"u"&&window.document!==void 0),Ep);let du=null;var n1=()=>new Promise(t=>{if(du===null){const e="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";let n=ar()?new Image:{};return n.onload=()=>{du=n.naturalWidth===1,n=void 0,t(du)},void(n.src=e)}return t(du)}),pd=t=>t.getContext("2d").getImageData(0,0,t.width,t.height),He=t=>typeof t=="string";function I2(t,e){e.split(";").forEach(n=>{const[i,r]=n.split(":");if(!i.length||!r)return;const[o,a]=r.split("!important");t.style.setProperty(i,o,He(a)?"important":void 0)})}var fi=(t,e,n=[])=>{const i=document.createElement(t),r=Object.getOwnPropertyDescriptors(i.__proto__);for(const o in e)o==="style"?I2(i,e[o]):r[o]&&r[o].set||/textContent|innerHTML/.test(o)||typeof e[o]=="function"?i[o]=e[o]:i.setAttribute(o,e[o]);return n.forEach(o=>i.appendChild(o)),i};const Nx={1:()=>[1,0,0,1,0,0],2:t=>[-1,0,0,1,t,0],3:(t,e)=>[-1,0,0,-1,t,e],4:(t,e)=>[1,0,0,-1,0,e],5:()=>[0,1,1,0,0,0],6:(t,e)=>[0,1,-1,0,e,0],7:(t,e)=>[0,-1,-1,0,e,t],8:t=>[0,-1,1,0,0,t]};var or=t=>{t.width=1,t.height=1;const e=t.getContext("2d");e&&e.clearRect(0,0,1,1)},Ql=t=>"data"in t,Kh=t=>ar()?RegExp(t).test(window.navigator.userAgent):void 0;let Ap=null;var i1=()=>(Ap===null&&(Ap=Kh(/Android/)),Ap),E2=(t,e)=>{const n=fi("canvas",{width:t.width,height:t.height});return n.getContext("2d",e).drawImage(t,0,0),n},rc=async(t,e=1)=>{const n=await n1(),[i,r]=n||e<5?[t.width,t.height]:[t.height,t.width],o=fi("canvas",{width:i,height:r}),a=o.getContext("2d",{willReadFrequently:!0});if(Ql(t)&&!n&&e>1){const s=fi("canvas",{width:t.width,height:t.height});s.getContext("2d",{willReadFrequently:!0}).putImageData(t,0,0),t=s}if(!n&&e>1&&a.transform.apply(a,((s,l,c=-1)=>(c===-1&&(c=1),Nx[c](s,l)))(t.width,t.height,e)),Ql(t)){if(a.putImageData(t,0,0),i1())return E2(o)}else a.drawImage(t,0,0);return t instanceof HTMLCanvasElement&&or(t),o},A2=async(t,e=1)=>e===1||await n1()?t:pd(await rc(t,e)),Gs=t=>typeof t=="object";const Zm=t=>t instanceof HTMLElement?t:Gs(t)?L2(t):t,L2=t=>{let e;return Array.isArray(t)?(e=[],t.forEach((n,i)=>{e[i]=Zm(n)})):(e={},t!==null&&Object.keys(t).forEach(n=>{const i=t[n];e[n]=Zm(i)})),e};var Un=t=>typeof t=="function",Hx=(t,e)=>new Promise((n,i)=>{const r=()=>n(((o,{width:a,height:s,canvasMemoryLimit:l,contextOptions:c})=>{let d=a||o.naturalWidth,u=s||o.naturalHeight;d||u||(d=300,u=150);const p=d*u;if(l&&p>l){const $=Math.sqrt(l)/Math.sqrt(p);d=Math.floor(d*$),u=Math.floor(u*$)}const h=fi("canvas");return h.width=d,h.height=u,h.getContext("2d",c).drawImage(o,0,0,d,u),h})(t,e));t.complete&&t.width?r():(t.onload=r,t.onerror=()=>i(new Error("Failed to load image")))}),F2=()=>"createImageBitmap"in window,z2=t=>/svg/.test(t.type),la=()=>Math.random().toString(36).substring(2,9);const Lp=new Map;var hd=(t,e,n)=>new Promise((i,r)=>{const o=t.toString();let a=Lp.get(o);if(!a){const l=(p=>`function () {self.onmessage = function (message) {(${p.toString()}).apply(null, message.data.content.concat([function (err, response) {
    response = response || {};
    const transfer = 'data' in response ? [response.data.buffer] : 'width' in response ? [response] : [];
    return self.postMessage({ id: message.data.id, content: response, error: err }, transfer);
}]))}}`)(t),c=URL.createObjectURL((p=>new Blob(["(",typeof p=="function"?p.toString():p,")()"],{type:"application/javascript"}))(l)),d=new Map,u=new Worker(c);a={url:c,worker:u,messages:d,terminationTimeout:void 0,terminate:()=>{clearTimeout(a.terminationTimeout),a.worker.terminate(),URL.revokeObjectURL(c),Lp.delete(o)}},u.onmessage=function(p){const{id:h,content:$,error:g}=p.data;if(clearTimeout(a.terminationTimeout),a.terminationTimeout=setTimeout(()=>{d.size>0||a.terminate()},500),!d.has(h))return;const f=d.get(h);d.delete(h),g!=null?f.reject(g):f.resolve($)},Lp.set(o,a)}const s=la();a.messages.set(s,{resolve:i,reject:r}),a.worker.postMessage({id:s,content:e},n)});let Fp=null;var Oa=()=>(Fp===null&&(Fp=Kh(/Firefox/)),Fp);const Xm=async(t,e)=>{const n=await(async(r,o)=>{const a=fi("img",{src:URL.createObjectURL(r)}),s=await Hx(a,o);return URL.revokeObjectURL(a.src),s})(t,{canvasMemoryLimit:e,contextOptions:{willReadFrequently:!0}}),i=pd(n);return or(n),i};var D2=async(t,e)=>{if(i1()&&!Oa())return await Xm(t,e);let n;if(F2()&&!z2(t)&&"OffscreenCanvas"in window)try{n=await hd((i,r,o)=>{createImageBitmap(i).then(a=>{let s=a.width,l=a.height;const c=s*l;if(r&&c>r){const h=Math.sqrt(r)/Math.sqrt(c);s=Math.floor(s*h),l=Math.floor(l*h)}const d=new OffscreenCanvas(s,l),u=d.getContext("2d",{willReadFrequently:!0});u.drawImage(a,0,0,s,l);const p=u.getImageData(0,0,d.width,d.height);o(null,p)}).catch(a=>{o(a)})},[t,e])}catch{}return n&&n.width?n:await Xm(t,e)},Jh=(t,e,n)=>new Promise((i,r)=>{try{t.toBlob(o=>{if(!o)return r(new Error("Failed to create blob"));i(o)},e,n)}catch(o){r(o)}}),jx=async(t,e,n)=>{const i=await rc(t),r=await Jh(i,e,n);return or(i),r};const Ux={matroska:"mkv"};var B2=t=>{const e=(t.match(/\/([a-z0-9]+)/)||[])[1];if(/^x/.test(e)){const[,n=""]=t.split("/x-");return Ux[n]}return e},O2=t=>t.substring(0,t.lastIndexOf("."))||t;const Gx=/avif|bmp|gif|jpg|jpeg|jpe|jif|jfif|png|svg|tiff|webp/;var Qh=t=>{return t&&(e=(n=t,n.split(".").pop()).toLowerCase(),Gx.test(e)?"image/"+(/jfif|jif|jpe|jpg/.test(e)?"jpeg":e==="svg"?"svg+xml":e):"");var e,n},ed=(t,e,n)=>{const i=new Date().getTime(),r=t.type.length&&!/null|text/.test(t.type),o=r?t.type:n,a=((s,l)=>{const c=Qh(s);if(c===l)return s;const d=B2(l)||c;return`${O2(s)}.${d}`})(e,o);try{return new(Yh("File"))([t],a,{lastModified:i,type:r?t.type:o})}catch{const l=r?t.slice():t.slice(0,t.size,o);return l.lastModified=i,l.name=a,l}},ga=(t,e)=>t/e,ai=t=>t;const zp=Math.PI,sa=Math.PI/2,$a=sa/2;var Ya=t=>{const e=Math.abs(t)%Math.PI;return e>$a&&e<Math.PI-$a};const yh={Top:"t",Right:"r",Bottom:"b",Left:"l",TopLeft:"tl",TopRight:"tr",BottomRight:"br",BottomLeft:"bl"},{Top:Vs,Right:Ns,Bottom:Hs,Left:js,TopLeft:xa,TopRight:va,BottomRight:wa,BottomLeft:Sa}=yh;var nd={[Vs]:[.5,0],[Ns]:[1,.5],[Hs]:[.5,1],[js]:[0,.5],[xa]:[0,0],[va]:[1,0],[wa]:[1,1],[Sa]:[0,1]},gn=(t,e=12)=>parseFloat(t.toFixed(e));const Vu=(t,e,n)=>n+(t-n)*e,Ym=t=>({x:t.x+.5*t.width,y:t.y+.5*t.height,rx:.5*t.width,ry:.5*t.height}),ci=()=>ut(0,0),ut=(t,e)=>({x:t,y:e}),qm=t=>ut(t.pageX,t.pageY),Ve=t=>ut(t.x,t.y),Yl=t=>(t.x=-t.x,t.y=-t.y,t),Zr=(t,e,n=ci())=>{const i=Math.cos(e),r=Math.sin(e),o=t.x-n.x,a=t.y-n.y;return t.x=n.x+i*o-r*a,t.y=n.y+r*o+i*a,t},zs=t=>Math.sqrt(t.x*t.x+t.y*t.y),yo=t=>{const e=Math.sqrt(t.x*t.x+t.y*t.y);return e===0?ci():(t.x/=e,t.y/=e,t)},uu=(t,e)=>Math.atan2(e.y-t.y,e.x-t.x),Ls=(t,e)=>t.x===e.x&&t.y===e.y,jo=(t,e)=>(t.x=e(t.x),t.y=e(t.y),t),Zi=(t,e)=>(t.x+=e.x,t.y+=e.y,t),Xi=(t,e)=>(t.x-=e.x,t.y-=e.y,t),Km=(t,e)=>(t.x/=e,t.y/=e,t),Vr=(t,e)=>(t.x*=e,t.y*=e,t),Iu=(t,e)=>t.x*e.x+t.y*e.y,Eu=(t,e)=>t.x*e.y-t.y*e.x,Vo=(t,e=ci())=>{const n=t.x-e.x,i=t.y-e.y;return n*n+i*i},ro=(t,e=ci())=>Math.sqrt(Vo(t,e)),Zx=(t,e,n)=>(t.x=Vu(t.x,e,n.x),t.y=Vu(t.y,e,n.y),t),oa=t=>{let e=0,n=0;return t.forEach(i=>{e+=i.x,n+=i.y}),ut(e/t.length,n/t.length)},ql=(t,e,n,i,r)=>(t.forEach(o=>{o.x=e?i-(o.x-i):o.x,o.y=n?r-(o.y-r):o.y}),t),$l=(t,e,n,i)=>{const r=Math.sin(e),o=Math.cos(e);return t.forEach(a=>{a.x-=n,a.y-=i;const s=a.x*o-a.y*r,l=a.x*r+a.y*o;a.x=n+s,a.y=i+l}),t},oc=(t,e)=>({width:t,height:e}),io=t=>oc(t.width,t.height),ts=t=>oc(t.width,t.height),yl=t=>oc(t.width,t.height),W2=t=>oc(t[0],t[1]),Kc=t=>{return/img/i.test(t.nodeName)?oc((e=t).naturalWidth,e.naturalHeight):ts(t);var e},Fi=(t,e)=>oc(t,e),id=(t,e,n=ai)=>n(t.width)===n(e.width)&&n(t.height)===n(e.height),pu=(t,e)=>(t.width*=e,t.height*=e,t),tc=t=>ut(.5*t.width,.5*t.height),_2=(t,e)=>{const n=Math.abs(e),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),o=i*t.width+r*t.height,a=r*t.width+i*t.height;return t.width=o,t.height=a,t},Nu=(t,e)=>t.width>=e.width&&t.height>=e.height,Wa=(t,e)=>(t.width=e(t.width),t.height=e(t.height),t),Us=(t,e)=>({start:t,end:e}),V2=t=>Us(Ve(t.start),Ve(t.end)),t0=(t,e)=>{if(e===0)return t;const n=ut(t.start.x-t.end.x,t.start.y-t.end.y),i=yo(n),r=Vr(i,e);return t.start.x+=r.x,t.start.y+=r.y,t.end.x-=r.x,t.end.y-=r.y,t},Xx=[ut(-1,-1),ut(-1,1),ut(1,1),ut(1,-1)],Ca=(t,e,n,i)=>({x:t,y:e,width:n,height:i}),An=t=>Ca(t.x,t.y,t.width,t.height),Ds=()=>Ca(0,0,0,0),Yr=t=>Ca(0,0,t.width,t.height),Yx=t=>Ca(t[3],t[0],t[1]-t[3],t[2]-t[0]),qa=t=>Ca(t.x||0,t.y||0,t.width||0,t.height||0),ur=t=>{let e=t[0].x,n=t[0].x,i=t[0].y,r=t[0].y;return t.forEach(o=>{e=Math.min(e,o.x),n=Math.max(n,o.x),i=Math.min(i,o.y),r=Math.max(r,o.y)}),Ca(e,i,n-e,r-i)},Au=t=>Ui(t.x-t.rx,t.y-t.ry,2*t.rx,2*t.ry),Jm=(t,e)=>Ca(t.x-.5*e.width,t.y-.5*e.height,e.width,e.height),Ui=(t,e,n,i)=>Ca(t,e,n,i),Ln=t=>ut(t.x+.5*t.width,t.y+.5*t.height),fa=(t,e)=>(t.x+=e.x,t.y+=e.y,t),_r=(t,e,n)=>(n=n||Ln(t),t.x=e*(t.x-n.x)+n.x,t.y=e*(t.y-n.y)+n.y,t.width=e*t.width,t.height=e*t.height,t),Qm=(t,e,n,i)=>{const r=(i.x-t.x)/t.width,o=(i.y-t.y)/t.height;let a=Math.max(e.width,t.width),s=Math.max(e.height,t.height);return a=Math.min(n.width,a),s=Math.min(n.height,s),t.x=i.x-r*a,t.y=i.y-o*s,t.width=a,t.height=s,t},tg=(t,e)=>{const[n,i]=nd[e],r=n*t.width,o=i*t.height;return ut(t.x+r,t.y+o)},fl=(t,e)=>(t.x*=e,t.y*=e,t.width*=e,t.height*=e,t),ya=(t,e,n=ai)=>n(t.x)===n(e.x)&&n(t.y)===n(e.y)&&n(t.width)===n(e.width)&&n(t.height)===n(e.height),fr=t=>ga(t.width,t.height),N2=(t,e,n,i,r)=>(t.x=e,t.y=n,t.width=i,t.height=r,t),r1=(t,e)=>(t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t),Rr=(t,e,n)=>(n||(n=Ln(t)),No(t).map(i=>Zr(i,e,n))),Lu=(t,e)=>Ca(.5*t.width-.5*e.width,.5*t.height-.5*e.height,e.width,e.height),Hu=(t,e)=>!(e.x<t.x)&&!(e.y<t.y)&&!(e.x>t.x+t.width)&&!(e.y>t.y+t.height),fs=(t,e,n=ci())=>{if(t.width===0||t.height===0)return Ds();const i=fr(t);e||(e=i);let r=t.width,o=t.height;return e>i?r=o*e:o=r/e,Ca(n.x+.5*(t.width-r),n.y+.5*(t.height-o),r,o)},oo=(t,e=fr(t),n=ci())=>{if(t.width===0||t.height===0)return Ds();let i=t.width,r=i/e;return r>t.height&&(r=t.height,i=r*e),Ca(n.x+.5*(t.width-i),n.y+.5*(t.height-r),i,r)},bl=t=>[Math.min(t.y,t.y+t.height),Math.max(t.x,t.x+t.width),Math.max(t.y,t.y+t.height),Math.min(t.x,t.x+t.width)],No=t=>[ut(t.x,t.y),ut(t.x+t.width,t.y),ut(t.x+t.width,t.y+t.height),ut(t.x,t.y+t.height)],aa=(t,e)=>{if(t)return t.x=e(t.x),t.y=e(t.y),t.width=e(t.width),t.height=e(t.height),t},H2=(t,e,n=Ln(t))=>No(t).map((i,r)=>{const o=Xx[r];return ut(Vu(i.x,1+o.x*e.x,n.x),Vu(i.y,1+o.y*e.y,n.y))}),rd=t=>(t.x=0,t.y=0,t),eg=t=>{const e=t[0],n=t[t.length-1];t=Ls(e,n)?t:[...t,e];const i=e.x,r=e.y;let o,a,s,l=0,c=0,d=0,u=0;const p=t.length;for(;c<p;c++)o=t[c],a=t[c+1>p-1?0:c+1],s=(o.y-r)*(a.x-i)-(a.y-r)*(o.x-i),l+=s,d+=(o.x+a.x-2*i)*s,u+=(o.y+a.y-2*r)*s;return s=3*l,ut(i+d/s,r+u/s)},e0=(t,e)=>j2(t.start,t.end,e.start,e.end),j2=(t,e,n,i)=>{const r=(i.y-n.y)*(e.x-t.x)-(i.x-n.x)*(e.y-t.y);if(r===0)return;const o=((i.x-n.x)*(t.y-n.y)-(i.y-n.y)*(t.x-n.x))/r,a=((e.x-t.x)*(t.y-n.y)-(e.y-t.y)*(t.x-n.x))/r;return o<0||o>1||a<0||a>1?void 0:ut(t.x+o*(e.x-t.x),t.y+o*(e.y-t.y))},U2=(t,e,{ignoreIdenticalLines:n=!1,breakOnIntersection:i=!1}={})=>{const r=e.length,o=[];for(let a=0;a<r-1;a++){if(n&&(Ls(t.start,e[a])||Ls(t.start,e[a+1])||Ls(t.end,e[a])||Ls(t.end,e[a+1])))continue;const s=j2(t.start,t.end,e[a],e[a+1]);if(s){if(i)return[s];o.push(s)}}return o.length?o:void 0},bh=(t,e)=>{let n=0,i=0,r=!1;const o=e.length;for(n=0,i=o-1;n<o;i=n++)e[n].y>t.y!=e[i].y>t.y&&t.x<(e[i].x-e[n].x)*(t.y-e[n].y)/(e[i].y-e[n].y)+e[n].x&&(r=!r);return r},qx=(t,e,n,i)=>({x:(1-i)*(1-i)*t.x+2*(1-i)*i*e.x+i*i*n.x,y:(1-i)*(1-i)*t.y+2*(1-i)*i*e.y+i*i*n.y}),Kx=(t,e,n,i,r)=>{const o=((s,l,c,d)=>{let u=(l.x-s.x)*d,p=(l.y-s.y)*d;return ro(c,l)<ro(l,s)&&(u*=.15,p*=.15),{x:l.x+u,y:l.y+p}})(t,e,n,r),a=[];for(let s=0;s<=i;s++){const l=s/i;a.push(qx(e,o,n,l))}return a},G2=t=>{const e=[];for(let n=0;n<t.length;n++){let i=n+1;i===t.length&&(i=0),e.push(Us(Ve(t[n]),Ve(t[i])))}return e},Z2=(t,e=0)=>G2(t).map(n=>t0(n,e)),ju=(t,e,n,i=0,r=!1,o=!1,a=12)=>{const s=[];for(let l=0;l<a;l++)s.push(ut(t.x+e*Math.cos(l*(2*Math.PI)/a),t.y+n*Math.sin(l*(2*Math.PI)/a)));return(r||o)&&ql(s,r,o,t.x,t.y),i&&$l(s,i,t.x,t.y),s},Uu=(t,e,n,i)=>{const r=ut(t.x-n.x,t.y-n.y),o=ut(i.x-n.x,i.y-n.y),a=Iu(o,o);let s=Iu(r,o)/a;s=s<0?0:s,s=s>1?1:s;const l=ut(o.x*s+n.x-t.x,o.y*s+n.y-t.y);return Iu(l,l)<=e*e},X2=(t,e,n)=>{const i=n.length;for(let r=0;r<i-1;r++)if(Uu(t,e,n[r],n[r+1]))return!0;return!1},xh=(t,e,n)=>!!bh(t,n)||!!X2(t,e,n)||Uu(t,e,n[0],n[n.length-1]),Dp=(t,e,n,i,r)=>xh(t,e,Rr(n,i,r||Ln(n)));var Jx=(t,e)=>{const n=Yr(t),i=Ln(n),r=Rr(n,e,i);return rd(ur(r))},od=(t,e)=>t instanceof HTMLElement&&(!e||new RegExp(`^${e}$`,"i").test(t.nodeName)),md=t=>t instanceof File,ng=async(t,e,n)=>{const i=await Jh(t,e,n);return ed(i,"canvas")},n0=t=>t.split("/").pop().split(/\?|\#/).shift();const Qx=ar()&&Node.prototype.replaceChildren?(t,e)=>t.replaceChildren(e):(t,e)=>{for(;t.lastChild;)t.removeChild(t.lastChild);e!==void 0&&t.append(e)},hu=ar()&&fi("div",{class:"PinturaMeasure",style:"position:absolute;left:0;top:0;width:99999px;height:0;pointer-events:none;contain:strict;margin:0;padding:0;"});let ig;var i0=t=>(Qx(hu,t),hu.parentNode||document.body.append(hu),clearTimeout(ig),ig=setTimeout(()=>{hu.remove()},500),t);let Bp=null;var ka=()=>(Bp===null&&(Bp=ar()&&/^((?!chrome|android).)*(safari|iphone|ipad)/i.test(navigator.userAgent)),Bp),Y2=t=>new Promise((e,n)=>{let i=!1;!t.parentNode&&ka()&&(i=!0,t.style.cssText="position:absolute;visibility:hidden;pointer-events:none;left:0;top:0;width:0;height:0;",i0(t));const r=()=>{const a=t.naturalWidth,s=t.naturalHeight;a&&s&&(i&&t.remove(),clearInterval(o),e({width:a,height:s}))};t.onerror=a=>{clearInterval(o),n(a)};const o=setInterval(r,1);r()}),q2=t=>new Promise((e,n)=>{const i=()=>{e({width:t.videoWidth,height:t.videoHeight})};if(t.readyState>=1)return i();t.onloadedmetadata=i,t.onerror=()=>n(t.error)}),o1=t=>/^image/.test(t.type),r0=t=>new Promise(e=>{const n=He(t)?t:URL.createObjectURL(t),i=()=>{const o=new Image;o.src=n,e(o)};if(t instanceof Blob&&o1(t))return i();const r=document.createElement("video");r.preload="metadata",r.onloadedmetadata=()=>e(r),r.onerror=i,r.src=n}),Gu=t=>t.nodeName==="VIDEO",K2=async t=>{let e,n;e=t.src?t:await r0(t);try{n=Gu(e)?await q2(e):await Y2(e)}finally{md(t)&&URL.revokeObjectURL(e.src)}return n},tv=async t=>{const e=await K2(t),n=await(o=>new Promise((a,s)=>{if(o.complete)return a(o);o.onload=()=>a(o),o.onerror=()=>s(new Error("Failed to load image"))}))(t),i=fi("canvas",e);i.getContext("2d",{willReadFrequently:!0}).drawImage(n,0,0);const r=await Jh(i);return ed(r,n0(n.src))},Gl=(t=0,e=!0)=>new(Yh("ProgressEvent"))("progress",{loaded:100*t,total:100,lengthComputable:e}),rg=(t,e,n=i=>i)=>t.getAllResponseHeaders().indexOf(e)>=0?n(t.getResponseHeader(e)):void 0,ev=t=>{if(!t)return null;const e=t.split(/filename=|filename\*=.+''/).splice(1).map(n=>n.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(n=>n.length);return e.length?decodeURI(e[e.length-1]):null};const nv="URL_REQUEST";class Jc extends Error{constructor(e,n,i){super(e),this.name="EditorError",this.code=n,this.metadata=i}}var J2=(t,e)=>{const{headers:n={},credentials:i}=e||{};Object.entries(n).forEach(([r,o])=>t.setRequestHeader(r,o)),i&&(t.withCredentials=i!=="omit")},iv=(t,e,n)=>/^data:/.test(t)?(async(i,r="data-uri",o=pe)=>{o(Gl(0));const a=await fetch(i);o(Gl(.33));const s=await a.blob();let l;o1(s)||(l="image/"+(i.includes(",/9j/")?"jpeg":"png")),o(Gl(.66));const c=ed(s,r,l);return o(Gl(1)),c})(t,void 0,e):((i,r,o)=>new Promise((a,s)=>{const l=()=>s(new Jc("Error fetching image",nv,c)),c=new XMLHttpRequest;c.onprogress=r,c.onerror=l,c.onload=()=>{if(!c.response||c.status>=300||c.status<200)return l();const u=rg(c,"Content-Type"),p=rg(c,"Content-Disposition",ev)||n0(i);a(ed(c.response,p,u||Qh(p)))};const{willRequest:d}=o;Promise.resolve(d&&d(i,{resourceType:"image"})).then(u=>{if(u===!1)return s("Image load rejected");c.open("GET",i,!0),J2(c,u),c.responseType="blob",c.send()}).catch(console.error)}))(t,e,n),o0=t=>t instanceof Blob&&!(t instanceof File),Q2=t=>"close"in t,rv=async(t,e,n)=>{if(md(t)||o0(t))return t;if(He(t))return await iv(t,e,n);if(od(t,"canvas"))return await ng(t);if(od(t,"img"))return await tv(t);if(Ql(t)||Q2(t))return await ng(await rc(t));throw new Jc("Invalid image source","invalid-image-source")};let Op=null;var a1=()=>(Op===null&&(Op=ar()&&/^mac/i.test(navigator.platform)),Op);let Wp=null;var Uo=()=>(Wp===null&&(Wp=ar()&&(Kh(/iPhone|iPad|iPod/)||a1()&&navigator.maxTouchPoints>=1)),Wp),ov=async(t,e=1)=>await n1()||Uo()||e<5?t:Fi(t.height,t.width),ty=t=>/jpeg/.test(t.type),av=t=>{return typeof(e=t)!="object"||e.constructor!=Object?t:JSON.stringify(t);var e},a0=(t,e=0,n)=>(e===0||(t.translate(n.x,n.y),t.rotate(e),t.translate(-n.x,-n.y)),t),ey=(t,e,n)=>(t.scale(e,n),t),sv=async(t,e={})=>{const{flipX:n,flipY:i,rotation:r,crop:o}=e,a=ts(t),s=n||i,l=!!r,c=o&&(o.x||o.y||o.width||o.height),d=c&&ya(o,Yr(a)),u=c&&!d;if(!s&&!l&&!u)return t;let p,h=fi("canvas",{width:t.width,height:t.height});if(h.getContext("2d",{willReadFrequently:!0}).putImageData(t,0,0),s){const $=fi("canvas",{width:h.width,height:h.height}).getContext("2d",{willReadFrequently:!0});ey($,n?-1:1,i?-1:1),$.drawImage(h,n?-h.width:0,i?-h.height:0),$.restore(),or(h),h=$.canvas}if(l){const $=Wa(yl(ur(Rr(qa(h),r))),Math.floor),g=fi("canvas",{width:o.width,height:o.height}).getContext("2d",{willReadFrequently:!0});((f,x,v)=>{f.translate(x,v)})(g,-o.x,-o.y),a0(g,r,tc($)),g.drawImage(h,.5*($.width-h.width),.5*($.height-h.height)),g.restore(),or(h),h=g.canvas}else if(u)return p=h.getContext("2d",{willReadFrequently:!0}).getImageData(o.x,o.y,o.width,o.height),or(h),p;return p=h.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,h.width,h.height),or(h),p},lv=(t,e)=>{const{imageData:n,width:i,height:r}=t,o=n.width,a=n.height,s=Math.round(i),l=Math.round(r),c=n.data,d=new Uint8ClampedArray(s*l*4),u=o/s,p=a/l,h=Math.ceil(.5*u),$=Math.ceil(.5*p);for(let g=0;g<l;g++)for(let f=0;f<s;f++){const x=4*(f+g*s);let v=0,w=0,T=0,I=0,M=0,F=0,C=0;const z=(g+.5)*p;for(let j=Math.floor(g*p);j<(g+1)*p;j++){const A=Math.abs(z-(j+.5))/$,y=(f+.5)*u,st=A*A;for(let G=Math.floor(f*u);G<(f+1)*u;G++){let k=Math.abs(y-(G+.5))/h;const H=Math.sqrt(st+k*k);if(H<-1||H>1||(v=2*H*H*H-3*H*H+1,v<=0))continue;k=4*(G+j*o);const rt=c[k+3];C+=v*rt,T+=v,rt<255&&(v=v*rt/250),I+=v*c[k],M+=v*c[k+1],F+=v*c[k+2],w+=v}}d[x]=I/w,d[x+1]=M/w,d[x+2]=F/w,d[x+3]=C/T}e(null,{data:d,width:s,height:l})},s0=t=>{if(t instanceof ImageData)return t;let e;try{e=new ImageData(t.width,t.height)}catch{e=fi("canvas").getContext("2d").createImageData(t.width,t.height)}return e.data.set(t.data),e},cv=async(t,e={},n)=>{const{width:i,height:r,fit:o,upscale:a}=e;if(!i&&!r)return t;let s=i,l=r;if(i?r||(l=i):s=r,o!=="force"){const c=s/t.width,d=l/t.height;let u=1;if(o==="cover"?u=Math.max(c,d):o==="contain"&&(u=Math.min(c,d)),u>1&&a===!1)return t;s=Math.round(t.width*u),l=Math.round(t.height*u),i&&r&&(Math.abs(s-i)<=1&&(s=i),Math.abs(l-r)<=1&&(l=r))}return s=Math.max(s,1),l=Math.max(l,1),t.width===s&&t.height===l?t:n?n(t,s,l):(t=await hd(lv,[{imageData:t,width:s,height:l}],[t.data.buffer]),s0(t))},dv=(t,e)=>{const{imageData:n,matrix:i}=t;if(!i)return e(null,n);const r=n.data,o=r.length,a=i[0],s=i[1],l=i[2],c=i[3],d=i[4],u=i[5],p=i[6],h=i[7],$=i[8],g=i[9],f=i[10],x=i[11],v=i[12],w=i[13],T=i[14],I=i[15],M=i[16],F=i[17],C=i[18],z=i[19];let j=0,A=0,y=0,st=0,G=0,k=0,H=0,rt=0,gt=0,ct=0,V=0,N=0;for(;j<o;j+=4)A=r[j]/255,y=r[j+1]/255,st=r[j+2]/255,G=r[j+3]/255,k=A*a+y*s+st*l+G*c+d,H=A*u+y*p+st*h+G*$+g,rt=A*f+y*x+st*v+G*w+T,gt=A*I+y*M+st*F+G*C+z,ct=Math.max(0,k*gt)+(1-gt),V=Math.max(0,H*gt)+(1-gt),N=Math.max(0,rt*gt)+(1-gt),r[j]=255*Math.max(0,Math.min(1,ct)),r[j+1]=255*Math.max(0,Math.min(1,V)),r[j+2]=255*Math.max(0,Math.min(1,N)),r[j+3]=255*G;e(null,{data:r,width:n.width,height:n.height})},ny=(t,e)=>{const{imageData:n,matrix:i}=t;if(!i)return e(null,n);let r=i.reduce((C,z)=>C+z);r=r<=0?1:r;const o=n.width,a=n.height,s=n.data;let l=0,c=0,d=0;const u=Math.round(Math.sqrt(i.length)),p=Math.floor(u/2);let h=0,$=0,g=0,f=0,x=0,v=0,w=0,T=0,I=0,M=0;const F=new Uint8ClampedArray(o*a*4);for(d=0;d<a;d++)for(c=0;c<o;c++){for(h=0,$=0,g=0,f=0,v=0;v<u;v++)for(x=0;x<u;x++)w=d+v-p,T=c+x-p,w<0&&(w=a-1),w>=a&&(w=0),T<0&&(T=o-1),T>=o&&(T=0),I=4*(w*o+T),M=i[v*u+x],h+=s[I]*M,$+=s[I+1]*M,g+=s[I+2]*M,f+=s[I+3]*M;F[l]=h/r,F[l+1]=$/r,F[l+2]=g/r,F[l+3]=f/r,l+=4}e(null,{data:F,width:o,height:a})},uv=(t,e)=>{let{imageData:n,strength:i}=t;if(!i)return e(null,n);const r=n.width,o=n.height,a=n.data,s=(y,st)=>(l=y-I,c=st-M,Math.sqrt(l*l+c*c));let l,c,d,u,p,h,$,g,f,x,v,w=0,T=0,I=.5*r,M=.5*o,F=s(0,0);for(i>0?(d=0,u=0,p=0):(i=Math.abs(i),d=1,u=1,p=1),T=0;T<o;T++)for(w=0;w<r;w++)C=4*(w+T*r),z=a,j=a,A=s(w,T)*i/F,h=z[C]/255,$=z[C+1]/255,g=z[C+2]/255,f=z[C+3]/255,x=1-A,v=x*f+A,j[C]=(x*f*h+A*d)/v*255,j[C+1]=(x*f*$+A*u)/v*255,j[C+2]=(x*f*g+A*p)/v*255,j[C+3]=255*v;var C,z,j,A;e(null,{data:a,width:n.width,height:n.height})},pv=(t,e)=>{const{imageData:n,level:i,monochrome:r=!1}=t;if(!i)return e(null,n);const o=n.data,a=o.length;let s,l,c,d=0;const u=()=>255*(2*Math.random()-1)*i,p=r?()=>{const h=u();return[h,h,h]}:()=>[u(),u(),u()];for(;d<a;d+=4)[s,l,c]=p(),o[d]=o[d]+s,o[d+1]=o[d+1]+l,o[d+2]=o[d+2]+c;e(null,{data:o,width:n.width,height:n.height})},hv=(t,e)=>{const{imageData:n,level:i}=t;if(!i)return e(null,n);const r=n.data,o=r.length;let a,s,l,c=0;for(;c<o;c+=4)a=r[c]/255,s=r[c+1]/255,l=r[c+2]/255,r[c]=255*Math.pow(a,i),r[c+1]=255*Math.pow(s,i),r[c+2]=255*Math.pow(l,i);e(null,{data:r,width:n.width,height:n.height})},mv=async(t,e={})=>{const{colorMatrix:n,convolutionMatrix:i,gamma:r,noise:o,vignette:a}=e,s=[];if(i&&s.push([ny,{matrix:i.clarity}]),r>0&&s.push([hv,{level:1/r}]),n&&!(d=>{const u=d.length;let p;const h=u>=20?6:u>=16?5:3;for(let $=0;$<u;$++)if(p=d[$],p===1&&$%h!=0||p!==0&&p!==1)return!1;return!0})(n)&&s.push([dv,{matrix:n}]),(o>0||o<0)&&s.push([pv,{level:o}]),(a>0||a<0)&&s.push([uv,{strength:a}]),!s.length)return t;const l=(d,u)=>`(err, imageData) => {
            (${d[u][0].toString()})(Object.assign({ imageData: imageData }, filterInstructions[${u}]), 
                ${d[u+1]?l(d,u+1):"done"})
        }`,c=`function (options, done) {
        const filterInstructions = options.filterInstructions;
        const imageData = options.imageData;
        (${l(s,0)})(null, imageData)
    }`;return t=await hd(c,[{imageData:t,filterInstructions:s.map(d=>d[1])}],[t.data.buffer]),s0(t)},Ne=t=>typeof t=="number",Zu=t=>He(t)&&t.match(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g)!==null,Ae=(t,e)=>t.hasOwnProperty(e),Ei=t=>Array.isArray(t);let og=64,_p=102,ag=112,sg=!1;var iy=(t,e)=>(!sg&&ar()&&(/^win/i.test(navigator.platform)&&(_p=103),(Uo()||a1())&&(og=63.5,_p=110,ag=123),sg=!0),`<svg${e?` aria-label="${e}"`:""} width="128" height="128" viewBox="0 0 128 128" preserveAspectRatio="xMinYMin meet" xmlns="http://www.w3.org/2000/svg"><text x="${og}" y="${_p}" alignment-baseline="text-top" dominant-baseline="text-top" text-anchor="middle" font-size="${ag}px">${t}</text></svg>`),ec=t=>t instanceof Blob,Gr=(t,e)=>t/e*100+"%",Ir=t=>`rgba(${Math.round(255*t[0])}, ${Math.round(255*t[1])}, ${Math.round(255*t[2])}, ${Ne(t[3])?t[3]:1})`,Fu=t=>Object.values(t).join("_");const ry=async(t,e=0)=>{const n=fi("canvas",{width:80,height:80}).getContext("2d");return await((i=0)=>new Promise(r=>{setTimeout(r,i)}))(e),n.drawImage(t,0,0,80,80),!((i=>!new Uint32Array(i.getImageData(0,0,i.canvas.width,i.canvas.height).data.buffer).some(r=>r!==0))(n)&&e<=256)||await ry(t,e+16)},lg=new Map;var gv=t=>new Promise((e,n)=>{const i=new FileReader;i.onerror=()=>n(i.error),i.onload=()=>e(i.result),i.readAsDataURL(t)}),Ja=()=>{let t=[];return{sub:(e,n)=>(t.push({event:e,callback:n}),()=>t=t.filter(i=>i.event!==e||i.callback!==n)),pub:(e,n)=>{t.filter(i=>i.event===e).forEach(i=>i.callback(n))}}};const Ka=32,l0=({color:t=[0,0,0],fontSize:e=16,fontFamily:n="sans-serif",fontVariant:i="normal",fontWeight:r="normal",fontStyle:o="normal",textAlign:a="left",letterSpacing:s="normal",lineHeight:l=20},c=1)=>`font-size:${e*c}px;font-style:${o};font-weight:${r};font-family:${n};font-variant:${i};line-height:${l*c}px;text-align:${a};letter-spacing:${Ne(s)?s+"px":"normal"};color:${Ir(t)};`,c0=(t,e,n=1)=>{const{width:i,height:r,disableNewline:o}=e,a=!i,s=o===!1?((d="")=>d.split(`
`).length)(t):void 0,l=a?"normal":"break-word",c=a&&!s?"nowrap":"pre-line";return`max-width:none;min-width:auto;width:${a?"auto":i*n+"px"};height:${r?r*n+"px":"auto"};margin-top:0;margin-bottom:0;padding-top:${(({fontSize:d=16,lineHeight:u=20}={})=>.5*Math.max(0,d-u))(e)*n}px;word-break:${l};word-wrap:normal;white-space:${c};`},cg=new Map,oy=t=>{const e=[];for(const n of Array.from(t.childNodes))n.nodeType===Node.TEXT_NODE?e.push($v(n)):e.push(...oy(n));return e},ay="pointer-events:none;visibility:hidden;position:absolute;left:0;top:0;",$v=t=>{const e=t.nodeValue;if(!e)return[];const n=e.length,i=document.createRange();i.selectNodeContents(t);const r=[];for(let a=0;a<n;a++){i.setStart(t,0),i.setEnd(t,a+1);const s=i.getClientRects().length-1,l=e.charAt(a);r[s]?r[s]+=l:r.push(l)}const o=i.getClientRects();return r.map((a,s)=>({rect:o[s],text:a}))},dg=new Map,no=(t="",e)=>{const{width:n=0,height:i=0}=e;if(n&&i)return Fi(n,i);let{fontSize:r=16,fontFamily:o,lineHeight:a=20,fontWeight:s,fontStyle:l,fontVariant:c,letterSpacing:d}=e;const u=Fu({text:t,fontFamily:o,fontWeight:s,fontStyle:l,fontVariant:c,fontSize:r,letterSpacing:d,lineHeight:a,width:n});let p=dg.get(u);if(p)return p;let h=1;r>1e3&&Oa()&&(h=r/1e3,r=1e3,a/=h);const $=i0(fi("pre",{contenteditable:"true",spellcheck:"false",style:`${ay}${l0({...e,fontSize:r,lineHeight:a})};${c0(t,e)}"`,innerHTML:t})).getBoundingClientRect();return p=ts($),p=Wa(p,g=>g*h),n&&(p.width=n),dg.set(u,p),p},ug=new Map,fv=(t,e)=>new Promise((n,i)=>{let r=ug.get(t);r===void 0&&(r=((o,a)=>{const{sub:s,pub:l}=Ja();let c,d;return Promise.resolve(a&&a(o,{resourceType:"stylesheet"})).then(u=>{if(u===!1)return d="requestPrevented",l("error",d);const{headers:p,credentials:h}=u||{};fetch(o,{headers:p,credentials:h}).then($=>$.text()).then($=>{c=$,l("load",c)}).catch($=>{d=$,l("error",d)})}),{sub:(u,p)=>u==="load"&&c?p(c):u==="error"&&d?p(d):void s(u,p)}})(t,e),ug.set(t,r)),r.sub("load",n),r.sub("error",i)}),pg=async(t,e,n)=>{let i;try{i=await fv(t,e)}catch{return[]}const r={innerHTML:i,id:la()};n&&(r.nonce=n);const o=fi("style",r);document.head.append(o);const a=Array.from(document.styleSheets).find(s=>s.ownerNode.id===o.id);return o.remove(),Array.from(a.cssRules)},Nl=new Map,yv=async(t,e,n)=>{if(Nl.has(t.href))return Nl.get(t.href);let i;try{i=Array.from(t.cssRules);for(const r of(o=>o.filter(a=>a instanceof CSSImportRule))(i)){const o=r.href;if(Nl.has(o)){const s=Nl.get(o);i=[...i,...s];continue}const a=await pg(o,e,n);Nl.set(o,a),i=[...i,...a]}}catch{const o=t.href;i=await pg(o,e,n),Nl.set(o,i)}return(r=>r.filter(o=>o instanceof CSSFontFaceRule))(i)},sy=(t,e)=>t.style.getPropertyValue(e),bv=(t,e)=>t.style?sy(t,"font-family").replace(/^"|"$/g,"")==e:!1,xv=async(t,e,n)=>{const i=((r,o)=>{const a=[];for(const s of r)bv(s,o)&&a.push(s);return a})(await(async(r,o)=>{const a=Array.from(document.styleSheets).map(c=>yv(c,r,o)),s=await Promise.all(a),l=[];return s.forEach(c=>l.push(...c)),l})(e,n),t);return i.length?i.map(r=>{const o=r.parentStyleSheet&&r.parentStyleSheet.href&&new URL(r.parentStyleSheet.href),a=o?o.origin+(c=>c.pathname.split("/").slice(0,-1).join("/"))(o)+"/":"",s=r.style.getPropertyValue("src").match(/url\("?(.*?)"?\)/)[1],l=Array.from(r.style).filter(c=>c!="src").reduce((c,d)=>c+=d+":"+sy(r,d)+";","");return[/^http/.test(s)?s:a+s,l]}):[]},hg=new Map,mg=new Map;var ly=async(t="",e)=>{if(!t.length)return;let{color:n,imageWidth:i=300,imageHeight:r=150,paddingTop:o=0,paddingRight:a=Ka,paddingBottom:s=0,paddingLeft:l=Ka,fontFamily:c,fontSize:d,pixelRatio:u=1,willRequest:p,outline:h,blur:$,styleNonce:g}=e,f=1,x="";d>1e3&&Oa()&&(f=d/1e3,x=`transform-origin:0 0;transform:scale(${f})`);const v=u/f,w=(i+l+a)*u,T=(r+s+o)*u,I=await(async(y,st,G)=>{if(hg.get(y))return;let k=mg.get(y);if(!k){const rt=await xv(y,st,G);if(!rt.length)return void hg.set(y,!0);const gt=[];for(const[ct,V]of rt){const N=await fetch(ct).then(et=>et.blob()),kt=!(H=N.type)||/woff2/.test(H)?"woff2":/woff/.test(H)?"woff":/ttf|truetype/.test(H)?"truetype":/otf|opentype/.test(H)?"opentype":/svg/.test(H)?"svg":"woff2",bt=await gv(N);gt.push(`@font-face { src:url(${bt}) format('${kt}');${V};font-display:block; }`)}k=gt.join(""),mg.set(y,k)}var H;return k})(c,p,g);let M="";I&&(M=`<style${g?` nonce="${g}"`:""}>${I}</style>`);const F=t.replace(/%/g,"%25").replace(/#/g,"%23").replace(/&nbsp;/g," ").replace(/&(?!#\d{4};|[a-z]+;)/gi,"&amp;").replace(/<br>|\n/g,"<br/>"),C=`top:${o*v}px;right:${a*v}px;bottom:${s*v}px;left:${l*v}px`;let z=n,j="",A="";if(h||$){const y=Ir(n);h&&(z=[0,0,0,0],j=`-webkit-text-stroke: ${2*h*v}px ${y}`),$&&(ka()?A=`filter:blur(${$*v*.4}px)`:(z=[0,0,0,0],A=`text-shadow: 0 0 ${$*v}px ${y}`))}return((y,{safariCacheKey:st="*"}={})=>new Promise((G,k)=>{const H=new Image;H.onerror=()=>k(new Error("Failed to load SVG")),H.onload=()=>{if(!ka()||!y.includes("@font-face")||lg.has(st))return G(H);ry(H).then(()=>{lg.set(st,!0),G(H)})},H.src="data:image/svg+xml,"+y}))(`<svg xmlns="http://www.w3.org/2000/svg" width="${w}" height="${T}" viewBox="0 0 ${w} ${T}"><foreignObject x="0" y="0" width="${w}" height="${T}"><div xmlns="http://www.w3.org/1999/xhtml">${M}<pre contenteditable="true" spellcheck="false" style="position:absolute;${C};${l0({...e,color:z,fontSize:d},v)};${c0(t,e,v)};${x};${j};${A}">${F}</pre></div></foreignObject></svg>`,{safariCacheKey:c})};const Ii=t=>{const e={...t};return L2(e)},gg=(t,e={})=>{const n=fr(t);let i,r;const o=e.width||e.rx,a=e.height||e.ry;if(o&&a)return io(e);if(o||a){i=parseFloat(o||Number.MAX_SAFE_INTEGER),r=parseFloat(a||Number.MAX_SAFE_INTEGER);const s=Math.min(i,r);He(o)||He(a)?(i=s+"%",r=s*n+"%"):(i=s,r=s)}else i="10%",r=10*n+"%";return{[(e.width?"width":e.rx?"rx":void 0)||"width"]:i,[(e.width?"height":e.rx?"ry":void 0)||"height"]:r}},$g=(t,e={})=>{return{width:void 0,height:void 0,...e,aspectRatio:1,backgroundImage:(n=iy(t),"data:image/svg+xml,"+n.replace("<","%3C").replace(">","%3E"))};var n},fg=(t,e={})=>({backgroundColor:[0,0,0,0],...dr(e)?{}:{width:void 0,height:void 0,aspectRatio:void 0},...e,backgroundImage:He(t)?t:ec(t)?URL.createObjectURL(t):t}),yg=(t,e)=>{let n;if(He(t)||ec(t)){const i={...gg(e),backgroundSize:"contain"};n=Zu(t)?$g(t,i):fg(t,i)}else if(t.src){const i=gg(e,t.shape||t),r={...t.shape,...i};if(t.width&&t.height&&!Ae(r,"aspectRatio")){const o=Ph(i,"width",e),a=Ph(i,"height",e);r.aspectRatio=ga(o,a)}r.backgroundSize||t.shape||t.width&&t.height||(r.backgroundSize="contain"),n=Zu(t.src)?$g(t.src,r):fg(t.src,r)}else t.shape&&(n=Ii(t.shape));return Ae(n,"backgroundImage")&&(Ae(n,"backgroundColor")||(n.backgroundColor=[0,0,0,0]),Ae(n,"disableStyle")||(n.disableStyle=["cornerRadius","backgroundColor","strokeColor","strokeWidth"])),e?ji(n,e):n},ms=t=>ut(t.x1,t.y1),gs=t=>ut(t.x2,t.y2),tr=t=>Ae(t,"text"),Xu=t=>tr(t)&&!(s1(t)||Ae(t,"width")),zu=t=>tr(t)&&(s1(t)||Ae(t,"width")),Ho=t=>!tr(t)&&vv(t),dr=t=>Ae(t,"rx"),$r=t=>Ae(t,"x1"),Qi=t=>Ae(t,"points"),ps=t=>tr(t)&&t.isEditing,mu=t=>!Ae(t,"opacity")||t.opacity>0,Fa=t=>t.isSelected,Vp=t=>t.isEditing,fo=t=>t._isDraft,pl=t=>Ae(t,"width")&&Ae(t,"height"),cy=t=>{const e=Ae(t,"right"),n=Ae(t,"bottom");return e||n},s1=t=>(Ae(t,"x")||Ae(t,"left"))&&Ae(t,"right")||(Ae(t,"y")||Ae(t,"top"))&&Ae(t,"bottom"),vv=t=>pl(t)||s1(t),vh=t=>(t._isDraft=!0,t),bg=t=>(t._isDraft=!1,t),wh=(t,e)=>t.disableStyle!==!0&&(!Ei(t.disableStyle)||!e||!t.disableStyle.includes(e)),Aa=t=>t.disableSelect!==!0,gu=t=>t.disableRemove!==!0,xg=t=>t.disableDuplicate!==!0&&gl(t),wv=t=>!t.disableFlip&&!fo(t)&&!cy(t)&&(e=>Ae(e,"backgroundImage")||Ae(e,"text"))(t),Hl=(t,e)=>!!tr(t)&&t.disableInput!==!0&&(Un(t.disableInput)?t.disableInput(e??t.text):e||!0),sl=(t,e)=>t.disableTextLayout!==!0&&(!Ei(t.disableTextLayout)||!e||!t.disableTextLayout.includes(e)),Np=t=>dy(t)&&t.points.length>3,dy=t=>!!Qi(t)&&t.disableAddPoints!==void 0&&t.disableAddPoints!==!0,Sh=t=>t.disableManipulate!==!0&&!fo(t)&&!cy(t),gl=t=>Sh(t)&&t.disableMove!==!0,kh=t=>(delete t.left,delete t.right,delete t.top,delete t.bottom,t),vg=t=>(delete t.rotation,t),wg=t=>(t.strokeWidth=t.strokeWidth||1,t.strokeColor=t.strokeColor||[0,0,0],t),Sg=t=>(t.backgroundColor=t.backgroundColor?t.backgroundColor:t.strokeWidth||t.backgroundImage?void 0:[0,0,0],t),kg=t=>{let e=t.text;e=e.replace(/&(#[0-9]+|[a-z]+);/gi,(n,i)=>`___${i}___`),e=e.replace(/&/,"&amp;"),t.text=e.replace(/___(#[0-9]+|[a-z]+)___/gi,(n,i)=>`&${i};`)},Ch=t=>{if(!t.textShadow)return t;const[e,n,i,r]=t.textShadow;return t.textShadowX=e,t.textShadowY=n,t.textShadowBlur=i,t.textShadowColor=r,delete t.textShadow,t},Th=t=>{if(!t.textOutline)return t;const[e,n]=t.textOutline;t.textOutlineWidth=e,t.textOutlineColor=n,delete t.textOutline},Sv=t=>(t.fontSize=t.fontSize||"4%",t.fontFamily=t.fontFamily||"sans-serif",t.fontWeight=t.fontWeight||"normal",t.fontStyle=t.fontStyle||"normal",t.fontVariant=t.fontVariant||"normal",t.lineHeight=t.lineHeight||"120%",t.color=t.color||[0,0,0],t.format=t.format==="html"?"html":"text",Ch(t),Th(t),t.format==="html"?kg(t):(e=>{kg(e);let n=e.text;n=n.replace(/</g,"&gt;"),n=n.replace(/>/g,"&lt;"),e.text=n})(t),Xu(t)?kv(t):Cv(t)),kv=t=>(t.disableNewline!==!1&&(delete t.textAlign,t.text=t.text.replace(/\n/g," ")),kh(t)),Cv=t=>(t.textAlign=t.textAlign||"left",t),uy=t=>((e=>{He(e.id)||(e.id=la()),Ae(e,"rotation")||(e.rotation=0),Ae(e,"opacity")||(e.opacity=1),Ae(e,"disableErase")||(e.disableErase=!0)})(t),tr(t)?Sv(t):Ho(t)?(e=>{e.cornerRadius=e.cornerRadius||0,e.strokeWidth=e.strokeWidth||0,e.strokeColor=e.strokeColor||[0,0,0],Sg(e)})(t):Qi(t)?(e=>{wg(e),vg(e),Ae(e,"pathClose")||(e.disableResize=!0,Ae(e,"disableMove")||(e.disableMove=!0)),kh(e)})(t):$r(t)?(e=>{wg(e),e.lineStart=e.lineStart||void 0,e.lineEnd=e.lineEnd||void 0,vg(e),kh(e)})(t):dr(t)&&(e=>{e.strokeWidth=e.strokeWidth||0,e.strokeColor=e.strokeColor||[0,0,0],Sg(e)})(t),t),Tv=t=>tr(t)?"text":Ho(t)?"rectangle":Qi(t)?"path":$r(t)?"line":dr(t)?"ellipse":void 0,Yu=(t,e)=>parseFloat(t)/100*e,Mv=new RegExp(/^x|left|right|^width|rx|fontSize|eraseRadius|feather|cornerRadius|strokeWidth|strokeDash/,"i"),Pv=new RegExp(/^y|top|bottom|^height|ry/,"i"),d0=(t,e,{width:n,height:i})=>{if(Array.isArray(e))return e.map(o=>(Gs(o)&&py(o,{width:n,height:i}),He(o)&&(o=d0(t,o,{width:n,height:i})),o));if(typeof e!="string"||!e.endsWith("%"))return e;const r=parseFloat(e)/100;return Mv.test(t)?gn(n*r,6):Pv.test(t)?gn(i*r,6):e},Rv=d0,Iv=["lineHeight","textOutlineWidth","textShadowX","textShadowY","textShadowBlur"],py=(t,e)=>{Object.entries(t).map(([n,i])=>{t[n]=d0(n,i,e)}),t.text&&Iv.filter(n=>He(t[n])).forEach(n=>{var i,r;t[n]=(i=t[n],r=t.fontSize,Math.round(r*(parseFloat(i)/100)))})},ji=(t,e)=>(py(t,e),gy(t,e),t),Mh=(t,e)=>{let n;return/^x|width|rx|fontSize|strokeWidth|cornerRadius/.test(t)?n=e.width:/^y|height|ry/.test(t)&&(n=e.height),n},Ph=(t,e,n)=>Array.isArray(t[e])?t[e].map(i=>Object.entries(i).reduce((r,[o,a])=>(r[o]=He(a)?Yu(a,Mh(o,n)):a,r),{})):He(t[e])?Yu(t[e],Mh(e,n)):t[e],Kl=(t,e,n)=>e.reduce((i,r)=>{const o=Ph(t,r,n);return i[r]=o,i},{}),Da=(t,e,n)=>(Object.keys(e).forEach(i=>((r,o,a,s)=>{if(!He(r[o]))return r[o]=a,r;const l=Mh(o,s);return r[o]=l===void 0?a:Gr(a,l),r})(t,i,e[i],n)),t),hy=(t,e)=>{const n=t.filter(i=>i.x<0||i.y<0||i.x1<0||i.y1<0).reduce((i,r)=>{const[o,a,s,l]=(c=>{const d=Ds(),u=c.strokeWidth||0;if(Ho(c))d.x=c.x-.5*u,d.y=c.y-.5*u,d.width=c.width+u,d.height=c.height+u;else if($r(c)){const{x1:p,y1:h,x2:$,y2:g}=c,f=Math.abs(Math.min(p,$)),x=Math.abs(Math.max(p,$)),v=Math.abs(Math.min(h,g)),w=Math.abs(Math.min(h,g));d.x=f+.5*u,d.y=x+.5*u,d.width=x-f+u,d.height=w-v+u}else dr(c)&&(d.x=c.x-c.rx+.5*u,d.y=c.y-c.ry+.5*u,d.width=2*c.rx+u,d.height=2*c.ry+u);return d&&Ae(c,"rotation")&&Rr(d,c.rotation),bl(d)})(r);return i.top=Math.min(o,i.top),i.left=Math.min(l,i.left),i.bottom=Math.max(s,i.bottom),i.right=Math.max(a,i.right),i},{top:0,right:0,bottom:0,left:0});return n.right>0&&(n.right-=e.width),n.bottom>0&&(n.bottom-=e.height),n},my=(t,e,n)=>{const i=Ii(t);ji(i,e);const r=n(i);return Array.isArray(r)?r:[r]},gy=(t,e)=>{if(Ae(t,"left")&&(t.x=t.left),Ae(t,"right")&&!He(t.right)){const n=e.width-t.right;Ae(t,"left")?(t.x=t.left,t.width=Math.max(0,n-t.left)):Ae(t,"width")&&(t.x=n-t.width)}if(Ae(t,"top")&&(t.y=t.top),Ae(t,"bottom")&&!He(t.bottom)){const n=e.height-t.bottom;Ae(t,"top")?(t.y=t.top,t.height=Math.max(0,n-t.top)):Ae(t,"height")&&(t.y=n-t.height)}return t},$y=(t,e)=>(Qi(t)&&t.points.filter(n=>Ne(n.x)).forEach(n=>{n.x*=e,n.y*=e}),$r(t)&&Ne(t.x1)&&(t.x1*=e,t.y1*=e,t.x2*=e,t.y2*=e),Ne(t.x)&&Ne(t.y)&&(t.x*=e,t.y*=e),Ne(t.width)&&Ne(t.height)&&(t.width*=e,t.height*=e),Ne(t.rx)&&Ne(t.ry)&&(t.rx*=e,t.ry*=e),(n=>Ne(n.strokeWidth)&&n.strokeWidth>0)(t)&&(t.strokeWidth*=e),tr(t)&&(t._scale=e,Ne(t.fontSize)&&(t.fontSize*=e),Ne(t.lineHeight)&&(t.lineHeight*=e),Ne(t.width)&&!Ne(t.height)&&(t.width*=e)),Ae(t,"cornerRadius")&&Ne(t.cornerRadius)&&(t.cornerRadius*=e),t),fy=t=>{if(Ho(t))return ut(t.x+.5*t.width,t.y+.5*t.height);if(dr(t))return ut(t.x,t.y);if(t.text){if(zu(t)){const n=t.height||no(t.text,t).height;return ut(t.x+.5*t.width,t.y+.5*n)}const e=no(t.text,t);return ut(t.x+.5*e.width,t.y+.5*e.height)}return Qi(t)?oa(t.points):$r(t)?oa([ms(t),gs(t)]):void 0};var gd=t=>/canvas/i.test(t.nodeName),Ev=(t,e)=>new Promise((n,i)=>{let r=t,o=!1;const a=()=>{o||(o=!0,Un(e)&&Promise.resolve().then(()=>e(Fi(r.naturalWidth,r.naturalHeight))))};if(r.src||(r=new Image,He(t)&&new URL(t,location.href).origin!==location.origin&&(r.crossOrigin="anonymous"),r.src=He(t)?t:URL.createObjectURL(t)),r.complete)return a(),n(r);Un(e)&&Y2(r).then(a).catch(i),r.onload=()=>{a(),n(r)},r.onerror=()=>i(new Error("Failed to load image"))});const Cg=new Map([]),u0=(t,e={})=>new Promise((n,i)=>{const{onMetadata:r=pe,onLoad:o=n,onError:a=i,onComplete:s=pe}=e;let l=Cg.get(t);if(l||(l={loading:!1,complete:!1,error:!1,image:void 0,size:void 0,bus:Ja()},Cg.set(t,l)),l.bus.sub("meta",r),l.bus.sub("load",o),l.bus.sub("error",a),l.bus.sub("complete",s),gd(t)){const c=t,d=c.cloneNode();l.complete=!0,l.image=d,l.size=Kc(c)}if(l.complete)return l.bus.pub("meta",{size:l.size}),l.error?l.bus.pub("error",l.error):l.bus.pub("load",l.image),l.bus.pub("complete"),void(l.bus=Ja());l.loading||(l.loading=!0,Ev(t,c=>{l.size=c,l.bus.pub("meta",{size:c})}).then(c=>{l.image=c,l.bus.pub("load",c)}).catch(c=>{l.error=c,l.bus.pub("error",c)}).finally(()=>{l.complete=!0,l.loading=!1,l.bus.pub("complete"),l.bus=Ja()}))}),Av=(t,e,n,i)=>t.drawImage(e,n.x,n.x,n.width,n.height,i.x,i.y,i.width,i.height);var yy=async(t,e,n,i,r=Av,o)=>{t.save(),t.clip(),await r(t,e,n,i,o),t.restore()};const qu=(t,e,n,i,r)=>{const o=An(t);if(i){const s=aa(ur(i),gn);return s.x*=n.width,s.width*=n.width,s.y*=n.height,s.height*=n.height,{srcRect:s,destRect:o}}const a=Ui(0,0,n.width,n.height);if(e==="contain"){const s=oo(t,fr(a));o.width=s.width,o.height=s.height,r?(o.x+=r.x,o.y+=r.y):(o.x+=s.x,o.y+=s.y)}else if(e==="cover"){const s=fs(o,a.width/a.height);o.width=s.width,o.height=s.height,r?(o.x+=r.x,o.y+=r.y):(o.x+=s.x,o.y+=s.y)}else e?(o.width=e.width,o.height=e.height,r&&(o.x+=r.x,o.y+=r.y)):r&&(o.width=n.width,o.height=n.height,o.x+=r.x,o.y+=r.y);return{srcRect:a,destRect:o}},Hp=(t,e)=>(e.cornerRadius>0?((n,i,r,o,a,s)=>{o<2*s&&(s=o/2),a<2*s&&(s=a/2),n.beginPath(),n.moveTo(i+s,r),n.arcTo(i+o,r,i+o,r+a,s),n.arcTo(i+o,r+a,i,r+a,s),n.arcTo(i,r+a,i,r,s),n.arcTo(i,r,i+o,r,s),n.closePath()})(t,e.x,e.y,e.width,e.height,e.cornerRadius):t.rect(e.x,e.y,e.width,e.height),t),Tg=(t,e)=>(e.backgroundColor&&t.fill(),t),Mg=(t,e)=>(e.strokeWidth&&t.stroke(),t);var p0=async(t,e,n={})=>{const{drawImage:i}=n;if(t.lineWidth=e.strokeWidth?e.strokeWidth:1,t.strokeStyle=e.strokeColor?Ir(e.strokeColor):"none",t.fillStyle=e.backgroundColor?Ir(e.backgroundColor):"none",t.globalAlpha=e.opacity,e.backgroundImage){let r;if(r=gd(e.backgroundImage)?e.backgroundImage:await u0(e.backgroundImage),Hp(t,e),Tg(t,e),e.backgroundRepeat==="repeat"){const o=e.backgroundPosition||{x:0,y:0},{srcRect:a,destRect:s}=qu(e,e.backgroundSize||Kc(r),Kc(r),e.backgroundCorners,{x:0,y:0}),l=document.createElement("canvas");l.width=s.width,l.height=s.height;const c=l.getContext("2d",{willReadFrequently:!1,desynchronized:!0});await i(c,r,a,{...s,x:0,y:0});const d=t.createPattern(l,"repeat");t.fillStyle=d,t.save(),t.beginPath(),t.rect(e.x+o.x,e.y+o.y,e.width-o.x,e.height-o.y),t.clip(),t.translate(s.x+o.x,s.y+o.y),t.fill(),or(l),t.restore()}else{const{srcRect:o,destRect:a}=qu(e,e.backgroundSize,Kc(r),e.backgroundCorners,e.backgroundPosition);await yy(t,r,o,a,i,{feather:e.feather})}return t.beginPath(),Hp(t,e),Mg(t,e),[]}return Hp(t,e),Tg(t,e),Mg(t,e),[]},h0=async(t,e,n={})=>new Promise(async(i,r)=>{const{drawImage:o}=n;if(t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?Ir(e.strokeColor):"none",t.fillStyle=e.backgroundColor?Ir(e.backgroundColor):"none",t.globalAlpha=e.opacity,t.ellipse(e.x,e.y,e.rx,e.ry,0,0,2*Math.PI),e.backgroundColor&&t.fill(),e.backgroundImage){let a;try{a=await u0(e.backgroundImage)}catch(d){r(d)}const s=Ui(e.x-e.rx,e.y-e.ry,2*e.rx,2*e.ry),{srcRect:l,destRect:c}=qu(s,e.backgroundSize,Kc(a),e.backgroundCorners,e.backgroundPosition);await yy(t,a,l,c,o),e.strokeWidth&&t.stroke(),i([])}else e.strokeWidth&&t.stroke(),i([])}),Lv=async(t,e,n)=>{const i=Ne(e.width)?Math.floor(e.width):void 0,r=Ne(e.height)?Math.floor(e.height):void 0,o=i&&r?ts(e):no(e.text,{...e,width:i,height:r}),a={x:e.x,y:e.y,width:o.width,height:o.height};if(p0(t,{...e,...a,options:n}),!e.text.length)return[];const{textOutlineWidth:s=0,textShadowX:l=0,textShadowY:c=0,textShadowBlur:d=0,textShadowColor:u,outline:p,blur:h,...$}=e,g=!!e.height;if(g&&(t.rect(a.x,a.y,a.width,a.height),t.save(),t.clip()),l||c||d){t.save(),t.translate(l,c);const f={...a};g||(f.height+=Ka+d),await jp(t,f,{...e,width:i,height:r},{...n,paddingLeft:Ka+d,paddingRight:Ka+d,paddingTop:d,paddingBottom:d+(g?-1*c:e.fontSize),shapeExtendedProps:{color:u,blur:d}}),t.restore()}if(s){const f={...a};g||(f.height+=Ka+s),await jp(t,f,{...e,width:i,height:r},{...n,paddingLeft:Ka+s,paddingRight:Ka+s,paddingTop:s,paddingBottom:s+g?0:e.fontSize,shapeExtendedProps:{color:e.textOutlineColor,outline:s}})}return g&&t.restore(),await jp(t,a,{...$,width:i,height:r},{...n,paddingLeft:Ka,paddingRight:Ka,paddingTop:0,paddingBottom:g?0:e.fontSize}),[]};const jp=async(t,e,n,i)=>{const{willRequest:r,shapeExtendedProps:o,paddingLeft:a,paddingRight:s,paddingTop:l,paddingBottom:c,styleNonce:d}=i,u=Ne(n.width)?Math.floor(e.width):void 0,p=Ne(n.height)?Math.floor(e.height):void 0,h=Math.ceil(e.width),$=Math.ceil(e.height),g=await ly(n.text,{...n,...o,...e,width:u,height:p,paddingLeft:a,paddingRight:s,paddingTop:l,paddingBottom:c,imageWidth:h,imageHeight:$,willRequest:r,styleNonce:d});t.drawImage(g,n.x-a,n.y-l,g.width,g.height)};var Fv=async(t,e)=>new Promise(async n=>{t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?Ir(e.strokeColor):"none",t.globalAlpha=e.opacity,e.bitmap&&(t.lineCap=e.strokeCap,t.lineJoin=e.strokeJoin,t.setLineDash(e.strokeDash||[]));let i=ms(e),r=gs(e);t.moveTo(i.x,i.y),t.lineTo(r.x,r.y),e.strokeWidth&&t.stroke(),n([])}),Rh=async(t,e)=>new Promise((n,i)=>{if(e.bitmap&&e.points.length===1)return void h0(t,{x:e.points[0].x,y:e.points[0].y,rx:.5*e.strokeWidth,ry:.5*e.strokeWidth,backgroundColor:e.strokeColor}).then(()=>n([]));t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?Ir(e.strokeColor):"none",t.fillStyle=e.backgroundColor?Ir(e.backgroundColor):"none",t.globalAlpha=e.opacity;const{points:r}=e;e.bitmap&&(t.lineCap=e.strokeCap,t.lineJoin=e.strokeJoin,t.setLineDash(e.strokeDash||[])),e.pathClose&&t.beginPath(),t.moveTo(r[0].x,r[0].y);const o=r.length;for(let a=1;a<o;a++)t.lineTo(r[a].x,r[a].y);e.pathClose&&t.closePath(),e.strokeWidth&&t.stroke(),e.backgroundColor&&t.fill(),n([])}),by=(t,e,n,i)=>((e||n)&&(t.translate(i.x,i.y),t.scale(e?-1:1,n?-1:1),t.translate(-i.x,-i.y)),t);const zv=async(t,e,n)=>{t.globalCompositeOperation=e.drawMode==="subtract"?"destination-out":"source-over";const i=fy(e);let r;if(a0(t,e.rotation,i),by(t,e.flipX,e.flipY,i),Ho(e)?r=p0:dr(e)?r=h0:$r(e)?r=Fv:Qi(e)?r=Rh:tr(e)&&(r=Lv),r){const o=await r(t,e,n);return o.length?[e,...await xy(t,o,n)]:[]}return[]};var xy=async(t,e,n)=>{let i=[];for(const r of e)t.save(),t.beginPath(),i=[...i,...await zv(t,r,n)],t.restore();return i},m0=async(t,e={})=>{const{shapes:n=[],contextBounds:i=t,transform:r=pe,drawImage:o,willRequest:a,styleNonce:s,canvasMemoryLimit:l,computeShape:c=ai,preprocessShape:d=ai}=e;if(!n.length)return t;const u=fi("canvas");u.width=i.width,u.height=i.height;const p=u.getContext("2d",{willReadFrequently:!0});p.putImageData(t,i.x||0,i.y||0);const h=n.map(Ii).map(c).map(d).flat().filter(Boolean);r(p),await xy(p,h,{drawImage:o,canvasMemoryLimit:l,willRequest:a,styleNonce:s});const $=p.getImageData(0,0,u.width,u.height);return or(u),$},Dv=async(t,e={})=>{const{backgroundColor:n,backgroundImage:i}=e,r=!(!n||n&&n[3]===0);if(!i&&!r)return t;const o=fi("canvas");o.width=t.width,o.height=t.height;const a=o.getContext("2d",{willReadFrequently:!0});if(a.putImageData(t,0,0),a.globalCompositeOperation="destination-over",r&&(a.fillStyle=Ir(n),a.fillRect(0,0,o.width,o.height)),i){let l;l=gd(i)?i:await u0(i);const{srcRect:c,destRect:d}=qu({x:0,y:0,width:t.width,height:t.height},"cover",{width:l.width,height:l.height});a.drawImage(l,c.x,c.y,c.width,c.height,d.x,d.y,d.width,d.height)}const s=a.getImageData(0,0,o.width,o.height);return or(o),s},g0=t=>t.length?t.reduce((e,n)=>((i,r)=>{const o=new Array(20);return o[0]=i[0]*r[0]+i[1]*r[5]+i[2]*r[10]+i[3]*r[15],o[1]=i[0]*r[1]+i[1]*r[6]+i[2]*r[11]+i[3]*r[16],o[2]=i[0]*r[2]+i[1]*r[7]+i[2]*r[12]+i[3]*r[17],o[3]=i[0]*r[3]+i[1]*r[8]+i[2]*r[13]+i[3]*r[18],o[4]=i[0]*r[4]+i[1]*r[9]+i[2]*r[14]+i[3]*r[19]+i[4],o[5]=i[5]*r[0]+i[6]*r[5]+i[7]*r[10]+i[8]*r[15],o[6]=i[5]*r[1]+i[6]*r[6]+i[7]*r[11]+i[8]*r[16],o[7]=i[5]*r[2]+i[6]*r[7]+i[7]*r[12]+i[8]*r[17],o[8]=i[5]*r[3]+i[6]*r[8]+i[7]*r[13]+i[8]*r[18],o[9]=i[5]*r[4]+i[6]*r[9]+i[7]*r[14]+i[8]*r[19]+i[9],o[10]=i[10]*r[0]+i[11]*r[5]+i[12]*r[10]+i[13]*r[15],o[11]=i[10]*r[1]+i[11]*r[6]+i[12]*r[11]+i[13]*r[16],o[12]=i[10]*r[2]+i[11]*r[7]+i[12]*r[12]+i[13]*r[17],o[13]=i[10]*r[3]+i[11]*r[8]+i[12]*r[13]+i[13]*r[18],o[14]=i[10]*r[4]+i[11]*r[9]+i[12]*r[14]+i[13]*r[19]+i[14],o[15]=i[15]*r[0]+i[16]*r[5]+i[17]*r[10]+i[18]*r[15],o[16]=i[15]*r[1]+i[16]*r[6]+i[17]*r[11]+i[18]*r[16],o[17]=i[15]*r[2]+i[16]*r[7]+i[17]*r[12]+i[18]*r[17],o[18]=i[15]*r[3]+i[16]*r[8]+i[17]*r[13]+i[18]*r[18],o[19]=i[15]*r[4]+i[16]*r[9]+i[17]*r[14]+i[18]*r[19]+i[19],o})([...e],n),t.shift()):[],vy=(t,e)=>{const n=t.width*t.height,i=e.reduce((o,a)=>(a.width>o.width&&a.height>o.height&&(o.width=a.width,o.height=a.height),o),{width:0,height:0}),r=i.width*i.height;return((o,a=2)=>Math.round(o*a)/a)(Math.max(.5,.5+(1-r/n)/2),5)};function Ke(){}const wy=t=>t;function Oi(t,e){for(const n in e)t[n]=e[n];return t}function Sy(t){return t()}function Pg(){return Object.create(null)}function Gn(t){t.forEach(Sy)}function Cn(t){return typeof t=="function"}function dn(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let $u;function Rg(t,e){return $u||($u=document.createElement("a")),$u.href=e,t===$u.href}function Xr(t,...e){if(t==null)return Ke;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Ba(t){let e;return Xr(t,n=>e=n)(),e}function D(t,e,n){t.$$.on_destroy.push(Xr(e,n))}function yr(t,e,n,i){if(t){const r=ky(t,e,n,i);return t[0](r)}}function ky(t,e,n,i){return t[1]&&i?Oi(n.ctx.slice(),t[1](i(e))):n.ctx}function br(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const o=[],a=Math.max(e.dirty.length,r.length);for(let s=0;s<a;s+=1)o[s]=e.dirty[s]|r[s];return o}return e.dirty|r}return e.dirty}function xr(t,e,n,i,r,o){if(r){const a=ky(e,n,i,o);t.p(a,r)}}function vr(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function ad(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function Ig(t,e){const n={};e=new Set(e);for(const i in t)e.has(i)||i[0]==="$"||(n[i]=t[i]);return n}function It(t,e,n){return t.set(n),e}function Tn(t){return t&&Cn(t.destroy)?t.destroy:Ke}const Cy=typeof window<"u";let Ty=Cy?()=>window.performance.now():()=>Date.now(),$0=Cy?t=>requestAnimationFrame(t):Ke;const Jl=new Set;function My(t){Jl.forEach(e=>{e.c(t)||(Jl.delete(e),e.f())}),Jl.size!==0&&$0(My)}function f0(t){let e;return Jl.size===0&&$0(My),{promise:new Promise(n=>{Jl.add(e={c:t,f:n})}),abort(){Jl.delete(e)}}}function At(t,e){t.appendChild(e)}function Py(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Bv(t){const e=$t("style");return function(n,i){At(n.head||n,i),i.sheet}(Py(t),e),e.sheet}function tt(t,e,n){t.insertBefore(e,n||null)}function J(t){t.parentNode.removeChild(t)}function $t(t){return document.createElement(t)}function Er(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Ti(t){return document.createTextNode(t)}function ce(){return Ti(" ")}function Di(){return Ti("")}function Mt(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function Ov(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Wv(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function S(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Eg(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i==="style"?t.style.cssText=e[i]:i==="__value"?t.value=t[i]=e[i]:n[i]&&n[i].set?t[i]=e[i]:S(t,i,e[i])}function Ag(t,e){Object.keys(e).forEach(n=>{(function(i,r,o){r in i?i[r]=typeof i[r]=="boolean"&&o===""||o:S(i,r,o)})(t,n,e[n])})}function Yi(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Lg(t,e){t.value=e??""}function Tt(t,e,n,i){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function Ry(t,e,{bubbles:n=!1,cancelable:i=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,i,e),r}class y0{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,i=null){this.e||(this.is_svg?this.e=Er(n.nodeName):this.e=$t(n.nodeName),this.t=n,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)tt(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(J)}}function Ku(t,e){return new t(e)}const Ju=new Map;let sd,Du=0;function Fg(t,e,n,i,r,o,a,s=0){const l=16.666/i;let c=`{
`;for(let f=0;f<=1;f+=l){const x=e+(n-e)*o(f);c+=100*f+`%{${a(x,1-x)}}
`}const d=c+`100% {${a(n,1-n)}}
}`,u=`__svelte_${function(f){let x=5381,v=f.length;for(;v--;)x=(x<<5)-x^f.charCodeAt(v);return x>>>0}(d)}_${s}`,p=Py(t),{stylesheet:h,rules:$}=Ju.get(p)||function(f,x){const v={stylesheet:Bv(x),rules:{}};return Ju.set(f,v),v}(p,t);$[u]||($[u]=!0,h.insertRule(`@keyframes ${u} ${d}`,h.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?g+", ":""}${u} ${i}ms linear ${r}ms 1 both`,Du+=1,u}function _v(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),r=n.length-i.length;r&&(t.style.animation=i.join(", "),Du-=r,Du||$0(()=>{Du||(Ju.forEach(o=>{const{ownerNode:a}=o.stylesheet;a&&J(a)}),Ju.clear())}))}function Qc(t){sd=t}function vl(){if(!sd)throw new Error("Function called outside component initialization");return sd}function bs(t){vl().$$.on_mount.push(t)}function Iy(t){vl().$$.after_update.push(t)}function Xo(t){vl().$$.on_destroy.push(t)}function Ta(){const t=vl();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=Ry(e,n,{cancelable:i});return r.slice().forEach(a=>{a.call(t,o)}),!o.defaultPrevented}return!0}}function $o(t,e){return vl().$$.context.set(t,e),e}function mi(t){return vl().$$.context.get(t)}function qr(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const Gc=[],Hn=[],Bu=[],Ih=[],Ey=Promise.resolve();let Eh=!1;function Ay(){Eh||(Eh=!0,Ey.then(E))}function Ly(){return Ay(),Ey}function xl(t){Bu.push(t)}function Go(t){Ih.push(t)}const Up=new Set;let Oc,fu=0;function E(){const t=sd;do{for(;fu<Gc.length;){const e=Gc[fu];fu++,Qc(e),Vv(e.$$)}for(Qc(null),Gc.length=0,fu=0;Hn.length;)Hn.pop()();for(let e=0;e<Bu.length;e+=1){const n=Bu[e];Up.has(n)||(Up.add(n),n())}Bu.length=0}while(Gc.length);for(;Ih.length;)Ih.pop()();Eh=!1,Up.clear(),Qc(t)}function Vv(t){if(t.fragment!==null){t.update(),Gn(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(xl)}}function Gp(t,e,n){t.dispatchEvent(Ry(`${e?"intro":"outro"}${n}`))}const Ou=new Set;let $s;function Le(){$s={r:0,c:[],p:$s}}function Fe(){$s.r||Gn($s.c),$s=$s.p}function R(t,e){t&&t.i&&(Ou.delete(t),t.i(e))}function B(t,e,n,i){if(t&&t.o){if(Ou.has(t))return;Ou.add(t),$s.c.push(()=>{Ou.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const Nv={duration:0};function zg(t,e,n,i){let r=e(t,n),o=i?0:1,a=null,s=null,l=null;function c(){l&&_v(t,l)}function d(p,h){const $=p.b-o;return h*=Math.abs($),{a:o,b:p.b,d:$,duration:h,start:p.start,end:p.start+h,group:p.group}}function u(p){const{delay:h=0,duration:$=300,easing:g=wy,tick:f=Ke,css:x}=r||Nv,v={start:Ty()+h,b:p};p||(v.group=$s,$s.r+=1),a||s?s=v:(x&&(c(),l=Fg(t,o,p,$,h,g,x)),p&&f(0,1),a=d(v,$),xl(()=>Gp(t,p,"start")),f0(w=>{if(s&&w>s.start&&(a=d(s,$),s=null,Gp(t,a.b,"start"),x&&(c(),l=Fg(t,o,a.b,a.duration,0,g,r.css))),a){if(w>=a.end)f(o=a.b,1-o),Gp(t,a.b,"end"),s||(a.b?c():--a.group.r||Gn(a.group.c)),a=null;else if(w>=a.start){const T=w-a.start;o=a.a+a.d*g(T/a.duration),f(o,1-o)}}return!(!a&&!s)}))}return{run(p){Cn(r)?(Oc||(Oc=Promise.resolve(),Oc.then(()=>{Oc=null})),Oc).then(()=>{r=r(),u(p)}):u(p)},end(){c(),a=s=null}}}const b0=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Fy(t,e){t.d(1),e.delete(t.key)}function Zs(t,e){B(t,1,1,()=>{e.delete(t.key)})}function es(t,e,n,i,r,o,a,s,l,c,d,u){let p=t.length,h=o.length,$=p;const g={};for(;$--;)g[t[$].key]=$;const f=[],x=new Map,v=new Map;for($=h;$--;){const M=u(r,o,$),F=n(M);let C=a.get(F);C?C.p(M,e):(C=c(F,M),C.c()),x.set(F,f[$]=C),F in g&&v.set(F,Math.abs($-g[F]))}const w=new Set,T=new Set;function I(M){R(M,1),M.m(s,d),a.set(M.key,M),d=M.first,h--}for(;p&&h;){const M=f[h-1],F=t[p-1],C=M.key,z=F.key;M===F?(d=M.first,p--,h--):x.has(z)?!a.has(C)||w.has(C)?I(M):T.has(z)?p--:v.get(C)>v.get(z)?(T.add(C),I(M)):(w.add(z),p--):(l(F,a),p--)}for(;p--;){const M=t[p];x.has(M.key)||l(M,a)}for(;h;)I(f[h-1]);return f}function Lr(t,e){const n={},i={},r={$$scope:1};let o=t.length;for(;o--;){const a=t[o],s=e[o];if(s){for(const l in a)l in s||(i[l]=1);for(const l in s)r[l]||(n[l]=s[l],r[l]=1);t[o]=s}else for(const l in a)r[l]=1}for(const a in i)a in n||(n[a]=void 0);return n}function Nr(t){return typeof t=="object"&&t!==null?t:{}}function Io(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function Wt(t){t&&t.c()}function Bt(t,e,n,i){const{fragment:r,after_update:o}=t.$$;r&&r.m(e,n),i||xl(()=>{const a=t.$$.on_mount.map(Sy).filter(Cn);t.$$.on_destroy?t.$$.on_destroy.push(...a):Gn(a),t.$$.on_mount=[]}),o.forEach(xl)}function Ot(t,e){const n=t.$$;n.fragment!==null&&(Gn(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function $n(t,e,n,i,r,o,a,s=[-1]){const l=sd;Qc(t);const c=t.$$={fragment:null,ctx:[],props:o,update:Ke,not_equal:r,bound:Pg(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Pg(),dirty:s,skip_bound:!1,root:e.target||l.$$.root};a&&a(c.root);let d=!1;if(c.ctx=n?n(t,e.props||{},(u,p,...h)=>{const $=h.length?h[0]:p;return c.ctx&&r(c.ctx[u],c.ctx[u]=$)&&(!c.skip_bound&&c.bound[u]&&c.bound[u]($),d&&function(g,f){g.$$.dirty[0]===-1&&(Gc.push(g),Ay(),g.$$.dirty.fill(0)),g.$$.dirty[f/31|0]|=1<<f%31}(t,u)),p}):[],c.update(),d=!0,Gn(c.before_update),c.fragment=!!i&&i(c.ctx),e.target){if(e.hydrate){const u=function(p){return Array.from(p.childNodes)}(e.target);c.fragment&&c.fragment.l(u),u.forEach(J)}else c.fragment&&c.fragment.c();e.intro&&R(t.$$.fragment),Bt(t,e.target,e.anchor,e.customElement),E()}Qc(l)}class fn{$destroy(){Ot(this,1),this.$destroy=Ke}$on(e,n){if(!Cn(n))return Ke;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){var n;this.$$set&&(n=e,Object.keys(n).length!==0)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const jl=[];function Zl(t,e){return{subscribe:fe(t,e).subscribe}}function fe(t,e=Ke){let n;const i=new Set;function r(o){if(dn(t,o)&&(t=o,n)){const a=!jl.length;for(const s of i)s[1](),jl.push(s,t);if(a){for(let s=0;s<jl.length;s+=2)jl[s][0](jl[s+1]);jl.length=0}}}return{set:r,update:function(o){r(o(t))},subscribe:function(o,a=Ke){const s=[o,a];return i.add(s),i.size===1&&(n=e(r)||Ke),o(t),()=>{i.delete(s),i.size===0&&(n(),n=null)}}}}function Nn(t,e,n){const i=!Array.isArray(t),r=i?[t]:t,o=e.length<2;return Zl(n,a=>{let s=!1;const l=[];let c=0,d=Ke;const u=()=>{if(c)return;d();const h=e(i?l[0]:l,a);o?a(h):d=Cn(h)?h:Ke},p=r.map((h,$)=>Xr(h,g=>{l[$]=g,c&=~(1<<$),s&&u()},()=>{c|=1<<$}));return s=!0,u(),function(){Gn(p),d()}})}var zy=t=>t.reduce((e,n)=>Object.assign(e,n),{});const Ul=t=>({updateValue:t}),ra=t=>({defaultValue:t}),Dy=t=>({store:t}),yu=t=>({store:(e,n)=>Nn(...t(n))}),bu=t=>({store:(e,n)=>{const[i,r,o=()=>!1]=t(n);let a,s=!0;return Nn(i,(l,c)=>{r(l,d=>{!s&&o(a,d)||(a=d,s=!1,c(d))})})}}),Wc=t=>({store:(e,n)=>{const[i,r={},o]=t(n);let a=[];const s={},l=h=>i(h,s),c=h=>{(a.length||h.length)&&(a=h,d())},d=()=>{const h=a.map(l);o&&h.sort(o),a=[...h],p(h)};Object.entries(r).map(([h,$])=>$.subscribe(g=>{s[h]=g,g&&d()}));const{subscribe:u,set:p}=fe(e||[]);return{set:c,update:h=>c(h(a)),subscribe:u}}});var Dg=t=>{const e={},n={};return t.forEach(([i,...r])=>{const o=zy(r),a=e[i]=((l,c,d)=>{const{store:u=T=>fe(T),defaultValue:p=pe,updateValue:h}=d,$=u(p(),c,l),{subscribe:g,update:f=pe}=$;let x;const v=T=>{let I=!0;x&&x(),x=g(M=>{if(I)return I=!1;T(M),x(),x=void 0})},w=h?h(l):ai;return $.set=T=>f(I=>w(T,I,v)),$.defaultValue=p,$})(n,e,o),s={get:()=>Ba(a),set:a.set};Object.defineProperty(n,i,s)}),{stores:e,accessors:n}},Hv=[["src",Dy(()=>{let t;const{subscribe:e,set:n}=fe(),i=r=>{t!==r&&(t=r,n(t))};return{set:i,subscribe:e,update:r=>i(r(t))}})],["imageReader"],["imageWriter"],["imageScrambler"],["imageRedactionRendering",ra(()=>"pixelated")],["images",ra(()=>[])],["shapePreprocessor"],["willRequestResource"],["willRequest"],["csp"]],By=t=>t.charAt(0).toUpperCase()+t.slice(1),ld=(t,e)=>{Object.keys(e).forEach(n=>{const i=Un(e[n])?{value:e[n],writable:!1}:e[n];Object.defineProperty(t,n,i)})};const Bg=(t,e)=>{let n,i,r,o,a,s,l,c,d,u;const p=e.length;for(n=0;n<p;n++)if(i=e[n],r=e[n+1>p-1?0:n+1],o=i.x-t.x,a=i.y-t.y,s=r.x-t.x,l=r.y-t.y,c=o-s,d=a-l,u=c*a-d*o,u<-1e-5)return!1;return!0};var Og=(t,e)=>{const n=G2(e),i=ci();No(t).forEach(o=>{Zi(o,i),Bg(o,e)||n.forEach(a=>{const s=Math.atan2(a.start.y-a.end.y,a.start.x-a.end.x),l=1e4*Math.sin(Math.PI-s),c=1e4*Math.cos(Math.PI-s),d=ut(o.x+l,o.y+c),u=t0(V2(a),1e4),p=e0(Us(o,d),u);p&&Zi(i,Xi(Ve(p),o))})});const r=An(t);return Zi(r,i),!!No(r).every(o=>Bg(o,e))&&(r1(t,r),!0)},Oy=(t,e)=>{const n=No(t),i=Z2(e,5),r=Ln(t),o=[];n.forEach(l=>{const c=((u,p)=>{const h=ut(u.start.x-u.end.x,u.start.y-u.end.y),$=yo(h),g=Vr($,p);return u.end.x+=g.x,u.end.y+=g.y,u})(Us(Ve(r),Ve(l)),1e6);let d=!1;i.map(V2).forEach(u=>{const p=e0(c,u);p&&!d&&(o.push(p),d=!0)})});const a=ro(o[0],o[2])<ro(o[1],o[3])?[o[0],o[2]]:[o[1],o[3]],s=ur(a);return s.width<t.width&&(r1(t,s),!0)},Wy=(t,e,n={x:0,y:0})=>{const i=Yr(t),r=Ln(i),o=H2(i,n,r).map(s=>Zr(s,e,r)),a=ur(o);return o.map(s=>Xi(s,a))},Xl=(t,e=0,n=fr(t))=>{let i,r;if(e!==0){const o=Math.atan2(1,n),a=Math.sign(e)*e,s=a%Math.PI,l=a%sa;let c;c=s>$a&&s<sa+$a?l>$a?a:sa-l:l>$a?sa-l:a;const d=Math.min(Math.abs(t.height/Math.sin(o+c)),Math.abs(t.width/Math.cos(o-c)));i=Math.cos(o)*d,r=i/n}else i=t.width,r=i/n,r>t.height&&(r=t.height,i=r*n);return Fi(i,r)},jv=(t,e,n,i,r,o,a,s)=>{const l=io(a),c=io(s),d=gn(Math.max(e.width/c.width,e.height/c.height)),u=gn(Math.min(e.width/l.width,e.height/l.height)),p=An(e);if(u<1||d>1){const h=Ln(t),$=Ln(e),g=u<1?u:d,f=($.x+h.x)/2,x=($.y+h.y)/2,v=p.width/g,w=p.height/g;N2(p,f-.5*v,x-.5*w,v,w)}return o?(((h,$,g=0,f=ci(),x)=>{if(Ne(g)&&g!==0||f.x||f.y){const v=fr(h),w=Wy($,g,f),T=Xl($,g,v);if(!(h.width<T.width&&h.height<T.height)){const I=.5*h.width-.5*T.width,M=.5*h.height-.5*T.height;h.width>T.width&&(h.width=T.width,h.x+=I),h.height>T.height&&(h.height=T.height,h.y+=M)}Og(h,w),Oy(h,w)&&Og(h,w)}else{const v=fr(h);h.width=Math.min(h.width,$.width),h.height=Math.min(h.height,$.height),h.x=Math.max(h.x,0),h.x+h.width>$.width&&(h.x-=h.x+h.width-$.width),h.y=Math.max(h.y,0),h.y+h.height>$.height&&(h.y-=h.y+h.height-$.height);const w=Ln(h),T=oo(h,v);T.width=Math.max(x.width,T.width),T.height=Math.max(x.height,T.height),T.x=w.x-.5*T.width,T.y=w.y-.5*T.height,r1(h,T)}})(p,n,i,r,l),{crop:p}):{crop:p}},x0=(t,e,n)=>{const i=Yr(t),r=Ln(i),o=Rr(i,n,r),a=Ln(rd(ur(o))),s=Ln(e),l=Zr(s,-n,a),c=Xi(l,a),d=jo(Zi(r,c),gn);return Ui(d.x-.5*e.width,d.y-.5*e.height,e.width,e.height)},di=(t,e,n)=>Math.max(e,Math.min(t,n));const Zp=["cropLimitToImage","cropMinSize","cropMaxSize","cropAspectRatio","flipX","flipY","rotation","crop","colorMatrix","convolutionMatrix","gamma","vignette","manipulation","redaction","annotation","decoration","selection","frame","backgroundColor","backgroundImage","targetSize","metadata","trim","volume","minDuration","maxDuration","currentTime"],Ah=t=>Ei(t)?t.map(Ah):o0(t)||md(t)?t:Gs(t)?{...t}:t,_c=t=>t.map(e=>Object.entries(e).reduce((n,[i,r])=>(i.startsWith("_")||(n[i]=r),n),{})),Uv=(t,e)=>t===e;var ys=(t,e,n=Uv)=>{if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0};const Wg=(t,e,n)=>{const i=jo(Ln(t),d=>gn(d,8)),r=Yr(e),o=Ln(r),a=Rr(r,n,o),s=jo(tc(ur(a)),d=>gn(d,8)),l=Math.abs(s.x-i.x),c=Math.abs(s.y-i.y);return l<1&&c<1},Gv=(t,e,n,i,r)=>{if(!r)return[-1/0,1/0];const o=Math.max(n.width/i.width,n.height/i.height),a=Fi(i.width*o,i.height*o),s=(l=a,Math.sqrt(l.width*l.width+l.height*l.height));var l;if(s<Math.min(t.width,t.height))return[-1/0,1/0];const c=e?t.height:t.width,d=e?t.width:t.height,u=Math.acos(a.height/s),p=u-Math.acos(d/s),h=Math.asin(c/s)-u;if(Number.isNaN(p)&&Number.isNaN(h))return[-1/0,1/0];const $=Number.isNaN(p)?h:Number.isNaN(h)?p:Math.min(p,h);return[-$,$]},Zc=(t,e)=>{const{context:n,props:i}=e;return t._isFormatted||((t=uy(t))._isFormatted=!0,Object.assign(t,i)),t._isDraft||!s1(t)||t._context&&ya(n,t._context)||(gy(t,n),t._context={...n}),t},Zv=(t,e)=>(t._isFormatted||(t.disableMove=!0,t.disableSelect=!0,t.disableResize=!0,t.disableRotate=!0),Zc(t,e));var v0=[["file"],["size"],["loadState"],["processState"],["aspectRatio",yu(({size:t})=>[t,e=>e?fr(e):void 0])],["perspectiveX",ra(()=>0)],["perspectiveY",ra(()=>0)],["perspective",yu(({perspectiveX:t,perspectiveY:e})=>[[t,e],([n,i])=>({x:n,y:i})])],["rotation",ra(()=>0),Ul(t=>(e,n,i)=>{if(e===n)return e;const{loadState:r,size:o,rotationRange:a,cropMinSize:s,cropMaxSize:l,crop:c,perspective:d,cropLimitToImage:u,cropOrigin:p}=t;if(!c||!r||!r.beforeComplete)return e;const h=u&&((f,x,v)=>{const w=Xl(x,v,fr(f));return id(Wa(w,Math.round),Wa(io(f),Math.round))})(c,o,n),$=u&&Wg(c,o,n),g=((f,x,v,w,T,I,M,F,C,z)=>{const j=io(C),A=io(z);M&&(A.width=Math.min(z.width,T.width),A.height=Math.min(z.height,T.height));let y=!1;const st=(H,rt)=>{const gt=x0(T,w,H),ct=Yr(T),V=Ln(ct),N=H2(ct,I,V),kt=Xi(Ve(V),eg(N)),bt=Zr(Ln(gt),rt,V),et=Xi(Ve(V),bt);N.forEach(vt=>Zr(vt,rt,V));const Pt=ur(N),wt=eg(N),Q=Zi(Xi(Xi(wt,et),Pt),kt),Ut=Ui(Q.x-.5*gt.width,Q.y-.5*gt.height,gt.width,gt.height);if(F&&_r(Ut,F.width/Ut.width),M){const vt=Wy(T,rt,I);Oy(Ut,vt)}const lt=gn(Math.min(Ut.width/j.width,Ut.height/j.height),8),q=gn(Math.max(Ut.width/A.width,Ut.height/A.height),8);return(lt<1||q>1)&&gn(Math.abs(rt-H))===gn(Math.PI/2)&&!y?(y=!0,st(f,f+Math.sign(rt-H)*Math.PI)):{rotation:rt,crop:aa(Ut,vt=>gn(vt,8))}},G=Math.sign(x)*Math.round(Math.abs(x)/sa)*sa,k=di(x,G+v[0],G+v[1]);return st(f,k)})(n,e,a,c,o,d,u,p,s,l);if(h&&$){const f=Xl(o,e,fr(g.crop));g.crop.x+=.5*g.crop.width,g.crop.y+=.5*g.crop.height,g.crop.x-=.5*f.width,g.crop.y-=.5*f.height,g.crop.width=f.width,g.crop.height=f.height}return i(()=>{t.crop=aa(g.crop,f=>gn(f,8))}),g.rotation})],["flipX",ra(()=>!1)],["flipY",ra(()=>!1)],["flip",yu(({flipX:t,flipY:e})=>[[t,e],([n,i])=>({x:n,y:i})])],["isRotatedSideways",bu(({rotation:t})=>[[t],([e],n)=>n(Ya(e)),(e,n)=>e!==n])],["crop",Ul(t=>(e,n=e)=>{const{loadState:i,size:r,cropMinSize:o,cropMaxSize:a,cropLimitToImage:s,cropAspectRatio:l,rotation:c,perspective:d}=t;if(!e&&!n||!i||!i.beforeComplete)return e;e||(e=Yr(Xl(r,c,l||fr(r))));const u=jv(n,e,r,c,d,s,o,a),p=aa(u.crop,h=>gn(h,8));return ya(n,p)?n:p})],["cropAspectRatio",Ul(t=>(e,n)=>{const{loadState:i,crop:r,size:o,rotation:a,cropLimitToImage:s}=t,l=(d=>{if(d){if(/:/.test(d)){const[u,p]=d.split(":");return u/p}return parseFloat(d)}})(e);if(!l)return;if(!r||!i||!i.beforeComplete)return l;const c=n?Math.abs(e-n):1;if(Wg(r,o,a)&&s&&c>=.1){const d=((u,p)=>{const h=u.width,$=u.height;return Ya(p)&&(u.width=$,u.height=h),u})(io(o),a);t.crop=aa(oo(Yr(d),e),gn)}else{const d={width:r.height*l,height:r.height},u=.5*(r.width-d.width),p=.5*(r.height-d.height);t.crop=aa(Ui(r.x+u,r.y+p,d.width,d.height),gn)}return l})],["cropOrigin"],["cropMinSize",ra(()=>({width:1,height:1}))],["cropMaxSize",ra(()=>({width:32768,height:32768}))],["cropLimitToImage",ra(()=>!0),Ul(t=>(e,n,i)=>{const{crop:r}=t;return r&&!n&&e&&i(()=>t.crop=An(t.crop)),e})],["cropSize",bu(({crop:t})=>[[t],([e],n)=>{e&&n(Fi(e.width,e.height))},(e,n)=>id(e,n)])],["cropRectAspectRatio",yu(({cropSize:t})=>[[t],([e],n)=>{e&&n(gn(fr(e),5))}])],["cropRange",bu(({size:t,rotation:e,cropRectAspectRatio:n,cropMinSize:i,cropMaxSize:r,cropLimitToImage:o})=>[[t,e,n,i,r,o],([a,s,l,c,d,u],p)=>{a&&p(((h,$,g,f,x,v)=>{const w=io(f),T=io(x);return v?[w,Wa(Xl(h,$,g),Math.round)]:[w,T]})(a,s,l,c,d,u))},(a,s)=>ys(a,s)])],["rotationRange",bu(({size:t,isRotatedSideways:e,cropMinSize:n,cropSize:i,cropLimitToImage:r})=>[[t,e,n,i,r],([o,a,s,l,c],d)=>{!o||!l||d(Gv(o,a,s,l,c))},(o,a)=>ys(o,a)])],["backgroundColor",Ul(()=>t=>((e=[0,0,0,0],n=1)=>e.length===4?e:[...e,n])(t))],["backgroundImage"],["targetSize"],["colorMatrix"],["convolutionMatrix"],["gamma"],["noise"],["vignette"],["duration"],["currentTime"],["minDuration",ra(()=>1/24)],["maxDuration",ra(()=>1/0)],["volume",ra(()=>1)],["trim"],["redaction",Wc(({size:t})=>[Zc,{context:t}])],["manipulation",Wc(({size:t})=>[Zc,{context:t}])],["annotation",Wc(({size:t})=>[Zc,{context:t}])],["decoration",Wc(({crop:t})=>[Zc,{context:t}])],["selection",Wc(({size:t})=>[Zv,{context:t}])],["frame",Ul(()=>t=>{if(!t)return;const e={frameStyle:void 0,x:0,y:0,width:"100%",height:"100%",disableStyle:["backgroundColor","strokeColor","strokeWidth"]};return He(t)?e.frameStyle=t:Object.assign(e,t),e})],["metadata"],["state",Dy((t,e,n)=>{const i=Zp.map(l=>e[l]);let r=!1;const o=fe({}),{subscribe:a}=Nn([...i,o],(l,c)=>{if(r)return;const d=Zp.reduce((u,p,h)=>(u[p]=Ah(l[h]),u),{});d.crop&&aa(d.crop,Math.round),d.manipulation=d.manipulation&&_c(d.manipulation),d.redaction=d.redaction&&_c(d.redaction),d.annotation=d.annotation&&_c(d.annotation),d.decoration=d.decoration&&_c(d.decoration),d.selection=d.selection&&_c(d.selection),c(d)}),s=l=>{l&&(r=!0,n.cropOrigin=void 0,Zp.filter(c=>Ae(l,c)).forEach(c=>{const d=l[c];n[c]=d===null?void 0:Ah(d)}),r=!1,o.set({}))};return{set:s,update:l=>s(l(null)),subscribe:a}})]],_g=async(t,e,n={},i)=>{const{ontaskstart:r,ontaskprogress:o,ontaskend:a,token:s}=i;let l=!1;const c={cancel:pe};s.cancel=()=>{l=!0,c.cancel()};for(const[d,u]of e.entries()){if(l)return;const[p,h]=u;r(d,h);try{t=await p(t,{...n,taskCancelToken:c},$=>o(d,h,$))}catch($){throw l=!0,$}a(d,h)}return t};const _y=t=>console.warn(`Pintura: ${t} is a required prop.`),Vy=["loadstart","loadabort","loaderror","loadprogress","load","processstart","processabort","processerror","processprogress","process"],Xv=["flip","cropOrigin","isRotatedSideways","perspective","perspectiveX","perspectiveY","cropRange"],Yv=v0.map(([t])=>t).filter(t=>!Xv.includes(t)),Xp=t=>"image"+By(t),Vg=t=>Ae(t,"crop");var Ny=()=>{const{stores:t,accessors:e}=Dg(Hv),{sub:n,pub:i}=Ja(),r=()=>e.images?e.images[0]:{};let o={};const a={};Yv.forEach(f=>{Object.defineProperty(e,Xp(f),{get:()=>{const x=r();if(x)return x.accessors[f]},set:x=>{o[Xp(f)]=x,a[Xp(f)]=x;const v=r();v&&(v.accessors[f]=x)}})});const s=()=>e.images&&e.images[0];let l;const c=t.src.subscribe(f=>{if(!f)return e.images=[];e.imageReader?(e.images.length&&(o={}),u(f)):l=setTimeout(()=>_y("imageReader"),32)}),d=t.imageReader.subscribe(f=>{f&&(clearTimeout(l),e.images.length||e.src&&u(e.src))}),u=f=>{Promise.resolve().then(()=>h(f,o)).catch(()=>{})};let p;const h=(f,x={})=>new Promise((v,w)=>{let T=s();const I=!(x.cropLimitToImage===!1||x.imageCropLimitToImage===!1||a.imageCropLmitedToImage===!1),M=x.cropMinSize||x.imageCropMinSize||a.imageCropMinSize,F=I?M:T&&T.accessors.cropMinSize,C=x.minDuration||x.imageMinDuration;T&&g(),T=(({minSize:A={width:1,height:1},minDuration:y=0}={})=>{const{stores:st,accessors:G}=Dg(v0),{pub:k,sub:H}=Ja(),rt=(gt,ct)=>{const V=()=>G[gt]||{},N=et=>{G[gt]={...V(),...et,timeStamp:Date.now()}},kt=()=>V().error,bt=et=>{kt()||(N({error:et}),k(ct+"error",{...V()}))};return{start(){k(ct+"start")},onabort(){N({abort:!0}),k(ct+"abort",{...V()})},ontaskstart(et,Pt){kt()||(N({index:et,task:Pt,taskProgress:void 0,taskLengthComputable:void 0}),k(ct+"taskstart",{...V()}))},ontaskprogress(et,Pt,wt){kt()||(N({index:et,task:Pt,taskProgress:wt.loaded/wt.total,taskLengthComputable:wt.lengthComputable}),k(ct+"taskprogress",{...V()}),k(ct+"progress",{...V()}))},ontaskend(et,Pt){kt()||(N({index:et,task:Pt}),k(ct+"taskend",{...V()}))},ontaskerror(et){bt(et)},error(et){bt(et)},beforeComplete(et){kt()||(N({beforeComplete:!0}),k("before"+ct,et))},complete(et){kt()||(N({complete:!0}),k(ct,et))}}};return ld(G,{read:(gt,{reader:ct},V={})=>{if(!ct)return;Object.assign(G,{file:void 0,size:void 0,loadState:void 0});let N={cancel:pe},kt=!1;const bt=rt("loadState","load"),et={token:N,...bt},Pt={src:gt,size:void 0,dest:void 0,duration:void 0};return Promise.resolve().then(async()=>{try{if(bt.start(),kt)return bt.onabort();const wt=await _g(Pt,ct,V,et);if(kt)return bt.onabort();const{size:Q,duration:Ut,dest:lt}=wt||{};if(!Q||!Q.width||!Q.height)throw new Jc("Image size missing","IMAGE_SIZE_MISSING",wt);if(Ut>0&&Ut<y)throw new Jc("Video too short","VIDEO_TOO_SHORT",{...wt,minDuration:y});if(Q.width<A.width||Q.height<A.height)throw new Jc("Image too small","IMAGE_TOO_SMALL",{...wt,minWidth:A.width,minHeight:A.height});Object.assign(G,{file:lt,size:Q,duration:Ut}),bt.beforeComplete(wt),bt.complete(wt)}catch(wt){bt.error(wt)}finally{N=void 0}}),()=>{kt=!0,N&&N.cancel(),bt.onabort()}},write:(gt,ct)=>{if(!G.loadState.complete)return;G.processState=void 0;const V=rt("processState","process"),N={src:G.file,imageState:G.state,dest:void 0};if(Un(gt)&&(gt=gt(G.file,G.state)),!gt)return V.start(),void V.complete(N);let kt={cancel:pe},bt=!1;const et=ct,Pt={token:kt,...V};return Promise.resolve().then(async()=>{try{if(V.start(),bt)return V.onabort();const wt=await _g(N,gt,et,Pt);if(bt)return V.onabort();V.complete(wt)}catch(wt){V.error(wt)}finally{kt=void 0}}),()=>{bt=!0,kt&&kt.cancel(),V.onabort()}},on:H}),{accessors:G,stores:st}})({minSize:F,minDuration:C}),Vy.map(A=>{return T.accessors.on(A,(y=A,st=>i(y,st)));var y});const z=()=>{o={},j.forEach(A=>A())},j=[];j.push(T.accessors.on("loaderror",A=>{z(),w(A)})),j.push(T.accessors.on("loadabort",()=>{z(),w({name:"AbortError"})})),j.push(T.accessors.on("load",A=>{p=void 0,z(),v(A)})),j.push(T.accessors.on("beforeload",()=>((A,y)=>{if(Vg(y))return void(e.imageState=y);if(!y.imageCrop){const k=A.accessors.size,H=y.imageRotation||0,rt=_2(io(k),H),gt=Yr(rt);gt.width=gn(Math.abs(gt.width),6),gt.height=gn(Math.abs(gt.height),6);const ct=y.imageCropAspectRatio||(y.imageCropLimitToImage?fr(k):fr(gt));let V;y.imageCropLimitToImage?V=oo(gt,ct):(V=fs(gt,ct),V.x=(k.width-V.width)/2,V.y=(k.height-V.height)/2),y.imageCrop=V}if(A.accessors.duration&&!y.imageTrim&&y.imageMaxDuration){const{duration:k}=A.accessors;y.imageTrim=[[0,Math.min(y.imageMaxDuration/k,1)]]}const st=["imageCropLimitToImage","imageCrop","imageCropAspectRatio","imageRotation"];st.filter(k=>Ae(y,k)).forEach(k=>{e[k]=y[k],delete y[k]});const G=Object.keys(y).filter(k=>!st.includes(k)).reduce((k,H)=>(k[H]=y[H],k),{});Object.assign(e,G)})(T,x))),e.images=[T],x.imageReader&&(e.imageReader=x.imageReader),x.imageWriter&&(e.imageWriter=x.imageWriter),p=T.accessors.read(f,{reader:e.imageReader},{willRequest:e.willRequest})});let $;const g=()=>{const f=s();f&&(p&&p(),f.accessors.loadState=void 0,e.images=[])};return Object.defineProperty(e,"stores",{get:()=>t}),ld(e,{on:n,loadImage:h,abortLoadImage:()=>{p&&p(),e.images=[]},editImage:(f,x)=>new Promise((v,w)=>{h(f,x).then(()=>{const{images:T}=e,I=T[0],M=()=>{F(),C()},F=I.accessors.on("processerror",z=>{M(),w(z)}),C=I.accessors.on("process",z=>{M(),v(z)})}).catch(w)}),removeImage:g,processImage:(f,x)=>new Promise((v,w)=>{try{const T=[],I=()=>{T.forEach(M=>M())};(async()=>{if((F=>He(F)||ec(F)||od(F))(f))try{await h(f,x)}catch(F){w(F)}else f&&(Vg(f)?e.imageState=f:Object.assign(e,f));const M=s();if(!M)return w("no image");T.push(M.accessors.on("processerror",F=>{I(),w(F)})),T.push(M.accessors.on("processabort",()=>{I(),w({name:"AbortError"})})),T.push(M.accessors.on("process",F=>{$=void 0,I(),v(F)})),$=M.accessors.write(e.imageWriter,{redactionRenderStyle:e.imageRedactionRendering,shapePreprocessor:e.shapePreprocessor||ai,imageScrambler:e.imageScrambler,willRequest:e.willRequest,csp:e.csp||{},willRequestResource:e.willRequestResource})})()}catch(T){w(T)}}),abortProcessImage:()=>{const f=s();f&&($&&$(),f.accessors.processState=void 0)},destroy:()=>{c&&c(),d&&d()}}),e};const qv=(t,e)=>{const{processImage:n}=Ny();return n(t,e)};var Hy=()=>ka()?Uo()?/15_|16_/.test(navigator.userAgent)?14745600:16777216:/15_/.test(navigator.userAgent)?16777216:1/0:1/0,jy=(t,e)=>Object.keys(t).filter(n=>!e.includes(n)).reduce((n,i)=>(n[i]=t[i],n),{}),Uy=t=>new Promise(e=>{if(t.duration===1/0)return t.ontimeupdate=()=>{t.ontimeupdate=void 0,e(t)},void(t.currentTime=Number.MAX_SAFE_INTEGER);e(t)});const Kv=t=>new Promise(e=>{const n=new FileReader;n.onload=()=>e(n.result),n.readAsArrayBuffer(t)}),Yp=(t,e=0,n=t.byteLength)=>{const i=[],r=e+n;for(;e<r;){const o=t.getUint32(e);if(o<0)break;const a=t.getUint32(e+4);if(i.push({type:a,size:o,offset:e,bodyOffset:e+8,bodySize:o-8}),o<8)break;e+=o}return i},Jv=(t,{limit:e=1024}={})=>{let n=0;if(n+=4,t.getUint32(n)!==1718909296)return 0;n+=4;const i=t.getUint32(n);return i===1836069938?((r,o,a)=>{let s=!1,l=-1;for(let h=o;h<a;h++)if(s||r.getUint32(h)!==1953653099||(s=!0,h+=4),s&&r.getUint8(h)==64){l=h;break}if(l<0)return 0;const c=r.getUint32(l-28),d=r.getUint32(l-20),u=r.getUint32(l-32),p=r.getUint32(l-16);return c===65536&&d===4294901760?90:u===4294901760&&p===4294901760?180:c===4294901760&&d===65536?270:0})(t,n,e):i===1903435808?(r=>{const o=Yp(r).find(c=>c.type===1836019574);if(!o)return 0;const a=Yp(r,o.bodyOffset,o.bodySize);a.filter(c=>c.type===1953653099).forEach(c=>{a.push(...Yp(r,c.bodyOffset,c.bodySize))});const s=[1836476516,1953196132],l=a.filter(c=>s.includes(c.type));for(const{type:c,bodyOffset:d}of l){const u=r.getUint8(d);let p=d+4;p+=c===1836476516?32:36,p+=u===1?12:0;const h=r.getInt32(p),$=r.getInt32(p+4);if(h===0&&$>0)return 90;if(h<0&&$===0)return 180;if(h===0&&$<0)return 270}return 0})(t):0};var Gy=t=>new Promise((e,n)=>{(Oa()?(async i=>{const r=await Kv(i),o=new DataView(r);return Jv(o)})(t):Promise.resolve(0)).then(i=>{const r=document.createElement("video");r.onerror=()=>n(r.error),r.playsInline=!0,r.preload="auto",r.onseeked=()=>{r.onseeked=void 0,e(r)},r.onloadeddata=()=>{r.onloadeddata=void 0,r.dataset.rotation=i?""+i:"0",Uy(r).then(e),r.currentTime=0},Uo()&&ka()?(r.srcObject=t,r.load()):r.src=URL.createObjectURL(t)})}),Zy=(t,e)=>new Promise(n=>{if(t.currentTime===e)return n(t);let i=t.onseeked;t.onseeked=()=>{t.onseeked=i,n(t)},t.currentTime=di(e,0,t.duration)}),Xy=(t,e=0)=>new Promise((n,i)=>{Gy(t).then(r=>{Zy(r,e).then(o=>{const a=fi("canvas");q2(o).then(({width:s,height:l})=>{a.width=s,a.height=l;const c=a.getContext("2d",{willReadFrequently:!0}),d=()=>{c.drawImage(o,0,0,a.width,a.height);const u=c.getImageData(0,0,a.width,a.height);or(a),URL.revokeObjectURL(o.src),n(u)};ka()?setTimeout(d,16):d()})})})}),ac=t=>/video/.test(t.type);const w0=({imageDataResizer:t,canvasMemoryLimit:e}={})=>async(n,i,r,o,a)=>{r.width=Math.max(r.width,1),r.height=Math.max(r.height,1),o.width=Math.max(o.width,1),o.height=Math.max(o.height,1);const{dest:s}=await qv(i,{imageReader:tb(),imageWriter:eb({format:"canvas",targetSize:{...o,upscale:!0},imageDataResizer:t,canvasMemoryLimit:e}),imageCrop:r}),{feather:l=0}=a||{};if(l>0){const c=fi("canvas");c.width=s.width,c.height=s.height;const d=c.getContext("2d",{willReadFrequently:!0}),u=1/l;let p=0;for(p=0;p<l;p++){const $=p*u;d.strokeStyle=`rgba(0,0,0,${$*$})`,d.strokeRect(p+.5,p+.5,s.width-2*p-1,s.height-2*p-1)}d.fillStyle="#000",d.fillRect(p,p,s.width+.5-2*p,s.height+.5-2*p);const h=s.getContext("2d");h.globalCompositeOperation="destination-in",h.drawImage(c,0,0),or(c)}n.drawImage(s,o.x,o.y,o.width,o.height),or(s)},zi=(t,e=(...i)=>i,n)=>async(i,r,o)=>{o(Gl(0,!1));let a=!1;const s=await t(...e(i,r,l=>{a=!0,o(l)}));return n&&n(i,s),a||o(Gl(1,!1)),i},Qv=({willRequest:t,srcProp:e="src",destProp:n="dest"}={})=>[zi(rv,(i,r,o)=>[i[e],o,{...r,willRequest:t}],(i,r)=>i[n]=r),"any-to-file"],t5=({srcProp:t="dest",destProp:e="dest"}={})=>[zi(async n=>{if(/octet-stream/.test(n.type)){console.warn(`Pintura: File has unknown mime type "${n.type}", make sure your server sets the correct Content-Type header.`);let i="image";const r=await r0(n);/video/i.test(r.nodeName)&&(i="video");const o={type:i+"/unknown"};return md(n)?new File([n],n.name,{...o,lastModified:n.lastModified}):new Blob([n],o)}return n},n=>[n[t]],(n,i)=>n[e]=i),"guard-mimetype"],Yy=({srcProp:t="src",destProp:e="size"}={})=>[zi(K2,n=>[n[t]],(n,i)=>n[e]=i),"read-image-size"],e5=async t=>{const e=await r0(t);if(Gu(e))return await(n=>new Promise((i,r)=>{const o=()=>{Uy(n).then(()=>{i(n.duration)})};if(n.readyState>=1)return o();n.onloadedmetadata=o,n.onerror=()=>r(n.error)}))(e)},n5=({srcProp:t="src",destProp:e="duration"}={})=>[zi(e5,n=>[n[t]],(n,i)=>n[e]=i),"read-media-duration"],qy=({srcSize:t="size",srcOrientation:e="orientation",destSize:n="size"}={})=>[zi(ov,i=>[i[t],i[e]],(i,r)=>i[n]=r),"image-size-match-orientation"],Ky=({srcProp:t="src",destProp:e="copy"}={})=>[zi((n,i)=>ty(n)?qh(n,i):void 0,n=>[n[t],onprogress],(n,i)=>n[e]=i),"read-image-head"],Jy=({srcProp:t="copy",destProp:e="orientation"}={})=>[zi(Xh,n=>[n[t],274],(n,i=1)=>n[e]=i),"read-exif-orientation-tag"],i5=({srcProp:t="copy"}={})=>[zi(Xh,e=>[e[t],274,1]),"clear-exif-orientation-tag"],r5=({srcImageSize:t="size",srcCanvasSize:e="imageData",srcImageState:n="imageState",destImageSize:i="size",destScalar:r="scalar"}={})=>[zi((o,a)=>[Math.min(a.width/o.width,a.height/o.height),ts(a)],o=>[o[t],o[e],o[n]],(o,[a,s])=>{o[r]=a,o[i]=s}),"calculate-canvas-scalar"],o5=({srcProp:t="src",destProp:e="imageData",canvasMemoryLimit:n,srcImageState:i="imageState"}={})=>[zi((r,o,a)=>ac(r)?Xy(r,a.currentTime):D2(r,o),r=>[r[t],n,r[i]],(r,o)=>r[e]=o),"blob-to-image-data"],a5=({srcImageData:t="imageData",srcOrientation:e="orientation"}={})=>[zi(A2,n=>[n[t],n[e]],(n,i)=>n.imageData=i),"image-data-match-orientation"],s5=({srcImageData:t="imageData",srcImageState:e="imageState"}={})=>[zi(Dv,n=>[n[t],{backgroundColor:n[e].backgroundColor,backgroundImage:n[e].backgroundImage}],(n,i)=>n.imageData=i),"image-data-fill"],l5=({srcImageData:t="imageData",srcImageState:e="imageState",destScalar:n="scalar"}={})=>[zi(sv,i=>{const r=i[n];let{crop:o}=i[e];return o&&r!==1&&(o=_r(An(o),r,ci())),[i[t],{crop:o,rotation:i[e].rotation,flipX:i[e].flipX,flipY:i[e].flipY}]},(i,r)=>i.imageData=r),"image-data-crop"],c5=({targetSize:t={width:void 0,height:void 0,fit:void 0,upscale:void 0},imageDataResizer:e,srcProp:n="imageData",srcImageState:i="imageState",destImageScaledSize:r="imageScaledSize"})=>[zi(cv,o=>{const a=Math.min(t.width||Number.MAX_SAFE_INTEGER,o[i].targetSize&&o[i].targetSize.width||Number.MAX_SAFE_INTEGER),s=Math.min(t.height||Number.MAX_SAFE_INTEGER,o[i].targetSize&&o[i].targetSize.height||Number.MAX_SAFE_INTEGER);return[o[n],{width:a,height:s,fit:t.fit||"contain",upscale:(l=o[i],!!(l.targetSize&&l.targetSize.width||l.targetSize&&l.targetSize.height)||t.upscale||!1)},e];var l},(o,a)=>{id(o.imageData,a)||(o[r]=ts(a)),o.imageData=a}),"image-data-resize"],d5=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:n="imageData"}={})=>[zi(mv,i=>{const{colorMatrix:r}=i[e],o=r&&Object.keys(r).map(a=>r[a]).filter(Boolean);return[i[t],{colorMatrix:o&&g0(o),convolutionMatrix:i[e].convolutionMatrix,gamma:i[e].gamma,noise:i[e].noise,vignette:i[e].vignette}]},(i,r)=>i[n]=r),"image-data-filter"],u5=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:n="imageData",destScalar:i="scalar"}={})=>[zi(async(r,o,a,s,l,c)=>{if(!o||!s.length)return r;let d;try{const g={dataSizeScalar:vy(r,s)};a&&a[3]>0&&(g.backgroundColor=[...a]),d=await o(r,g)}catch{}const u=fi("canvas");u.width=r.width,u.height=r.height;const p=u.getContext("2d",{willReadFrequently:!0});if(p.putImageData(r,0,0),c==="auto"){const g=Math.sqrt(r.width*r.height);p.filter=`blur(${Math.round(g/100)}px)`}const h=new Path2D;s.forEach(g=>{const f=Ui(g.x,g.y,g.width,g.height);fl(f,l);const x=Rr(An(f),g.rotation),v=new Path2D;x.forEach((w,T)=>{if(T===0)return v.moveTo(w.x,w.y);v.lineTo(w.x,w.y)}),h.addPath(v)}),p.clip(h,"nonzero"),p.imageSmoothingEnabled=!1,p.drawImage(d,0,0,u.width,u.height),or(d);const $=p.getImageData(0,0,u.width,u.height);return or(u),$},(r,{imageScrambler:o,redactionRenderStyle:a})=>[r[t],o,r[e].backgroundColor,r[e].redaction,r[i],a],(r,o)=>r[n]=o),"image-data-redact"],qp=({srcImageData:t="imageData",srcSize:e="size",srcImageState:n="imageState",srcShapes:i="annotation",destImageData:r="imageData",destImageScaledSize:o="imageScaledSize",destScalar:a="scalar",imageDataResizer:s,canvasMemoryLimit:l,shapeFilter:c=ai,shapeClip:d=!0,destImageContext:u="imageContext"}={})=>[zi(m0,(p,{shapePreprocessor:h,willRequestResource:$,csp:g,willRequest:f})=>{const x=p[n][i].filter(c);if(!x.length)return[p[t]];const v=p[a],{crop:w}=p[n],T=p[e];let I=v;const M=p[o];M&&(I=Math.min(M.width/w.width,M.height/w.height));const F={width:T.width/v,height:T.height/v};return[p[t],{shapes:x,computeShape:C=>(C=ji(C,F),C=jy(C,["left","right","top","bottom"]),C=$y(C,I)),transform:C=>{const z=p[e],{rotation:j=0,flipX:A,flipY:y,cropLimitToImage:st}=p[n],{crop:G=Yr(z)}=p[n];let k=1;k=p[o]?I:v;const H={width:z.width/v*k,height:z.height/v*k},rt=Jx(H,j),gt=rt.width,ct=rt.height,V=.5*H.width-.5*gt,N=.5*H.height-.5*ct,kt=tc(H);C.translate(-V,-N),C.translate(-G.x*k,-G.y*k),C.translate(kt.x,kt.y),C.rotate(j),C.translate(-kt.x,-kt.y);const bt=p[u]||{x:0,y:0};C.translate(bt.x,bt.y),C.scale(A?-1:1,y?-1:1),C.translate(A?-H.width*v:0,y?-H.height*v:0),st&&d&&(C.rect(0,0,H.width,H.height),C.clip())},drawImage:w0({imageDataResizer:s,canvasMemoryLimit:l}),preprocessShape:C=>h(C,{isPreview:!1,...p[n]}),canvasMemoryLimit:l,willRequest:f||$,styleNonce:g.styleNonce}]},(p,h)=>p[r]=h),"image-data-annotate"],Ng=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:n="imageData",destImageScaledSize:i="imageScaledSize",imageDataResizer:r,canvasMemoryLimit:o,destScalar:a="scalar",shapeFilter:s=ai,destImageContext:l="imageContext"}={})=>[zi(m0,(c,{shapePreprocessor:d,willRequestResource:u,willRequest:p,csp:h})=>{let $=c[e].decoration.filter(s);if(typeof window<"u"&&(v=>{if(v&&v._v7q0jhw)return;const[w]=[[85,110,108,105,99,101,110,115,101,100,32,80,105,110,116,117,114,97,32,105,110,115,116,97,110,99,101,32]].map(F=>F.map(C=>String.fromCharCode(C)).join("")),{width:T,height:I}=c[e].crop,M=I/15;$=[...$,{x:.5*-M,y:.5*-M,width:1.5*T,height:1.25*I,text:Array(50).fill(w).join(""),fontWeight:900,lineHeight:M,fontSize:M,color:[1,1,1,.05]}]})(window),!$.length)return[c[t]];let g=c[a];const{crop:f}=c[e],x=c[i];return x&&(g=Math.min(x.width/f.width,x.height/f.height)),[c[t],{shapes:$,drawImage:w0({imageDataResizer:r,canvasMemoryLimit:o}),computeShape:v=>(v=ji(v,f),v=jy(v,["left","right","top","bottom"]),v=$y(v,g)),preprocessShape:v=>d(v,{isPreview:!1,...c[e]}),canvasMemoryLimit:o,willRequest:p||u,styleNonce:h.styleNonce,transform:v=>{const w=c[l]||{x:0,y:0};v.translate(w.x,w.y)}}]},(c,d)=>c[n]=d),"image-data-decorate"],p5=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:n="imageData",destImageScaledSize:i="imageScaledSize",imageDataResizer:r,canvasMemoryLimit:o,destScalar:a="scalar",destImageContext:s="imageContext"}={})=>[zi((l,c)=>new Promise(d=>{if(!c)return d([l]);m0(l,c).then(u=>{d([u,c.contextBounds])})}),(l,{shapePreprocessor:c,willRequestResource:d,willRequest:u,csp:p})=>{const h=l[e].frame;if(!h)return[l[t]];const $=l[a];let{crop:g}=l[e];g&&$!==1&&(g=_r(An(g),$,ci()));const f={...g},x=hy(my(h,f,c),f);f.x=Math.abs(x.left),f.y=Math.abs(x.top),f.width+=Math.abs(x.left)+Math.abs(x.right),f.height+=Math.abs(x.top)+Math.abs(x.bottom);const v=l[i],w=v?v.width/g.width:1,T=v?v.height/g.height:1;return f.x*=w,f.y*=T,f.width*=w,f.height*=T,f.x=Math.round(f.x),f.y=Math.round(f.y),f.width=Math.round(f.width),f.height=Math.round(f.height),v&&(Math.abs(f.width-v.width)<=1&&(f.width=v.width),Math.abs(f.height-v.height)<=1&&(f.height=v.height)),[l[t],{shapes:[h],contextBounds:f,computeShape:I=>ji(I,l[t]),transform:I=>{I.translate(f.x,f.y)},drawImage:w0({imageDataResizer:r,canvasMemoryLimit:o}),preprocessShape:I=>c(I,{isPreview:!1,...l[e]}),canvasMemoryLimit:o,willRequest:u||d,styleNonce:p.styleNonce}]},(l,[c,d])=>{l[s]=d,l[n]=c}),"image-data-frame"],h5=({mimeType:t,quality:e,srcImageData:n="imageData",srcFile:i="src",destBlob:r="blob"}={})=>[zi(jx,o=>[o[n],t||Qh(o[i].name)||o[i].type,e],(o,a)=>o[r]=a),"image-data-to-blob"],m5=({srcImageData:t="imageData",srcOrientation:e="orientation",destCanvas:n="dest"}={})=>[zi(rc,i=>[i[t],i[e]],(i,r)=>i[n]=r),"image-data-to-canvas"],g5=async(t,e)=>{if(!ty(t)||!e)return t;const n=(a,s)=>{let l=2;const c=new DataView(a),d=c.byteLength;for(s(c.getUint8(0),0,2,d);l<d&&c.getUint8(l)==255;){const u=c.getUint8(l+1),p=c.getUint16(l+2)+2;if(s(u,l,p,d)===!1)break;l+=p}},i=a=>a>=224&&a<=237,r=(a=>{const s=[];return n(a,(l,c,d)=>{if(l===218)return!1;i(l)&&s.push(new Uint8Array(a,c,d))}),s})(e),o=((a,s)=>{const l=[];n(a,(p,h,$,g)=>h===0?(l.push(new Uint8Array(a,h,$)),void l.push(...s)):p===218?(l.push(new Uint8Array(a,h,g-h)),!1):void(i(p)||l.push(new Uint8Array(a,h,$))));let c=l.reduce((p,h)=>p+h.length,0),d=new Uint8Array(c),u=0;return l.forEach(p=>{d.set(p,u),u+=p.length}),d})(await qh(t),r);return new Blob([o],{type:"image/jpeg"})},$5=(t="blob",e="copy",n="blob")=>[zi(g5,i=>[i[t],i[e]],(i,r)=>i[n]=r),"blob-write-image-head"],f5=({renameFile:t,srcBlob:e="blob",srcFile:n="src",destFile:i="dest",defaultFilename:r}={})=>[zi(ed,o=>[o[e],t?t(o[n]):o[n].name||`${r}.${B2(o[e].type)}`],(o,a)=>o[i]=a),"blob-to-file"],Hg=({url:t="./",dataset:e=o=>[["dest",o.dest,o.dest.name],["imageState",o.imageState]],destStore:n="store",credentials:i,headers:r={}})=>[zi(async(o,a)=>await((s,l,c)=>new Promise((d,u)=>{const{token:p={},beforeSend:h=pe,onprogress:$=pe}=c;p.cancel=()=>g.abort();const g=new XMLHttpRequest;g.upload.onprogress=$,g.onload=()=>g.status>=200&&g.status<300?d(g):u(g),g.onerror=()=>u(g),g.ontimeout=()=>u(g),g.open("POST",encodeURI(s)),h(g),g.send(l instanceof FormData?l:l.reduce((f,x)=>(f.append(...x.map(av)),f),new FormData))}))(t,o,{onprogress:a,beforeSend:s=>J2(s,{headers:r,credentials:i})}),(o,a,s)=>[e(o),s],(o,a)=>o[n]=a),"store"],Qy=t=>[zi(e=>(t&&t.length&&Object.keys(e).forEach(n=>{t.includes(n)||delete e[n]}),e)),"prop-filter"],tb=(t={})=>{const{orientImage:e=!0,outputProps:n=["src","dest","size","duration"],preprocessImageFile:i,request:r={}}=t;return[Qv({willRequest:()=>r}),t5(),i&&[zi(i,(o,a,s)=>[o.dest,a,s],(o,a)=>o.dest=a),"preprocess-image-file"],Yy({srcProp:"dest"}),n5({srcProp:"dest"}),e&&Ky({srcProp:"dest"}),e&&Jy(),e&&qy(),Qy(n)].filter(Boolean)},y5=t=>t&&(He(t)?Hg({url:t}):Un(t)?[t,"store"]:Hg(t)),eb=(t={})=>(e,n,i={})=>{let{canvasMemoryLimit:r=Hy(),orientImage:o=!0,copyImageHead:a=!0,mimeType:s,quality:l,renameFile:c,targetSize:d,imageDataResizer:u,store:p,format:h="file",outputProps:$=["src","dest","imageState","store"],preprocessImageSource:g,preprocessImageState:f,postprocessImageData:x,postprocessImageBlob:v,testSrcSupport:w=!1}={...t,...i};if(!w||o1(e))return h==="blob"&&(h="file"),[g&&[zi(g,(T,I,M)=>[T.src,I,M,T.imageState],(T,I)=>T.src=I),"preprocess-image-source"],(o||a)&&Ky(),o&&Jy(),Yy(),f&&[zi(f,(T,I,M,F)=>[T.imageState,I,M,{size:T.size,orientation:T.orientation}],(T,I)=>T.imageState=I),"preprocess-image-state"],o5({canvasMemoryLimit:r}),o&&qy(),o&&a5(),r5(),u5(),l5(),c5({imageDataResizer:u,targetSize:d}),qp({imageDataResizer:u,canvasMemoryLimit:r,srcShapes:"manipulation"}),d5(),s5(),qp({imageDataResizer:u,canvasMemoryLimit:r,srcShapes:"annotation",shapeFilter:T=>!T.aboveFrame}),Ng({imageDataResizer:u,canvasMemoryLimit:r,shapeFilter:T=>!T.aboveFrame}),p5({imageDataResizer:u,canvasMemoryLimit:r}),qp({imageDataResizer:u,canvasMemoryLimit:r,srcShapes:"annotation",shapeFilter:T=>T.aboveFrame,shapeClip:!1}),Ng({imageDataResizer:u,canvasMemoryLimit:r,shapeFilter:T=>T.aboveFrame}),x&&[zi(x,(T,I,M)=>[T.imageData,I,M],(T,I)=>T.imageData=I),"postprocess-image-data"],h==="file"?h5({mimeType:s,quality:l}):h==="canvas"?m5():[T=>(T.dest=T.imageData,T)],h==="file"&&o&&i5(),h==="file"&&a&&$5(),v&&[zi(v,({blob:T,imageData:I,src:M},F,C)=>[{blob:T,imageData:I,src:M},F,C],(T,I)=>T.blob=I),"postprocess-image-file"],h==="file"&&f5({defaultFilename:"image",renameFile:c}),h==="file"?y5(p):Un(p)&&[p,"store"],Qy($)].filter(Boolean)};var b5=(t,e,n,i,r,o,a,s,l,c,d)=>{if(!(t&&e&&n&&i&&s))return;s*=o;const u=rd(An(e)),p=Ln(u),h=Ln(t),$=Yr(n),g=Ln($),f=x0(n,i,l),x=Ln(f),v=Xi(Ve(g),x),w=Xi(Ve(h),p);v.x+=w.x,v.y+=w.y;const T=Yl(Ve(v));T.x+=w.x,T.y+=w.y;const I=Ln(fa(fa(An(r),a),t)),M=Xi(I,h);return Zi(v,M),{origin:T,translation:v,rotation:{x:d?Math.PI:0,y:c?Math.PI:0,z:l},scale:s}};let Vc=null;var S0=()=>{if(Vc===null)if("WebGL2RenderingContext"in window){let t;try{t=fi("canvas"),Vc=!!t.getContext("webgl2")}catch{Vc=!1}t&&or(t),t=void 0}else Vc=!1;return Vc},jg=t=>(t&t-1)==0,Bs=(t,e={},n="",i="")=>Object.keys(e).filter(r=>!Gs(e[r])).reduce((r,o)=>r.replace(new RegExp(n+o+i),e[o]),t);const x5={head:`#version 300 es

in vec4 aPosition;uniform mat4 uMatrix;`,text:`
in vec2 aTexCoord;out vec2 vTexCoord;`,matrix:`
gl_Position=uMatrix*vec4(aPosition.x,aPosition.y,0,1);`},v5={head:`#version 300 es
precision highp float;

out vec4 fragColor;`,mask:`
uniform float uMaskFeather[8];uniform float uMaskBounds[4];uniform float uMaskOpacity;float mask(float x,float y,float bounds[4],float opacity){return 1.0-(1.0-(smoothstep(bounds[3],bounds[3]+1.0,x)*(1.0-smoothstep(bounds[1]-1.0,bounds[1],x))*(1.0-step(bounds[0],y))*step(bounds[2],y)))*(1.0-opacity);}`,init:`
float a=1.0;vec4 fillColor=uColor;vec4 textureColor=texture(uTexture,vTexCoord);textureColor*=(1.0-step(uRepeat.y,vTexCoord.y))*step(0.0,vTexCoord.y)*(1.0-step(uRepeat.x,vTexCoord.x))*step(0.0,vTexCoord.x);`,colorize:`
if(uTextureColor.a!=0.0&&textureColor.a>0.0){vec3 colorFlattened=textureColor.rgb/textureColor.a;if(colorFlattened.r>=.9999&&colorFlattened.g==0.0&&colorFlattened.b>=.9999){textureColor.rgb=uTextureColor.rgb*textureColor.a;}textureColor*=uTextureColor.a;}`,maskapply:`
float m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);`,maskfeatherapply:`
float leftFeatherOpacity=step(uMaskFeather[1],gl_FragCoord.x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],gl_FragCoord.x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],gl_FragCoord.x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],gl_FragCoord.x));a*=leftFeatherOpacity*rightFeatherOpacity;`,rectaa:`
vec2 scaledPoint=vec2(vRectCoord.x*uSize.x,vRectCoord.y*uSize.y);a*=smoothstep(0.0,uEdgeFeather,uSize.x-scaledPoint.x);a*=smoothstep(0.0,uEdgeFeather,uSize.y-scaledPoint.y);a*=smoothstep(0.0,uEdgeFeather,scaledPoint.x);a*=smoothstep(0.0,uEdgeFeather,scaledPoint.y);`,cornerradius:`
vec2 s=(uSize-2.0)*.5;vec2 r=(vRectCoord*uSize)-1.0;vec2 p=r-s;float cornerRadius=uCornerRadius[0];bool left=r.x<s.x;bool top=r.y<s.y;if(!left&&top){cornerRadius=uCornerRadius[1];}if(!left&&!top){cornerRadius=uCornerRadius[3];}if(left&&!top){cornerRadius=uCornerRadius[2];}a*=1.0-clamp(length(max(abs(p)-(s-cornerRadius),0.0))-cornerRadius,0.0,1.0);`,fragcolor:`
if(m<=0.0)discard;fillColor.a*=a;fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);textureColor*=uTextureOpacity;textureColor.a*=a;textureColor.rgb*=m*a;textureColor.rgb+=(1.0-m)*(uCanvasColor.rgb*textureColor.a);fragColor=textureColor+(fillColor*(1.0-textureColor.a));`},Ug=(t,e,n)=>{const i=t.createShader(n),r=((o,a,s)=>(a=Bs(a,s===o.VERTEX_SHADER?x5:v5,"##").trim(),S0()?a:(a=(a=a.replace(/#version.+/gm,"").trim()).replace(/^\/\/\#/gm,"#"),s===o.VERTEX_SHADER&&(a=a.replace(/in /gm,"attribute ").replace(/out /g,"varying ")),s===o.FRAGMENT_SHADER&&(a=a.replace(/in /gm,"varying ").replace(/out.*?;/gm,"").replace(/texture\(/g,"texture2D(").replace(/fragColor/g,"gl_FragColor")),""+a)))(t,e,n);return t.shaderSource(i,r),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)||console.error(t.getShaderInfoLog(i)),i},Nc=(t,e,n,i,r)=>{const o=Ug(t,e,t.VERTEX_SHADER),a=Ug(t,n,t.FRAGMENT_SHADER),s=t.createProgram();t.attachShader(s,o),t.attachShader(s,a),t.linkProgram(s);const l={};return i.forEach(c=>{l[c]=t.getAttribLocation(s,c)}),r.forEach(c=>{l[c]=t.getUniformLocation(s,c)}),{program:s,locations:l,destroy(){t.detachShader(s,o),t.detachShader(s,a),t.deleteShader(o),t.deleteShader(a),t.deleteProgram(s)}}},Gg=t=>t.nodeName!=="VIDEO"&&(!!S0()||jg(t.width)&&jg(t.height)),w5=(t,e,n,i)=>{const{premultiply:r=!0}=i;return t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),((o,a,s)=>{o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,Gg(a)?o.LINEAR_MIPMAP_LINEAR:o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,s.filterParam),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,s.wrapParam),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,s.wrapParam),Gg(a)&&o.generateMipmap(o.TEXTURE_2D)})(t,n,i),t.bindTexture(t.TEXTURE_2D,null),e},ll=(t,e=1)=>t?[t[0],t[1],t[2],Ne(t[3])?e*t[3]:e]:[0,0,0,0],Kp=()=>{const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},Jp=(t,e,n,i,r,o,a)=>{const s=1/(e-n),l=1/(i-r),c=1/(o-a);t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(r+i)*l,t[14]=(a+o)*c,t[15]=1},cl=(t,e,n,i)=>{t[12]=t[0]*e+t[4]*n+t[8]*i+t[12],t[13]=t[1]*e+t[5]*n+t[9]*i+t[13],t[14]=t[2]*e+t[6]*n+t[10]*i+t[14],t[15]=t[3]*e+t[7]*n+t[11]*i+t[15]},Zg=(t,e)=>{t[0]*=e,t[1]*=e,t[2]*=e,t[3]*=e,t[4]*=e,t[5]*=e,t[6]*=e,t[7]*=e,t[8]*=e,t[9]*=e,t[10]*=e,t[11]*=e},Xg=(t,e)=>{const n=Math.sin(e),i=Math.cos(e),r=t[4],o=t[5],a=t[6],s=t[7],l=t[8],c=t[9],d=t[10],u=t[11];t[4]=r*i+l*n,t[5]=o*i+c*n,t[6]=a*i+d*n,t[7]=s*i+u*n,t[8]=l*i-r*n,t[9]=c*i-o*n,t[10]=d*i-a*n,t[11]=u*i-s*n},Yg=(t,e)=>{const n=Math.sin(e),i=Math.cos(e),r=t[0],o=t[1],a=t[2],s=t[3],l=t[8],c=t[9],d=t[10],u=t[11];t[0]=r*i-l*n,t[1]=o*i-c*n,t[2]=a*i-d*n,t[3]=s*i-u*n,t[8]=r*n+l*i,t[9]=o*n+c*i,t[10]=a*n+d*i,t[11]=s*n+u*i},qg=(t,e)=>{const n=Math.sin(e),i=Math.cos(e),r=t[0],o=t[1],a=t[2],s=t[3],l=t[4],c=t[5],d=t[6],u=t[7];t[0]=r*i+l*n,t[1]=o*i+c*n,t[2]=a*i+d*n,t[3]=s*i+u*n,t[4]=l*i-r*n,t[5]=c*i-o*n,t[6]=d*i-a*n,t[7]=u*i-s*n};var S5=t=>t*Math.PI/180,l1=(t,e)=>S0()?t.getContext("webgl2",e):t.getContext("webgl",e)||t.getContext("experimental-webgl",e);const Qp=(t,e)=>{const n=t.length;return e>=n?t[e%n]:e<0?t[e%n+n]:t[e]},k5=(t,e,n,i)=>{const r=ut(n.x-e.x,n.y-e.y),o=ut(i.x-n.x,i.y-n.y),a=ut(e.x-i.x,e.y-i.y),s=ut(t.x-e.x,t.y-e.y),l=ut(t.x-n.x,t.y-n.y),c=ut(t.x-i.x,t.y-i.y),d=Eu(r,s),u=Eu(o,l),p=Eu(a,c);return d<=0&&u<=0&&p<=0},C5=t=>{if(t.length<3)return[];if((x=>{const v=x.length;for(let w=0;w<v;w++){const T=Us(x[w],Qp(x,w+1));if(U2(T,x,{ignoreIdenticalLines:!0,breakOnIntersection:!0}))return!0}return!1})(t))return[];(x=>{let v,w,T,I,M,F=0;const C=x.length;for(v=0;v<C;v++)w=x[v],T=x[(v+1)%C],I=T.x-w.x,M=(T.y+w.y)/2,F+=I*M;return F})(t)<0&&t.reverse();const e=t.length,n=[...Array(e).keys()],i=[];let r,o,a,s,l,c,d,u,p,h,$,g,f=1024;for(;n.length>3;){if(f<=0)return[];for(f--,r=0;r<n.length;r++)if(a=n[r],s=Qp(n,r-1),l=Qp(n,r+1),c=t[a],d=t[s],u=t[l],p=ut(d.x-c.x,d.y-c.y),h=ut(u.x-c.x,u.y-c.y),!(Eu(p,h)<0)){for($=!0,o=0;o<e;o++)if(o!==a&&o!==s&&o!==l&&(g=t[o],k5(g,d,c,u))){$=!1;break}if($){i.push([d,c,u]),n.splice(r,1);break}}}return i.push([t[n[0]],t[n[1]],t[n[2]]]),i},Kg=(t,e,n,i,r)=>{const o=yo(ut(i.x-n.x,i.y-n.y)),a=yo(ut(r.x-i.x,r.y-i.y)),s=yo(ut(o.x+a.x,o.y+a.y)),l=ut(-s.y,s.x),c=ut(-o.y,o.x),d=Math.min(1/Iu(l,c),5);t[e]=i.x,t[e+1]=i.y,t[e+2]=l.x*d,t[e+3]=l.y*d,t[e+4]=-1,t[e+5]=i.x,t[e+6]=i.y,t[e+7]=l.x*d,t[e+8]=l.y*d,t[e+9]=1},Jg=t=>{const e=new Float32Array(8);return e[0]=t[3].x,e[1]=t[3].y,e[2]=t[0].x,e[3]=t[0].y,e[4]=t[2].x,e[5]=t[2].y,e[6]=t[1].x,e[7]=t[1].y,e},Qg=(t,e=0,n,i)=>{const r=No(t),o=t.x+.5*t.width,a=t.y+.5*t.height;return(n||i)&&ql(r,n,i,o,a),e!==0&&$l(r,e,o,a),r},xu=(t,e,n,i,r)=>{const o=Math.min(20,Math.max(4,Math.round(i/2)));let a=0,s=0,l=0,c=0,d=0;for(;d<o;d++)a=d/o,s=r*sa+a*sa,l=i*Math.cos(s),c=i*Math.sin(s),t.push(ut(e+l,n+c))};let vu=null;var k0=()=>{if(vu!==null)return vu;let t=fi("canvas");const e=l1(t);return vu=e?e.getParameter(e.MAX_TEXTURE_SIZE):void 0,or(t),t=void 0,vu},C0=()=>ar()&&!!window.chrome;const Xc=new Float32Array([0,1,0,0,1,1,1,0]),T5=new Float32Array([1,0,0,0,1,1,0,1]),M5=ar()&&Oa(),t$=[0,0,0,0,1,0,0,0,0],P5=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],th=[0,0,0,0],R5=[0,0,0,0],e$=(t,e,n,i,r)=>{if(!n||!i)return Xc;let o=i.x/n.width,a=i.y/n.height,s=t/n.width/r,l=e/n.height/r;return s-=o,l-=a,new Float32Array([-o,l,-o,-a,s,l,s,-a])};var I5=(t,e={})=>{const{alpha:n=!1}=e,i={width:0,height:0},r={width:0,height:0},o=k0()||1024;let a,s,l;const c=Kp(),d=Kp();let u,p,h,$,g,f,x,v,w,T=0,I=0,M=0,F=1;const C=new Map([]),z=()=>{y.stencilOp(y.KEEP,y.KEEP,y.KEEP),y.stencilFunc(y.ALWAYS,1,255),y.stencilMask(255)},j=S5(30),A=Math.tan(j/2),y=l1(t,{alpha:n,antialias:!1,premultipliedAlpha:!0,stencil:!0});if(!y)return;y.getExtension("OES_standard_derivatives"),y.disable(y.DEPTH_TEST),y.enable(y.STENCIL_TEST),y.enable(y.BLEND),y.blendFunc(y.ONE,y.ONE_MINUS_SRC_ALPHA),z();const st=y.createTexture();y.bindTexture(y.TEXTURE_2D,st),y.texImage2D(y.TEXTURE_2D,0,y.RGBA,1,1,0,y.RGBA,y.UNSIGNED_BYTE,new Uint8Array(th)),C.set(0,st);const G=y.createTexture();C.set(2,G);const k=y.createFramebuffer(),H=y.createTexture();C.set(1,H);const rt=y.createFramebuffer(),gt=Nc(y,`
##head
##text
void main(){vTexCoord=aTexCoord;gl_Position=uMatrix*aPosition;}`,`
##head
in vec2 vTexCoord;uniform sampler2D uTexture;uniform sampler2D uTextureOverlay;uniform sampler2D uTextureBlend;uniform vec2 uTextureSize;uniform float uOpacity;uniform int uAntialias;uniform vec4 uOverlayColor;uniform mat4 uColorMatrix;uniform vec4 uColorOffset;uniform float uClarityKernel[9];uniform float uClarityKernelWeight;uniform float uColorGamma;uniform float uColorVignette;uniform float uMaskClip;uniform float uMaskOpacity;uniform float uMaskBounds[4];uniform float uMaskCornerRadius[4];uniform float uMaskFeather[8];vec4 applyGamma(vec4 c,float g){c.r=pow(c.r,g);c.g=pow(c.g,g);c.b=pow(c.b,g);return c;}vec4 applyColorMatrix(vec4 c,mat4 m,vec4 o){vec4 res=(c*m)+(o*c.a);res=clamp(res,0.0,1.0);return res;}vec4 applyConvolutionMatrix(vec4 c,float k0,float k1,float k2,float k3,float k4,float k5,float k6,float k7,float k8,float w){vec2 pixel=vec2(1)/uTextureSize;vec4 colorSum=texture(uTexture,vTexCoord-pixel)*k0+texture(uTexture,vTexCoord+pixel*vec2(0.0,-1.0))*k1+texture(uTexture,vTexCoord+pixel*vec2(1.0,-1.0))*k2+texture(uTexture,vTexCoord+pixel*vec2(-1.0,0.0))*k3+texture(uTexture,vTexCoord)*k4+texture(uTexture,vTexCoord+pixel*vec2(1.0,0.0))*k5+texture(uTexture,vTexCoord+pixel*vec2(-1.0,1.0))*k6+texture(uTexture,vTexCoord+pixel*vec2(0.0,1.0))*k7+texture(uTexture,vTexCoord+pixel)*k8;vec4 color=vec4(clamp((colorSum/w),0.0,1.0).rgb,c.a);return color;}vec4 blendPremultipliedAlpha(vec4 back,vec4 front){return front+(back*(1.0-front.a));}vec4 applyVignette(vec4 c,vec2 pos,vec2 center,float v){float d=distance(pos,center)/length(center);float f=1.0-(d*abs(v));if(v>0.0){c.rgb*=f;}else if(v<0.0){c.rgb+=(1.0-f)*(1.0-c.rgb);}return c;}void main(){float x=gl_FragCoord.x;float y=gl_FragCoord.y;float a=1.0;float maskTop=uMaskBounds[0];float maskRight=uMaskBounds[1];float maskBottom=uMaskBounds[2];float maskLeft=uMaskBounds[3];float leftFeatherOpacity=step(uMaskFeather[1],x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],x));a*=leftFeatherOpacity*rightFeatherOpacity;float overlayColorAlpha=(smoothstep(maskLeft,maskLeft+1.0,x)*(1.0-smoothstep(maskRight-1.0,maskRight,x))*(1.0-step(maskTop,y))*step(maskBottom,y));if(uOverlayColor.a==0.0){a*=overlayColorAlpha;}vec2 offset=vec2(maskLeft,maskBottom);vec2 size=vec2(maskRight-maskLeft,maskTop-maskBottom)*.5;vec2 center=offset.xy+size.xy;int pixelX=int(step(center.x,x));int pixelY=int(step(y,center.y));float cornerRadius=0.0;if(pixelX==0&&pixelY==0)cornerRadius=uMaskCornerRadius[0];if(pixelX==1&&pixelY==0)cornerRadius=uMaskCornerRadius[1];if(pixelX==0&&pixelY==1)cornerRadius=uMaskCornerRadius[2];if(pixelX==1&&pixelY==1)cornerRadius=uMaskCornerRadius[3];float cornerOffset=sign(cornerRadius)*length(max(abs(gl_FragCoord.xy-size-offset)-size+cornerRadius,0.0))-cornerRadius;float cornerOpacity=1.0-smoothstep(0.0,1.0,cornerOffset);a*=cornerOpacity;if(uAntialias==1){vec2 scaledPoint=vec2(vTexCoord.x*uTextureSize.x,vTexCoord.y*uTextureSize.y);a*=smoothstep(0.0,1.0,uTextureSize.x-scaledPoint.x);a*=smoothstep(0.0,1.0,uTextureSize.y-scaledPoint.y);a*=smoothstep(0.0,1.0,scaledPoint.x);a*=smoothstep(0.0,1.0,scaledPoint.y);}vec4 color=texture(uTexture,vTexCoord);if(uClarityKernelWeight!=-1.0){color=applyConvolutionMatrix(color,uClarityKernel[0],uClarityKernel[1],uClarityKernel[2],uClarityKernel[3],uClarityKernel[4],uClarityKernel[5],uClarityKernel[6],uClarityKernel[7],uClarityKernel[8],uClarityKernelWeight);}color=blendPremultipliedAlpha(color,texture(uTextureBlend,vTexCoord));color=applyGamma(color,uColorGamma);color=applyColorMatrix(color,uColorMatrix,uColorOffset);color*=a;if(uColorVignette!=0.0){vec2 pos=gl_FragCoord.xy-offset;color=applyVignette(color,pos,center-offset,uColorVignette);}color=blendPremultipliedAlpha(color,texture(uTextureOverlay,vTexCoord));if(overlayColorAlpha<=0.0){color*=1.0-uOverlayColor.a;}color*=uOpacity;fragColor=color;}`,["aPosition","aTexCoord"],["uMatrix","uTexture","uTextureBlend","uTextureOverlay","uTextureSize","uColorGamma","uColorVignette","uColorOffset","uColorMatrix","uClarityKernel","uClarityKernelWeight","uOpacity","uMaskOpacity","uMaskBounds","uMaskCornerRadius","uMaskFeather","uOverlayColor","uAntialias"]),ct=y.createBuffer(),V=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,V),y.bufferData(y.ARRAY_BUFFER,Xc,y.STATIC_DRAW);const N=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,N),y.bufferData(y.ARRAY_BUFFER,T5,y.STATIC_DRAW);const kt=Nc(y,`#version 300 es

in vec4 aPosition;in vec2 aNormal;in float aMiter;out vec2 vNormal;out float vMiter;out float vWidth;uniform float uWidth;uniform float uSharpness;uniform mat4 uMatrix;void main(){vMiter=aMiter;vNormal=aNormal;vWidth=(uWidth*.5)+uSharpness;gl_Position=uMatrix*vec4(aPosition.x+(aNormal.x*vWidth*aMiter),aPosition.y+(aNormal.y*vWidth*aMiter),0,1);}`,`
##head
##mask
in vec2 vNormal;in float vMiter;in float vWidth;uniform float uWidth;uniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;float m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);if(m<=0.0)discard;fillColor.a*=clamp(smoothstep(vWidth-.5,vWidth-1.0,abs(vMiter)*vWidth),0.0,1.0);fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}`,["aPosition","aNormal","aMiter"],["uColor","uCanvasColor","uMatrix","uWidth","uSharpness","uMaskBounds","uMaskOpacity"]),bt=y.createBuffer();C0()&&(y.bindBuffer(y.ARRAY_BUFFER,bt),y.bufferData(y.ARRAY_BUFFER,1,y.DYNAMIC_DRAW));const et=(Ft,ht,Yt,Nt=!1)=>{const{program:Qt,locations:re}=kt;y.useProgram(Qt),y.enableVertexAttribArray(re.aPosition),y.enableVertexAttribArray(re.aNormal),y.enableVertexAttribArray(re.aMiter);const xt=((Xt,he)=>{let ae,Re,nn,Ct=0;const de=Xt.length,ln=new Float32Array(10*(he?de+1:de)),Je=Xt[0],Qe=Xt[de-1];for(Ct=0;Ct<de;Ct++)ae=Xt[Ct-1],Re=Xt[Ct],nn=Xt[Ct+1],ae||(ae=he?Qe:ut(Re.x+(Re.x-nn.x),Re.y+(Re.y-nn.y))),nn||(nn=he?Je:ut(Re.x+(Re.x-ae.x),Re.y+(Re.y-ae.y))),Kg(ln,10*Ct,ae,Re,nn);return he&&Kg(ln,10*de,Qe,Je,Xt[1]),ln})(Ft,Nt),_=5*Float32Array.BYTES_PER_ELEMENT,ke=2*Float32Array.BYTES_PER_ELEMENT,ne=4*Float32Array.BYTES_PER_ELEMENT;y.uniform1f(re.uWidth,ht),y.uniform1f(re.uSharpness,l),y.uniform4fv(re.uColor,Yt),y.uniformMatrix4fv(re.uMatrix,!1,u),y.uniform4f(re.uCanvasColor,T,I,M,F),y.uniform1fv(re.uMaskBounds,x),y.uniform1f(re.uMaskOpacity,f),y.bindBuffer(y.ARRAY_BUFFER,bt),y.bufferData(y.ARRAY_BUFFER,xt,y.STATIC_DRAW),y.vertexAttribPointer(re.aPosition,2,y.FLOAT,!1,_,0),y.vertexAttribPointer(re.aNormal,2,y.FLOAT,!1,_,ke),y.vertexAttribPointer(re.aMiter,1,y.FLOAT,!1,_,ne),y.drawArrays(y.TRIANGLE_STRIP,0,xt.length/5),y.disableVertexAttribArray(re.aPosition),y.disableVertexAttribArray(re.aNormal),y.disableVertexAttribArray(re.aMiter)},Pt=Nc(y,`
##head
void main(){
##matrix
}`,`
##head
##mask
uniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;
##maskapply
fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}`,["aPosition"],["uColor","uCanvasColor","uMatrix","uMaskBounds","uMaskOpacity"]),wt=y.createBuffer(),Q=Nc(y,`
##head
##text
in vec2 aRectCoord;out vec2 vRectCoord;void main(){vTexCoord=aTexCoord;vRectCoord=aRectCoord;
##matrix
}`,`
##head
##mask
in vec2 vTexCoord;in vec2 vRectCoord;uniform sampler2D uTexture;uniform vec4 uTextureColor;uniform float uTextureOpacity;uniform vec2 uRepeat;uniform vec4 uColor;uniform float uCornerRadius[4];uniform vec2 uSize;uniform vec2 uPosition;uniform vec4 uCanvasColor;uniform int uInverted;uniform float uEdgeFeather;void main(){
##init
##colorize
##rectaa
##cornerradius
##maskfeatherapply
if(uInverted==1)a=1.0-a;
##maskapply
##fragcolor
}`,["aPosition","aTexCoord","aRectCoord"],["uTexture","uColor","uMatrix","uCanvasColor","uTextureColor","uTextureOpacity","uRepeat","uPosition","uSize","uMaskBounds","uMaskOpacity","uMaskFeather","uCornerRadius","uInverted","uEdgeFeather"]),Ut=y.createBuffer(),lt=y.createBuffer(),q=y.createBuffer(),vt=Nc(y,`
##head
##text
out vec2 vTexCoordDouble;void main(){vTexCoordDouble=vec2(aTexCoord.x*2.0-1.0,aTexCoord.y*2.0-1.0);vTexCoord=aTexCoord;
##matrix
}`,`
##head
##mask
in vec2 vTexCoord;in vec2 vTexCoordDouble;uniform sampler2D uTexture;uniform float uTextureOpacity;uniform vec2 uTextureAdjust;uniform vec2 uRepeat;uniform vec2 uRadius;uniform vec4 uColor;uniform int uInverted;uniform vec4 uCanvasColor;void main(){
##init
float ar=uRadius.x/uRadius.y;vec2 rAA=vec2(uRadius.x-1.0,uRadius.y-(1.0/ar));vec2 scaledPointSq=vec2((vTexCoordDouble.x*uTextureAdjust.x*uRadius.x)*(vTexCoordDouble.x*uTextureAdjust.x*uRadius.x),(vTexCoordDouble.y*uTextureAdjust.y*uRadius.y)*(vTexCoordDouble.y*uTextureAdjust.y*uRadius.y));float p=(scaledPointSq.x/(uRadius.x*uRadius.x))+(scaledPointSq.y/(uRadius.y*uRadius.y));float pAA=(scaledPointSq.x/(rAA.x*rAA.x))+(scaledPointSq.y/(rAA.y*rAA.y));a=smoothstep(1.0,p/pAA,p);if(uInverted==1)a=1.0-a;
##maskapply
##fragcolor
}`,["aPosition","aTexCoord"],["uTexture","uTextureOpacity","uTextureAdjust","uRepeat","uColor","uCanvasColor","uMatrix","uRadius","uInverted","uMaskBounds","uMaskOpacity"]),dt=y.createBuffer(),Ht=y.createBuffer(),it=new Map,Vt={2:{width:0,height:0},1:{width:0,height:0}},Dt=(Ft,ht,Yt,Nt=1)=>{const Qt=Math.min(Math.min(4096,o)/Yt.width,Math.min(4096,o)/Yt.height,Nt),re=Math.floor(Qt*Yt.width),xt=Math.floor(Qt*Yt.height);id(Yt,Vt[Ft])?y.bindFramebuffer(y.FRAMEBUFFER,ht):(y.bindTexture(y.TEXTURE_2D,C.get(Ft)),y.texImage2D(y.TEXTURE_2D,0,y.RGBA,re,xt,0,y.RGBA,y.UNSIGNED_BYTE,null),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.bindFramebuffer(y.FRAMEBUFFER,ht),y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,C.get(Ft),0),Vt[Ft]=Yt);const _=Yt.width*s,ke=Yt.height*s;var ne,Xt;Jp(d,0,_,ke,0,-1,1),cl(d,0,ke,0),Xt=1,(ne=d)[0]*=Xt,ne[1]*=Xt,ne[2]*=Xt,ne[3]*=Xt,((he,ae)=>{he[4]*=ae,he[5]*=ae,he[6]*=ae,he[7]*=ae})(d,-1),u=d,y.viewport(0,0,re,xt),y.colorMask(!0,!0,!0,!0),y.clearColor(0,0,0,0),y.clear(y.COLOR_BUFFER_BIT),w=[1,0,1,0,1,Math.max(i.width,Yt.width),1,Math.max(i.width,Yt.width)]},Zt=(Ft,ht)=>{const{forceRelease:Yt=!1}=ht||{},{src:Nt}=it.get(Ft);Nt instanceof HTMLCanvasElement&&(Yt||Nt.dataset.retain||or(Nt)),it.delete(Ft),y.deleteTexture(Ft)},mt=Ft=>it.get(Ft).isRotatedVideo;return{drawPath:(Ft,ht=0,Yt=!1,Nt=!1,Qt,re,xt,_,ke)=>{if(Ft.length<2)return;const ne=Ft.map(Re=>({x:Re.x*s,y:Re.y*s})),Xt=Qt*s;if(Xt>0&&et(ne,Xt,ll(re,ke),xt),ne.length<3||!_||_[3]===0||!xt)return;const he=C5(ne),ae=new Float32Array(6*he.length);he.forEach(([Re,nn,Ct],de)=>{const ln=6*de;ae[ln+0]=Re.x,ae[ln+1]=Re.y,ae[ln+2]=nn.x,ae[ln+3]=nn.y,ae[ln+4]=Ct.x,ae[ln+5]=Ct.y}),((Re,nn)=>{const{program:Ct,locations:de}=Pt;y.useProgram(Ct),y.enableVertexAttribArray(de.aPosition),y.uniform4fv(de.uColor,nn),y.uniformMatrix4fv(de.uMatrix,!1,u),y.uniform1fv(de.uMaskBounds,x),y.uniform1f(de.uMaskOpacity,f),y.uniform4f(de.uCanvasColor,T,I,M,F),y.bindBuffer(y.ARRAY_BUFFER,wt),y.bufferData(y.ARRAY_BUFFER,Re,y.STATIC_DRAW),y.vertexAttribPointer(de.aPosition,2,y.FLOAT,!1,0,0),y.drawArrays(y.TRIANGLES,0,Re.length/2),y.disableVertexAttribArray(de.aPosition)})(ae,ll(_,ke))},drawRect:(Ft,ht=0,Yt=!1,Nt=!1,Qt,re,xt,_,ke,ne=!1,Xt,he,ae,Re,nn,Ct=1/s,de,ln)=>{const Je=fl(An(Ft),s),Qe=Qt.map(Ie=>((Ye,yn)=>Math.floor(di(Ye,0,Math.min(.5*(yn.width-1),.5*(yn.height-1)))))(Ie||0,Ft)).map(Ie=>Ie*s);if(re||xt){const Ie=An(Je);Ie.x-=.5,Ie.y-=.5,Ie.width+=1,Ie.height+=1;const Ye=Qg(Ie,ht,Yt,Nt),yn=Jg(Ye);let Sn;de&&(Sn=ll(de),Sn[3]===0&&(Sn[3]=.001));const Fn=_&&ne?[Ie.width/_.width,Ie.height/_.height]:[1,1];((zn,un,Y,at,Z,zt=st,ue,De=1,ye=th,Lt=Xc,Te=w,cn=1,an)=>{const{program:nt,locations:Gt}=Q;y.useProgram(nt),y.enableVertexAttribArray(Gt.aPosition),y.enableVertexAttribArray(Gt.aTexCoord),y.enableVertexAttribArray(Gt.aRectCoord),y.uniform4fv(Gt.uColor,Z),y.uniform2fv(Gt.uSize,[un,Y]),y.uniform2fv(Gt.uPosition,[zn[2],zn[3]]),y.uniform2fv(Gt.uRepeat,ue),y.uniform1i(Gt.uInverted,an?1:0),y.uniform1fv(Gt.uCornerRadius,at),y.uniform4f(Gt.uCanvasColor,T,I,M,F),y.uniform1fv(Gt.uMaskFeather,Te.map((Be,xe)=>xe%2==0?Be:Be*s)),y.uniform1fv(Gt.uMaskBounds,x),y.uniform1f(Gt.uMaskOpacity,f),y.uniform1f(Gt.uEdgeFeather,Math.max(0,cn)),y.uniformMatrix4fv(Gt.uMatrix,!1,u),y.uniform1i(Gt.uTexture,4),y.uniform4fv(Gt.uTextureColor,ye),y.uniform1f(Gt.uTextureOpacity,De),y.activeTexture(y.TEXTURE0+4),y.bindTexture(y.TEXTURE_2D,zt),y.bindBuffer(y.ARRAY_BUFFER,lt),y.bufferData(y.ARRAY_BUFFER,Lt,y.STATIC_DRAW),y.vertexAttribPointer(Gt.aTexCoord,2,y.FLOAT,!1,0,0),y.bindBuffer(y.ARRAY_BUFFER,q),y.bufferData(y.ARRAY_BUFFER,Xc,y.STATIC_DRAW),y.vertexAttribPointer(Gt.aRectCoord,2,y.FLOAT,!1,0,0),y.bindBuffer(y.ARRAY_BUFFER,Ut),y.bufferData(y.ARRAY_BUFFER,zn,y.STATIC_DRAW),y.vertexAttribPointer(Gt.aPosition,2,y.FLOAT,!1,0,0),y.drawArrays(y.TRIANGLE_STRIP,0,zn.length/2),y.disableVertexAttribArray(Gt.aPosition),y.disableVertexAttribArray(Gt.aTexCoord),y.disableVertexAttribArray(Gt.aRectCoord)})(yn,Ie.width,Ie.height,Qe,ll(re,Re),xt,Fn,Re,Sn,Xt?new Float32Array(Xt):e$(Ie.width,Ie.height,_,ke,s),nn,Ct*s,ln)}he&&(he=Math.min(he,Je.width,Je.height),et(((Ie,Ye,yn,Sn,Fn,zn,un,Y)=>{const at=[];if(zn.every(Z=>Z===0))at.push(ut(Ie,Ye),ut(Ie+yn,Ye),ut(Ie+yn,Ye+Sn),ut(Ie,Ye+Sn));else{const[Z,zt,ue,De]=zn,ye=Ie,Lt=Ie+yn,Te=Ye,cn=Ye+Sn;at.push(ut(ye+Z,Te)),xu(at,Lt-zt,Te+zt,zt,-1),at.push(ut(Lt,Te+zt)),xu(at,Lt-De,cn-De,De,0),at.push(ut(Lt-De,cn)),xu(at,ye+ue,cn-ue,ue,1),at.push(ut(ye,cn-ue)),xu(at,ye+Z,Te+Z,Z,2)}return(un||Y)&&ql(at,un,Y,Ie+.5*yn,Ye+.5*Sn),Fn&&$l(at,Fn,Ie+.5*yn,Ye+.5*Sn),at})(Je.x,Je.y,Je.width,Je.height,ht,Qe,Yt,Nt),he*s,ll(ae,Re),!0))},drawEllipse:(Ft,ht,Yt,Nt,Qt,re,xt,_,ke,ne,Xt,he,ae,Re,nn)=>{const Ct=fl(Ui(Ft.x-ht,Ft.y-Yt,2*ht,2*Yt),s);if(xt||_){const de=An(Ct);nn||(de.x-=.5,de.y-=.5,de.width+=1,de.height+=1);const ln=Qg(de,Nt,Qt,re);((Je,Qe,Ie,Ye,yn=st,Sn,Fn=Xc,zn=1,un=!1)=>{const{program:Y,locations:at}=vt;y.useProgram(Y),y.enableVertexAttribArray(at.aPosition),y.enableVertexAttribArray(at.aTexCoord),y.uniformMatrix4fv(at.uMatrix,!1,u),y.uniform2fv(at.uRadius,[.5*Qe,.5*Ie]),y.uniform2fv(at.uTextureAdjust,[Sn.width/(Qe/s),Sn.height/(Ie/s)]),y.uniform1i(at.uInverted,un?1:0),y.uniform4fv(at.uColor,Ye),y.uniform4f(at.uCanvasColor,T,I,M,F),y.uniform2fv(at.uRepeat,[1,1]),y.uniform1fv(at.uMaskBounds,x),y.uniform1f(at.uMaskOpacity,f),y.uniform1i(at.uTexture,4),y.uniform1f(at.uTextureOpacity,zn),y.activeTexture(y.TEXTURE0+4),y.bindTexture(y.TEXTURE_2D,yn),y.bindBuffer(y.ARRAY_BUFFER,Ht),y.bufferData(y.ARRAY_BUFFER,Fn,y.STATIC_DRAW),y.vertexAttribPointer(at.aTexCoord,2,y.FLOAT,!1,0,0),y.bindBuffer(y.ARRAY_BUFFER,dt),y.bufferData(y.ARRAY_BUFFER,Je,y.STATIC_DRAW),y.vertexAttribPointer(at.aPosition,2,y.FLOAT,!1,0,0),y.drawArrays(y.TRIANGLE_STRIP,0,Je.length/2),y.disableVertexAttribArray(at.aPosition),y.disableVertexAttribArray(at.aTexCoord)})(Jg(ln),de.width,de.height,ll(xt,Re),_,ke||Fi(de.width/s,de.height/s),Xt?new Float32Array(Xt):e$(de.width,de.height,ke,ne,s),Re,nn)}he&&et(((de,ln,Je,Qe,Ie,Ye,yn)=>{const Sn=.5*Math.abs(Je),Fn=.5*Math.abs(Qe),zn=Math.abs(Je)+Math.abs(Qe),un=Math.max(20,Math.round(zn/6));return ju(ut(de+Sn,ln+Fn),Sn,Fn,Ie,Ye,yn,un)})(Ct.x,Ct.y,Ct.width,Ct.height,Nt,Qt,re),he*s,ll(ae,Re),!0)},drawImage:(Ft,ht,Yt,Nt,Qt,re,xt,_,ke,ne,Xt=P5,he=1,ae,Re=1,nn=0,Ct=v,de=R5,ln=th,Je=!1,Qe=!1,Ie=!0)=>{const Ye=ht.width*s,yn=ht.height*s,Sn=-.5*Ye,Fn=.5*yn,zn=.5*Ye,un=-.5*yn,Y=new Float32Array([Sn,un,0,Sn,Fn,0,zn,un,0,zn,Fn,0]);y.bindBuffer(y.ARRAY_BUFFER,ct),y.bufferData(y.ARRAY_BUFFER,Y,y.STATIC_DRAW);const at=ht.height/2/A*(i.height/ht.height)*-1;Qt*=s,re*=s,Yt*=s,Nt*=s;const{program:Z,locations:zt}=gt,ue=Kp();((nt,Gt,Be,xe,te)=>{const tn=1/Math.tan(Gt/2),ot=1/(xe-te);nt[0]=tn/Be,nt[1]=0,nt[2]=0,nt[3]=0,nt[4]=0,nt[5]=tn,nt[6]=0,nt[7]=0,nt[8]=0,nt[9]=0,nt[10]=(te+xe)*ot,nt[11]=-1,nt[12]=0,nt[13]=0,nt[14]=2*te*xe*ot,nt[15]=0})(ue,j,a,1,2*-at),cl(ue,Qt,-re,at),cl(ue,Yt,-Nt,0),qg(ue,-ke),Zg(ue,ne),cl(ue,-Yt,Nt,0),Yg(ue,_),Xg(ue,xt),y.useProgram(Z),y.enableVertexAttribArray(zt.aPosition),y.enableVertexAttribArray(zt.aTexCoord),y.uniform1i(zt.uTexture,3),y.uniform2f(zt.uTextureSize,ht.width,ht.height),y.activeTexture(y.TEXTURE0+3),y.bindTexture(y.TEXTURE_2D,Ft);const De=Qe?1:0,ye=C.get(De);y.uniform1i(zt.uTextureBlend,De),y.activeTexture(y.TEXTURE0+De),y.bindTexture(y.TEXTURE_2D,ye);const Lt=Je?2:0,Te=C.get(Lt);y.uniform1i(zt.uTextureOverlay,Lt),y.activeTexture(y.TEXTURE0+Lt),y.bindTexture(y.TEXTURE_2D,Te),y.bindBuffer(y.ARRAY_BUFFER,ct),y.vertexAttribPointer(zt.aPosition,3,y.FLOAT,!1,0,0);const cn=M5&&mt(Ft);let an;y.bindBuffer(y.ARRAY_BUFFER,cn?N:V),y.vertexAttribPointer(zt.aTexCoord,2,y.FLOAT,!1,0,0),y.uniformMatrix4fv(zt.uMatrix,!1,ue),y.uniform4fv(zt.uOverlayColor,ln),!ae||ys(ae,t$)?(ae=t$,an=-1):(an=ae.reduce((nt,Gt)=>nt+Gt,0),an=an<=0?1:an),y.uniform1fv(zt.uClarityKernel,ae),y.uniform1f(zt.uClarityKernelWeight,an),y.uniform1f(zt.uColorGamma,1/Re),y.uniform1f(zt.uColorVignette,nn),y.uniform1i(zt.uAntialias,Ie?1:0),y.uniform4f(zt.uColorOffset,Xt[4],Xt[9],Xt[14],Xt[19]),y.uniformMatrix4fv(zt.uColorMatrix,!1,[Xt[0],Xt[1],Xt[2],Xt[3],Xt[5],Xt[6],Xt[7],Xt[8],Xt[10],Xt[11],Xt[12],Xt[13],Xt[15],Xt[16],Xt[17],Xt[18]]),y.uniform1f(zt.uOpacity,he),y.uniform1f(zt.uMaskOpacity,f),y.uniform1fv(zt.uMaskBounds,x),y.uniform1fv(zt.uMaskCornerRadius,de.map(nt=>nt*s)),y.uniform1fv(zt.uMaskFeather,Ct.map((nt,Gt)=>Gt%2==0?nt:nt*s)),y.drawArrays(y.TRIANGLE_STRIP,0,4),y.disableVertexAttribArray(zt.aPosition),y.disableVertexAttribArray(zt.aTexCoord)},textureFilterNearest:y.NEAREST,textureFilterLinear:y.LINEAR,textureClamp:y.CLAMP_TO_EDGE,textureRepeat:y.REPEAT,textureCreate:()=>y.createTexture(),textureUpdate:(Ft,ht,Yt)=>(it.set(Ft,{src:ht,options:Yt,isRotatedVideo:ht.nodeName==="VIDEO"&&(ht.dataset&&ht.dataset.rotation==90||ht.dataset.rotation==270)}),w5(y,Ft,ht,Yt)),textureGetSize:Ft=>{const{src:ht,options:Yt}=it.get(Ft),Nt=ts(ht);return Yt.scalar?Wa(Nt,Qt=>Qt/Yt.scalar):Nt},textureDelete:Zt,enablePreviewStencil:()=>{y.stencilOp(y.KEEP,y.KEEP,y.REPLACE),y.stencilFunc(y.ALWAYS,1,255),y.stencilMask(255)},applyPreviewStencil:()=>{y.stencilFunc(y.EQUAL,1,255),y.stencilMask(0)},disablePreviewStencil:z,setCanvasColor(Ft){T=Ft[0],I=Ft[1],M=Ft[2],F=n?Ft[3]:1,y.clear(y.COLOR_BUFFER_BIT)},resetCanvasMatrix:()=>{Jp(c,0,i.width,i.height,0,-1,1)},updateCanvasMatrix(Ft,ht,Yt,Nt,Qt){const re=Ft.width,xt=Ft.height,_=i.width*(.5/s),ke=i.height*(.5/s),ne={x:_+(Yt.x+ht.x),y:ke+(Yt.y+ht.y)},Xt={x:ne.x-ht.x,y:ne.y-ht.y},he=.5*re,ae=.5*xt;Zr(Xt,Qt.z,ne),Zx(Xt,Nt,ne),cl(c,(Xt.x-he)*s,(Xt.y-ae)*s,0),cl(c,he*s,ae*s,0),qg(c,Qt.z);const Re=Qt.x>Math.PI/2;Xg(c,Re?Math.PI:0);const nn=Qt.y>Math.PI/2;Yg(c,nn?Math.PI:0),Zg(c,Nt),cl(c,-he*s,-ae*s,0)},drawToCanvas(){y.bindFramebuffer(y.FRAMEBUFFER,null),u=c,y.viewport(0,0,y.drawingBufferWidth,y.drawingBufferHeight),y.colorMask(!0,!0,!0,!0),y.clearColor(T,I,M,F),y.clear(y.COLOR_BUFFER_BIT),w=[1,0,1,0,1,i.width,1,i.width]},drawToImageBlendBuffer(Ft,ht){Dt(1,rt,Ft,ht)},drawToImageOverlayBuffer(Ft,ht){Dt(2,k,Ft,ht)},enableMask(Ft,ht){const Yt=Ft.x*s,Nt=Ft.y*s,Qt=Ft.width*s,re=Ft.height*s;g=Yt,h=g+Qt,p=i.height-Nt,$=i.height-(Nt+re),f=1-ht,x=[p,h,$,g]},disableMask(){g=0,h=i.width,p=i.height,$=0,f=1,x=[p,h,$,g]},resize:(Ft,ht,Yt)=>{s=Math.max(1,Yt),l=s===1?.75:1,r.width=Ft,r.height=ht,i.width=Ft*s,i.height=ht*s,a=ga(i.width,i.height),t.width=i.width,t.height=i.height,Jp(c,0,i.width,i.height,0,-1,1),v=[1,0,1,0,1,r.width,1,r.width]},release(){Array.from(it.keys()).forEach(Ft=>Zt(Ft,{forceRelease:!0})),it.clear(),C.forEach(Ft=>{y.deleteTexture(Ft)}),C.clear(),gt.destroy(),kt.destroy(),Pt.destroy(),Q.destroy(),vt.destroy(),t.width=1,t.height=1,t=void 0}}},E5=(t,e)=>{const{imageData:n,amount:i=1}=t,r=Math.round(2*Math.max(1,i)),o=Math.round(.5*r),a=n.width,s=n.height,l=new Uint8ClampedArray(a*s*4),c=n.data;let d,u,p,h,$,g=0,f=0,x=0;const v=a*s*4-4;for(p=0;p<s;p++)for(d=crypto.getRandomValues(new Uint8ClampedArray(s)),u=0;u<a;u++)h=d[p]/255,f=0,x=0,h<.5&&(f=4*(-o+Math.round(Math.random()*r))),h>.5&&(x=(-o+Math.round(Math.random()*r))*(4*a)),$=Math.min(Math.max(0,g+f+x),v),l[g]=c[$],l[g+1]=c[$+1],l[g+2]=c[$+2],l[g+3]=c[$+3],g+=4;e(null,{data:l,width:n.width,height:n.height})};const A5=[.0625,.125,.0625,.125,.25,.125,.0625,.125,.0625];function L5(t){return Math.sqrt(1- --t*t)}function n$(t){return Object.prototype.toString.call(t)==="[object Date]"}function Lh(t,e){if(t===e||t!=t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const i=e.map((r,o)=>Lh(t[o],r));return r=>i.map(o=>o(r))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(n$(t)&&n$(e)){t=t.getTime();const o=(e=e.getTime())-t;return a=>new Date(t+a*o)}const i=Object.keys(e),r={};return i.forEach(o=>{r[o]=Lh(t[o],e[o])}),o=>{const a={};return i.forEach(s=>{a[s]=r[s](o)}),a}}if(n==="number"){const i=e-t;return r=>t+r*i}throw new Error(`Cannot interpolate ${n} values`)}function T0(t,e={}){const n=fe(t);let i,r=t;function o(a,s){if(t==null)return n.set(t=a),Promise.resolve();r=a;let l=i,c=!1,{delay:d=0,duration:u=400,easing:p=wy,interpolate:h=Lh}=Oi(Oi({},e),s);if(u===0)return l&&(l.abort(),l=null),n.set(t=r),Promise.resolve();const $=Ty()+d;let g;return i=f0(f=>{if(f<$)return!0;c||(g=h(t,a),typeof u=="function"&&(u=u(t,a)),c=!0),l&&(l.abort(),l=null);const x=f-$;return x>u?(n.set(t=a),!1):(n.set(t=g(p(x/u))),!0)}),i.promise}return{set:o,update:(a,s)=>o(a(r,t),s),subscribe:n.subscribe}}function Fh(t,e,n,i){if(typeof n=="number"){const r=i-n,o=(n-e)/(t.dt||1/60),a=(o+(t.opts.stiffness*r-t.opts.damping*o)*t.inv_mass)*t.dt;return Math.abs(a)<t.opts.precision&&Math.abs(r)<t.opts.precision?i:(t.settled=!1,n+a)}if(Ei(n))return n.map((r,o)=>Fh(t,e[o],n[o],i[o]));if(typeof n=="object"){const r={};for(const o in n)r[o]=Fh(t,e[o],n[o],i[o]);return r}throw new Error(`Cannot spring ${typeof n} values`)}function mn(t,e={}){const n=fe(t),{stiffness:i=.15,damping:r=.8,precision:o=.01}=e;let a,s,l,c=t,d=t,u=1,p=0,h=!1;function $(f,x={}){d=f;const v=l={};if(t==null||x.hard||g.stiffness>=1&&g.damping>=1)return h=!0,a=null,c=f,n.set(t=d),Promise.resolve();if(x.soft&&(p=1/(60*(x.soft===!0?.5:+x.soft)),u=0),!s){a=null,h=!1;const w={inv_mass:void 0,opts:g,settled:!0,dt:void 0};s=f0(T=>{if(a===null&&(a=T),h)return h=!1,s=null,!1;u=Math.min(u+p,1),w.inv_mass=u,w.opts=g,w.settled=!0,w.dt=60*(T-a)/1e3;const I=Fh(w,c,t,d);return a=T,c=t,n.set(t=I),w.settled&&(s=null),!w.settled})}return new Promise(w=>{s.promise.then(()=>{v===l&&w()})})}const g={set:$,update:(f,x)=>$(f(d,t),x),subscribe:n.subscribe,stiffness:i,damping:r,precision:o};return g}var F5=Zl(!1,t=>{const e=window.matchMedia("(prefers-reduced-motion:reduce)"),n=()=>t(e.matches);return n(),e.addListener(n),()=>e.removeListener(n)}),i$=()=>"ResizeObserver"in window;const eh=Ds(),nb=(t,e,n,i,r)=>{t.rect||(t.rect=Ds());const o=t.rect;N2(eh,e,n,i,r),ya(o,eh)||(r1(o,eh),t.dispatchEvent(new CustomEvent("measure",{detail:o})))},wu=Math.round,z5=t=>{const e=t.getBoundingClientRect();za&&nb(t,wu(e.x),wu(e.y),wu(e.width),wu(e.height))},nh=t=>{za&&nb(t,t.offsetLeft,t.offsetTop,t.offsetWidth,t.offsetHeight)},td=[];let dl,La,za;function zh(){td.length?(td.forEach(t=>t.measure(t)),za=requestAnimationFrame(zh)):za=void 0}let Su=new Map([]),Hc=0,ih=0;var Fr=(t,e={})=>{const{observePosition:n=!1,observeViewRect:i=!1,once:r=!1,disabled:o=!1,isMeasureRoot:a=!1}=e;if(i$()&&a&&(La||(La=new ResizeObserver(s=>{s.forEach(c=>{Su.set(c.target,c.contentRect)});const l=Array.from(Su.values()).some(({width:c,height:d})=>c>0&&d>0);l?l&&za===!1&&zh():(za&&cancelAnimationFrame(za),za=!1)})),La.observe(t),Hc++),!o)return!i$()||n||i?(t.measure=i?z5:nh,td.push(t),za===void 0&&(za=requestAnimationFrame(zh)),t.measure(t),{destroy(){a&&La&&(Su.delete(t),La.unobserve(t),Hc--,Hc===0&&(La.disconnect(),La=void 0));const s=td.indexOf(t);td.splice(s,1),delete t.measure}}):(dl||(dl=new ResizeObserver(s=>{s.forEach(l=>{za&&nh(l.target)})})),dl.observe(t),nh(t),r?dl.unobserve(t):ih++,{destroy(){a&&La&&(Su.delete(t),La.unobserve(t),Hc--,Hc===0&&(La.disconnect(),La=void 0)),r||(dl.unobserve(t),ih--,ih===0&&(dl.disconnect(),dl=void 0))}})},D5=t=>{let e;const n={pointerdown:()=>{e=!1},keydown:()=>{e=!0},keyup:()=>{e=!1},focus:i=>{e!==!1&&(i.target.dataset.focusVisible="")},blur:i=>{delete i.target.dataset.focusVisible}};return Object.keys(n).forEach(i=>t.addEventListener(i,n[i],!0)),{destroy(){Object.keys(n).forEach(i=>t.removeEventListener(i,n[i],!0))}}};const r$=t=>/^http/.test(t),B5=t=>new Promise((e,n)=>t.kind==="file"?e(t.getAsFile()):t.kind==="string"?t.getAsString(e):void n());var ib=(t,e={})=>{const n=r=>{r.preventDefault()},i=async r=>{r.preventDefault(),r.stopPropagation();try{const o=await(a=>new Promise((s,l)=>{const{items:c}=a.dataTransfer;if(!c)return s([]);const d=Array.from(c).some(p=>p.type==="text/uri-list"),u=Array.from(c).filter(p=>(p.kind==="file"||p.kind==="string")&&p.type!=="text/x-moz-url").map(B5);Promise.all(u).then(p=>{if(d)return s([p.find(r$)].filter(Boolean));const h=p.filter($=>ec($)&&o1($)||r$($));s(h)}).catch(l)}))(r);t.dispatchEvent(new CustomEvent("dropfiles",{detail:{event:r,resources:o},...e}))}catch{}};return t.addEventListener("drop",i),t.addEventListener("dragover",n),{destroy(){t.removeEventListener("drop",i),t.removeEventListener("dragover",n)}}};let ku=null;var M0=()=>{if(ku===null)if(ar()){const t=fi("canvas");ku=!l1(t,{failIfMajorPerformanceCaveat:!0}),or(t)}else ku=!1;return ku},rh=t=>t instanceof WebGLTexture,o$=([t,e,n,i])=>[i.x,i.y,t.x,t.y,n.x,n.y,e.x,e.y];function O5(t){let e,n,i,r;return{c(){e=$t("div"),n=$t("canvas"),S(e,"class","PinturaCanvas")},m(o,a){tt(o,e,a),At(e,n),t[37](n),i||(r=[Mt(n,"measure",t[38]),Tn(Fr.call(null,n))],i=!0)},p:Ke,i:Ke,o:Ke,d(o){o&&J(e),t[37](null),i=!1,Gn(r)}}}function W5(t,e,n){let i,r,o,a,s,l,c;const d=[0,0,0,0],u=ci(),p=ar()&&(Y=>{const at=.5*Y,Z=fi("canvas",{"data-retain":!0,width:Y,height:Y}),zt=Z.getContext("2d");return zt.fillStyle="#f0f",zt.fillRect(0,0,at,at),zt.fillRect(at,at,at,at),Z})(128),h=Ta();let $,{isAnimated:g}=e,{isTransparent:f}=e,{maskRect:x}=e,{maskOpacity:v=1}=e,{maskFrameOpacity:w=.95}=e,{maskMarkupOpacity:T=1}=e,{clipAnnotationsToImage:I=!0}=e,{pixelRatio:M=1}=e,{textPixelRatio:F=M}=e,{backgroundColor:C}=e,{willRender:z=ai}=e,{didRender:j=ai}=e,{willRequest:A}=e,{csp:y}=e,{loadImageData:st=ai}=e,{enableGrid:G=!1}=e,{gridColors:k}=e,{gridSize:H}=e,{gridOpacity:rt=0}=e,{images:gt=[]}=e,{interfaceImages:ct=[]}=e,{selectionColor:V}=e,N=null,kt=null,bt=null;const et=(Y,at)=>Y.set(at,{hard:!g}),Pt={precision:1e-4*.01};let wt=0;const Q=T0(void 0,{duration:0});D(t,Q,Y=>n(36,c=Y));const Ut=mn(1,Pt);D(t,Ut,Y=>n(35,s=Y));const lt=mn(1,Pt);D(t,lt,Y=>n(51,o=Y));const q=fe();D(t,q,Y=>n(53,l=Y));const vt=fe();D(t,vt,Y=>n(52,a=Y));const dt={},Ht=(Y,at)=>{let Z=dt[Y.id];const zt=Math.min(1,2048/at.width);let ue=Z?Z.element:fi("canvas",{width:at.width*zt,height:at.height*zt,"data-retain":!0});if(!Z||((De,ye)=>{if(De.total!==ye.length)return!0;const Lt=De.last,Te=ye[ye.length-1];return Lt.drawMode!==Te.drawMode||!(!Ho(Lt)||Ho(Te)&&ya(Lt,Te))||!(!dr(Lt)||dr(Te)&&Lt.x===Te.x&&Lt.y===Te.y&&Lt.rx===Te.rx&&Lt.ry===Te.ry)||!(!Qi(Lt)||Qi(Te)&&Te.points.length===Lt.points.length)})(Z,Y.actions)){ue=ue.cloneNode(),((ye,Lt,Te)=>{const{selectionColor:cn=[1,1,1],scalar:an=1}=Te||{};let nt=!1;for(const Gt of Lt){const Be=Gt.drawMode==="subtract";if(Be&&!nt)continue;ye.globalCompositeOperation=Be?"destination-out":"source-over",ye.save(),ye.beginPath();const xe=fy(Gt);ey(ye,an,an),a0(ye,Gt.rotation,xe),by(ye,Gt.flipX,Gt.flipY,xe),Gt.width?p0(ye,{...Gt,backgroundColor:cn}):Gt.points?Rh(ye,Object.assign({},Gt,Gt.pathClose?{backgroundColor:cn,strokeColor:[0,0,0,0]}:{strokeColor:cn,strokeJoin:"round",strokeCap:"round"})):Gt.rx&&h0(ye,{...Gt,backgroundColor:cn,strokeColor:[0,0,0,0],strokeJoin:"round",strokeCap:"round"}),ye.restore(),nt=!0}})(ue.getContext("2d"),Y.actions,{selectionColor:[1,0,1],scalar:zt});const De=Y.actions.length;dt[Y.id]={total:De,last:{...Y.actions[De-1]},element:ue}}return{x:0,y:0,...at,fillColor:Y.color||[1,1,1],backgroundImage:ue}};let it;const Vt=()=>{cancelAnimationFrame(it),it=requestAnimationFrame(()=>{Ct=!0,zn=0,r()})},Dt=new Map([]),Zt=new Map([]),mt=(Y,at)=>({filterParam:Y==="pixelated"?N.textureFilterNearest:N.textureFilterLinear,wrapParam:at==="repeat"?N.textureRepeat:N.textureClamp}),Ft=(Y,at,Z)=>{if(!Dt.has(Y)){Dt.set(Y,Y);const De=mt(at,Z);if(!He(zt=Y)&&(Q2(zt)||Ql(zt)||gd(zt)||Gu(zt))){const ye=N.textureCreate();N.textureUpdate(ye,Y,De),Dt.set(Y,ye)}else st(Y).then(ye=>{if(!N||!ye)return;const Lt=N.textureCreate();N.textureUpdate(Lt,ye,De),Dt.set(Y,Lt),Vt()}).catch(ye=>{Dt.set(Y,ye)})}var zt,ue;if(Gu(Y)&&((ue=Y).currentTime>0&&!ue.paused&&!ue.ended&&ue.readyState>2||Y.dataset.redraw==="true")){const De=Dt.get(Y),ye=mt(at,Z);return N.textureUpdate(De,Y,ye),Y.dataset.redraw=!1,De}return Dt.get(Y)},ht=(Y,at={})=>{const Z=at.id||Y.id;if(Y.width&&Y.width<1||Y.height&&Y.height<1||!Y.text.length)return void Zt.delete(Z);let{text:zt,textAlign:ue,fontFamily:De,fontSize:ye=16,fontWeight:Lt,fontVariant:Te,fontStyle:cn,letterSpacing:an,lineHeight:nt=ye,width:Gt,height:Be}=Y,{outline:xe=0,blur:te=0,paddingTop:tn=0,paddingRight:ot=0,paddingBottom:me=0,paddingLeft:se=0}=at;Gt=Ne(Gt)?Math.floor(Gt):Gt,Be=Ne(Be)?Math.floor(Be):Be;const{textSize:ge,signature:oe}=((ui="",Oe)=>{let{width:rn=0,height:In="auto",fontSize:Dn,fontFamily:pn,lineHeight:ti,fontWeight:we,fontStyle:Ze,fontVariant:en,letterSpacing:hi}=Oe;const wi=Fu({text:ui,fontFamily:pn,fontWeight:we,fontStyle:Ze,fontVariant:en,fontSize:Dn,lineHeight:ti,letterSpacing:hi,width:rn,height:In});let pi=cg.get(wi);if(pi)return pi;let Kn=1;Dn>1e3&&Oa()&&(Kn=Dn/1e3,Dn=1e3,ti*=Kn);const gi=i0(fi("pre",{contenteditable:"true",spellcheck:"false",style:`${ay}${l0({fontFamily:pn,fontWeight:we,fontStyle:Ze,fontVariant:en,fontSize:Dn,letterSpacing:hi,lineHeight:ti})};${c0(ui,Oe)}"`,innerHTML:ui})),sr=gi.getBoundingClientRect();return pi={signature:oy(gi).flat().map(Si=>Si.text).join("_;_"),textSize:Wa(ts(sr),Si=>Math.ceil(Si*Kn))},cg.set(wi,pi),gi.remove(),pi})(zt,{...Y,width:Gt,height:void 0}),qe=Fu({text:zt,textAlign:ue,fontFamily:De,fontSize:ye,fontWeight:Lt,fontVariant:Te,fontStyle:cn,lineHeight:nt,letterSpacing:an,outline:xe,blur:te,signature:oe});if(!Dt.has(qe)){Dt.set(qe,zt);const ui=Math.ceil(ge.width),Oe=Math.ceil(ge.height);if(ui===0||Oe===0)return;const rn=k0(),In=Math.min(1,(rn-(se+ot)*F)/(ui*F),(rn-(tn+me)*F)/(Oe*F));ly(zt,{fontSize:ye,fontFamily:De,fontWeight:Lt,fontVariant:Te,fontStyle:cn,letterSpacing:an,textAlign:ue,lineHeight:nt,width:Gt,height:Be,imageWidth:ui,imageHeight:Oe,paddingLeft:se,paddingTop:tn,paddingRight:ot,paddingBottom:me,pixelRatio:F*In,willRequest:A,outline:xe,blur:te,styleNonce:y.styleNonce,color:[1,0,1]}).then(Dn=>{if(!N)return;const pn=N.textureCreate();N.textureUpdate(pn,Dn,{filterParam:N.textureFilterLinear,wrapParam:N.textureClamp,scalar:In,premultiply:!Oa()}),Dt.set(qe,pn),Zt.set(Z,pn),Vt()}).catch(console.error)}const ze=Dt.get(qe);return rh(ze)?ze:Zt.get(Z)},Yt=new Map,Nt=Y=>{let at;return Y.backgroundImage?at=Ft(Y.backgroundImage,Y.backgroundImageRendering,Y.backgroundRepeat==="repeat"?"repeat":void 0):Y.bitmap&&Y.points&&(at=(Z=>{const{id:zt,points:ue,strokeWidth:De,strokeCap:ye,strokeJoin:Lt,strokeColor:Te,strokeDash:cn}=Z;let an=Dt.get(zt),nt=Yt.get(zt);const Gt=Fu({points:ue.map(oe=>`${oe.x},${oe.y}`).join(","),strokeWidth:De,strokeCap:ye,strokeJoin:Lt,strokeColor:Te,strokeDash:(cn||[]).join(",")});if(nt){const{hash:oe}=nt;if(Dt.has(zt)){if(Gt===oe)return Dt.get(zt)}else nt=void 0}if(!nt){const oe=fi("canvas",{width:1,height:1});nt={canvas:oe,hash:void 0},Yt.set(Z.id,nt),an=N.textureCreate(),N.textureUpdate(an,oe,{filterParam:N.textureFilterLinear,wrapParam:N.textureClamp}),Dt.set(zt,an)}const{canvas:Be}=nt,xe=Math.ceil(Z.strokeWidth),te=ur(ue),tn=Math.floor(te.x)-.5*xe,ot=Math.floor(te.y)-.5*xe,me=Math.ceil(te.width+xe),se=Math.ceil(te.height+xe);Be.width=Math.max(me,1),Be.height=Math.max(se,1);const ge=Be.getContext("2d");return ge.clearRect(0,0,Be.width,Be.height),me>=1&&se>=1&&(ge.translate(-tn,-ot),Rh(ge,Z),ge.resetTransform()),N.textureUpdate(an,Be,{filterParam:N.textureFilterLinear,wrapParam:N.textureClamp}),Yt.set(zt,{canvas:Be,hash:Gt}),Dt.get(zt)})(Y)),at},Qt=({texture:Y,size:at,origin:Z,translation:zt,rotation:ue,scale:De,colorMatrix:ye,opacity:Lt,convolutionMatrix:Te,gamma:cn,vignette:an,maskFeather:nt,maskCornerRadius:Gt,overlayColor:Be,enableOverlay:xe,enableManipulation:te,enableAntialiasing:tn})=>{let ot=0,me=0;if(M===1){const se=Math.abs(1-De)<Number.EPSILON;ot=se&&kt%2!=0?.5:0,me=se&&bt%2!=0?.5:0}return N.drawImage(Y,at,Z.x,Z.y,zt.x+ot,zt.y+me,ue.x,ue.y,ue.z,De,ye,di(Lt,0,1),Te,cn,an,nt,Gt,Be,xe,te,tn),Y},re=(Y,at,Z)=>{const zt=Ln(at),ue=Ln(Y),De=zt.x-ue.x,ye=zt.y-ue.y,Lt=Zr(zt,Z,ue);return{x:Lt.x-ue.x-De,y:Lt.y-ue.y-ye}},xt=(Y,at,Z)=>{let zt,ue;const De=ga(Z.width,Z.height);if(Y.backgroundRepeat==="repeat"&&(zt={...Z},ue={x:0,y:0}),Y.backgroundSize==="contain"){const ye=oo(at,De,at);zt=yl(ye),ue=Y.backgroundPosition?Y.backgroundPosition:ut(.5*(at.width-zt.width),.5*(at.height-zt.height))}else if(Y.backgroundSize==="cover"){const ye=fs(at,De,at);zt=yl(ye),Y.backgroundPosition?ue=Y.backgroundPosition:(ue=ut(ye.x,ye.y),ue=ut(.5*(at.width-zt.width),.5*(at.height-zt.height)))}else Y.backgroundSize?(zt=Y.backgroundSize,ue=Y.backgroundPosition||{x:0,y:0}):Y.backgroundPosition&&(zt={...Z},ue=Y.backgroundPosition);return{backgroundSize:zt,backgroundPosition:ue}},_=(Y=[],at)=>{Y.forEach(Z=>{let zt=Nt(Z);const ue=Z.status!=="complete"&&(Z.status==="loading"||Z.backgroundImage&&zt===Z.backgroundImage);ue&&Vt();const De=Z.status==="error"||Z.backgroundImage&&zt instanceof Error;let ye=rh(zt)?zt:void 0;const Lt=Z._scale||1,Te=Z._translate||u,cn=Z.strokeWidth&&Z.strokeWidth*Lt,an=Z.cornerRadius?((te,tn)=>[te,te,te,te].map(ot=>ot*tn))(Z.cornerRadius,Lt):d,nt=!!Z.width,Gt=He(Z.text),Be=Ei(Z.points),xe=dr(Z);if(Be){const te=Z.points.map(tn=>ut(tn.x*Lt+Te.x,tn.y*Lt+Te.y));if(Z.bitmap){zt&&at.push(zt);const tn=ur(te),ot=Math.ceil(Z.strokeWidth*Lt);N.drawRect({x:Math.floor(tn.x)-.5*ot,y:Math.floor(tn.y)-.5*ot,width:Math.ceil(tn.width+ot),height:Math.ceil(tn.height+ot)},Z.rotation,Z.flipX,Z.flipY,[0,0,0,0],void 0,ye,void 0,void 0,void 0,void 0,void 0,void 0,Z.opacity,void 0,void 0,!1,!1)}else N.drawPath(te,Z.rotation,Z.flipX,Z.flipY,cn,Z.strokeColor,Z.pathClose,Z.backgroundColor,Z.opacity)}else if(xe){let te=Z.x,tn=Z.y;te*=Lt,tn*=Lt,te+=Te.x,tn+=Te.y;const ot=Au({x:te,y:tn,rx:Z.rx*Lt,ry:Z.ry*Lt}),me=ut(te,tn),se=ye&&N.textureGetSize(ye);let ge,oe;if(se&&Z.backgroundImage&&(Z.backgroundSize||Z.backgroundPosition||Z.backgroundRepeat)){const qe=xt(Z,ot,se);ge=qe.backgroundSize,oe=qe.backgroundPosition}if(N.drawEllipse(me,Z.rx*Lt,Z.ry*Lt,Z.rotation,Z.flipX,Z.flipY,Z.backgroundColor,ye,ge,oe,Z.backgroundCorners&&o$(Z.backgroundCorners),cn,Z.strokeColor,Z.opacity,Z.inverted),zt&&at.push(zt),ue||De){if(!(Z.backgroundColor||Z.strokeColor&&Z.strokeWidth)){const qe=Z.opacity||1;N.drawEllipse(me,Z.rx*Lt,Z.ry*Lt,Z.rotation,Z.flipX,Z.flipY,De?[1,.2549,.2118,.25*qe]:[0,0,0,.25*qe])}De&&Re(me),ue&&ae(me)}}else if(Gt){const{fontSize:te=16}=Z,tn=te>1e3&&Oa()?te/1e3:1,ot=Math.max(16,Math.ceil(te/tn*.25)),me=Math.abs(Z.rotation)>0,se=Ne(Z.width)?Math.floor(Z.width):Z.width,ge=Ne(Z.height)?Math.floor(Z.height):Z.height,oe=no(Z.text,{...Z,width:se,height:ge}),qe=Math.ceil(oe.width),ze=Math.ceil(oe.height),ui={x:Z.x*Lt+Te.x,y:Z.y*Lt+Te.y,width:qe*Lt,height:ze*Lt},Oe=!!Z.height;(Z.backgroundColor||Z.strokeColor)&&N.drawRect(ui,Z.rotation,Z.flipX,Z.flipY,an,Z.backgroundColor,void 0,void 0,void 0,!1,void 0,cn,Z.strokeColor,Z.opacity,void 0,void 0,void 0,Z.inverted);const{textShadowX:rn,textShadowY:In,textShadowBlur:Dn}=Z;if(rn||In||Dn){const ti=Math.ceil(.5*Dn),we=Math.max(ot,Oe?0:ti),Ze=ht(Z,{id:Z.id+"shadow",blur:Dn,paddingTop:we,paddingRight:we,paddingBottom:we,paddingLeft:we});if(Ze&&!Z._prerender){at.push(Ze);const en=N.textureGetSize(Ze),hi={x:0,y:0},wi={width:en.width/F*Lt,height:en.height/F*Lt},pi=ot*Lt/tn;let Kn;if(Oe)Kn={...ui},hi.x=rn-pi,hi.y=In-pi;else if(Kn={x:Z.x*Lt+Te.x-pi,y:Z.y*Lt+Te.y-pi,width:wi.width,height:wi.height},me){const gi=re(ui,Kn,Z.rotation);Kn.x+=gi.x,Kn.y+=gi.y;const sr=Zr(ut(rn,In),Z.rotation);Kn.x+=sr.x,Kn.y+=sr.y}else Kn.x+=rn,Kn.y+=In;N.drawRect(Kn,Z.rotation,Z.flipX,Z.flipY,[0,0,0,0],void 0,Ze,wi,hi,!1,void 0,void 0,void 0,Z.opacity,void 0,0,Z.textShadowColor)}}if(Z.textOutlineWidth){const ti=Math.ceil(.5*Z.textOutlineWidth),we=ot+ti,Ze=ht(Z,{id:Z.id+"outline",outline:Z.textOutlineWidth,paddingTop:we,paddingRight:we,paddingBottom:we,paddingLeft:we});if(Ze&&!Z._prerender){at.push(Ze);const en=N.textureGetSize(Ze),hi={x:0,y:0},wi={width:en.width/F*Lt,height:en.height/F*Lt},pi=(ot+ti)*Lt/tn,Kn={x:Z.x*Lt+Te.x-pi,y:Z.y*Lt+Te.y-pi,width:wi.width,height:Z.height?ze+pi:wi.height};if(me){const gi=re(ui,Kn,Z.rotation);Kn.x+=gi.x,Kn.y+=gi.y}N.drawRect(Kn,Z.rotation,Z.flipX,Z.flipY,[0,0,0,0],void 0,Ze,wi,hi,!1,void 0,void 0,void 0,Z.opacity,void 0,0,Z.textOutlineColor)}}const pn=ht(Z,{id:Z.id+"text",paddingTop:ot,paddingRight:ot,paddingBottom:ot,paddingLeft:ot});if(pn&&!Z._prerender){at.push(pn);const ti=N.textureGetSize(pn),we={x:0,y:0},Ze={width:ti.width/F*Lt,height:ti.height/F*Lt},en=ot*Lt/tn,hi={x:Z.x*Lt+Te.x-en,y:Z.y*Lt+Te.y-en,width:Ze.width,height:Z.height?ze+en:Ze.height};if(me){const pi=re(ui,hi,Z.rotation);hi.x+=pi.x,hi.y+=pi.y}const wi=Z.color||[0,0,0];Z._prerender&&(wi[3]=0),N.drawRect(hi,Z.rotation,Z.flipX,Z.flipY,d,!1,pn,Ze,we,!1,!1,void 0,void 0,Z.opacity,void 0,Z.feather,wi,Z.inverted)}}else if(nt){zt&&at.push(zt);const te=qa(Z);let tn,ot;Lt&&Te&&(te.x*=Lt,te.y*=Lt,te.x+=Te.x,te.y+=Te.y,te.width*=Lt,te.height*=Lt);const{backgroundRepeat:me="no-repeat"}=Z,se=ye&&N.textureGetSize(ye);if(se&&Z.backgroundImage&&(Z.backgroundSize||Z.backgroundPosition||Z.backgroundRepeat)){const ge=xt(Z,te,se);tn=ge.backgroundSize,ot=ge.backgroundPosition}if(N.drawRect(te,Z.rotation,Z.flipX,Z.flipY,an,Z.backgroundColor||[0,0,0,0],ye,tn,ot,me==="repeat",Z.backgroundCorners&&o$(Z.backgroundCorners),cn,Z.strokeColor,Z.opacity,void 0,Z.feather,Z.fillColor,Z.inverted),ue||De){if(!(Z.backgroundColor&&Z.backgroundColor[3]!==0||Z.strokeColor&&Z.strokeWidth)){const oe=Z.opacity||1;N.drawRect(te,Z.rotation,Z.flipX,Z.flipY,an,De?[1,.2549,.2118,.25*oe]:[0,0,0,.25*oe])}const ge=Ln(te);De&&Re(ge),ue&&ae(ge)}}else zt&&at.push(zt)})};let ke=0;const ne=[{x:-5,y:-5},{x:5,y:5}],Xt=[{x:5,y:-5},{x:-5,y:5}],he=ju({x:0,y:0},10,10,0,!1,!1,16);he.length=9;const ae=Y=>{ke=Date.now()/50,N.drawEllipse(Y,15,15,0,!1,!1,[0,0,0,.5]);const at=$l(he.map(Z=>({x:Z.x+Y.x,y:Z.y+Y.y})),ke,Y.x,Y.y);N.drawPath(at,0,!1,!1,2,[1,1,1])},Re=Y=>{N.drawEllipse(Y,13,13,0,!1,!1,[1,.2549,.2118,.75]);const at=ne.map(zt=>({x:zt.x+Y.x,y:zt.y+Y.y})),Z=Xt.map(zt=>({x:zt.x+Y.x,y:zt.y+Y.y}));N.drawPath(at,0,!1,!1,3,[1,1,1]),N.drawPath(Z,0,!1,!1,3,[1,1,1])},nn=(Y,at,Z,zt,ue,De)=>N.drawRect(at,0,!1,!1,d,d,Y,zt,Z,!0,void 0,0,void 0,De,void 0,void 0,ue);let Ct=!1,de=!0,ln=!1;const Je=[],Qe=[],Ie=[],Ye=Y=>!Y.aboveFrame,yn=Y=>Y.aboveFrame,Sn=()=>{Ie.length=0;const Y=gt[0],{manipulationShapes:at,manipulationShapesDirty:Z,annotationShapes:zt,annotationShapesDirty:ue,interfaceShapes:De,decorationShapes:ye,frameShapes:Lt,selectionShapes:Te}=z({opacity:Y.opacity,rotation:Y.rotation,scale:Y.scale,images:gt,size:Fi(kt,bt),backgroundColor:[...c],selectionRect:l}),cn=[...c],an=l,nt=di(s,0,1),Gt=a,Be=Math.abs(Y.rotation.x/Math.PI*2-1),xe=Math.abs(Y.rotation.y/Math.PI*2-1),te=Be<.99||xe<.99,tn={...Y.size},ot=Y.backgroundColor,me=Y.backgroundImage,se=at.length>0,ge=zt.length>0,oe=zt.filter(yn).length>0,qe=ye.filter(yn).length>0,ze=ot[3]>0,ui=!!I&&T>=1;if(nt<1&&ze){const Oe=cn[0],rn=cn[1],In=cn[2],Dn=1-nt,pn=ot[0]*Dn,ti=ot[1]*Dn,we=ot[2]*Dn,Ze=1-Dn;cn[0]=pn+Oe*Ze,cn[1]=ti+rn*Ze,cn[2]=we+In*Ze,cn[3]=1}if(N.setCanvasColor(f?d:cn),se&&(Z||Ct)?(N.disableMask(),N.drawToImageBlendBuffer(tn),Je.length=0,_(at,Je)):se||(Je.length=0),Ie.push(...Je),de&&(N.drawToImageOverlayBuffer(tn,F),de=!1),te){if(ge&&(ue||Ct)||!ln){N.disableMask(),N.drawToImageOverlayBuffer(tn,F),Qe.length=0;const Oe=oe?zt.filter(Ye):zt;_(Oe,Qe)}else ge||(Qe.length=0);ln=!0}else ln=!1;if(N.drawToCanvas(),N.enableMask(an,nt),G&&H>=1&&k.length===2&&rt&&((Oe,rn,In,Dn,pn)=>{const ti=Fi(rn,rn),we=Ft(p,"pixelated","repeat"),Ze=ut(-Oe.x%rn,-Oe.y%rn),en=ut(Ze.x+.5*ti.width,Ze.y);nn(we,Oe,Ze,ti,In,pn),nn(we,Oe,en,ti,Dn,pn)})(an,H,k[0],k[1],rt),ze&&N.drawRect(an,0,!1,!1,d,ot),me){N.enableMask(an,1);const Oe=Math.max(x.width/me.width,x.height/me.height),rn=me.width*Oe,In=me.height*Oe,Dn={x:x.x+.5*x.width-.5*rn,y:x.y+.5*x.height-.5*In,width:rn,height:In};N.drawRect(Dn,0,!1,!1,d,d,Ft(me,"linear")),N.enableMask(an,nt)}if(ui&&N.enablePreviewStencil(),Ie.push(...[...gt].reverse().map(Oe=>Qt({...Oe,texture:Ft(Oe.data),enableOverlay:te&&ge,enableManipulation:se,enableAntialiasing:!0,mask:an,maskOpacity:nt,overlayColor:Gt}))),N.enableMask(an,T),!te){ui&&N.applyPreviewStencil(),N.resetCanvasMatrix(),N.updateCanvasMatrix(tn,Y.origin,Y.translation,Y.scale,Y.rotation),Qe.length=0;const Oe=oe?zt.filter(Ye):zt;_(Oe,Qe),ui&&N.disablePreviewStencil()}if(Ie.push(...Qe),N.resetCanvasMatrix(),N.enableMask(an,T),_(qe?ye.filter(Ye):ye,Ie),Lt.length){N.enableMask(an,1);const Oe=Lt.filter(In=>!In.expandsCanvas),rn=Lt.filter(In=>In.expandsCanvas);Oe.length&&_(Oe,Ie),rn.length&&(N.enableMask({x:an.x+.5,y:an.y+.5,width:an.width-1,height:an.height-1},o),_(rn,Ie))}if(oe&&(N.resetCanvasMatrix(),N.updateCanvasMatrix(tn,Y.origin,Y.translation,Y.scale,Y.rotation),_(zt.filter(yn),Ie),N.resetCanvasMatrix()),qe&&(N.resetCanvasMatrix(),_(ye.filter(yn),Ie),N.resetCanvasMatrix()),V&&Te.length&&!te){N.resetCanvasMatrix(),N.updateCanvasMatrix(tn,Y.origin,Y.translation,Y.scale,Y.rotation);const Oe=[...V];Oe[3]=.5;const rn=[{id:"selection",color:Oe,actions:[...Te]}].map(In=>Ht(In,tn));_(rn,Ie),N.resetCanvasMatrix()}N.disableMask(),_(De,Ie),ct.forEach(Oe=>{if(N.enableMask(Oe.mask,Oe.maskOpacity),Oe.backgroundColor){const In=me&&fs({...Oe.mask},me.width/me.height),Dn=me&&Ft(me,"linear");N.drawRect(Oe.mask,0,!1,!1,Oe.maskCornerRadius,Oe.backgroundColor,Dn,In,In,void 0,void 0,void 0,void 0,Oe.opacity,Oe.maskFeather),Dn&&Ie.push(Dn)}const rn=Qt({...Oe,texture:Ft(Oe.data),enableAntialiasing:!1,translation:{x:Oe.translation.x+Oe.offset.x-.5*kt,y:Oe.translation.y+Oe.offset.y-.5*bt}});Ie.push(rn)}),N.disableMask(),(Oe=>{Dt.forEach((rn,In)=>{!Oe.find(Dn=>Dn===rn)&&rh(rn)&&(Array.from(Zt.values()).includes(rn)||(Dt.delete(In),N.textureDelete(rn)))})})(Ie),j(),Ct=!1};let Fn,zn=0;const un=()=>{clearTimeout(Fn);const Y=Date.now();Y-zn<48?Fn=setTimeout(un,48):(zn=Y,Sn())};return Iy(()=>r()),bs(()=>n(31,N=I5($,{alpha:f}))),Xo(()=>{N&&(Yt.forEach(({canvas:Y})=>or(Y)),Yt.clear(),N.release(),n(31,N=void 0),n(0,$=void 0))}),t.$$set=Y=>{"isAnimated"in Y&&n(9,g=Y.isAnimated),"isTransparent"in Y&&n(10,f=Y.isTransparent),"maskRect"in Y&&n(11,x=Y.maskRect),"maskOpacity"in Y&&n(12,v=Y.maskOpacity),"maskFrameOpacity"in Y&&n(13,w=Y.maskFrameOpacity),"maskMarkupOpacity"in Y&&n(14,T=Y.maskMarkupOpacity),"clipAnnotationsToImage"in Y&&n(15,I=Y.clipAnnotationsToImage),"pixelRatio"in Y&&n(16,M=Y.pixelRatio),"textPixelRatio"in Y&&n(17,F=Y.textPixelRatio),"backgroundColor"in Y&&n(18,C=Y.backgroundColor),"willRender"in Y&&n(19,z=Y.willRender),"didRender"in Y&&n(20,j=Y.didRender),"willRequest"in Y&&n(21,A=Y.willRequest),"csp"in Y&&n(22,y=Y.csp),"loadImageData"in Y&&n(23,st=Y.loadImageData),"enableGrid"in Y&&n(24,G=Y.enableGrid),"gridColors"in Y&&n(25,k=Y.gridColors),"gridSize"in Y&&n(26,H=Y.gridSize),"gridOpacity"in Y&&n(27,rt=Y.gridOpacity),"images"in Y&&n(28,gt=Y.images),"interfaceImages"in Y&&n(29,ct=Y.interfaceImages),"selectionColor"in Y&&n(30,V=Y.selectionColor)},t.$$.update=()=>{if(1&t.$$.dirty[0]&&$){const Y=getComputedStyle($).getPropertyValue("--color-transition-duration");n(32,wt=(at=>{let Z=parseFloat(at);return/^[0-9]+s$/.test(at)?1e3*Z:Z})(Y))}262656&t.$$.dirty[0]|2&t.$$.dirty[1]&&C&&Q.set(C,{duration:g?wt:0}),4096&t.$$.dirty[0]&&et(Ut,Ne(v)?v:1),8192&t.$$.dirty[0]&&et(lt,Ne(w)?w:1),2048&t.$$.dirty[0]&&x&&q.set(x),48&t.$$.dirty[1]&&c&&vt.set([c[0],c[1],c[2],di(s,0,1)]),268435462&t.$$.dirty[0]|1&t.$$.dirty[1]&&n(34,i=!!(N&&kt&&bt&&gt.length)),65542&t.$$.dirty[0]|1&t.$$.dirty[1]&&kt&&bt&&N&&(zn=0,N.resize(kt,bt,M)),8&t.$$.dirty[1]&&n(33,r=i?M0()?un:Sn:pe),12&t.$$.dirty[1]&&i&&r&&r()},[$,kt,bt,h,Q,Ut,lt,q,vt,g,f,x,v,w,T,I,M,F,C,z,j,A,y,st,G,k,H,rt,gt,ct,V,N,wt,r,i,s,c,function(Y){Hn[Y?"unshift":"push"](()=>{$=Y,n(0,$)})},Y=>{n(1,kt=Y.detail.width),n(2,bt=Y.detail.height),h("measure",{width:kt,height:bt})}]}class _5 extends fn{constructor(e){super(),$n(this,e,W5,O5,dn,{isAnimated:9,isTransparent:10,maskRect:11,maskOpacity:12,maskFrameOpacity:13,maskMarkupOpacity:14,clipAnnotationsToImage:15,pixelRatio:16,textPixelRatio:17,backgroundColor:18,willRender:19,didRender:20,willRequest:21,csp:22,loadImageData:23,enableGrid:24,gridColors:25,gridSize:26,gridOpacity:27,images:28,interfaceImages:29,selectionColor:30},null,[-1,-1,-1])}}var bn=(t,e=Boolean,n=" ")=>t.filter(e).join(n);function a$(t,e,n){const i=t.slice();return i[17]=e[n],i}const V5=t=>({tab:4&t}),s$=t=>({tab:t[17]});function l$(t){let e,n,i,r=[],o=new Map,a=t[2];const s=l=>l[17].id;for(let l=0;l<a.length;l+=1){let c=a$(t,a,l),d=s(c);o.set(d,r[l]=c$(d,c))}return{c(){e=$t("div");for(let l=0;l<r.length;l+=1)r[l].c();S(e,"class",n=bn(["PinturaTabList",t[0]])),S(e,"role","tablist"),S(e,"data-layout",t[1])},m(l,c){tt(l,e,c);for(let d=0;d<r.length;d+=1)r[d].m(e,null);t[14](e),i=!0},p(l,c){1124&c&&(a=l[2],Le(),r=es(r,c,s,1,l,a,o,e,Zs,c$,null,a$),Fe()),(!i||1&c&&n!==(n=bn(["PinturaTabList",l[0]])))&&S(e,"class",n),(!i||2&c)&&S(e,"data-layout",l[1])},i(l){if(!i){for(let c=0;c<a.length;c+=1)R(r[c]);i=!0}},o(l){for(let c=0;c<r.length;c+=1)B(r[c]);i=!1},d(l){l&&J(e);for(let c=0;c<r.length;c+=1)r[c].d();t[14](null)}}}function c$(t,e){let n,i,r,o,a,s,l,c,d;const u=e[11].default,p=yr(u,e,e[10],s$);function h(...g){return e[12](e[17],...g)}function $(...g){return e[13](e[17],...g)}return{key:t,first:null,c(){n=$t("button"),p&&p.c(),i=ce(),S(n,"role","tab"),S(n,"id",r=e[17].tabId),S(n,"aria-controls",o=e[17].href.substring(1)),S(n,"aria-selected",a=e[17].selected),n.disabled=s=e[17].disabled,S(n,"type","button"),this.first=n},m(g,f){tt(g,n,f),p&&p.m(n,null),At(n,i),l=!0,c||(d=[Mt(n,"keydown",h),Mt(n,"click",$)],c=!0)},p(g,f){e=g,p&&p.p&&(!l||1028&f)&&xr(p,u,e,e[10],l?br(u,e[10],f,V5):vr(e[10]),s$),(!l||4&f&&r!==(r=e[17].tabId))&&S(n,"id",r),(!l||4&f&&o!==(o=e[17].href.substring(1)))&&S(n,"aria-controls",o),(!l||4&f&&a!==(a=e[17].selected))&&S(n,"aria-selected",a),(!l||4&f&&s!==(s=e[17].disabled))&&(n.disabled=s)},i(g){l||(R(p,g),l=!0)},o(g){B(p,g),l=!1},d(g){g&&J(n),p&&p.d(g),c=!1,Gn(d)}}}function N5(t){let e,n,i=t[4]&&l$(t);return{c(){i&&i.c(),e=Di()},m(r,o){i&&i.m(r,o),tt(r,e,o),n=!0},p(r,[o]){r[4]?i?(i.p(r,o),16&o&&R(i,1)):(i=l$(r),i.c(),R(i,1),i.m(e.parentNode,e)):i&&(Le(),B(i,1,1,()=>{i=null}),Fe())},i(r){n||(R(i),n=!0)},o(r){B(i),n=!1},d(r){i&&i.d(r),r&&J(e)}}}function H5(t,e,n){let i,r,o,{$$slots:a={},$$scope:s}=e,{class:l}=e,{name:c}=e,{selected:d}=e,{tabs:u=[]}=e,{layout:p}=e;const h=Ta(),$=x=>{const v=o.querySelectorAll('[role="tab"] button')[x];v&&v.focus()},g=(x,v)=>{x.preventDefault(),x.stopPropagation(),ka()&&x.target.focus(),h("select",v)},f=({key:x},v)=>{if(!/arrow/i.test(x))return;const w=u.findIndex(T=>T.id===v);return/right|down/i.test(x)?$(w<u.length-1?w+1:0):/left|up/i.test(x)?$(w>0?w-1:u.length-1):void 0};return t.$$set=x=>{"class"in x&&n(0,l=x.class),"name"in x&&n(7,c=x.name),"selected"in x&&n(8,d=x.selected),"tabs"in x&&n(9,u=x.tabs),"layout"in x&&n(1,p=x.layout),"$$scope"in x&&n(10,s=x.$$scope)},t.$$.update=()=>{896&t.$$.dirty&&n(2,i=u.map(x=>{const v=x.id===d;return{...x,tabId:`tab-${c}-${x.id}`,href:`#panel-${c}-${x.id}`,selected:v}})),4&t.$$.dirty&&n(4,r=i.length>1)},[l,p,i,o,r,g,f,c,d,u,s,a,(x,v)=>f(v,x.id),(x,v)=>g(v,x.id),function(x){Hn[x?"unshift":"push"](()=>{o=x,n(3,o)})}]}class c1 extends fn{constructor(e){super(),$n(this,e,H5,N5,dn,{class:0,name:7,selected:8,tabs:9,layout:1})}}var xs=(t,e)=>{if(!e)return;const n=i=>{I2(t,i)};return n(e),{update:n}};const j5=t=>({panel:16&t}),d$=t=>({panel:t[4][0].id,panelIsActive:!0});function u$(t,e,n){const i=t.slice();return i[14]=e[n].id,i[15]=e[n].shouldDraw,i[16]=e[n].panelId,i[17]=e[n].labelledBy,i[18]=e[n].isActive,i[19]=e[n].hidden,i[3]=e[n].visible,i}const U5=t=>({panel:16&t,panelIsActive:16&t}),p$=t=>({panel:t[14],panelIsActive:t[18]});function G5(t){let e,n,i,r,o,a,s;const l=t[11].default,c=yr(l,t,t[10],d$);return{c(){e=$t("div"),n=$t("div"),c&&c.c(),S(n,"class",i=bn([t[1]])),S(e,"class",t[0])},m(d,u){tt(d,e,u),At(e,n),c&&c.m(n,null),o=!0,a||(s=[Tn(r=xs.call(null,e,t[2])),Mt(e,"measure",t[13]),Tn(Fr.call(null,e))],a=!0)},p(d,u){c&&c.p&&(!o||1040&u)&&xr(c,l,d,d[10],o?br(l,d[10],u,j5):vr(d[10]),d$),(!o||2&u&&i!==(i=bn([d[1]])))&&S(n,"class",i),(!o||1&u)&&S(e,"class",d[0]),r&&Cn(r.update)&&4&u&&r.update.call(null,d[2])},i(d){o||(R(c,d),o=!0)},o(d){B(c,d),o=!1},d(d){d&&J(e),c&&c.d(d),a=!1,Gn(s)}}}function Z5(t){let e,n,i,r,o,a,s=[],l=new Map,c=t[4];const d=u=>u[14];for(let u=0;u<c.length;u+=1){let p=u$(t,c,u),h=d(p);l.set(h,s[u]=m$(h,p))}return{c(){e=$t("div");for(let u=0;u<s.length;u+=1)s[u].c();S(e,"class",n=bn(["PinturaTabPanels",t[0]]))},m(u,p){tt(u,e,p);for(let h=0;h<s.length;h+=1)s[h].m(e,null);r=!0,o||(a=[Tn(i=xs.call(null,e,t[2])),Mt(e,"measure",t[12]),Tn(Fr.call(null,e,{observePosition:!0}))],o=!0)},p(u,p){1042&p&&(c=u[4],Le(),s=es(s,p,d,1,u,c,l,e,Zs,m$,null,u$),Fe()),(!r||1&p&&n!==(n=bn(["PinturaTabPanels",u[0]])))&&S(e,"class",n),i&&Cn(i.update)&&4&p&&i.update.call(null,u[2])},i(u){if(!r){for(let p=0;p<c.length;p+=1)R(s[p]);r=!0}},o(u){for(let p=0;p<s.length;p+=1)B(s[p]);r=!1},d(u){u&&J(e);for(let p=0;p<s.length;p+=1)s[p].d();o=!1,Gn(a)}}}function h$(t){let e;const n=t[11].default,i=yr(n,t,t[10],p$);return{c(){i&&i.c()},m(r,o){i&&i.m(r,o),e=!0},p(r,o){i&&i.p&&(!e||1040&o)&&xr(i,n,r,r[10],e?br(n,r[10],o,U5):vr(r[10]),p$)},i(r){e||(R(i,r),e=!0)},o(r){B(i,r),e=!1},d(r){i&&i.d(r)}}}function m$(t,e){let n,i,r,o,a,s,l,c,d=e[15]&&h$(e);return{key:t,first:null,c(){n=$t("div"),d&&d.c(),i=ce(),S(n,"class",r=bn(["PinturaTabPanel",e[1]])),n.hidden=o=e[19],S(n,"id",a=e[16]),S(n,"aria-labelledby",s=e[17]),S(n,"data-inert",l=!e[3]),S(n,"role","tabpanel"),this.first=n},m(u,p){tt(u,n,p),d&&d.m(n,null),At(n,i),c=!0},p(u,p){(e=u)[15]?d?(d.p(e,p),16&p&&R(d,1)):(d=h$(e),d.c(),R(d,1),d.m(n,i)):d&&(Le(),B(d,1,1,()=>{d=null}),Fe()),(!c||2&p&&r!==(r=bn(["PinturaTabPanel",e[1]])))&&S(n,"class",r),(!c||16&p&&o!==(o=e[19]))&&(n.hidden=o),(!c||16&p&&a!==(a=e[16]))&&S(n,"id",a),(!c||16&p&&s!==(s=e[17]))&&S(n,"aria-labelledby",s),(!c||16&p&&l!==(l=!e[3]))&&S(n,"data-inert",l)},i(u){c||(R(d),c=!0)},o(u){B(d),c=!1},d(u){u&&J(n),d&&d.d()}}}function X5(t){let e,n,i,r;const o=[Z5,G5],a=[];function s(l,c){return l[5]?0:1}return e=s(t),n=a[e]=o[e](t),{c(){n.c(),i=Di()},m(l,c){a[e].m(l,c),tt(l,i,c),r=!0},p(l,[c]){let d=e;e=s(l),e===d?a[e].p(l,c):(Le(),B(a[d],1,1,()=>{a[d]=null}),Fe(),n=a[e],n?n.p(l,c):(n=a[e]=o[e](l),n.c()),R(n,1),n.m(i.parentNode,i))},i(l){r||(R(n),r=!0)},o(l){B(n),r=!1},d(l){a[e].d(l),l&&J(i)}}}function Y5(t,e,n){let i,r,{$$slots:o={},$$scope:a}=e,{class:s}=e,{name:l}=e,{selected:c}=e,{panelClass:d}=e,{panels:u=[]}=e,{visible:p}=e,{style:h}=e;const $={};return t.$$set=g=>{"class"in g&&n(0,s=g.class),"name"in g&&n(6,l=g.name),"selected"in g&&n(7,c=g.selected),"panelClass"in g&&n(1,d=g.panelClass),"panels"in g&&n(8,u=g.panels),"visible"in g&&n(3,p=g.visible),"style"in g&&n(2,h=g.style),"$$scope"in g&&n(10,a=g.$$scope)},t.$$.update=()=>{968&t.$$.dirty&&n(4,i=u.map(g=>{const f=g===c;f&&n(9,$[g]=!0,$);const x=p?p.indexOf(g)!==-1:f;return{id:g,panelId:`panel-${l}-${g}`,labelledBy:`tab-${l}-${g}`,isActive:f,hidden:!f,visible:x,shouldDraw:f||$[g]}})),16&t.$$.dirty&&n(5,r=i.length>1)},[s,d,h,p,i,r,l,c,u,$,a,o,function(g){qr.call(this,t,g)},function(g){qr.call(this,t,g)}]}class d1 extends fn{constructor(e){super(),$n(this,e,Y5,X5,dn,{class:0,name:6,selected:7,panelClass:1,panels:8,visible:3,style:2})}}var P0=t=>{const e=Object.getOwnPropertyDescriptors(t.prototype);return Object.keys(e).filter(n=>!!e[n].get)};function g$(t){let e,n,i,r;const o=[t[5],{locale:t[1]}];function a(c){t[22](c)}var s=t[10];function l(c){let d={};for(let u=0;u<o.length;u+=1)d=Oi(d,o[u]);return c[3]!==void 0&&(d.name=c[3]),{props:d}}return s&&(e=Ku(s,l(t)),Hn.push(()=>Io(e,"name",a)),t[23](e),e.$on("measure",t[11])),{c(){e&&Wt(e.$$.fragment),i=Di()},m(c,d){e&&Bt(e,c,d),tt(c,i,d),r=!0},p(c,d){const u=34&d[0]?Lr(o,[32&d[0]&&Nr(c[5]),2&d[0]&&{locale:c[1]}]):{};if(!n&&8&d[0]&&(n=!0,u.name=c[3],Go(()=>n=!1)),s!==(s=c[10])){if(e){Le();const p=e;B(p.$$.fragment,1,0,()=>{Ot(p,1)}),Fe()}s?(e=Ku(s,l(c)),Hn.push(()=>Io(e,"name",a)),c[23](e),e.$on("measure",c[11]),Wt(e.$$.fragment),R(e.$$.fragment,1),Bt(e,i.parentNode,i)):e=null}else s&&e.$set(u)},i(c){r||(e&&R(e.$$.fragment,c),r=!0)},o(c){e&&B(e.$$.fragment,c),r=!1},d(c){t[23](null),c&&J(i),e&&Ot(e,c)}}}function q5(t){let e,n,i,r=t[6]&&g$(t);return{c(){e=$t("div"),r&&r.c(),S(e,"data-util",t[3]),S(e,"class",n=bn(["PinturaUtilPanel",t[2]])),Tt(e,"opacity",t[7])},m(o,a){tt(o,e,a),r&&r.m(e,null),t[24](e),i=!0},p(o,a){o[6]?r?(r.p(o,a),64&a[0]&&R(r,1)):(r=g$(o),r.c(),R(r,1),r.m(e,null)):r&&(Le(),B(r,1,1,()=>{r=null}),Fe()),(!i||8&a[0])&&S(e,"data-util",o[3]),(!i||4&a[0]&&n!==(n=bn(["PinturaUtilPanel",o[2]])))&&S(e,"class",n),128&a[0]&&Tt(e,"opacity",o[7])},i(o){i||(R(r),i=!0)},o(o){B(r),i=!1},d(o){o&&J(e),r&&r.d(),t[24](null)}}}function K5(t,e,n){let i,r,o,a,s;const l=Ta();let{isActive:c=!0}=e,{stores:d}=e,{view:u}=e,{props:p}=e,{component:h}=e,{locale:$}=e,{class:g}=e;const f=mi("isAnimated");let x;D(t,f,H=>n(21,s=H));const v=mn(0),w=Nn(v,H=>di(H,0,1));D(t,w,H=>n(20,a=H));let T=!c;const I=fe(c),M={isActive:Nn(I,async(H,rt)=>{if(!H)return rt(H);await Ly(),rt(H)},!1),isActiveFraction:Nn(w,H=>H),isVisible:Nn(w,H=>H>0)},F=u,C=P0(F),z=Object.keys(p||{}).reduce((H,rt)=>(C.includes(rt)&&(H[rt]=p[rt]),H),{}),j=Object.keys(M).reduce((H,rt)=>(C.includes(rt)&&(H[rt]=M[rt]),H),{});let A,y;const st=H=>{n(17,x={...H.detail}),k&&c&&l("measure",{...x})};$o("measurable",Fr);const G=vl().$$.context;let k=!1;return bs(()=>{if(n(19,k=!0),o)return;n(0,h=new F({target:y,props:{...r,locale:$},context:G})),n(3,A=h.name);const H=h.$on("measure",st);return()=>{H(),h.$destroy()}}),t.$$set=H=>{"isActive"in H&&n(12,c=H.isActive),"stores"in H&&n(13,d=H.stores),"view"in H&&n(14,u=H.view),"props"in H&&n(15,p=H.props),"component"in H&&n(0,h=H.component),"locale"in H&&n(1,$=H.locale),"class"in H&&n(2,g=H.class)},t.$$.update=()=>{135169&t.$$.dirty[0]&&x&&c&&h&&l("measure",x),2101248&t.$$.dirty[0]&&v.set(c?1:0,{hard:s===!1}),1310720&t.$$.dirty[0]&&(a<=0&&!T?n(18,T=!0):a>0&&T&&n(18,T=!1)),786432&t.$$.dirty[0]&&k&&l(T?"hide":"show"),1048576&t.$$.dirty[0]&&l("fade",a),1048576&t.$$.dirty[0]&&n(7,i=a),4096&t.$$.dirty[0]&&I.set(c),8192&t.$$.dirty[0]&&n(5,r={...z,...j,stores:d})},n(6,o=!C.includes("external")),[h,$,g,A,y,r,o,i,f,w,F,st,c,d,u,p,v,x,T,k,a,s,function(H){A=H,n(3,A)},function(H){Hn[H?"unshift":"push"](()=>{h=H,n(0,h)})},function(H){Hn[H?"unshift":"push"](()=>{y=H,n(4,y)})}]}class rb extends fn{constructor(e){super(),$n(this,e,K5,q5,dn,{isActive:12,stores:13,view:14,props:15,component:0,locale:1,class:2,opacity:16},null,[-1,-1])}get opacity(){return this.$$.ctx[16]}}function J5(t){let e,n,i,r,o,a;const s=t[5].default,l=yr(s,t,t[4],null);return{c(){e=Er("svg"),l&&l.c(),S(e,"class",t[3]),S(e,"width",t[0]),S(e,"height",t[1]),S(e,"viewBox",n="0 0 "+t[0]+`
    `+t[1]),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"aria-hidden","true"),S(e,"focusable","false"),S(e,"stroke-linecap","round"),S(e,"stroke-linejoin","round")},m(c,d){tt(c,e,d),l&&l.m(e,null),r=!0,o||(a=Tn(i=xs.call(null,e,t[2])),o=!0)},p(c,[d]){l&&l.p&&(!r||16&d)&&xr(l,s,c,c[4],r?br(s,c[4],d,null):vr(c[4]),null),(!r||8&d)&&S(e,"class",c[3]),(!r||1&d)&&S(e,"width",c[0]),(!r||2&d)&&S(e,"height",c[1]),(!r||3&d&&n!==(n="0 0 "+c[0]+`
    `+c[1]))&&S(e,"viewBox",n),i&&Cn(i.update)&&4&d&&i.update.call(null,c[2])},i(c){r||(R(l,c),r=!0)},o(c){B(l,c),r=!1},d(c){c&&J(e),l&&l.d(c),o=!1,a()}}}function Q5(t,e,n){let{$$slots:i={},$$scope:r}=e,{width:o=24}=e,{height:a=24}=e,{style:s}=e,{class:l}=e;return t.$$set=c=>{"width"in c&&n(0,o=c.width),"height"in c&&n(1,a=c.height),"style"in c&&n(2,s=c.style),"class"in c&&n(3,l=c.class),"$$scope"in c&&n(4,r=c.$$scope)},[o,a,s,l,r,i]}class Zo extends fn{constructor(e){super(),$n(this,e,Q5,J5,dn,{width:0,height:1,style:2,class:3})}}var ob=(t,e)=>e===t.target||e.contains(t.target),Qu=(t,e,n)=>{const i=He(e)?e:t;return n?`${i} (${r=n,r.map(o=>o==="CMD"?a1()?"⌘":"Ctrl":o).join("+")})`:i;var r};const{document:$$}=b0;function t4(t){let e,n,i,r;return{c(){e=ce(),n=$t("button"),S(n,"class","PinturaImageButton"),S(n,"type","button"),S(n,"title",t[1]),n.disabled=t[2]},m(o,a){tt(o,e,a),tt(o,n,a),n.innerHTML=t[0],t[11](n),i||(r=[Mt($$.body,"load",t[5],!0),Mt($$.body,"error",t[6],!0),Mt(n,"pointerdown",t[4])],i=!0)},p(o,[a]){1&a&&(n.innerHTML=o[0]),2&a&&S(n,"title",o[1]),4&a&&(n.disabled=o[2])},i:Ke,o:Ke,d(o){o&&J(e),o&&J(n),t[11](null),i=!1,Gn(r)}}}function e4(t,e,n){let i,{html:r}=e,{title:o}=e,{onclick:a}=e,{disabled:s=!1}=e,{ongrab:l=pe}=e,{ondrag:c=pe}=e,{ondrop:d=pe}=e;const u=f=>Vo(p,ut(f.pageX,f.pageY))<256;let p;const h=f=>{document.documentElement.removeEventListener("pointermove",$),document.documentElement.removeEventListener("pointerup",h);const x=ut(f.pageX,f.pageY);if(Vo(p,x)<32)return a(f);u(f)||d(f)},$=f=>{u(f)||c(f)},g=f=>i&&i.contains(f)&&f.nodeName==="IMG";return t.$$set=f=>{"html"in f&&n(0,r=f.html),"title"in f&&n(1,o=f.title),"onclick"in f&&n(7,a=f.onclick),"disabled"in f&&n(2,s=f.disabled),"ongrab"in f&&n(8,l=f.ongrab),"ondrag"in f&&n(9,c=f.ondrag),"ondrop"in f&&n(10,d=f.ondrop)},t.$$.update=()=>{8&t.$$.dirty&&i&&i.querySelector("img")&&n(3,i.dataset.loader=!0,i)},[r,o,s,i,f=>{p=ut(f.pageX,f.pageY),l(f),document.documentElement.addEventListener("pointermove",$),document.documentElement.addEventListener("pointerup",h)},({target:f})=>{g(f)&&n(3,i.dataset.load=!0,i)},({target:f})=>{g(f)&&n(3,i.dataset.error=!0,i)},a,l,c,d,function(f){Hn[f?"unshift":"push"](()=>{i=f,n(3,i)})}]}class ab extends fn{constructor(e){super(),$n(this,e,e4,t4,dn,{html:0,title:1,onclick:7,disabled:2,ongrab:8,ondrag:9,ondrop:10})}}function f$(t,e,n){const i=t.slice();return i[13]=e[n],i}function y$(t,e){let n,i,r,o,a,s,l;function c(){return e[9](e[13])}function d(...h){return e[10](e[13],...h)}function u(...h){return e[11](e[13],...h)}function p(...h){return e[12](e[13],...h)}return i=new ab({props:{onclick:c,ongrab:d,ondrag:u,ondrop:p,disabled:e[1]||e[13].disabled,title:e[13].title,html:e[13].thumb}}),{key:t,first:null,c(){n=$t("li"),Wt(i.$$.fragment),r=ce(),Tt(n,"opacity",e[6]),this.first=n},m(h,$){tt(h,n,$),Bt(i,n,null),At(n,r),a=!0,s||(l=Tn(o=e[8].call(null,n,e[13])),s=!0)},p(h,$){e=h;const g={};5&$&&(g.onclick=c),9&$&&(g.ongrab=d),17&$&&(g.ondrag=u),33&$&&(g.ondrop=p),3&$&&(g.disabled=e[1]||e[13].disabled),1&$&&(g.title=e[13].title),1&$&&(g.html=e[13].thumb),i.$set(g),o&&Cn(o.update)&&1&$&&o.update.call(null,e[13]),64&$&&Tt(n,"opacity",e[6])},i(h){a||(R(i.$$.fragment,h),a=!0)},o(h){B(i.$$.fragment,h),a=!1},d(h){h&&J(n),Ot(i),s=!1,l()}}}function n4(t){let e,n,i=[],r=new Map,o=t[0];const a=s=>s[13].id;for(let s=0;s<o.length;s+=1){let l=f$(t,o,s),c=a(l);r.set(c,i[s]=y$(c,l))}return{c(){e=$t("ul");for(let s=0;s<i.length;s+=1)i[s].c();S(e,"class","PinturaImageButtonList")},m(s,l){tt(s,e,l);for(let c=0;c<i.length;c+=1)i[c].m(e,null);n=!0},p(s,[l]){127&l&&(o=s[0],Le(),i=es(i,l,a,1,s,o,r,e,Zs,y$,null,f$),Fe())},i(s){if(!n){for(let l=0;l<o.length;l+=1)R(i[l]);n=!0}},o(s){for(let l=0;l<i.length;l+=1)B(i[l]);n=!1},d(s){s&&J(e);for(let l=0;l<i.length;l+=1)i[l].d()}}}function i4(t,e,n){let i,{items:r}=e,{disabled:o}=e,{onclickitem:a}=e,{ongrabitem:s}=e,{ondragitem:l}=e,{ondropitem:c}=e;const d=mn(0,{stiffness:.25,damping:.9});return D(t,d,u=>n(6,i=u)),bs(()=>d.set(1)),t.$$set=u=>{"items"in u&&n(0,r=u.items),"disabled"in u&&n(1,o=u.disabled),"onclickitem"in u&&n(2,a=u.onclickitem),"ongrabitem"in u&&n(3,s=u.ongrabitem),"ondragitem"in u&&n(4,l=u.ondragitem),"ondropitem"in u&&n(5,c=u.ondropitem)},[r,o,a,s,l,c,i,d,(u,p)=>p.mount&&p.mount(u.firstChild,p),u=>a(u.id),(u,p)=>s&&s(u.id,p),(u,p)=>l&&l(u.id,p),(u,p)=>c&&c(u.id,p)]}class R0 extends fn{constructor(e){super(),$n(this,e,i4,n4,dn,{items:0,disabled:1,onclickitem:2,ongrabitem:3,ondragitem:4,ondropitem:5})}}var Yc=()=>ar()&&window.devicePixelRatio||1;let oh=null;var cd=t=>(oh===null&&(oh=Yc()===1?Math.round:e=>e),oh(t)),Dh=(t,e={})=>{if(t){if(e.preventScroll&&ka()){const n=document.body.scrollTop;return t.focus(),void(document.body.scrollTop=n)}t.focus(e)}},sb=t=>/date|email|number|search|text|url/.test(t.type),Os=t=>(e=>/textarea/i.test(e.nodeName))(t)||sb(t)||t.isContentEditable;const r4=t=>({}),b$=t=>({}),o4=t=>({}),x$=t=>({});function a4(t){let e,n;const i=[t[7]];let r={$$slots:{default:[l4]},$$scope:{ctx:t}};for(let o=0;o<i.length;o+=1)r=Oi(r,i[o]);return e=new Ss({props:r}),t[54](e),{c(){Wt(e.$$.fragment)},m(o,a){Bt(e,o,a),n=!0},p(o,a){const s=128&a[0]?Lr(i,[Nr(o[7])]):{};134217728&a[1]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){n||(R(e.$$.fragment,o),n=!0)},o(o){B(e.$$.fragment,o),n=!1},d(o){t[54](null),Ot(e,o)}}}function s4(t){let e,n;const i=[t[7]];let r={};for(let o=0;o<i.length;o+=1)r=Oi(r,i[o]);return e=new Ss({props:r}),t[53](e),{c(){Wt(e.$$.fragment)},m(o,a){Bt(e,o,a),n=!0},p(o,a){const s=128&a[0]?Lr(i,[Nr(o[7])]):{};e.$set(s)},i(o){n||(R(e.$$.fragment,o),n=!0)},o(o){B(e.$$.fragment,o),n=!1},d(o){t[53](null),Ot(e,o)}}}function l4(t){let e;const n=t[52].label,i=yr(n,t,t[58],x$);return{c(){i&&i.c()},m(r,o){i&&i.m(r,o),e=!0},p(r,o){i&&i.p&&(!e||134217728&o[1])&&xr(i,n,r,r[58],e?br(n,r[58],o,o4):vr(r[58]),x$)},i(r){e||(R(i,r),e=!0)},o(r){B(i,r),e=!1},d(r){i&&i.d(r)}}}function v$(t){let e,n,i,r,o,a,s;const l=t[52].details,c=yr(l,t,t[58],b$);return{c(){e=$t("div"),c&&c.c(),n=ce(),i=$t("span"),S(i,"class","PinturaPanelTip"),S(i,"data-top",t[10]),Tt(i,"opacity",t[14]),Tt(i,"transform",t[13]),Tt(i,"top",t[12]),Tt(i,"left",t[11]),S(e,"class",r=bn(["PinturaPanel","pintura-editor-panel",t[2]])),S(e,"tabindex","-1"),Tt(e,"opacity",t[18]),Tt(e,"pointer-events",t[17]),Tt(e,"transform",t[16]),Tt(e,"max-height",t[15])},m(d,u){tt(d,e,u),c&&c.m(e,null),At(e,n),At(e,i),t[55](e),o=!0,a||(s=[Mt(e,"close",t[56]),Mt(e,"keydown",t[25]),Mt(e,"measure",t[57]),Tn(Fr.call(null,e))],a=!0)},p(d,u){c&&c.p&&(!o||134217728&u[1])&&xr(c,l,d,d[58],o?br(l,d[58],u,r4):vr(d[58]),b$),(!o||1024&u[0])&&S(i,"data-top",d[10]),16384&u[0]&&Tt(i,"opacity",d[14]),8192&u[0]&&Tt(i,"transform",d[13]),4096&u[0]&&Tt(i,"top",d[12]),2048&u[0]&&Tt(i,"left",d[11]),(!o||4&u[0]&&r!==(r=bn(["PinturaPanel","pintura-editor-panel",d[2]])))&&S(e,"class",r),262144&u[0]&&Tt(e,"opacity",d[18]),131072&u[0]&&Tt(e,"pointer-events",d[17]),65536&u[0]&&Tt(e,"transform",d[16]),32768&u[0]&&Tt(e,"max-height",d[15])},i(d){o||(R(c,d),o=!0)},o(d){B(c,d),o=!1},d(d){d&&J(e),c&&c.d(d),t[55](null),a=!1,Gn(s)}}}function c4(t){let e,n,i,r,o,a,s,l,c;const d=[s4,a4],u=[];function p($,g){return $[1]?0:1}n=p(t),i=u[n]=d[n](t);let h=t[6]&&v$(t);return{c(){e=ce(),i.c(),r=ce(),h&&h.c(),o=ce(),a=Di()},m($,g){tt($,e,g),u[n].m($,g),tt($,r,g),h&&h.m($,g),tt($,o,g),tt($,a,g),s=!0,l||(c=[Mt(document.body,"pointerdown",function(){Cn(t[9])&&t[9].apply(this,arguments)}),Mt(document.body,"pointerup",function(){Cn(t[8])&&t[8].apply(this,arguments)})],l=!0)},p($,g){let f=n;n=p(t=$),n===f?u[n].p(t,g):(Le(),B(u[f],1,1,()=>{u[f]=null}),Fe(),i=u[n],i?i.p(t,g):(i=u[n]=d[n](t),i.c()),R(i,1),i.m(r.parentNode,r)),t[6]?h?(h.p(t,g),64&g[0]&&R(h,1)):(h=v$(t),h.c(),R(h,1),h.m(o.parentNode,o)):h&&(Le(),B(h,1,1,()=>{h=null}),Fe())},i($){s||(R(i),R(h),R(!1),s=!0)},o($){B(i),B(h),B(!1),s=!1},d($){$&&J(e),u[n].d($),$&&J(r),h&&h.d($),$&&J(o),$&&J(a),l=!1,Gn(c)}}}function d4(t,e,n){let i,r,o,a,s,l,c,d,u,p,h,$,g,f,x,v,w,T,I,M,F,C,z,j,A,y,{$$slots:st={},$$scope:G}=e,{buttonClass:k}=e,{buttonLabel:H}=e,{buttonLabelClass:rt}=e,{buttonHideLabel:gt}=e,{buttonIcon:ct}=e,{buttonTitle:V}=e,{buttonOnClick:N}=e,{panelClass:kt}=e,{isActive:bt=!1}=e,{onshow:et=({panel:xt})=>Dh(xt,{preventScroll:!0})}=e,{onhide:Pt=pe}=e;const wt=mi("isAnimated");D(t,wt,xt=>n(51,y=xt));const Q=mi("rootPortal");D(t,Q,xt=>n(46,F=xt));const Ut=mi("rootRect");let lt,q,vt;D(t,Ut,xt=>n(49,j=xt));const dt=()=>n(34,vt=i&&i.getBoundingClientRect());let Ht=ci(),it=mn(0);D(t,it,xt=>n(48,z=xt));let Vt=ci();const Dt=fe({x:0,y:0});D(t,Dt,xt=>n(47,C=xt));const Zt=mn(-5,{stiffness:.1,damping:.35,precision:.001});D(t,Zt,xt=>n(50,A=xt));let mt=!0;const Ft=xt=>ob(xt,F)||q.isEventTarget(xt);let ht,Yt,Nt=!1;const Qt=xt=>{Os(xt.target)||(Un(N)&&N(),bt||dt(),n(39,Yt=xt),n(0,bt=!bt))},re=xt=>{/down/i.test(xt.key)&&(n(0,bt=!0),n(39,Yt=xt))};return Xo(()=>{if(!F||!ht)return;const xt=ht;Ly().then(()=>{xt.parentNode&&xt.remove()})}),t.$$set=xt=>{"buttonClass"in xt&&n(26,k=xt.buttonClass),"buttonLabel"in xt&&n(1,H=xt.buttonLabel),"buttonLabelClass"in xt&&n(27,rt=xt.buttonLabelClass),"buttonHideLabel"in xt&&n(28,gt=xt.buttonHideLabel),"buttonIcon"in xt&&n(29,ct=xt.buttonIcon),"buttonTitle"in xt&&n(30,V=xt.buttonTitle),"buttonOnClick"in xt&&n(31,N=xt.buttonOnClick),"panelClass"in xt&&n(2,kt=xt.panelClass),"isActive"in xt&&n(0,bt=xt.isActive),"onshow"in xt&&n(32,et=xt.onshow),"onhide"in xt&&n(33,Pt=xt.onhide),"$$scope"in xt&&n(58,G=xt.$$scope)},t.$$.update=()=>{if(16&t.$$.dirty[0]&&(i=q&&q.getElement()),1&t.$$.dirty[0]|128&t.$$.dirty[1]&&n(8,I=bt?xt=>{Nt&&(n(38,Nt=!1),Ft(xt)||n(0,bt=!1))}:void 0),1&t.$$.dirty[0]|1048576&t.$$.dirty[1]&&it.set(bt?1:0,{hard:y===!1}),1&t.$$.dirty[0]|1048576&t.$$.dirty[1]&&Zt.set(bt?0:-5,{hard:y===!1}),524288&t.$$.dirty[1]&&n(43,r=1-A/-5),1&t.$$.dirty[0]|262144&t.$$.dirty[1]&&j&&bt&&dt(),9&t.$$.dirty[0]|262152&t.$$.dirty[1]&&j&&lt&&vt&&bt){n(37,mt=!0);let xt=vt.x-j.x+.5*vt.width-.5*lt.width,_=vt.y-j.y+vt.height;const ke=12,ne=12,Xt=j.width-12,he=j.height-12,ae=xt,Re=_,nn=ae+lt.width,Ct=Re+lt.height;ae<ke&&(n(36,Vt.x=ae-ke,Vt),xt=ke),nn>Xt&&(n(36,Vt.x=nn-Xt,Vt),xt=Xt-lt.width),Ct>he?(n(35,Ht.y=-1,Ht),ne<_-lt.height-vt.height?(n(36,Vt.y=0,Vt),_-=lt.height+vt.height):(n(36,Vt.y=_-(Ct-he),Vt),_-=Ct-he-12,n(37,mt=!1))):n(35,Ht.y=1,Ht),It(Dt,C=jo(ut(xt,_),cd),C)}131072&t.$$.dirty[1]&&n(6,o=z>0),589840&t.$$.dirty[1]&&n(45,a=`translateX(${Math.round(C.x)+12*Ht.x}px) translateY(${Math.round(C.y)+12*Ht.y+Ht.y*A}px)`),262144&t.$$.dirty[1]&&n(44,s=`--panel-max-height:${j.height-24}px`),131072&t.$$.dirty[1]&&n(18,l=z),131072&t.$$.dirty[1]&&n(17,c=z<1?"none":"all"),16384&t.$$.dirty[1]&&n(16,d=a),8192&t.$$.dirty[1]&&n(15,u=s),4096&t.$$.dirty[1]&&n(41,p=.5+.5*r),4096&t.$$.dirty[1]&&n(42,h=r),8&t.$$.dirty[0]|65536&t.$$.dirty[1]&&n(40,$=lt&&C),2624&t.$$.dirty[1]&&n(14,g=$&&mt?h:0),1536&t.$$.dirty[1]&&n(13,f=$?`scaleX(${p})rotate(45deg)`:"none"),8&t.$$.dirty[0]|560&t.$$.dirty[1]&&n(12,x=$?(Ht.y<0?Vt.y+lt.height:0)+"px":"0"),8&t.$$.dirty[0]|544&t.$$.dirty[1]&&n(11,v=$?Vt.x+.5*lt.width+"px":"0"),16&t.$$.dirty[1]&&n(10,w=Ht.y>=0),1&t.$$.dirty[0]&&n(9,T=bt?xt=>{Ft(xt)||n(38,Nt=!0)}:void 0),96&t.$$.dirty[0]|32768&t.$$.dirty[1]&&o&&F&&ht&&ht.parentNode!==F&&F.append(ht),1&t.$$.dirty[0]&&(bt||n(39,Yt=void 0)),97&t.$$.dirty[0]|258&t.$$.dirty[1]&&bt&&o&&ht&&et({e:Yt,panel:ht}),65&t.$$.dirty[0]|4&t.$$.dirty[1]&&o&&!bt&&Pt(),2080374786&t.$$.dirty[0]&&n(7,M={label:H,icon:ct,class:bn(["PinturaPanelButton",k]),onkeydown:re,onclick:Qt,hideLabel:gt,labelClass:rt,title:V})},[bt,H,kt,lt,q,ht,o,M,I,T,w,v,x,f,g,u,d,c,l,wt,Q,Ut,it,Dt,Zt,xt=>{/esc/i.test(xt.key)&&(n(0,bt=!1),i.focus())},k,rt,gt,ct,V,N,et,Pt,vt,Ht,Vt,mt,Nt,Yt,$,p,h,r,s,a,F,C,z,j,A,y,st,function(xt){Hn[xt?"unshift":"push"](()=>{q=xt,n(4,q)})},function(xt){Hn[xt?"unshift":"push"](()=>{q=xt,n(4,q)})},function(xt){Hn[xt?"unshift":"push"](()=>{ht=xt,n(5,ht)})},xt=>{xt.stopPropagation(),n(0,bt=!1)},xt=>n(3,lt=ts(xt.detail)),G]}class u1 extends fn{constructor(e){super(),$n(this,e,d4,c4,dn,{buttonClass:26,buttonLabel:1,buttonLabelClass:27,buttonHideLabel:28,buttonIcon:29,buttonTitle:30,buttonOnClick:31,panelClass:2,isActive:0,onshow:32,onhide:33},null,[-1,-1,-1])}}var u4={Up:38,Down:40,Left:37,Right:39};function p4(t){let e,n,i,r,o,a,s,l;const c=t[15].default,d=yr(c,t,t[14],null);return{c(){e=$t("li"),n=$t("input"),i=ce(),r=$t("label"),d&&d.c(),S(n,"type","radio"),S(n,"class","implicit"),S(n,"id",t[7]),S(n,"name",t[0]),n.value=t[3],n.disabled=t[6],n.hidden=t[5],n.checked=t[4],S(r,"for",t[7]),S(r,"title",t[2]),S(e,"class",o=bn(["PinturaRadioGroupOption",t[1]])),S(e,"data-hidden",t[5]),S(e,"data-disabled",t[6]),S(e,"data-selected",t[4])},m(u,p){tt(u,e,p),At(e,n),At(e,i),At(e,r),d&&d.m(r,null),a=!0,s||(l=[Mt(n,"change",Wv(t[16])),Mt(n,"keydown",t[9]),Mt(n,"click",t[10])],s=!0)},p(u,[p]){(!a||128&p)&&S(n,"id",u[7]),(!a||1&p)&&S(n,"name",u[0]),(!a||8&p)&&(n.value=u[3]),(!a||64&p)&&(n.disabled=u[6]),(!a||32&p)&&(n.hidden=u[5]),(!a||16&p)&&(n.checked=u[4]),d&&d.p&&(!a||16384&p)&&xr(d,c,u,u[14],a?br(c,u[14],p,null):vr(u[14]),null),(!a||128&p)&&S(r,"for",u[7]),(!a||4&p)&&S(r,"title",u[2]),(!a||2&p&&o!==(o=bn(["PinturaRadioGroupOption",u[1]])))&&S(e,"class",o),(!a||32&p)&&S(e,"data-hidden",u[5]),(!a||64&p)&&S(e,"data-disabled",u[6]),(!a||16&p)&&S(e,"data-selected",u[4])},i(u){a||(R(d,u),a=!0)},o(u){B(d,u),a=!1},d(u){u&&J(e),d&&d.d(u),s=!1,Gn(l)}}}function h4(t,e,n){let i,r,{$$slots:o={},$$scope:a}=e,{name:s}=e,{class:l}=e,{label:c}=e,{id:d}=e,{value:u}=e,{checked:p}=e,{onkeydown:h}=e,{onclick:$}=e,{hidden:g=!1}=e,{disabled:f=!1}=e;const x=Object.values(u4),v=mi("keysPressed");return D(t,v,w=>n(17,r=w)),t.$$set=w=>{"name"in w&&n(0,s=w.name),"class"in w&&n(1,l=w.class),"label"in w&&n(2,c=w.label),"id"in w&&n(11,d=w.id),"value"in w&&n(3,u=w.value),"checked"in w&&n(4,p=w.checked),"onkeydown"in w&&n(12,h=w.onkeydown),"onclick"in w&&n(13,$=w.onclick),"hidden"in w&&n(5,g=w.hidden),"disabled"in w&&n(6,f=w.disabled),"$$scope"in w&&n(14,a=w.$$scope)},t.$$.update=()=>{2049&t.$$.dirty&&n(7,i=`${s}-${d}`)},[s,l,c,u,p,g,f,i,v,w=>{h(w)},w=>{r.some(T=>x.includes(T))||$(w)},d,h,$,a,o,function(w){qr.call(this,t,w)}]}class lb extends fn{constructor(e){super(),$n(this,e,h4,p4,dn,{name:0,class:1,label:2,id:11,value:3,checked:4,onkeydown:12,onclick:13,hidden:5,disabled:6})}}var Ws=(t=[])=>t.reduce((e,n)=>(Ei(n)?Ei(n[1]):n.options)?e.concat(Ei(n)?n[1]:n.options):(e.push(n),e),[]);const Cu=(t,e,n)=>{let i;return Ei(t)?i={id:e,value:t[0],label:t[1],...t[2]||{}}:(i=t,i.id=i.id!=null?i.id:e),n?n(i):i};var Ar=(t,e,n)=>Un(t)?t(e,n):t;const cb=(t,e)=>t.map(([n,i,r])=>{if(Ei(i))return[Ar(n,e),cb(i,e)];{const o=[n,Ar(i,e)];if(r){let a={...r};r.icon&&(a.icon=Ar(r.icon,e)),o.push(a)}return o}});var db=(t,e)=>cb(t,e),ub=(t,e)=>Array.isArray(t)&&Array.isArray(e)?ys(t,e):t===e;function w$(t,e,n){const i=t.slice();return i[27]=e[n],i}const m4=t=>({option:1024&t[0]}),S$=t=>({option:t[27]});function k$(t,e,n){const i=t.slice();return i[27]=e[n],i}const g4=t=>({option:1024&t[0]}),C$=t=>({option:t[27]}),$4=t=>({option:1024&t[0]}),T$=t=>({option:t[27]});function M$(t){let e,n,i,r,o,a=[],s=new Map,l=t[1]&&P$(t),c=t[10];const d=u=>u[27].id;for(let u=0;u<c.length;u+=1){let p=w$(t,c,u),h=d(p);s.set(h,a[u]=F$(h,p))}return{c(){e=$t("fieldset"),l&&l.c(),n=ce(),i=$t("ul");for(let u=0;u<a.length;u+=1)a[u].c();S(i,"class","PinturaRadioGroupOptions"),S(e,"class",r=bn(["PinturaRadioGroup",t[3]])),S(e,"data-layout",t[5]),S(e,"title",t[7])},m(u,p){tt(u,e,p),l&&l.m(e,null),At(e,n),At(e,i);for(let h=0;h<a.length;h+=1)a[h].m(i,null);o=!0},p(u,p){u[1]?l?l.p(u,p):(l=P$(u),l.c(),l.m(e,n)):l&&(l.d(1),l=null),8419153&p[0]&&(c=u[10],Le(),a=es(a,p,d,1,u,c,s,i,Zs,F$,null,w$),Fe()),(!o||8&p[0]&&r!==(r=bn(["PinturaRadioGroup",u[3]])))&&S(e,"class",r),(!o||32&p[0])&&S(e,"data-layout",u[5]),(!o||128&p[0])&&S(e,"title",u[7])},i(u){if(!o){for(let p=0;p<c.length;p+=1)R(a[p]);o=!0}},o(u){for(let p=0;p<a.length;p+=1)B(a[p]);o=!1},d(u){u&&J(e),l&&l.d();for(let p=0;p<a.length;p+=1)a[p].d()}}}function P$(t){let e,n,i;return{c(){e=$t("legend"),n=Ti(t[1]),S(e,"class",i=t[2]&&"implicit")},m(r,o){tt(r,e,o),At(e,n)},p(r,o){2&o[0]&&Yi(n,r[1]),4&o[0]&&i!==(i=r[2]&&"implicit")&&S(e,"class",i)},d(r){r&&J(e)}}}function f4(t){let e,n;return e=new lb({props:{name:t[4],label:t[27].label,id:t[27].id,value:t[27].value,disabled:t[27].disabled,hidden:t[27].hidden,class:t[8],checked:t[12](t[27])===t[0],onkeydown:t[13](t[27]),onclick:t[14](t[27]),$$slots:{default:[x4]},$$scope:{ctx:t}}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};16&r[0]&&(o.name=i[4]),1024&r[0]&&(o.label=i[27].label),1024&r[0]&&(o.id=i[27].id),1024&r[0]&&(o.value=i[27].value),1024&r[0]&&(o.disabled=i[27].disabled),1024&r[0]&&(o.hidden=i[27].hidden),256&r[0]&&(o.class=i[8]),1025&r[0]&&(o.checked=i[12](i[27])===i[0]),1024&r[0]&&(o.onkeydown=i[13](i[27])),1024&r[0]&&(o.onclick=i[14](i[27])),8389696&r[0]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function y4(t){let e,n,i,r,o,a,s=[],l=new Map;const c=t[22].group,d=yr(c,t,t[23],T$),u=d||function($){let g,f,x=$[27].label+"";return{c(){g=$t("span"),f=Ti(x),S(g,"class","PinturaRadioGroupOptionGroupLabel")},m(v,w){tt(v,g,w),At(g,f)},p(v,w){1024&w[0]&&x!==(x=v[27].label+"")&&Yi(f,x)},d(v){v&&J(g)}}}(t);let p=t[27].options;const h=$=>$[27].id;for(let $=0;$<p.length;$+=1){let g=k$(t,p,$),f=h(g);l.set(f,s[$]=L$(f,g))}return{c(){e=$t("li"),u&&u.c(),n=ce(),i=$t("ul");for(let $=0;$<s.length;$+=1)s[$].c();r=ce(),S(i,"class","PinturaRadioGroupOptions"),S(e,"class",o=bn(["PinturaRadioGroupOptionGroup",t[9]]))},m($,g){tt($,e,g),u&&u.m(e,null),At(e,n),At(e,i);for(let f=0;f<s.length;f+=1)s[f].m(i,null);At(e,r),a=!0},p($,g){d?d.p&&(!a||8389632&g[0])&&xr(d,c,$,$[23],a?br(c,$[23],g,$4):vr($[23]),T$):u&&u.p&&(!a||1024&g[0])&&u.p($,a?g:[-1,-1]),8418641&g[0]&&(p=$[27].options,Le(),s=es(s,g,h,1,$,p,l,i,Zs,L$,null,k$),Fe()),(!a||512&g[0]&&o!==(o=bn(["PinturaRadioGroupOptionGroup",$[9]])))&&S(e,"class",o)},i($){if(!a){R(u,$);for(let g=0;g<p.length;g+=1)R(s[g]);a=!0}},o($){B(u,$);for(let g=0;g<s.length;g+=1)B(s[g]);a=!1},d($){$&&J(e),u&&u.d($);for(let g=0;g<s.length;g+=1)s[g].d()}}}function R$(t){let e,n;return e=new Zo({props:{$$slots:{default:[b4]},$$scope:{ctx:t}}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};8389632&r[0]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function b4(t){let e,n=t[27].icon+"";return{c(){e=Er("g")},m(i,r){tt(i,e,r),e.innerHTML=n},p(i,r){1024&r[0]&&n!==(n=i[27].icon+"")&&(e.innerHTML=n)},d(i){i&&J(e)}}}function I$(t){let e,n,i=t[27].label+"";return{c(){e=$t("span"),n=Ti(i),S(e,"class",t[6])},m(r,o){tt(r,e,o),At(e,n)},p(r,o){1024&o[0]&&i!==(i=r[27].label+"")&&Yi(n,i),64&o[0]&&S(e,"class",r[6])},d(r){r&&J(e)}}}function x4(t){let e;const n=t[22].option,i=yr(n,t,t[23],S$),r=i||function(o){let a,s,l,c=o[27].icon&&R$(o),d=!o[27].hideLabel&&I$(o);return{c(){c&&c.c(),a=ce(),d&&d.c(),s=ce()},m(u,p){c&&c.m(u,p),tt(u,a,p),d&&d.m(u,p),tt(u,s,p),l=!0},p(u,p){u[27].icon?c?(c.p(u,p),1024&p[0]&&R(c,1)):(c=R$(u),c.c(),R(c,1),c.m(a.parentNode,a)):c&&(Le(),B(c,1,1,()=>{c=null}),Fe()),u[27].hideLabel?d&&(d.d(1),d=null):d?d.p(u,p):(d=I$(u),d.c(),d.m(s.parentNode,s))},i(u){l||(R(c),l=!0)},o(u){B(c),l=!1},d(u){c&&c.d(u),u&&J(a),d&&d.d(u),u&&J(s)}}}(t);return{c(){r&&r.c()},m(o,a){r&&r.m(o,a),e=!0},p(o,a){i?i.p&&(!e||8389632&a[0])&&xr(i,n,o,o[23],e?br(n,o[23],a,m4):vr(o[23]),S$):r&&r.p&&(!e||1088&a[0])&&r.p(o,e?a:[-1,-1])},i(o){e||(R(r,o),e=!0)},o(o){B(r,o),e=!1},d(o){r&&r.d(o)}}}function E$(t){let e,n;return e=new Zo({props:{$$slots:{default:[v4]},$$scope:{ctx:t}}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};8389632&r[0]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function v4(t){let e,n=t[27].icon+"";return{c(){e=Er("g")},m(i,r){tt(i,e,r),e.innerHTML=n},p(i,r){1024&r[0]&&n!==(n=i[27].icon+"")&&(e.innerHTML=n)},d(i){i&&J(e)}}}function A$(t){let e,n,i=t[27].label+"";return{c(){e=$t("span"),n=Ti(i),S(e,"class",t[6])},m(r,o){tt(r,e,o),At(e,n)},p(r,o){1024&o[0]&&i!==(i=r[27].label+"")&&Yi(n,i),64&o[0]&&S(e,"class",r[6])},d(r){r&&J(e)}}}function w4(t){let e;const n=t[22].option,i=yr(n,t,t[23],C$),r=i||function(o){let a,s,l,c=o[27].icon&&E$(o),d=!o[27].hideLabel&&A$(o);return{c(){c&&c.c(),a=ce(),d&&d.c(),s=ce()},m(u,p){c&&c.m(u,p),tt(u,a,p),d&&d.m(u,p),tt(u,s,p),l=!0},p(u,p){u[27].icon?c?(c.p(u,p),1024&p[0]&&R(c,1)):(c=E$(u),c.c(),R(c,1),c.m(a.parentNode,a)):c&&(Le(),B(c,1,1,()=>{c=null}),Fe()),u[27].hideLabel?d&&(d.d(1),d=null):d?d.p(u,p):(d=A$(u),d.c(),d.m(s.parentNode,s))},i(u){l||(R(c),l=!0)},o(u){B(c),l=!1},d(u){c&&c.d(u),u&&J(a),d&&d.d(u),u&&J(s)}}}(t);return{c(){r&&r.c()},m(o,a){r&&r.m(o,a),e=!0},p(o,a){i?i.p&&(!e||8389632&a[0])&&xr(i,n,o,o[23],e?br(n,o[23],a,g4):vr(o[23]),C$):r&&r.p&&(!e||1088&a[0])&&r.p(o,e?a:[-1,-1])},i(o){e||(R(r,o),e=!0)},o(o){B(r,o),e=!1},d(o){r&&r.d(o)}}}function L$(t,e){let n,i,r;return i=new lb({props:{name:e[4],label:e[27].label,id:e[27].id,value:e[27].value,disabled:e[27].disabled,hidden:e[27].hidden,class:e[8],checked:e[12](e[27])===e[0],onkeydown:e[13](e[27]),onclick:e[14](e[27]),$$slots:{default:[w4]},$$scope:{ctx:e}}}),{key:t,first:null,c(){n=Di(),Wt(i.$$.fragment),this.first=n},m(o,a){tt(o,n,a),Bt(i,o,a),r=!0},p(o,a){e=o;const s={};16&a[0]&&(s.name=e[4]),1024&a[0]&&(s.label=e[27].label),1024&a[0]&&(s.id=e[27].id),1024&a[0]&&(s.value=e[27].value),1024&a[0]&&(s.disabled=e[27].disabled),1024&a[0]&&(s.hidden=e[27].hidden),256&a[0]&&(s.class=e[8]),1025&a[0]&&(s.checked=e[12](e[27])===e[0]),1024&a[0]&&(s.onkeydown=e[13](e[27])),1024&a[0]&&(s.onclick=e[14](e[27])),8389696&a[0]&&(s.$$scope={dirty:a,ctx:e}),i.$set(s)},i(o){r||(R(i.$$.fragment,o),r=!0)},o(o){B(i.$$.fragment,o),r=!1},d(o){o&&J(n),Ot(i,o)}}}function F$(t,e){let n,i,r,o,a;const s=[y4,f4],l=[];function c(d,u){return d[27].options?0:1}return i=c(e),r=l[i]=s[i](e),{key:t,first:null,c(){n=Di(),r.c(),o=Di(),this.first=n},m(d,u){tt(d,n,u),l[i].m(d,u),tt(d,o,u),a=!0},p(d,u){let p=i;i=c(e=d),i===p?l[i].p(e,u):(Le(),B(l[p],1,1,()=>{l[p]=null}),Fe(),r=l[i],r?r.p(e,u):(r=l[i]=s[i](e),r.c()),R(r,1),r.m(o.parentNode,o))},i(d){a||(R(r),a=!0)},o(d){B(r),a=!1},d(d){d&&J(n),l[i].d(d),d&&J(o)}}}function S4(t){let e,n,i,r=t[11].length&&M$(t);return{c(){r&&r.c(),e=ce(),n=Di()},m(o,a){r&&r.m(o,a),tt(o,e,a),tt(o,n,a),i=!0},p(o,a){o[11].length?r?(r.p(o,a),2048&a[0]&&R(r,1)):(r=M$(o),r.c(),R(r,1),r.m(e.parentNode,e)):r&&(Le(),B(r,1,1,()=>{r=null}),Fe())},i(o){i||(R(r),R(!1),i=!0)},o(o){B(r),B(!1),i=!1},d(o){r&&r.d(o),o&&J(e),o&&J(n)}}}function k4(t,e,n){let i,r,o,{$$slots:a={},$$scope:s}=e;const l=Ta();let{label:c}=e,{hideLabel:d=!0}=e,{class:u}=e,{name:p="radio-group-"+la()}=e,{selectedIndex:h=-1}=e,{options:$=[]}=e,{onchange:g}=e,{layout:f}=e,{optionMapper:x}=e,{optionFilter:v}=e,{value:w}=e,{optionLabelClass:T}=e,{title:I}=e,{locale:M}=e,{optionClass:F}=e,{optionGroupClass:C}=e;const z=A=>o.findIndex(y=>y.id===A.id),j=(A,y)=>{n(0,h=z(A));const st={index:h,...A};((G,...k)=>{G&&G(...k)})(g,st,y),l("change",st)};return t.$$set=A=>{"label"in A&&n(1,c=A.label),"hideLabel"in A&&n(2,d=A.hideLabel),"class"in A&&n(3,u=A.class),"name"in A&&n(4,p=A.name),"selectedIndex"in A&&n(0,h=A.selectedIndex),"options"in A&&n(15,$=A.options),"onchange"in A&&n(16,g=A.onchange),"layout"in A&&n(5,f=A.layout),"optionMapper"in A&&n(17,x=A.optionMapper),"optionFilter"in A&&n(18,v=A.optionFilter),"value"in A&&n(19,w=A.value),"optionLabelClass"in A&&n(6,T=A.optionLabelClass),"title"in A&&n(7,I=A.title),"locale"in A&&n(20,M=A.locale),"optionClass"in A&&n(8,F=A.optionClass),"optionGroupClass"in A&&n(9,C=A.optionGroupClass),"$$scope"in A&&n(23,s=A.$$scope)},t.$$.update=()=>{1343488&t.$$.dirty[0]&&n(11,i=db(v?$.filter(v):$,M)),133120&t.$$.dirty[0]&&n(10,r=((A=[],y)=>{let st=0;return A.map(G=>(st++,Ei(G)?Ei(G[1])?{id:st,label:G[0],options:G[1].map(k=>Cu(k,++st,y))}:Cu(G,st,y):G.options?{id:G.id||st,label:G.label,options:G.options.map(k=>Cu(k,++st,y))}:Cu(G,st,y)))})(i,x)),1024&t.$$.dirty[0]&&n(21,o=Ws(r)),2654209&t.$$.dirty[0]&&h<0&&(n(0,h=o.findIndex(A=>ub(A.value,w))),h<0&&n(0,h=(A=>A.findIndex(y=>y[0]===void 0))($)))},[h,c,d,u,p,f,T,I,F,C,r,i,z,A=>y=>{var st;st=y.key,/enter| /i.test(st)&&j(A,y)},A=>y=>{j(A,y)},$,g,x,v,w,M,o,a,s]}class vs extends fn{constructor(e){super(),$n(this,e,k4,S4,dn,{label:1,hideLabel:2,class:3,name:4,selectedIndex:0,options:15,onchange:16,layout:5,optionMapper:17,optionFilter:18,value:19,optionLabelClass:6,title:7,locale:20,optionClass:8,optionGroupClass:9},null,[-1,-1])}}function z$(t){let e,n,i,r,o,a,s,l,c,d;return{c(){e=$t("div"),n=$t("button"),i=Ti("▲"),o=ce(),a=$t("button"),s=Ti("▼"),S(n,"type","button"),S(n,"tabindex","-1"),S(n,"aria-label",r="increase "+t[7]),S(a,"type","button"),S(a,"tabindex","-1"),S(a,"aria-label",l="decrease "+t[7]),S(e,"class","PinturaInputSpinners")},m(u,p){tt(u,e,p),At(e,n),At(n,i),At(e,o),At(e,a),At(a,s),c||(d=[Mt(n,"click",t[18]),Mt(a,"click",t[19])],c=!0)},p(u,p){128&p[0]&&r!==(r="increase "+u[7])&&S(n,"aria-label",r),128&p[0]&&l!==(l="decrease "+u[7])&&S(a,"aria-label",l)},d(u){u&&J(e),c=!1,Gn(d)}}}function C4(t){let e,n,i,r,o,a,s=t[14]&&t[9]&&z$(t);return{c(){e=$t("div"),n=$t("input"),r=ce(),s&&s.c(),S(n,"class","PinturaInputField"),S(n,"title",t[7]),S(n,"type",t[1]),S(n,"min",t[4]),S(n,"max",t[5]),S(n,"step",t[6]),S(n,"inputmode",t[3]),n.value=i=t[12]?t[15]:t[0],S(n,"placeholder",t[8]),S(n,"maxlength",t[13]),n.disabled=t[2],S(n,"spellcheck","false"),S(n,"autocorrect","off"),S(n,"autocapitalize","off"),Tt(n,"min-width",t[11]?t[11]+"em":void 0),S(e,"class","PinturaInput")},m(l,c){tt(l,e,c),At(e,n),t[30](n),At(e,r),s&&s.m(e,null),o||(a=[Mt(n,"input",t[17]),Mt(n,"blur",function(){Cn(t[12]&&t[16])&&(t[12]&&t[16]).apply(this,arguments)}),Mt(n,"keydown",t[20]),Mt(n,"keyup",t[21])],o=!0)},p(l,c){t=l,128&c[0]&&S(n,"title",t[7]),2&c[0]&&S(n,"type",t[1]),16&c[0]&&S(n,"min",t[4]),32&c[0]&&S(n,"max",t[5]),64&c[0]&&S(n,"step",t[6]),8&c[0]&&S(n,"inputmode",t[3]),36865&c[0]&&i!==(i=t[12]?t[15]:t[0])&&n.value!==i&&(n.value=i),256&c[0]&&S(n,"placeholder",t[8]),8192&c[0]&&S(n,"maxlength",t[13]),4&c[0]&&(n.disabled=t[2]),2048&c[0]&&Tt(n,"min-width",t[11]?t[11]+"em":void 0),t[14]&&t[9]?s?s.p(t,c):(s=z$(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i:Ke,o:Ke,d(l){l&&J(e),t[30](null),s&&s.d(),o=!1,Gn(a)}}}function T4(t,e,n){let i,r,o,a,s,l,c,d,u,{value:p}=e,{type:h="text"}=e,{disabled:$=!1}=e,{inputmode:g}=e,{min:f}=e,{max:x}=e,{step:v}=e,{onchange:w=pe}=e,{onkeydown:T=pe}=e,{onkeyup:I=pe}=e,{title:M}=e,{stepMultiplier:F=10}=e,{placeholder:C}=e,{enableSpinButtons:z=!0}=e,{enableStopPropagation:j=!1}=e;const A=()=>{let k=d.value;return h==="number"&&(k=g==="numeric"?parseInt(k,10):parseFloat(k),!Ne(k)||Number.isNaN(k)?k=f||0:r&&(k=di(k,f,x))),k};let y=p;const st=()=>{const k=di(A()+(u?v*F:v),f,x);k!==p&&(n(27,y=k),n(0,p=k),w(p))},G=()=>{const k=di(A()-(u?v*F:v),f,x);k!==p&&(n(27,y=k),n(0,p=k),w(p))};return t.$$set=k=>{"value"in k&&n(0,p=k.value),"type"in k&&n(1,h=k.type),"disabled"in k&&n(2,$=k.disabled),"inputmode"in k&&n(3,g=k.inputmode),"min"in k&&n(4,f=k.min),"max"in k&&n(5,x=k.max),"step"in k&&n(6,v=k.step),"onchange"in k&&n(22,w=k.onchange),"onkeydown"in k&&n(23,T=k.onkeydown),"onkeyup"in k&&n(24,I=k.onkeyup),"title"in k&&n(7,M=k.title),"stepMultiplier"in k&&n(25,F=k.stepMultiplier),"placeholder"in k&&n(8,C=k.placeholder),"enableSpinButtons"in k&&n(9,z=k.enableSpinButtons),"enableStopPropagation"in k&&n(26,j=k.enableStopPropagation)},t.$$.update=()=>{2&t.$$.dirty[0]&&n(29,i=h==="number"),48&t.$$.dirty[0]&&n(12,r=Ne(f)&&Ne(x)),64&t.$$.dirty[0]&&n(28,o=Ne(v)),805310464&t.$$.dirty[0]&&n(14,a=i&&r&&o),134218753&t.$$.dirty[0]&&n(15,s=d===document.activeElement?y:p),32&t.$$.dirty[0]&&n(11,l=x?(x+"").length:void 0),2056&t.$$.dirty[0]&&n(13,c=g==="numeric"&&l?l:void 0)},[p,h,$,g,f,x,v,M,C,z,d,l,r,c,a,s,()=>{n(27,y=A()),w(p)},()=>{n(27,y=d.value),w(A())},st,G,k=>{if(T(k),!a)return;u=k.shiftKey;const{key:H}=k;j&&k.stopPropagation(),/up|down/i.test(H)&&(/up/i.test(H)&&st(),/down/i.test(H)&&G(),k.preventDefault(),k.stopPropagation())},k=>{if(I(k),!a)return;const{key:H}=k;/up|down/i.test(H)&&(k.preventDefault(),k.stopPropagation())},w,T,I,F,j,y,o,i,function(k){Hn[k?"unshift":"push"](()=>{d=k,n(10,d)})}]}class pb extends fn{constructor(e){super(),$n(this,e,T4,C4,dn,{value:0,type:1,disabled:2,inputmode:3,min:4,max:5,step:6,onchange:22,onkeydown:23,onkeyup:24,title:7,stepMultiplier:25,placeholder:8,enableSpinButtons:9,enableStopPropagation:26},null,[-1,-1])}}const M4=t=>({}),D$=t=>({});function P4(t){let e,n,i,r,o=(t[2]||t[21])+"",a=t[6]&&B$(t);return{c(){a&&a.c(),e=ce(),n=$t("span"),S(n,"class",i=bn(["PinturaButtonLabel",t[3],t[5]&&"implicit"]))},m(s,l){a&&a.m(s,l),tt(s,e,l),tt(s,n,l),n.innerHTML=o,r=!0},p(s,l){s[6]?a?(a.p(s,l),64&l[0]&&R(a,1)):(a=B$(s),a.c(),R(a,1),a.m(e.parentNode,e)):a&&(Le(),B(a,1,1,()=>{a=null}),Fe()),(!r||2097156&l[0])&&o!==(o=(s[2]||s[21])+"")&&(n.innerHTML=o),(!r||40&l[0]&&i!==(i=bn(["PinturaButtonLabel",s[3],s[5]&&"implicit"])))&&S(n,"class",i)},i(s){r||(R(a),r=!0)},o(s){B(a),r=!1},d(s){a&&a.d(s),s&&J(e),s&&J(n)}}}function R4(t){let e,n;return e=new pb({props:{value:t[10],onchange:t[17],enableStopPropagation:!0,type:"number",inputmode:"numeric",min:t[8].reduce(V$,1/0),max:t[8].reduce(N$,-1/0),enableSpinButtons:!1}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};1024&r[0]&&(o.value=i[10]),131072&r[0]&&(o.onchange=i[17]),256&r[0]&&(o.min=i[8].reduce(V$,1/0)),256&r[0]&&(o.max=i[8].reduce(N$,-1/0)),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function B$(t){let e,n;return e=new Zo({props:{class:"PinturaButtonIcon",$$slots:{default:[I4]},$$scope:{ctx:t}}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};1073741888&r[0]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function I4(t){let e;return{c(){e=Er("g")},m(n,i){tt(n,e,i),e.innerHTML=t[6]},p(n,i){64&i[0]&&(e.innerHTML=n[6])},d(n){n&&J(e)}}}function E4(t){let e,n,i,r,o;const a=[R4,P4],s=[];function l(c,d){return c[18]?0:1}return n=l(t),i=s[n]=a[n](t),{c(){e=$t("span"),i.c(),S(e,"slot","label"),S(e,"class",r=bn(["PinturaButtonInner",t[18]&&"PinturaComboBox",t[4]]))},m(c,d){tt(c,e,d),s[n].m(e,null),o=!0},p(c,d){let u=n;n=l(c),n===u?s[n].p(c,d):(Le(),B(s[u],1,1,()=>{s[u]=null}),Fe(),i=s[n],i?i.p(c,d):(i=s[n]=a[n](c),i.c()),R(i,1),i.m(e,null)),(!o||262160&d[0]&&r!==(r=bn(["PinturaButtonInner",c[18]&&"PinturaComboBox",c[4]])))&&S(e,"class",r)},i(c){o||(R(i),o=!0)},o(c){B(i),o=!1},d(c){c&&J(e),s[n].d()}}}function A4(t){let e,n,i=t[32].label+"";return{c(){e=$t("span"),n=Ti(i),S(e,"slot","group")},m(r,o){tt(r,e,o),At(e,n)},p(r,o){2&o[1]&&i!==(i=r[32].label+"")&&Yi(n,i)},d(r){r&&J(e)}}}function O$(t){let e,n;return e=new Zo({props:{style:Un(t[14])?t[14](t[32].value):t[14],$$slots:{default:[L4]},$$scope:{ctx:t}}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};16384&r[0]|2&r[1]&&(o.style=Un(i[14])?i[14](i[32].value):i[14]),1073741824&r[0]|2&r[1]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function L4(t){let e,n=t[32].icon+"";return{c(){e=Er("g")},m(i,r){tt(i,e,r),e.innerHTML=n},p(i,r){2&r[1]&&n!==(n=i[32].icon+"")&&(e.innerHTML=n)},d(i){i&&J(e)}}}function W$(t){let e,n,i,r,o,a,s,l=t[32].label+"",c=t[32].sublabel&&_$(t);return{c(){e=$t("span"),n=new y0(!1),i=ce(),c&&c.c(),n.a=i,S(e,"class",r=bn(["PinturaDropdownOptionLabel",t[11]]))},m(d,u){tt(d,e,u),n.m(l,e),At(e,i),c&&c.m(e,null),a||(s=Tn(o=xs.call(null,e,Un(t[15])?t[15](t[32].value):t[15])),a=!0)},p(d,u){2&u[1]&&l!==(l=d[32].label+"")&&n.p(l),d[32].sublabel?c?c.p(d,u):(c=_$(d),c.c(),c.m(e,null)):c&&(c.d(1),c=null),2048&u[0]&&r!==(r=bn(["PinturaDropdownOptionLabel",d[11]]))&&S(e,"class",r),o&&Cn(o.update)&&32768&u[0]|2&u[1]&&o.update.call(null,Un(d[15])?d[15](d[32].value):d[15])},d(d){d&&J(e),c&&c.d(),a=!1,s()}}}function _$(t){let e,n=t[32].sublabel+"";return{c(){e=$t("span"),S(e,"class","PinturaDropdownOptionSublabel")},m(i,r){tt(i,e,r),e.innerHTML=n},p(i,r){2&r[1]&&n!==(n=i[32].sublabel+"")&&(e.innerHTML=n)},d(i){i&&J(e)}}}function F4(t){let e,n,i,r=t[32].icon&&O$(t),o=!t[32].hideLabel&&W$(t);return{c(){e=$t("span"),r&&r.c(),n=ce(),o&&o.c(),S(e,"slot","option")},m(a,s){tt(a,e,s),r&&r.m(e,null),At(e,n),o&&o.m(e,null),i=!0},p(a,s){a[32].icon?r?(r.p(a,s),2&s[1]&&R(r,1)):(r=O$(a),r.c(),R(r,1),r.m(e,n)):r&&(Le(),B(r,1,1,()=>{r=null}),Fe()),a[32].hideLabel?o&&(o.d(1),o=null):o?o.p(a,s):(o=W$(a),o.c(),o.m(e,null))},i(a){i||(R(r),i=!0)},o(a){B(r),i=!1},d(a){a&&J(e),r&&r.d(),o&&o.d()}}}function z4(t){let e,n,i,r,o,a;const s=t[28].controls,l=yr(s,t,t[30],D$);return i=new vs({props:{class:"PinturaOptionsList PinturaScrollableContent",name:t[7],value:t[10],selectedIndex:t[9],optionFilter:t[12],optionMapper:t[13],optionLabelClass:bn(["PinturaDropdownOptionLabel",t[11]]),optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:t[19],onchange:t[22],$$slots:{option:[F4,({option:c})=>({32:c}),({option:c})=>[0,c?2:0]],group:[A4,({option:c})=>({32:c}),({option:c})=>[0,c?2:0]]},$$scope:{ctx:t}}}),{c(){e=$t("div"),l&&l.c(),n=ce(),Wt(i.$$.fragment),S(e,"slot","details"),S(e,"class","PinturaOptionsListWrapper")},m(c,d){tt(c,e,d),l&&l.m(e,null),At(e,n),Bt(i,e,null),r=!0,o||(a=Mt(e,"keydown",t[24]),o=!0)},p(c,d){l&&l.p&&(!r||1073741824&d[0])&&xr(l,s,c,c[30],r?br(s,c[30],d,M4):vr(c[30]),D$);const u={};128&d[0]&&(u.name=c[7]),1024&d[0]&&(u.value=c[10]),512&d[0]&&(u.selectedIndex=c[9]),4096&d[0]&&(u.optionFilter=c[12]),8192&d[0]&&(u.optionMapper=c[13]),2048&d[0]&&(u.optionLabelClass=bn(["PinturaDropdownOptionLabel",c[11]])),524288&d[0]&&(u.options=c[19]),1073793024&d[0]|2&d[1]&&(u.$$scope={dirty:d,ctx:c}),i.$set(u)},i(c){r||(R(l,c),R(i.$$.fragment,c),r=!0)},o(c){B(l,c),B(i.$$.fragment,c),r=!1},d(c){c&&J(e),l&&l.d(c),Ot(i),o=!1,a()}}}function D4(t){let e,n,i;function r(a){t[29](a)}let o={onshow:t[23],buttonTitle:Qu(t[2],t[1]),buttonClass:bn(["PinturaDropdownButton",t[0],t[5]&&"PinturaDropdownIconOnly"]),buttonOnClick:t[16],$$slots:{details:[z4],label:[E4]},$$scope:{ctx:t}};return t[20]!==void 0&&(o.isActive=t[20]),e=new u1({props:o}),Hn.push(()=>Io(e,"isActive",r)),{c(){Wt(e.$$.fragment)},m(a,s){Bt(e,a,s),i=!0},p(a,s){const l={};6&s[0]&&(l.buttonTitle=Qu(a[2],a[1])),33&s[0]&&(l.buttonClass=bn(["PinturaDropdownButton",a[0],a[5]&&"PinturaDropdownIconOnly"])),65536&s[0]&&(l.buttonOnClick=a[16]),1076822012&s[0]&&(l.$$scope={dirty:s,ctx:a}),!n&&1048576&s[0]&&(n=!0,l.isActive=a[20],Go(()=>n=!1)),e.$set(l)},i(a){i||(R(e.$$.fragment,a),i=!0)},o(a){B(e.$$.fragment,a),i=!1},d(a){Ot(e,a)}}}const V$=(t,[e])=>e<t?e:t,N$=(t,[e])=>e>t?e:t;function B4(t,e,n){let i,r,{$$slots:o={},$$scope:a}=e,{class:s}=e,{title:l}=e,{label:c}=e,{labelClass:d}=e,{innerClass:u}=e,{hideLabel:p=!1}=e,{icon:h}=e,{name:$}=e,{options:g=[]}=e,{selectedIndex:f=-1}=e,{value:x}=e,{optionLabelClass:v}=e,{optionFilter:w}=e,{optionMapper:T}=e,{optionIconStyle:I}=e,{optionLabelStyle:M}=e,{locale:F}=e,{onclick:C}=e,{onchange:z=pe}=e,{onload:j=pe}=e,{ondestroy:A=pe}=e,{enableInput:y=!1}=e,st;return bs(()=>j({options:g})),Xo(()=>A({options:g})),t.$$set=G=>{"class"in G&&n(0,s=G.class),"title"in G&&n(1,l=G.title),"label"in G&&n(2,c=G.label),"labelClass"in G&&n(3,d=G.labelClass),"innerClass"in G&&n(4,u=G.innerClass),"hideLabel"in G&&n(5,p=G.hideLabel),"icon"in G&&n(6,h=G.icon),"name"in G&&n(7,$=G.name),"options"in G&&n(8,g=G.options),"selectedIndex"in G&&n(9,f=G.selectedIndex),"value"in G&&n(10,x=G.value),"optionLabelClass"in G&&n(11,v=G.optionLabelClass),"optionFilter"in G&&n(12,w=G.optionFilter),"optionMapper"in G&&n(13,T=G.optionMapper),"optionIconStyle"in G&&n(14,I=G.optionIconStyle),"optionLabelStyle"in G&&n(15,M=G.optionLabelStyle),"locale"in G&&n(25,F=G.locale),"onclick"in G&&n(16,C=G.onclick),"onchange"in G&&n(17,z=G.onchange),"onload"in G&&n(26,j=G.onload),"ondestroy"in G&&n(27,A=G.ondestroy),"enableInput"in G&&n(18,y=G.enableInput),"$$scope"in G&&n(30,a=G.$$scope)},t.$$.update=()=>{33554688&t.$$.dirty[0]&&n(19,i=F?db(g,F):g),525312&t.$$.dirty[0]&&n(21,r=i.reduce((G,k)=>{if(G)return G;const H=Array.isArray(k)?k:[k,k],[rt,gt]=H;return ub(rt,x)?gt:void 0},void 0)||(G=>{const k=G.find(H=>H[0]===void 0);if(k)return k[1]})(i)||x)},[s,l,c,d,u,p,h,$,g,f,x,v,w,T,I,M,C,z,y,i,st,r,G=>{n(21,r=G.value),z(G),n(20,st=!1)},({e:G,panel:k})=>{if(G&&G.key&&/up|down/i.test(G.key))return Dh(k.querySelector("input:not([disabled])"));Dh(k.querySelector("fieldset"))},G=>{/tab/i.test(G.key)&&G.preventDefault()},F,j,A,o,function(G){st=G,n(20,st)},a]}class I0 extends fn{constructor(e){super(),$n(this,e,B4,D4,dn,{class:0,title:1,label:2,labelClass:3,innerClass:4,hideLabel:5,icon:6,name:7,options:8,selectedIndex:9,value:10,optionLabelClass:11,optionFilter:12,optionMapper:13,optionIconStyle:14,optionLabelStyle:15,locale:25,onclick:16,onchange:17,onload:26,ondestroy:27,enableInput:18},null,[-1,-1])}}function O4(t){let e;return{c(){e=$t("div"),S(e,"slot","details")},m(n,i){tt(n,e,i),t[14](e)},p:Ke,d(n){n&&J(e),t[14](null)}}}function W4(t){let e,n,i;function r(a){t[15](a)}let o={buttonLabel:t[0],buttonClass:t[1],buttonIcon:t[2],buttonHideLabel:t[3],buttonTitle:t[4],buttonLabelClass:t[5],onshow:t[6],onhide:t[7],$$slots:{details:[O4]},$$scope:{ctx:t}};return t[9]!==void 0&&(o.isActive=t[9]),e=new u1({props:o}),Hn.push(()=>Io(e,"isActive",r)),{c(){Wt(e.$$.fragment)},m(a,s){Bt(e,a,s),i=!0},p(a,[s]){const l={};1&s&&(l.buttonLabel=a[0]),2&s&&(l.buttonClass=a[1]),4&s&&(l.buttonIcon=a[2]),8&s&&(l.buttonHideLabel=a[3]),16&s&&(l.buttonTitle=a[4]),32&s&&(l.buttonLabelClass=a[5]),64&s&&(l.onshow=a[6]),128&s&&(l.onhide=a[7]),65792&s&&(l.$$scope={dirty:s,ctx:a}),!n&&512&s&&(n=!0,l.isActive=a[9],Go(()=>n=!1)),e.$set(l)},i(a){i||(R(e.$$.fragment,a),i=!0)},o(a){B(e.$$.fragment,a),i=!1},d(a){Ot(e,a)}}}function _4(t,e,n){let{buttonLabel:i}=e,{buttonClass:r}=e,{buttonIcon:o}=e,{buttonHideLabel:a}=e,{buttonTitle:s}=e,{buttonLabelClass:l}=e,{root:c}=e,{ondestroy:d=pe}=e,{onshow:u=pe}=e,{onhide:p=pe}=e,h,$=!1;return Xo(d),t.$$set=g=>{"buttonLabel"in g&&n(0,i=g.buttonLabel),"buttonClass"in g&&n(1,r=g.buttonClass),"buttonIcon"in g&&n(2,o=g.buttonIcon),"buttonHideLabel"in g&&n(3,a=g.buttonHideLabel),"buttonTitle"in g&&n(4,s=g.buttonTitle),"buttonLabelClass"in g&&n(5,l=g.buttonLabelClass),"root"in g&&n(10,c=g.root),"ondestroy"in g&&n(11,d=g.ondestroy),"onshow"in g&&n(6,u=g.onshow),"onhide"in g&&n(7,p=g.onhide)},t.$$.update=()=>{1280&t.$$.dirty&&h&&c&&h.firstChild!==c&&(h.hasChildNodes()?h.replaceChild(c,h.firstChild):h.append(c))},[i,r,o,a,s,l,u,p,h,$,c,d,()=>n(9,$=!1),()=>n(9,$=!0),function(g){Hn[g?"unshift":"push"](()=>{h=g,n(8,h)})},function(g){$=g,n(9,$)}]}class V4 extends fn{constructor(e){super(),$n(this,e,_4,W4,dn,{buttonLabel:0,buttonClass:1,buttonIcon:2,buttonHideLabel:3,buttonTitle:4,buttonLabelClass:5,root:10,ondestroy:11,onshow:6,onhide:7,hide:12,show:13})}get hide(){return this.$$.ctx[12]}get show(){return this.$$.ctx[13]}}var ws=(t,e={})=>{const{direction:n,shiftMultiplier:i=10,bubbles:r=!1,preventDefault:o=!1,stopKeydownPropagation:a=!0}=e,s=n==="horizontal",l=n==="vertical",c=d=>{const{key:u}=d,p=d.shiftKey,h=/up|down/i.test(u),$=/left|right/i.test(u);if(!$&&!h||s&&h||l&&$)return;const g=p?i:1;a&&d.stopPropagation(),o&&d.preventDefault(),t.dispatchEvent(new CustomEvent("nudge",{bubbles:r,detail:ut((/left/i.test(u)?-1:/right/i.test(u)?1:0)*g,(/up/i.test(u)?-1:/down/i.test(u)?1:0)*g)}))};return t.addEventListener("keydown",c),{destroy(){t.removeEventListener("keydown",c)}}},qc=(t,e,n)=>(t-e)/(n-e);const N4=t=>({}),H$=t=>({});function j$(t){let e,n,i;return{c(){e=$t("label"),n=Ti(t[0]),S(e,"for",t[17]),S(e,"class",i=t[1]?"implicit":void 0)},m(r,o){tt(r,e,o),At(e,n)},p(r,o){1&o[0]&&Yi(n,r[0]),131072&o[0]&&S(e,"for",r[17]),2&o[0]&&i!==(i=r[1]?"implicit":void 0)&&S(e,"class",i)},d(r){r&&J(e)}}}function U$(t){let e,n,i,r,o,a,s,l;return n=new Zo({props:{$$slots:{default:[H4]},$$scope:{ctx:t}}}),o=new Zo({props:{$$slots:{default:[j4]},$$scope:{ctx:t}}}),{c(){e=$t("button"),Wt(n.$$.fragment),i=ce(),r=$t("button"),Wt(o.$$.fragment),S(e,"type","button"),S(e,"aria-label","Increase"),S(r,"type","button"),S(r,"aria-label","Decrease")},m(c,d){tt(c,e,d),Bt(n,e,null),tt(c,i,d),tt(c,r,d),Bt(o,r,null),a=!0,s||(l=[Mt(e,"pointerdown",t[20](1)),Mt(r,"pointerdown",t[20](-1))],s=!0)},p(c,d){const u={};256&d[1]&&(u.$$scope={dirty:d,ctx:c}),n.$set(u);const p={};256&d[1]&&(p.$$scope={dirty:d,ctx:c}),o.$set(p)},i(c){a||(R(n.$$.fragment,c),R(o.$$.fragment,c),a=!0)},o(c){B(n.$$.fragment,c),B(o.$$.fragment,c),a=!1},d(c){c&&J(e),Ot(n),c&&J(i),c&&J(r),Ot(o),s=!1,Gn(l)}}}function H4(t){let e;return{c(){e=Er("path"),S(e,"d","M8 12 h8 M12 8 v8")},m(n,i){tt(n,e,i)},p:Ke,d(n){n&&J(e)}}}function j4(t){let e;return{c(){e=Er("path"),S(e,"d","M9 12 h6")},m(n,i){tt(n,e,i)},p:Ke,d(n){n&&J(e)}}}function U4(t){let e,n,i,r,o,a,s,l,c,d,u,p,h,$,g,f,x=t[0]&&j$(t);const v=t[37].default,w=yr(v,t,t[39],null),T=t[37].knob,I=yr(T,t,t[39],H$);let M=t[8]&&U$(t);return{c(){e=$t("div"),n=$t("div"),x&&x.c(),i=ce(),r=$t("input"),o=ce(),a=$t("div"),w&&w.c(),l=ce(),c=$t("div"),d=$t("div"),I&&I.c(),p=ce(),M&&M.c(),S(r,"type","range"),S(r,"id",t[17]),S(r,"min",t[2]),S(r,"max",t[3]),S(r,"step",t[4]),r.value=t[13],Tt(r,"pointer-events",t[9]?"none":void 0),S(a,"class",s=bn(["PinturaSliderTrack",t[5]])),S(d,"class",u=bn(["PinturaSliderKnob",t[6]])),S(c,"class","PinturaSliderKnobController"),Tt(c,"transform",t[16]),S(n,"class","PinturaSliderControl"),Tt(n,"--slider-position",Math.round(t[14])),S(e,"class",h=bn(["PinturaSlider",t[11]])),S(e,"data-direction",t[7])},m(F,C){tt(F,e,C),At(e,n),x&&x.m(n,null),At(n,i),At(n,r),t[38](r),At(n,o),At(n,a),w&&w.m(a,null),At(n,l),At(n,c),At(c,d),I&&I.m(d,null),At(e,p),M&&M.m(e,null),$=!0,g||(f=[Mt(r,"input",t[18]),Mt(r,"nudge",t[19]),Tn(ws.call(null,r)),Mt(n,"pointerdown",function(){Cn(t[10]&&t[12])&&(t[10]&&t[12]).apply(this,arguments)})],g=!0)},p(F,C){(t=F)[0]?x?x.p(t,C):(x=j$(t),x.c(),x.m(n,i)):x&&(x.d(1),x=null),(!$||131072&C[0])&&S(r,"id",t[17]),(!$||4&C[0])&&S(r,"min",t[2]),(!$||8&C[0])&&S(r,"max",t[3]),(!$||16&C[0])&&S(r,"step",t[4]),(!$||8192&C[0])&&(r.value=t[13]),512&C[0]&&Tt(r,"pointer-events",t[9]?"none":void 0),w&&w.p&&(!$||256&C[1])&&xr(w,v,t,t[39],$?br(v,t[39],C,null):vr(t[39]),null),(!$||32&C[0]&&s!==(s=bn(["PinturaSliderTrack",t[5]])))&&S(a,"class",s),I&&I.p&&(!$||256&C[1])&&xr(I,T,t,t[39],$?br(T,t[39],C,N4):vr(t[39]),H$),(!$||64&C[0]&&u!==(u=bn(["PinturaSliderKnob",t[6]])))&&S(d,"class",u),65536&C[0]&&Tt(c,"transform",t[16]),16384&C[0]&&Tt(n,"--slider-position",Math.round(t[14])),t[8]?M?(M.p(t,C),256&C[0]&&R(M,1)):(M=U$(t),M.c(),R(M,1),M.m(e,null)):M&&(Le(),B(M,1,1,()=>{M=null}),Fe()),(!$||2048&C[0]&&h!==(h=bn(["PinturaSlider",t[11]])))&&S(e,"class",h),(!$||128&C[0])&&S(e,"data-direction",t[7])},i(F){$||(R(w,F),R(I,F),R(M),$=!0)},o(F){B(w,F),B(I,F),B(M),$=!1},d(F){F&&J(e),x&&x.d(),t[38](null),w&&w.d(F),I&&I.d(F),M&&M.d(),g=!1,Gn(f)}}}function G4(t,e,n){let i,r,o,a,s,l,c,d,u,p,h,$,g,f,x,v,{$$slots:w={},$$scope:T}=e,{id:I}=e,{label:M}=e,{hideLabel:F=!1}=e,{min:C=0}=e,{max:z=100}=e,{step:j=1}=e,{value:A=0}=e,{valueMin:y}=e,{valueMax:st}=e,{trackClass:G}=e,{knobClass:k}=e,{ongrab:H=pe}=e,{onchange:rt=pe}=e,{onrelease:gt=pe}=e,{onexceed:ct=pe}=e,{direction:V="x"}=e,{getValue:N=ai}=e,{setValue:kt=ai}=e,{enableSpinButtons:bt=!0}=e,{enableForceUseKnob:et=!1}=e,{enableStopPropagation:Pt=!0}=e,{enablePointerdownListener:wt=!0}=e,{maxInteractionDistance:Q=6}=e,{class:Ut}=e;const lt=ht=>kt(((Yt,Nt)=>(Nt=1/Nt,Math.round(Yt*Nt)/Nt))(di(ht,C,z),j),A),q=(ht,Yt,Nt={})=>{const{grabbed:Qt=!1,released:re=!1}=Nt,xt=lt(C+ht/Yt*o),_=y||C,ke=st||z;n(21,A=He(xt)?xt:di(xt,_,ke)),v!==xt&&(v=xt,!He(xt)&&(xt<_||xt>ke)&&ct(A,xt),A!==x&&(x=A,Qt&&H(A),rt(A),re&&gt(A)))};let vt,dt;const Ht=ht=>{const Yt=ht[u]-f;q(g+Yt,$)},it=ht=>{dt=setTimeout(()=>{$=void 0},50),document.documentElement.removeEventListener("pointermove",Ht),document.documentElement.removeEventListener("pointerup",it),rt(A),gt(A)},Vt=()=>{n(21,A=lt(r+Zt*j)),rt(A)};let Dt,Zt=1,mt=!1;const Ft=ht=>{clearTimeout(Dt),mt||Vt(),gt(A),document.removeEventListener("pointerup",Ft)};return t.$$set=ht=>{"id"in ht&&n(22,I=ht.id),"label"in ht&&n(0,M=ht.label),"hideLabel"in ht&&n(1,F=ht.hideLabel),"min"in ht&&n(2,C=ht.min),"max"in ht&&n(3,z=ht.max),"step"in ht&&n(4,j=ht.step),"value"in ht&&n(21,A=ht.value),"valueMin"in ht&&n(23,y=ht.valueMin),"valueMax"in ht&&n(24,st=ht.valueMax),"trackClass"in ht&&n(5,G=ht.trackClass),"knobClass"in ht&&n(6,k=ht.knobClass),"ongrab"in ht&&n(25,H=ht.ongrab),"onchange"in ht&&n(26,rt=ht.onchange),"onrelease"in ht&&n(27,gt=ht.onrelease),"onexceed"in ht&&n(28,ct=ht.onexceed),"direction"in ht&&n(7,V=ht.direction),"getValue"in ht&&n(29,N=ht.getValue),"setValue"in ht&&n(30,kt=ht.setValue),"enableSpinButtons"in ht&&n(8,bt=ht.enableSpinButtons),"enableForceUseKnob"in ht&&n(9,et=ht.enableForceUseKnob),"enableStopPropagation"in ht&&n(31,Pt=ht.enableStopPropagation),"enablePointerdownListener"in ht&&n(10,wt=ht.enablePointerdownListener),"maxInteractionDistance"in ht&&n(32,Q=ht.maxInteractionDistance),"class"in ht&&n(11,Ut=ht.class),"$$scope"in ht&&n(39,T=ht.$$scope)},t.$$.update=()=>{4194305&t.$$.dirty[0]&&n(17,i=I||(M?"PinturaSlider_"+la():void 0)),538968064&t.$$.dirty[0]&&n(13,r=A!==void 0?N(A):0),12&t.$$.dirty[0]&&(o=z-C),8204&t.$$.dirty[0]&&n(34,a=qc(r,C,z)),8&t.$$.dirty[1]&&n(14,s=100*a),128&t.$$.dirty[0]&&n(35,l=V.toUpperCase()),128&t.$$.dirty[0]&&n(36,c=V==="x"?"Width":"Height"),32&t.$$.dirty[1]&&(d="offset"+c),16&t.$$.dirty[1]&&(u="page"+l),16384&t.$$.dirty[0]|16&t.$$.dirty[1]&&n(16,p=`translate${l}(${s}%)`)},[M,F,C,z,j,G,k,V,bt,et,wt,Ut,ht=>{clearTimeout(dt);let Yt=!1;Pt&&ht.stopPropagation(),clearTimeout(vt);const Nt=h.getBoundingClientRect();if($=h[d],f=ht[u],g=f-Nt[V],et){if(Math.abs(g-a*$)>Q)return;Yt=!0,ht.stopPropagation()}return document.activeElement!==h&&h.focus(),q(g,$,{grabbed:!0}),document.documentElement.addEventListener("pointermove",Ht),document.documentElement.addEventListener("pointerup",it),Yt},r,s,h,p,i,ht=>{$||(n(21,A=kt(parseFloat(ht.target.value))),A!==x&&(x=A,rt(A)))},ht=>{const Yt=h[d];q(r/o*Yt+ht.detail[V],Yt),clearTimeout(vt),vt=setTimeout(()=>{gt(A)},250)},ht=>Yt=>{clearTimeout(vt),Zt=ht,mt=!1,Dt=setInterval(()=>{mt=!0,Vt()},100),document.addEventListener("pointercancel",Ft),document.addEventListener("pointerup",Ft)},A,I,y,st,H,rt,gt,ct,N,kt,Pt,Q,ht=>{const Yt=h.getBoundingClientRect(),Nt=ht[u]-Yt[V],Qt=h[d];return Math.abs(Nt-a*Qt)},a,l,c,w,function(ht){Hn[ht?"unshift":"push"](()=>{h=ht,n(15,h)})},T]}class E0 extends fn{constructor(e){super(),$n(this,e,G4,U4,dn,{id:22,label:0,hideLabel:1,min:2,max:3,step:4,value:21,valueMin:23,valueMax:24,trackClass:5,knobClass:6,ongrab:25,onchange:26,onrelease:27,onexceed:28,direction:7,getValue:29,setValue:30,enableSpinButtons:8,enableForceUseKnob:9,enableStopPropagation:31,enablePointerdownListener:10,maxInteractionDistance:32,class:11,eventDistanceToKnob:33,handlePointerDown:12},null,[-1,-1])}get eventDistanceToKnob(){return this.$$.ctx[33]}get handlePointerDown(){return this.$$.ctx[12]}}function G$(t){let e,n;return e=new Zo({props:{class:"PinturaButtonIcon",$$slots:{default:[Z4]},$$scope:{ctx:t}}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};1048580&r&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function Z4(t){let e;return{c(){e=Er("g")},m(n,i){tt(n,e,i),e.innerHTML=t[2]},p(n,i){4&i&&(e.innerHTML=n[2])},d(n){n&&J(e)}}}function Z$(t){let e,n,i=Ar(t[8],t[6])+"";return{c(){e=$t("span"),n=Ti(i),S(e,"class","PinturaButtonLabelPrefix")},m(r,o){tt(r,e,o),At(e,n)},p(r,o){320&o&&i!==(i=Ar(r[8],r[6])+"")&&Yi(n,i)},d(r){r&&J(e)}}}function X4(t){let e,n,i,r,o,a,s,l,c,d=t[2]&&G$(t),u=t[8]&&Z$(t);return{c(){e=$t("span"),d&&d.c(),n=ce(),u&&u.c(),i=ce(),r=$t("span"),o=Ti(t[9]),S(r,"class",a=bn(["PinturaButtonLabel",t[3],t[5]&&"implicit"])),S(e,"slot","label"),S(e,"title",s=Ar(t[1],t[6])),S(e,"class",l=bn(["PinturaButtonInner",t[4]]))},m(p,h){tt(p,e,h),d&&d.m(e,null),At(e,n),u&&u.m(e,null),At(e,i),At(e,r),At(r,o),c=!0},p(p,h){p[2]?d?(d.p(p,h),4&h&&R(d,1)):(d=G$(p),d.c(),R(d,1),d.m(e,n)):d&&(Le(),B(d,1,1,()=>{d=null}),Fe()),p[8]?u?u.p(p,h):(u=Z$(p),u.c(),u.m(e,i)):u&&(u.d(1),u=null),(!c||512&h)&&Yi(o,p[9]),(!c||40&h&&a!==(a=bn(["PinturaButtonLabel",p[3],p[5]&&"implicit"])))&&S(r,"class",a),(!c||66&h&&s!==(s=Ar(p[1],p[6])))&&S(e,"title",s),(!c||16&h&&l!==(l=bn(["PinturaButtonInner",p[4]])))&&S(e,"class",l)},i(p){c||(R(d),c=!0)},o(p){B(d),c=!1},d(p){p&&J(e),d&&d.d(),u&&u.d()}}}function Y4(t){let e,n,i,r,o;const a=[{label:Ar(t[1],t[6])},{hideLabel:!0},t[12],{value:t[7]},{onchange:t[11]}];let s={};for(let l=0;l<a.length;l+=1)s=Oi(s,a[l]);return n=new E0({props:s}),{c(){e=$t("div"),Wt(n.$$.fragment),S(e,"slot","details")},m(l,c){tt(l,e,c),Bt(n,e,null),i=!0,r||(o=Mt(e,"keydown",t[10]),r=!0)},p(l,c){const d=6338&c?Lr(a,[66&c&&{label:Ar(l[1],l[6])},a[1],4096&c&&Nr(l[12]),128&c&&{value:l[7]},2048&c&&{onchange:l[11]}]):{};n.$set(d)},i(l){i||(R(n.$$.fragment,l),i=!0)},o(l){B(n.$$.fragment,l),i=!1},d(l){l&&J(e),Ot(n),r=!1,o()}}}function q4(t){let e,n;return e=new u1({props:{panelClass:"PinturaSliderPanel",buttonClass:bn(["PinturaSliderButton",t[0],t[5]&&"PinturaSliderIconOnly"]),$$slots:{details:[Y4],label:[X4]},$$scope:{ctx:t}}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,[r]){const o={};33&r&&(o.buttonClass=bn(["PinturaSliderButton",i[0],i[5]&&"PinturaSliderIconOnly"])),1053694&r&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function K4(t,e,n){const i=["class","title","label","icon","labelClass","innerClass","hideLabel","locale","value","onchange","labelPrefix"];let r=Ig(e,i),{class:o}=e,{title:a}=e,{label:s=Math.round}=e,{icon:l}=e,{labelClass:c}=e,{innerClass:d}=e,{hideLabel:u=!1}=e,{locale:p}=e,{value:h}=e,{onchange:$=pe}=e,{labelPrefix:g}=e;const{min:f,max:x,getValue:v=ai}=r;let w;const T=I=>n(9,w=(M=>Un(s)?s(v(M),f,x,M):s)(I));return t.$$set=I=>{e=Oi(Oi({},e),ad(I)),n(12,r=Ig(e,i)),"class"in I&&n(0,o=I.class),"title"in I&&n(1,a=I.title),"label"in I&&n(13,s=I.label),"icon"in I&&n(2,l=I.icon),"labelClass"in I&&n(3,c=I.labelClass),"innerClass"in I&&n(4,d=I.innerClass),"hideLabel"in I&&n(5,u=I.hideLabel),"locale"in I&&n(6,p=I.locale),"value"in I&&n(7,h=I.value),"onchange"in I&&n(14,$=I.onchange),"labelPrefix"in I&&n(8,g=I.labelPrefix)},t.$$.update=()=>{8320&t.$$.dirty&&T(h)},[o,a,l,c,d,u,p,h,g,w,I=>{/tab/i.test(I.key)&&I.preventDefault()},I=>{T(I),$(I)},r,s,$]}class J4 extends fn{constructor(e){super(),$n(this,e,K4,q4,dn,{class:0,title:1,label:13,icon:2,labelClass:3,innerClass:4,hideLabel:5,locale:6,value:7,onchange:14,labelPrefix:8})}}function Q4(t){let e,n,i,r,o,a,s,l;return{c(){e=$t("span"),n=Er("svg"),i=Er("g"),r=Er("circle"),o=Er("circle"),a=ce(),s=$t("span"),l=Ti(t[3]),S(r,"class","PinturaProgressIndicatorBar"),S(r,"r","8.5"),S(r,"cx","10"),S(r,"cy","10"),S(r,"stroke-linecap","round"),S(r,"opacity",".25"),S(o,"class","PinturaProgressIndicatorFill"),S(o,"r","8.5"),S(o,"stroke-dasharray",t[2]),S(o,"cx","10"),S(o,"cy","10"),S(o,"transform","rotate(-90) translate(-20)"),S(i,"fill","none"),S(i,"stroke","currentColor"),S(i,"stroke-width","2.5"),S(i,"stroke-linecap","round"),S(i,"opacity",t[1]),S(n,"width","20"),S(n,"height","20"),S(n,"viewBox","0 0 20 20"),S(n,"xmlns","http://www.w3.org/2000/svg"),S(n,"aria-hidden","true"),S(n,"focusable","false"),S(s,"class","implicit"),S(e,"class","PinturaProgressIndicator"),S(e,"data-status",t[0]),Tt(e,"opacity",t[4])},m(c,d){tt(c,e,d),At(e,n),At(n,i),At(i,r),At(i,o),At(e,a),At(e,s),At(s,l)},p(c,[d]){4&d&&S(o,"stroke-dasharray",c[2]),2&d&&S(i,"opacity",c[1]),8&d&&Yi(l,c[3]),1&d&&S(e,"data-status",c[0]),16&d&&Tt(e,"opacity",c[4])},i:Ke,o:Ke,d(c){c&&J(e)}}}function t3(t,e,n){let i,r,o,a,s,l,c,d;const u=Ta();let{progress:p}=e,{min:h=0}=e,{max:$=100}=e,{labelBusy:g="Busy"}=e,{opacity:f}=e;const x=mi("isAnimated");D(t,x,F=>n(14,s=F));const v=mn(f,{precision:.01});D(t,v,F=>n(4,d=F));const w=mn(0,{precision:.01}),T=mn(0,{precision:.01});D(t,T,F=>n(15,l=F));const I=Nn([w],F=>di(F,h,$));D(t,I,F=>n(16,c=F));const M=I.subscribe(F=>{p===1&&Math.round(F)>=100&&u("complete")});return bs(()=>{T.set(1,{hard:!s})}),Xo(()=>{M()}),t.$$set=F=>{"progress"in F&&n(9,p=F.progress),"min"in F&&n(10,h=F.min),"max"in F&&n(11,$=F.max),"labelBusy"in F&&n(12,g=F.labelBusy),"opacity"in F&&n(13,f=F.opacity)},t.$$.update=()=>{24576&t.$$.dirty&&Ne(f)&&v.set(f,{hard:!s}),16896&t.$$.dirty&&p&&p!==1/0&&w.set(100*p,{hard:!s}),70144&t.$$.dirty&&n(3,i=p===1/0?g:Math.round(c)+"%"),66048&t.$$.dirty&&n(2,r=p===1/0?"26.5 53":c/100*53+" 53"),32768&t.$$.dirty&&n(1,o=l),512&t.$$.dirty&&n(0,a=p===1/0?"busy":"loading")},[a,o,r,i,d,x,v,T,I,p,h,$,g,f,s,l,c]}class hb extends fn{constructor(e){super(),$n(this,e,t3,Q4,dn,{progress:9,min:10,max:11,labelBusy:12,opacity:13})}}function X$(t){let e,n,i=Ar(t[0],t[1])+"";return{c(){e=$t("span"),n=Ti(i),S(e,"class",t[3])},m(r,o){tt(r,e,o),At(e,n)},p(r,o){3&o&&i!==(i=Ar(r[0],r[1])+"")&&Yi(n,i),8&o&&S(e,"class",r[3])},d(r){r&&J(e)}}}function e3(t){let e,n,i,r,o=t[0]&&X$(t);return i=new Kr({props:{items:t[2]}}),{c(){e=$t("li"),o&&o.c(),n=ce(),Wt(i.$$.fragment),S(e,"class","PinturaShapeStyle")},m(a,s){tt(a,e,s),o&&o.m(e,null),At(e,n),Bt(i,e,null),r=!0},p(a,[s]){a[0]?o?o.p(a,s):(o=X$(a),o.c(),o.m(e,n)):o&&(o.d(1),o=null);const l={};4&s&&(l.items=a[2]),i.$set(l)},i(a){r||(R(i.$$.fragment,a),r=!0)},o(a){B(i.$$.fragment,a),r=!1},d(a){a&&J(e),o&&o.d(),Ot(i)}}}function n3(t,e,n){let i,{title:r}=e,{locale:o}=e,{items:a}=e,{hideTitle:s=!1}=e;return t.$$set=l=>{"title"in l&&n(0,r=l.title),"locale"in l&&n(1,o=l.locale),"items"in l&&n(2,a=l.items),"hideTitle"in l&&n(4,s=l.hideTitle)},t.$$.update=()=>{16&t.$$.dirty&&n(3,i="PinturaShapeStyleLabel"+(s?" implicit":""))},[r,o,a,i,s]}class i3 extends fn{constructor(e){super(),$n(this,e,n3,e3,dn,{title:0,locale:1,items:2,hideTitle:4})}}var Y$=(t,e,n)=>{let i,r,o;const a=Math.floor(6*t),s=6*t-a,l=n*(1-e),c=n*(1-s*e),d=n*(1-(1-s)*e);switch(a%6){case 0:i=n,r=d,o=l;break;case 1:i=c,r=n,o=l;break;case 2:i=l,r=n,o=d;break;case 3:i=l,r=c,o=n;break;case 4:i=d,r=l,o=n;break;case 5:i=n,r=l,o=c}return[i,r,o]};function r3(t){let e,n;return{c(){e=$t("div"),n=$t("span"),S(e,"class","PinturaColorPreview"),S(e,"title",t[0]),Tt(e,"--color",t[1])},m(i,r){tt(i,e,r),At(e,n)},p(i,[r]){1&r&&S(e,"title",i[0]),2&r&&Tt(e,"--color",i[1])},i:Ke,o:Ke,d(i){i&&J(e)}}}function o3(t,e,n){let i,{color:r}=e,{title:o}=e;return t.$$set=a=>{"color"in a&&n(2,r=a.color),"title"in a&&n(0,o=a.title)},t.$$.update=()=>{4&t.$$.dirty&&n(1,i=r?Ir(r):"transparent")},[o,i,r]}class A0 extends fn{constructor(e){super(),$n(this,e,o3,r3,dn,{color:2,title:0})}}var Bh=t=>(t=t.trim(),/^rgba/.test(t)?t.substring(5).split(",").map(parseFloat).map((e,n)=>e/(n===3?1:255)):/^rgb/.test(t)?t.substring(4).split(",").map(parseFloat).map(e=>e/255):/^#/.test(t)?(e=>{const[,n,i,r,o]=e.split("");e=e.length>=4&&e.length<=5?`#${n}${n}${i}${i}${r}${r}${o?`${o}${o}`:""}`:e;const[a,s,l,c,d]=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e)||[];if(a)return[s,l,c,d].filter(u=>u!==void 0).map(u=>parseInt(u,16)/255)})(t):/[0-9]{1,3}\s?,\s?[0-9]{1,3}\s?,\s?[0-9]{1,3}/.test(t)?t.split(",").map(e=>parseInt(e,10)).map(e=>e/255):void 0);let ah=null;function q$(t){let e,n;return{c(){e=$t("span"),n=Ti(t[0])},m(i,r){tt(i,e,r),At(e,n)},p(i,r){1&r[0]&&Yi(n,i[0])},d(i){i&&J(e)}}}function a3(t){let e,n,i,r;n=new A0({props:{color:t[4],title:Ar(t[8],t[10])}});let o=!t[9]&&q$(t);return{c(){e=$t("span"),Wt(n.$$.fragment),i=ce(),o&&o.c(),S(e,"slot","label"),S(e,"class","PinturaButtonLabel")},m(a,s){tt(a,e,s),Bt(n,e,null),At(e,i),o&&o.m(e,null),r=!0},p(a,s){const l={};16&s[0]&&(l.color=a[4]),1280&s[0]&&(l.title=Ar(a[8],a[10])),n.$set(l),a[9]?o&&(o.d(1),o=null):o?o.p(a,s):(o=q$(a),o.c(),o.m(e,null))},i(a){r||(R(n.$$.fragment,a),r=!0)},o(a){B(n.$$.fragment,a),r=!1},d(a){a&&J(e),Ot(n),o&&o.d()}}}function K$(t){let e,n,i,r,o,a,s,l,c,d,u,p;s=new E0({props:{label:"Hue",hideLabel:!0,class:"PinturaHuePicker",onchange:t[27],value:t[16],min:0,max:1,step:.01}});let h=t[11]&&J$(t),$=(t[14]||t[15])&&Q$(t);return{c(){e=$t("div"),n=$t("div"),i=$t("div"),r=$t("div"),o=ce(),a=$t("div"),Wt(s.$$.fragment),l=ce(),h&&h.c(),c=ce(),$&&$.c(),S(r,"role","button"),S(r,"aria-label","Saturation slider"),S(r,"class","PinturaPickerKnob"),S(r,"tabindex","0"),Tt(r,"background-color",t[20]),S(i,"class","PinturaPickerKnobController"),Tt(i,"transform",`translate(${t[25]}%,${t[24]}%)`),S(n,"class","PinturaSaturationPicker"),Tt(n,"background-color",t[21]),Tt(a,"--knob-background",t[21]),S(e,"class","PinturaPicker")},m(g,f){tt(g,e,f),At(e,n),At(n,i),At(i,r),t[41](n),At(e,o),At(e,a),Bt(s,a,null),At(e,l),h&&h.m(e,null),At(e,c),$&&$.m(e,null),d=!0,u||(p=[Mt(r,"nudge",t[30]),Tn(ws.call(null,r,{preventDefault:!0})),Mt(n,"pointerdown",t[29])],u=!0)},p(g,f){1048576&f[0]&&Tt(r,"background-color",g[20]),50331648&f[0]&&Tt(i,"transform",`translate(${g[25]}%,${g[24]}%)`),2097152&f[0]&&Tt(n,"background-color",g[21]);const x={};65536&f[0]&&(x.value=g[16]),s.$set(x),2097152&f[0]&&Tt(a,"--knob-background",g[21]),g[11]?h?(h.p(g,f),2048&f[0]&&R(h,1)):(h=J$(g),h.c(),R(h,1),h.m(e,c)):h&&(Le(),B(h,1,1,()=>{h=null}),Fe()),g[14]||g[15]?$?($.p(g,f),49152&f[0]&&R($,1)):($=Q$(g),$.c(),R($,1),$.m(e,null)):$&&(Le(),B($,1,1,()=>{$=null}),Fe())},i(g){d||(R(s.$$.fragment,g),R(h),R($),d=!0)},o(g){B(s.$$.fragment,g),B(h),B($),d=!1},d(g){g&&J(e),t[41](null),Ot(s),h&&h.d(),$&&$.d(),u=!1,Gn(p)}}}function J$(t){let e,n,i;return n=new E0({props:{label:"Opacity",hideLabel:!0,class:"PinturaOpacityPicker",onchange:t[28],value:t[17],min:0,max:1,step:.01}}),{c(){e=$t("div"),Wt(n.$$.fragment),Tt(e,"--knob-background",t[18]),Tt(e,"--track-background",`linear-gradient(to right,${t[19]},${t[20]})`)},m(r,o){tt(r,e,o),Bt(n,e,null),i=!0},p(r,o){const a={};131072&o[0]&&(a.value=r[17]),n.$set(a),262144&o[0]&&Tt(e,"--knob-background",r[18]),1572864&o[0]&&Tt(e,"--track-background",`linear-gradient(to right,${r[19]},${r[20]})`)},i(r){i||(R(n.$$.fragment,r),i=!0)},o(r){B(n.$$.fragment,r),i=!1},d(r){r&&J(e),Ot(n)}}}function Q$(t){let e,n,i,r,o,a,s,l=t[15]&&tf(t);return{c(){e=$t("div"),n=$t("input"),r=ce(),l&&l.c(),S(n,"class","PinturaColorPickerInput"),S(n,"type","text"),n.disabled=i=!t[14],n.value=t[23],S(e,"class","PinturColorPickerInputGroup")},m(c,d){tt(c,e,d),At(e,n),At(e,r),l&&l.m(e,null),o=!0,a||(s=[Mt(n,"keydown",t[32]),Mt(n,"input",t[31])],a=!0)},p(c,d){(!o||16384&d[0]&&i!==(i=!c[14]))&&(n.disabled=i),(!o||8388608&d[0]&&n.value!==c[23])&&(n.value=c[23]),c[15]?l?(l.p(c,d),32768&d[0]&&R(l,1)):(l=tf(c),l.c(),R(l,1),l.m(e,null)):l&&(Le(),B(l,1,1,()=>{l=null}),Fe())},i(c){o||(R(l),o=!0)},o(c){B(l),o=!1},d(c){c&&J(e),l&&l.d(),a=!1,Gn(s)}}}function tf(t){let e,n;return e=new Ss({props:{icon:'<path stroke="currentColor" stroke-linecap="square" d="m13 14-7 7a2.704 2.704 0 0 1-3 0 2.704 2.704 0 0 1 0-3l7-7"/><path fill="currentColor" d="M9.475 9.475 14.5 14.5c.263.263.69.265.955.005l.783-.767a4.209 4.209 0 0 0 1.262-3.006V10l4-4c.5-.5.375-2.125-.5-3s-2.5-1-3-.5l-4 4h-.732a4.329 4.329 0 0 0-3.03 1.238l-.758.742a.7.7 0 0 0-.005.995Z"/>',hideLabel:!0,label:"Pick a color",class:"PinturaEyeDropper",onclick:t[33]}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p:Ke,i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function ef(t){let e,n;return e=new vs({props:{label:Ar(t[10].labelColorPalette,t[10]),class:bn(["PinturaColorPresets",t[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"]),hideLabel:!1,name:t[1],value:t[4],optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:t[2].map(t[42]),selectedIndex:t[3],optionMapper:t[7],optionLabelClass:t[6],onchange:t[43],$$slots:{option:[l3,({option:i})=>({59:i}),({option:i})=>[0,i?268435456:0]],group:[s3,({option:i})=>({59:i}),({option:i})=>[0,i?268435456:0]]},$$scope:{ctx:t}}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};1024&r[0]&&(o.label=Ar(i[10].labelColorPalette,i[10])),512&r[0]&&(o.class=bn(["PinturaColorPresets",i[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"])),2&r[0]&&(o.name=i[1]),16&r[0]&&(o.value=i[4]),1028&r[0]&&(o.options=i[2].map(i[42])),8&r[0]&&(o.selectedIndex=i[3]),128&r[0]&&(o.optionMapper=i[7]),64&r[0]&&(o.optionLabelClass=i[6]),512&r[0]|805306368&r[1]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function s3(t){let e,n,i=t[59].label+"";return{c(){e=$t("span"),n=Ti(i),S(e,"slot","group")},m(r,o){tt(r,e,o),At(e,n)},p(r,o){268435456&o[1]&&i!==(i=r[59].label+"")&&Yi(n,i)},d(r){r&&J(e)}}}function nf(t){let e,n,i=t[59].label+"";return{c(){e=$t("span"),n=Ti(i),S(e,"class","PinturaButtonLabel")},m(r,o){tt(r,e,o),At(e,n)},p(r,o){268435456&o[1]&&i!==(i=r[59].label+"")&&Yi(n,i)},d(r){r&&J(e)}}}function l3(t){let e,n,i,r;n=new A0({props:{title:t[59].label,color:t[59].value}});let o=!t[9]&&nf(t);return{c(){e=$t("span"),Wt(n.$$.fragment),i=ce(),o&&o.c(),S(e,"slot","option")},m(a,s){tt(a,e,s),Bt(n,e,null),At(e,i),o&&o.m(e,null),r=!0},p(a,s){const l={};268435456&s[1]&&(l.title=a[59].label),268435456&s[1]&&(l.color=a[59].value),n.$set(l),a[9]?o&&(o.d(1),o=null):o?o.p(a,s):(o=nf(a),o.c(),o.m(e,null))},i(a){r||(R(n.$$.fragment,a),r=!0)},o(a){B(n.$$.fragment,a),r=!1},d(a){a&&J(e),Ot(n),o&&o.d()}}}function c3(t){let e,n,i,r=t[13]&&K$(t),o=t[12]&&ef(t);return{c(){e=$t("div"),r&&r.c(),n=ce(),o&&o.c(),S(e,"slot","details"),S(e,"class","PinturaColorPickerPanel")},m(a,s){tt(a,e,s),r&&r.m(e,null),At(e,n),o&&o.m(e,null),i=!0},p(a,s){a[13]?r?(r.p(a,s),8192&s[0]&&R(r,1)):(r=K$(a),r.c(),R(r,1),r.m(e,n)):r&&(Le(),B(r,1,1,()=>{r=null}),Fe()),a[12]?o?(o.p(a,s),4096&s[0]&&R(o,1)):(o=ef(a),o.c(),R(o,1),o.m(e,null)):o&&(Le(),B(o,1,1,()=>{o=null}),Fe())},i(a){i||(R(r),R(o),i=!0)},o(a){B(r),B(o),i=!1},d(a){a&&J(e),r&&r.d(),o&&o.d()}}}function d3(t){let e,n;return e=new u1({props:{buttonClass:bn(["PinturaColorPickerButton",t[5]]),$$slots:{details:[c3],label:[a3]},$$scope:{ctx:t}}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};32&r[0]&&(o.buttonClass=bn(["PinturaColorPickerButton",i[5]])),67108831&r[0]|536870912&r[1]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function u3(t,e,n){let i,r,o,a,s,l,c,d,u,p,h,$,g,{label:f}=e,{name:x}=e,{options:v=[]}=e,{selectedIndex:w=-1}=e,{value:T}=e,{buttonClass:I}=e,{optionLabelClass:M}=e,{optionMapper:F}=e,{onchange:C}=e,{title:z}=e,{hidePresetLabel:j=!0}=e,{locale:A}=e,{enableOpacity:y=!0}=e,{enablePresets:st=!0}=e,{enablePicker:G=!0}=e,{enableInput:k=!1}=e,{enableEyeDropper:H=!1}=e,rt="transparent",gt="transparent";const ct=(it,Vt)=>{if(p=[it[0],it[1],it[2]],Vt){let Dt=((ht,Yt,Nt)=>{let Qt=Math.max(ht,Yt,Nt),re=Qt-Math.min(ht,Yt,Nt),xt=re&&(Qt==ht?(Yt-Nt)/re:Qt==Yt?2+(Nt-ht)/re:4+(ht-Yt)/re);return[60*(xt<0?xt+6:xt)/360,Qt&&re/Qt,Qt]})(...p),Zt=Dt[0],mt=Dt[1],Ft=Dt[2];Ne(Pt)&&(Zt=Pt),Ne(bt)&&(mt=bt),Ne(et)&&(Ft=et),n(16,l=Zt),n(36,c=mt),n(37,d=Ft),n(17,u=Ne(it[3])?it[3]:1)}n(18,h=Ir(it)),n(19,$=Ir([...p,0])),n(20,rt=Ir([...p,1])),n(21,gt=Ir(Y$(l,1,1)))},V=()=>{const it=[...Y$(l,c,d),u];ct(it),C(it)},N=it=>{const Vt=it.length===3?[...it,1]:it;kt(),ct(Vt,!0),C(Vt)},kt=()=>{bt=void 0,et=void 0,Pt=void 0};let bt,et,Pt;const wt=(it,Vt)=>{const Dt=di(it.x/Vt.width,0,1),Zt=di(it.y/Vt.height,0,1);var mt,Ft;Ft=1-Zt,n(36,c=mt=Dt),n(37,d=Ft),bt=mt,et=Ft,V()};let Q,Ut,lt,q;const vt=it=>{const Vt=Xi(qm(it),q);wt(Zi(Ve(lt),Vt),Ut)},dt=it=>{Ut=void 0,document.documentElement.removeEventListener("pointermove",vt),document.documentElement.removeEventListener("pointerup",dt)};let Ht;return t.$$set=it=>{"label"in it&&n(0,f=it.label),"name"in it&&n(1,x=it.name),"options"in it&&n(2,v=it.options),"selectedIndex"in it&&n(3,w=it.selectedIndex),"value"in it&&n(4,T=it.value),"buttonClass"in it&&n(5,I=it.buttonClass),"optionLabelClass"in it&&n(6,M=it.optionLabelClass),"optionMapper"in it&&n(7,F=it.optionMapper),"onchange"in it&&n(34,C=it.onchange),"title"in it&&n(8,z=it.title),"hidePresetLabel"in it&&n(9,j=it.hidePresetLabel),"locale"in it&&n(10,A=it.locale),"enableOpacity"in it&&n(11,y=it.enableOpacity),"enablePresets"in it&&n(12,st=it.enablePresets),"enablePicker"in it&&n(13,G=it.enablePicker),"enableInput"in it&&n(14,k=it.enableInput),"enableEyeDropper"in it&&n(35,H=it.enableEyeDropper)},t.$$.update=()=>{16&t.$$.dirty[1]&&n(15,i=H&&(ah===null&&(ah=ar()&&"EyeDropper"in window),ah)),16&t.$$.dirty[0]|128&t.$$.dirty[1]&&(!T||g&&ys(T,g)||(n(38,g=[...T]),ct(T,!0))),32&t.$$.dirty[1]&&n(25,r=100*c),64&t.$$.dirty[1]&&n(24,o=100-100*d),256&t.$$.dirty[1]&&n(40,a=!!Ht&&Ht.length>=4&&Ht.length<=5),51216&t.$$.dirty[0]|512&t.$$.dirty[1]&&n(23,s=(k||i)&&T?((it,Vt,Dt)=>{let Zt=it.map(mt=>Math.round(255*mt).toString(16).toLowerCase().padStart(2,"0"));return(!Vt&&Zt.length>3||Zt[3]==="ff")&&Zt.pop(),Dt&&(Zt=Zt.map(mt=>mt.substring(0,1))),"#"+Zt.join("")})(T,y,a):void 0)},[f,x,v,w,T,I,M,F,z,j,A,y,st,G,k,i,l,u,h,$,rt,gt,Q,s,o,r,N,it=>{n(16,l=it),Pt=it,V()},it=>{n(17,u=it),V()},it=>{it.stopPropagation(),Ut=Fi(Q.offsetWidth,Q.offsetHeight),lt=(Vt=>ut(Vt.offsetX,Vt.offsetY))(it),q=qm(it),wt(lt,Ut),document.documentElement.addEventListener("pointermove",vt),document.documentElement.addEventListener("pointerup",dt)},it=>{Ut=Fi(Q.offsetWidth,Q.offsetHeight);const Vt=r/100*Ut.width,Dt=o/100*Ut.height;wt({x:Vt+it.detail.x,y:Dt+it.detail.y},Ut)},it=>{const{value:Vt}=it.target,Dt=Vt.length;if(!Vt.startsWith("#")||Dt<4||Dt===6||Dt===8||Dt>9||!y&&Dt>7)return;const Zt=Bh(Vt);Zt&&(n(39,Ht=Vt),kt(),ct(Zt),C(Zt))},it=>{it.stopPropagation()},it=>{new EyeDropper().open().then(({sRGBHex:Vt})=>{const Dt=Bh(Vt);Dt&&(Dt[3]=1,n(39,Ht=T),kt(),ct(Dt),C(Dt))}).catch(Vt=>{})},C,H,c,d,g,Ht,a,function(it){Hn[it?"unshift":"push"](()=>{Q=it,n(22,Q)})},([it,Vt])=>[it,Un(Vt)?Vt(A):Vt],it=>N(it.value)]}class p3 extends fn{constructor(e){super(),$n(this,e,u3,d3,dn,{label:0,name:1,options:2,selectedIndex:3,value:4,buttonClass:5,optionLabelClass:6,optionMapper:7,onchange:34,title:8,hidePresetLabel:9,locale:10,enableOpacity:11,enablePresets:12,enablePicker:13,enableInput:14,enableEyeDropper:35},null,[-1,-1])}}function h3(t){let e,n,i;return n=new Kr({props:{items:t[0]}}),{c(){e=$t("div"),Wt(n.$$.fragment),S(e,"class","PinturaShorthandControl PinturaShapeStyle")},m(r,o){tt(r,e,o),Bt(n,e,null),i=!0},p(r,[o]){const a={};1&o&&(a.items=r[0]),n.$set(a)},i(r){i||(R(n.$$.fragment,r),i=!0)},o(r){B(n.$$.fragment,r),i=!1},d(r){r&&J(e),Ot(n)}}}function m3(t,e,n){let i,r,{value:o}=e,{onchange:a}=e,{controls:s=[]}=e;return t.$$set=l=>{n(6,e=Oi(Oi({},e),ad(l))),"value"in l&&n(1,o=l.value),"onchange"in l&&n(2,a=l.onchange),"controls"in l&&n(3,s=l.controls)},t.$$.update=()=>{n(4,i=(l=>{const{controls:c,...d}=l;return d})(e)),30&t.$$.dirty&&n(0,r=s.map((l,c)=>{const[d,u,p]=l;return[d,u,{...i,...p,value:o[c],onchange:h=>{const $=[...o];$[c]=h,a($)}}]}))},e=ad(e),[r,o,a,s,i]}class g3 extends fn{constructor(e){super(),$n(this,e,m3,h3,dn,{value:1,onchange:2,controls:3})}}function $3(t){let e,n;return e=new I0({props:{label:t[4],options:t[1],title:t[2],selectedIndex:t[5],onchange:t[10]}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,[r]){const o={};16&r&&(o.label=i[4]),2&r&&(o.options=i[1]),4&r&&(o.title=i[2]),32&r&&(o.selectedIndex=i[5]),9&r&&(o.onchange=i[10]),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function f3(t,e,n){let i,r,o,a,{options:s}=e,{title:l}=e,{onchange:c}=e,{selectedIndex:d=-1}=e,{value:u}=e,{label:p}=e;return t.$$set=h=>{"options"in h&&n(1,s=h.options),"title"in h&&n(2,l=h.title),"onchange"in h&&n(3,c=h.onchange),"selectedIndex"in h&&n(0,d=h.selectedIndex),"value"in h&&n(6,u=h.value),"label"in h&&n(7,p=h.label)},t.$$.update=()=>{67&t.$$.dirty&&n(9,i=((h,$,g)=>{if(h)return $>-1?h[$]:g!==void 0?h.find(f=>f[0]===g):h[0]})(s,d,u)),514&t.$$.dirty&&n(5,r=s&&s.findIndex(h=>h===i)),512&t.$$.dirty&&n(8,o=i&&i[1]),384&t.$$.dirty&&n(4,a=p||o)},[d,s,l,c,a,r,u,p,o,i,h=>{n(0,d=h.index),c&&c(h)}]}class y3 extends fn{constructor(e){super(),$n(this,e,f3,$3,dn,{options:1,title:2,onchange:3,selectedIndex:0,value:6,label:7})}}function rf(t,e,n){const i=t.slice();return i[9]=e[n][0],i[0]=e[n][1],i[10]=e[n][2],i[2]=e[n][3],i}function b3(t){let e,n,i;const r=[t[10]];var o=t[3][t[9]]||t[9];function a(s){let l={};for(let c=0;c<r.length;c+=1)l=Oi(l,r[c]);return{props:l}}return o&&(e=Ku(o,a())),{c(){e&&Wt(e.$$.fragment),n=Di()},m(s,l){e&&Bt(e,s,l),tt(s,n,l),i=!0},p(s,l){const c=4&l?Lr(r,[Nr(s[10])]):{};if(o!==(o=s[3][s[9]]||s[9])){if(e){Le();const d=e;B(d.$$.fragment,1,0,()=>{Ot(d,1)}),Fe()}o?(e=Ku(o,a()),Wt(e.$$.fragment),R(e.$$.fragment,1),Bt(e,n.parentNode,n)):e=null}else o&&e.$set(c)},i(s){i||(e&&R(e.$$.fragment,s),i=!0)},o(s){e&&B(e.$$.fragment,s),i=!1},d(s){s&&J(n),e&&Ot(e,s)}}}function x3(t){let e,n=t[9],i=t[9]&&sh(t);return{c(){i&&i.c(),e=Di()},m(r,o){i&&i.m(r,o),tt(r,e,o)},p(r,o){r[9]?n?dn(n,r[9])?(i.d(1),i=sh(r),i.c(),i.m(e.parentNode,e)):i.p(r,o):(i=sh(r),i.c(),i.m(e.parentNode,e)):n&&(i.d(1),i=null),n=r[9]},i:Ke,o(r){B(i)},d(r){r&&J(e),i&&i.d(r)}}}function v3(t){let e,n,i=t[10].innerHTML+"";return{c(){e=new y0(!1),n=Di(),e.a=n},m(r,o){e.m(i,r,o),tt(r,n,o)},p(r,o){4&o&&i!==(i=r[10].innerHTML+"")&&e.p(i)},i:Ke,o:Ke,d(r){r&&J(n),r&&e.d()}}}function w3(t){let e,n=t[10].textContent+"";return{c(){e=Ti(n)},m(i,r){tt(i,e,r)},p(i,r){4&r&&n!==(n=i[10].textContent+"")&&Yi(e,n)},i:Ke,o:Ke,d(i){i&&J(e)}}}function S3(t){let e,n;return e=new Kr({props:{items:t[2],discardEmptyItems:!0}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};4&r&&(o.items=i[2]),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function sh(t){let e,n,i,r,o;const a=[S3,w3,v3],s=[];function l(u,p){return u[2]&&u[2].length?0:u[10].textContent?1:u[10].innerHTML?2:-1}~(n=l(t))&&(i=s[n]=a[n](t));let c=[t[4](t[10])],d={};for(let u=0;u<c.length;u+=1)d=Oi(d,c[u]);return{c(){e=$t(t[9]),i&&i.c(),r=ce(),/-/.test(t[9])?Ag(e,d):Eg(e,d)},m(u,p){tt(u,e,p),~n&&s[n].m(e,null),At(e,r),o=!0},p(u,p){let h=n;n=l(u),n===h?~n&&s[n].p(u,p):(i&&(Le(),B(s[h],1,1,()=>{s[h]=null}),Fe()),~n?(i=s[n],i?i.p(u,p):(i=s[n]=a[n](u),i.c()),R(i,1),i.m(e,r)):i=null),d=Lr(c,[4&p&&u[4](u[10])]),/-/.test(u[9])?Ag(e,d):Eg(e,d)},i(u){o||(R(i),o=!0)},o(u){B(i),o=!1},d(u){u&&J(e),~n&&s[n].d()}}}function of(t,e){let n,i,r,o,a,s;const l=[x3,b3],c=[];function d(u,p){return 4&p&&(i=null),i==null&&(i=!u[5](u[9])),i?0:1}return r=d(e,-1),o=c[r]=l[r](e),{key:t,first:null,c(){n=Di(),o.c(),a=Di(),this.first=n},m(u,p){tt(u,n,p),c[r].m(u,p),tt(u,a,p),s=!0},p(u,p){let h=r;r=d(e=u,p),r===h?c[r].p(e,p):(Le(),B(c[h],1,1,()=>{c[h]=null}),Fe(),o=c[r],o?o.p(e,p):(o=c[r]=l[r](e),o.c()),R(o,1),o.m(a.parentNode,a))},i(u){s||(R(o),s=!0)},o(u){B(o),s=!1},d(u){u&&J(n),c[r].d(u),u&&J(a)}}}function k3(t){let e,n,i=[],r=new Map,o=t[2];const a=s=>s[0]+s[1];for(let s=0;s<o.length;s+=1){let l=rf(t,o,s),c=a(l);r.set(c,i[s]=of(c,l))}return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=Di()},m(s,l){for(let c=0;c<i.length;c+=1)i[c].m(s,l);tt(s,e,l),n=!0},p(s,[l]){62&l&&(o=s[2],Le(),i=es(i,l,a,1,s,o,r,e.parentNode,Zs,of,e,rf),Fe())},i(s){if(!n){for(let l=0;l<o.length;l+=1)R(i[l]);n=!0}},o(s){for(let l=0;l<i.length;l+=1)B(i[l]);n=!1},d(s){for(let l=0;l<i.length;l+=1)i[l].d(s);s&&J(e)}}}function C3(t,e,n){let i,r,{items:o}=e,{discardEmptyItems:a=!0}=e,{key:s=""}=e;const l={Button:Ss,ImageButton:ab,ImageButtonList:R0,Dropdown:I0,Select:y3,RadioGroup:vs,Input:pb,Panel:V4,ProgressIndicator:hb,ShapeStyle:i3,ToggleSlider:J4,ColorPicker:p3,ShorthandControl:g3},c=u=>!He(u)||!!l[u],d=u=>{if(!u)return!1;const[p,,h,$=[]]=u;return!!c(p)||$.some(d)||h.textContent||h.innerHTML};return t.$$set=u=>{"items"in u&&n(6,o=u.items),"discardEmptyItems"in u&&n(7,a=u.discardEmptyItems),"key"in u&&n(0,s=u.key)},t.$$.update=()=>{1&t.$$.dirty&&n(1,i=s),192&t.$$.dirty&&n(2,r=(o&&a?o.filter(d):o)||[])},[s,i,r,l,(u={})=>{const{textContent:p,innerHTML:h,...$}=u;return $},c,o,a]}class Kr extends fn{constructor(e){super(),$n(this,e,C3,k3,dn,{items:6,discardEmptyItems:7,key:0})}get items(){return this.$$.ctx[6]}set items(e){this.$$set({items:e}),E()}get discardEmptyItems(){return this.$$.ctx[7]}set discardEmptyItems(e){this.$$set({discardEmptyItems:e}),E()}get key(){return this.$$.ctx[0]}set key(e){this.$$set({key:e}),E()}}function af(t){let e,n;return e=new Zo({props:{class:"PinturaButtonIcon",$$slots:{default:[T3]},$$scope:{ctx:t}}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};536870920&r&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function T3(t){let e;return{c(){e=Er("g")},m(n,i){tt(n,e,i),e.innerHTML=t[3]},p(n,i){8&i&&(e.innerHTML=n[3])},d(n){n&&J(e)}}}function M3(t){let e;return{c(){e=$t("span"),S(e,"class",t[11])},m(n,i){tt(n,e,i),e.innerHTML=t[0]},p(n,i){1&i&&(e.innerHTML=n[0]),2048&i&&S(e,"class",n[11])},i:Ke,o:Ke,d(n){n&&J(e)}}}function P3(t){let e,n,i;return n=new Kr({props:{items:t[0]}}),{c(){e=$t("span"),Wt(n.$$.fragment),S(e,"class",t[11])},m(r,o){tt(r,e,o),Bt(n,e,null),i=!0},p(r,o){const a={};1&o&&(a.items=r[0]),n.$set(a),(!i||2048&o)&&S(e,"class",r[11])},i(r){i||(R(n.$$.fragment,r),i=!0)},o(r){B(n.$$.fragment,r),i=!1},d(r){r&&J(e),Ot(n)}}}function R3(t){let e,n,i,r,o,a;const s=t[27].default,l=yr(s,t,t[29],null),c=l||function(d){let u,p,h,$,g,f,x=d[3]&&af(d);const v=[P3,M3],w=[];function T(I,M){return 1&M&&(h=null),h==null&&(h=!!Ei(I[0])),h?0:1}return $=T(d,-1),g=w[$]=v[$](d),{c(){u=$t("span"),x&&x.c(),p=ce(),g.c(),S(u,"class",d[13])},m(I,M){tt(I,u,M),x&&x.m(u,null),At(u,p),w[$].m(u,null),f=!0},p(I,M){I[3]?x?(x.p(I,M),8&M&&R(x,1)):(x=af(I),x.c(),R(x,1),x.m(u,p)):x&&(Le(),B(x,1,1,()=>{x=null}),Fe());let F=$;$=T(I,M),$===F?w[$].p(I,M):(Le(),B(w[F],1,1,()=>{w[F]=null}),Fe(),g=w[$],g?g.p(I,M):(g=w[$]=v[$](I),g.c()),R(g,1),g.m(u,null)),(!f||8192&M)&&S(u,"class",I[13])},i(I){f||(R(x),R(g),f=!0)},o(I){B(x),B(g),f=!1},d(I){I&&J(u),x&&x.d(),w[$].d()}}}(t);return{c(){e=$t("button"),c&&c.c(),S(e,"type",t[6]),e.disabled=t[5],S(e,"class",t[12]),S(e,"title",n=Qu(t[0],t[1],t[2]))},m(d,u){tt(d,e,u),c&&c.m(e,null),t[28](e),r=!0,o||(a=[Mt(e,"keydown",function(){Cn(t[8])&&t[8].apply(this,arguments)}),Mt(e,"click",function(){Cn(t[7])&&t[7].apply(this,arguments)}),Mt(e,"pointerdown",function(){Cn(t[14])&&t[14].apply(this,arguments)}),Tn(i=xs.call(null,e,t[4])),Tn(t[9].call(null,e))],o=!0)},p(d,[u]){t=d,l?l.p&&(!r||536870912&u)&&xr(l,s,t,t[29],r?br(s,t[29],u,null):vr(t[29]),null):c&&c.p&&(!r||10249&u)&&c.p(t,r?u:-1),(!r||64&u)&&S(e,"type",t[6]),(!r||32&u)&&(e.disabled=t[5]),(!r||4096&u)&&S(e,"class",t[12]),(!r||7&u&&n!==(n=Qu(t[0],t[1],t[2])))&&S(e,"title",n),i&&Cn(i.update)&&16&u&&i.update.call(null,t[4])},i(d){r||(R(c,d),r=!0)},o(d){B(c,d),r=!1},d(d){d&&J(e),c&&c.d(d),t[28](null),o=!1,Gn(a)}}}function I3(t,e,n){let i,r,o,a,s,l,{$$slots:c={},$$scope:d}=e,{class:u}=e,{label:p}=e,{title:h}=e,{shortcut:$}=e,{labelClass:g}=e,{innerClass:f}=e,{hideLabel:x=!1}=e,{icon:v}=e,{style:w}=e,{disabled:T}=e,{type:I="button"}=e,{onclick:M}=e,{onkeydown:F}=e,{onhold:C}=e,{action:z=()=>{}}=e,{holdThreshold:j=500}=e,{holdSpeedUpFactor:A=.5}=e,{holdSpeedMin:y=20}=e;const st=k=>{n(25,l=setTimeout(()=>{C(),st(Math.max(k*A,y))},k))};let G;return t.$$set=k=>{"class"in k&&n(15,u=k.class),"label"in k&&n(0,p=k.label),"title"in k&&n(1,h=k.title),"shortcut"in k&&n(2,$=k.shortcut),"labelClass"in k&&n(16,g=k.labelClass),"innerClass"in k&&n(17,f=k.innerClass),"hideLabel"in k&&n(18,x=k.hideLabel),"icon"in k&&n(3,v=k.icon),"style"in k&&n(4,w=k.style),"disabled"in k&&n(5,T=k.disabled),"type"in k&&n(6,I=k.type),"onclick"in k&&n(7,M=k.onclick),"onkeydown"in k&&n(8,F=k.onkeydown),"onhold"in k&&n(19,C=k.onhold),"action"in k&&n(9,z=k.action),"holdThreshold"in k&&n(20,j=k.holdThreshold),"holdSpeedUpFactor"in k&&n(21,A=k.holdSpeedUpFactor),"holdSpeedMin"in k&&n(22,y=k.holdSpeedMin),"$$scope"in k&&n(29,d=k.$$scope)},t.$$.update=()=>{101187584&t.$$.dirty&&n(26,r=C?()=>{l&&(clearTimeout(l),n(25,l=void 0),document.documentElement.removeEventListener("pointerup",r))}:pe),68681728&t.$$.dirty&&n(14,i=C?()=>{document.documentElement.addEventListener("pointerup",r),st(j)}:pe),131072&t.$$.dirty&&n(13,o=bn(["PinturaButtonInner",f])),294912&t.$$.dirty&&n(12,a=bn(["PinturaButton",x&&"PinturaButtonIconOnly",u])),327680&t.$$.dirty&&n(11,s=bn([x?"implicit":"PinturaButtonLabel",g]))},[p,h,$,v,w,T,I,M,F,z,G,s,a,o,i,u,g,f,x,C,j,A,y,k=>ob(k,G),()=>G,l,r,c,function(k){Hn[k?"unshift":"push"](()=>{G=k,n(10,G)})},d]}class Ss extends fn{constructor(e){super(),$n(this,e,I3,R3,dn,{class:15,label:0,title:1,shortcut:2,labelClass:16,innerClass:17,hideLabel:18,icon:3,style:4,disabled:5,type:6,onclick:7,onkeydown:8,onhold:19,action:9,holdThreshold:20,holdSpeedUpFactor:21,holdSpeedMin:22,isEventTarget:23,getElement:24})}get isEventTarget(){return this.$$.ctx[23]}get getElement(){return this.$$.ctx[24]}}var mb=(t,e)=>{const n=t.findIndex(e);if(n>=0)return t.splice(n,1)};const E3=80;var ks=(t,e={})=>{const{inertia:n=!1,inertiaDurationMultiplier:i=E3,shouldStartInteraction:r=()=>!0,pinch:o=!1,multiTouch:a,getEventPosition:s=et=>ut(et.clientX,et.clientY),observeKeys:l=!1}=e;function c(et,Pt){t.dispatchEvent(new CustomEvent(et,{detail:Pt}))}function d(){M&&M(),M=void 0}const u=[],p=et=>et.timeStamp===0?Date.now():et.timeStamp,h=()=>{const et=Ve(u[0].position);if(u[1]){const Pt=.5*(u[1].position.x-et.x),wt=.5*(u[1].position.y-et.y);et.x+=Pt,et.y+=wt}return et},$=et=>{et.origin.x=et.position.x,et.origin.y=et.position.y,et.translation.x=0,et.translation.y=0},g=et=>{const Pt=(wt=>u.findIndex(Q=>Q.event.pointerId===wt.pointerId))(et);if(!(Pt<0))return u[Pt]},f=()=>u.length===1,x=()=>u.length===2,v=et=>{const Pt=oa(et.map(wt=>wt.position));return{center:Pt,distance:((wt,Q)=>wt.reduce((Ut,lt)=>Ut+ro(Q,lt.position),0)/wt.length)(et,Pt),velocity:oa(et.map(wt=>wt.velocity)),translation:oa(et.map(wt=>wt.translation))}};let w,T,I,M,F,C,z,j,A=0,y;t.addEventListener("pointerdown",rt);const st=["Meta","Control","Alt","Shift"];function G(et){if(!st.includes(et.key))return;const{metaKey:Pt,ctrlKey:wt,altKey:Q,shiftKey:Ut}=et;H({metaKey:Pt,ctrlKey:wt,altKey:Q,shiftKey:Ut})}let k=Date.now();const H=et=>{const Pt=Ve(u[0].translation);let wt=z;o&&x()&&(wt*=ro(u[0].position,u[1].position)/F,Zi(Pt,u[1].translation)),Zi(Pt,C);const Q=Date.now();Q-k<16||(k=Q,c("interactionupdate",{position:h(),translation:Pt,scalar:o?wt:void 0,isMultiTouching:x(),...et}))};function rt(et){if(!x()&&!(Pt=>Ne(Pt.button)&&Pt.button!==0)(et)&&r(et,t)){if(d(),(Pt=>{const wt=p(Pt),Q={timeStamp:wt,timeStampInitial:wt,position:s(Pt),origin:s(Pt),velocity:ci(),velocityHistory:[],velocityAverage:ci(),translation:ci(),interactionState:void 0,event:Pt};u.push(Q),Q.interactionState=v(u)})(et),l&&(window.addEventListener("keydown",G),window.addEventListener("keyup",G)),f())document.documentElement.addEventListener("pointermove",gt),document.documentElement.addEventListener("pointerup",ct),document.documentElement.addEventListener("pointercancel",ct),document.addEventListener("visibilitychange",N),j=!1,z=1,C=ci(),F=void 0,c("interactionstart",{origin:Ve(g(et).origin)});else if(o)j=!0,F=ro(u[0].position,u[1].position),C.x+=u[0].translation.x,C.y+=u[0].translation.y,$(u[0]);else if(a===!1)return u.length=0,bt(),c("interactioncancel")}}function gt(et){et.preventDefault(),(lt=>{const q=g(lt);if(!q)return;const vt=p(lt),dt=s(lt),Ht=Math.max(1,vt-q.timeStamp);q.velocity.x=(dt.x-q.position.x)/Ht,q.velocity.y=(dt.y-q.position.y)/Ht,q.velocityHistory.push(Ve(q.velocity)),q.velocityHistory=q.velocityHistory.slice(-3),q.velocityAverage=q.velocityHistory.reduce((it,Vt,Dt,Zt)=>(it.x+=Vt.x/Zt.length,it.y+=Vt.y/Zt.length,it),ci()),q.translation.x=dt.x-q.origin.x,q.translation.y=dt.y-q.origin.y,q.timeStamp=vt,q.position.x=dt.x,q.position.y=dt.y,q.event=lt})(et);const{metaKey:Pt=!1,ctrlKey:wt=!1,altKey:Q=!1,shiftKey:Ut=!1}=l?et:{};H({metaKey:Pt,ctrlKey:wt,altKey:Q,shiftKey:Ut})}function ct(et){if(!g(et))return;const Pt=h(),wt=(Ht=>{const it=mb(u,Vt=>Vt.event.pointerId===Ht.pointerId);if(it)return it[0]})(et);if(o&&f()){const Ht=ro(u[0].position,wt.position);z*=Ht/F,C.x+=u[0].translation.x+wt.translation.x,C.y+=u[0].translation.y+wt.translation.y,$(u[0])}let Q=!1,Ut=!1;if(!j&&wt){const Ht=performance.now(),it=Ht-wt.timeStampInitial;Q=Vo(wt.translation)<64&&it<300,Ut=!!(y&&Q&&Ht-A<700&&Vo(y,wt.position)<128),Q&&(y=Ve(wt.position),A=Ht)}if(u.length>0)return;bt();const lt=Ve(wt.translation),q=Ve(wt.velocityAverage);let vt=!1;c("interactionrelease",{isTap:Q,isDoubleTap:Ut,position:Pt,translation:lt,scalar:z,preventInertia:()=>vt=!0});const dt=ro(q);if(vt||!n||dt<.25)return kt(lt,{isTap:Q,isDoubleTap:Ut});T=Ve(Pt),I=Ve(lt),w=T0(Ve(lt),{easing:L5,duration:dt*i}),w.set({x:lt.x+50*q.x,y:lt.y+50*q.y}).then(()=>{M&&kt(Ba(w),{isTap:Q,isDoubleTap:Ut})}),M=w.subscribe(V)}function V(et){et&&c("interactionupdate",{position:ut(T.x+(et.x-I.x),T.y+(et.y-I.y)),translation:et,scalar:o?z:void 0})}function N(et){if(document.visibilityState==="visible"||!u.length)return;const Pt=v(u);d(),c("interactionend",{...Pt}),u.length=0,bt()}function kt(et,Pt){d(),c("interactionend",{...Pt,translation:et,scalar:o?z:void 0})}function bt(){l&&window.removeEventListener("keydown",G),l&&window.removeEventListener("keyup",G),document.documentElement.removeEventListener("pointermove",gt),document.documentElement.removeEventListener("pointerup",ct),document.documentElement.removeEventListener("pointercancel",ct),document.removeEventListener("visibilitychange",N)}return{destroy(){d(),t.removeEventListener("pointerdown",rt)}}};function Fs(t,e){return e?e*Math.sign(t)*Math.log10(1+Math.abs(t)/e):t}const sf=(t,e,n)=>{if(!e||!n)return{...t};const i=t.x+Fs(e.x-t.x,n),r=t.x+t.width+Fs(e.x+e.width-(t.x+t.width),n),o=t.y+Fs(e.y-t.y,n);return{x:i,y:o,width:r-i,height:t.y+t.height+Fs(e.y+e.height-(t.y+t.height),n)-o}},A3=(t,e,n)=>e&&n?ut(t.x+Fs(e.x-t.x,n),t.y+Fs(e.y-t.y,n)):{...t};var gb=(t,e)=>{if(t)return/em/.test(t)?16*parseInt(t,10):/px/.test(t)?parseInt(t,10):void 0},p1=(t,e)=>{let n=t.detail||0;const{deltaX:i,deltaY:r,wheelDelta:o,wheelDeltaX:a,wheelDeltaY:s}=t,{fixScrollDirection:l=!1}=e||{};return Ne(a)&&Math.abs(a)>Math.abs(s)?n=a/-120:Ne(i)&&Math.abs(i)>Math.abs(r)?n=i/20:(o||s)&&(n=(o||s)/-120),n||(n=r/20),(Oa()||ka())&&(n*=2),l&&a1()&&(n*=-1),n};function L3(t){let e,n,i,r,o,a,s;const l=t[38].default,c=yr(l,t,t[37],null);return{c(){e=$t("div"),n=$t("div"),c&&c.c(),Tt(n,"transform",t[6]),S(e,"class",i=bn(["PinturaScrollable",t[0]])),S(e,"data-direction",t[1]),S(e,"data-state",t[7]),Tt(e,"--scrollable-feather-start-opacity",t[4]),Tt(e,"--scrollable-feather-end-opacity",t[5])},m(d,u){tt(d,e,u),At(e,n),c&&c.m(n,null),t[40](e),o=!0,a||(s=[Mt(n,"interactionstart",t[10]),Mt(n,"interactionupdate",t[12]),Mt(n,"interactionend",t[13]),Mt(n,"interactionrelease",t[11]),Tn(ks.call(null,n,{inertia:!0})),Mt(n,"measure",t[39]),Tn(Fr.call(null,n)),Mt(e,"wheel",t[15],{passive:!1}),Mt(e,"scroll",t[17]),Mt(e,"focusin",t[41]),Mt(e,"nudge",t[18]),Mt(e,"measure",t[14]),Tn(Fr.call(null,e,{observePosition:!0})),Tn(r=ws.call(null,e,{direction:t[1]==="x"?"horizontal":"vertical",stopKeydownPropagation:!1}))],a=!0)},p(d,u){c&&c.p&&(!o||64&u[1])&&xr(c,l,d,d[37],o?br(l,d[37],u,null):vr(d[37]),null),64&u[0]&&Tt(n,"transform",d[6]),(!o||1&u[0]&&i!==(i=bn(["PinturaScrollable",d[0]])))&&S(e,"class",i),(!o||2&u[0])&&S(e,"data-direction",d[1]),(!o||128&u[0])&&S(e,"data-state",d[7]),r&&Cn(r.update)&&2&u[0]&&r.update.call(null,{direction:d[1]==="x"?"horizontal":"vertical",stopKeydownPropagation:!1}),16&u[0]&&Tt(e,"--scrollable-feather-start-opacity",d[4]),32&u[0]&&Tt(e,"--scrollable-feather-end-opacity",d[5])},i(d){o||(R(c,d),o=!0)},o(d){B(c,d),o=!1},d(d){d&&J(e),c&&c.d(d),t[40](null),a=!1,Gn(s)}}}function F3(t,e,n){let i,r,o,a,s,l,c,d,u,{$$slots:p={},$$scope:h}=e;const $=Ta();let g,f,x,v,w="idle",T=mn(0);D(t,T,lt=>n(36,d=lt));let{class:I}=e,{scrollBlockInteractionDist:M=5}=e,{scrollStep:F=10}=e,{scrollFocusMargin:C=64}=e,{scrollDirection:z="x"}=e,{scrollAutoCancel:j=!1}=e,{elasticity:A=0}=e,{onscroll:y=pe}=e,{maskFeatherSize:st}=e,{maskFeatherStartOpacity:G}=e,{maskFeatherEndOpacity:k}=e,{scroll:H}=e;const rt=mi("fixScrollDirection");let gt;D(t,rt,lt=>n(48,u=lt));let ct,V,N=!0;const kt=T.subscribe(lt=>{const q=ci();q[z]=lt,y(q)}),bt=lt=>Math.max(Math.min(0,lt),x[i]-f[i]);let et,Pt,wt;const Q=(lt,q={})=>{const{elastic:vt=!1,animate:dt=!1,preventScrollState:Ht=!1}=q;Math.abs(lt-g)>M&&w==="idle"&&!v&&!Ht&&n(29,w="scrolling");const it=bt(lt),Vt=vt&&A&&!v?it+Fs(lt-it,A):it;let Dt=!0;dt?Dt=!1:N||(Dt=!v),N=!1,T.set(Vt,{hard:Dt}).then(Zt=>{v&&(N=!0)})},Ut=lt=>{if(!s||!v)return;let q=lt.target;lt.target.classList.contains("implicit")&&(q=q.parentNode);const vt=q[z==="x"?"offsetLeft":"offsetTop"],dt=vt+q[z==="x"?"offsetWidth":"offsetHeight"],Ht=Ba(T),it=C+st;Ht+vt<it?Q(-vt+it):Ht+dt>x[i]-it&&Q(x[i]-dt-it,{animate:!0})};return Xo(()=>{kt()}),t.$$set=lt=>{"class"in lt&&n(0,I=lt.class),"scrollBlockInteractionDist"in lt&&n(22,M=lt.scrollBlockInteractionDist),"scrollStep"in lt&&n(23,F=lt.scrollStep),"scrollFocusMargin"in lt&&n(24,C=lt.scrollFocusMargin),"scrollDirection"in lt&&n(1,z=lt.scrollDirection),"scrollAutoCancel"in lt&&n(25,j=lt.scrollAutoCancel),"elasticity"in lt&&n(26,A=lt.elasticity),"onscroll"in lt&&n(27,y=lt.onscroll),"maskFeatherSize"in lt&&n(21,st=lt.maskFeatherSize),"maskFeatherStartOpacity"in lt&&n(19,G=lt.maskFeatherStartOpacity),"maskFeatherEndOpacity"in lt&&n(20,k=lt.maskFeatherEndOpacity),"scroll"in lt&&n(28,H=lt.scroll),"$$scope"in lt&&n(37,h=lt.$$scope)},t.$$.update=()=>{if(2&t.$$.dirty[0]&&n(33,i=z==="x"?"width":"height"),2&t.$$.dirty[0]&&n(31,r=z.toUpperCase()),8&t.$$.dirty[0]&&n(35,o=gt&&getComputedStyle(gt)),8&t.$$.dirty[0]|16&t.$$.dirty[1]&&n(34,a=o&&gb(o.getPropertyValue("--scrollable-feather-size"))),1075314692&t.$$.dirty[0]|44&t.$$.dirty[1]&&d!=null&&x&&a!=null&&f){const lt=-1*d/a,q=-(x[i]-f[i]-d)/a;n(19,G=di(1-lt,0,1)),n(20,k=di(1-q,0,1)),n(21,st=a),n(4,ct=G),n(5,V=k)}268435464&t.$$.dirty[0]&&gt&&H!==void 0&&(Ne(H)?Q(H):Q(H.scrollOffset,H)),1073741828&t.$$.dirty[0]|4&t.$$.dirty[1]&&n(32,s=x&&f?f[i]>x[i]:void 0),536870912&t.$$.dirty[0]|2&t.$$.dirty[1]&&n(7,l=bn([w,s?"overflows":void 0])),35&t.$$.dirty[1]&&n(6,c=s?`translate${r}(${d}px)`:"none")},[I,z,f,gt,ct,V,c,l,T,rt,()=>{s&&(Pt=!1,et=!0,wt=ut(0,0),v=!1,n(29,w="idle"),g=Ba(T))},({detail:lt})=>{s&&(v=!0,n(29,w="idle"))},({detail:lt})=>{s&&(Pt||et&&(et=!1,Vo(lt.translation)<.1)||(!j||z!=="x"||(q=>{const vt=jo(ut(q.x-wt.x,q.y-wt.y),Math.abs);wt=Ve(q);const dt=Vo(vt),Ht=vt.x-vt.y;return!(dt>1&&Ht<-.5)})(lt.translation)?Q(g+lt.translation[z],{elastic:!0}):Pt=!0))},({detail:lt})=>{if(!s||Pt)return;const q=g+lt.translation[z],vt=bt(q);N=!1,T.set(vt).then(dt=>{v&&(N=!0)})},({detail:lt})=>{n(30,x=lt),$("measure",{x:lt.x,y:lt.y,width:lt.width,height:lt.height})},lt=>{if(!s)return;lt.preventDefault(),lt.stopPropagation();const q=lt.shiftKey,vt=p1(lt,{fixScrollDirection:u})*(q?-1:1),dt=Ba(T);Q(dt+vt*F,{animate:!0})},Ut,()=>{n(3,gt[z==="x"?"scrollLeft":"scrollTop"]=0,gt)},({detail:lt})=>{if(gt.querySelector("[data-focus-visible]"))return;const q=-2*lt[z],vt=Ba(T);Q(vt+q*F,{animate:!0,preventScrollState:!0})},G,k,st,M,F,C,j,A,y,H,w,x,r,s,i,a,o,d,h,p,lt=>n(2,f=lt.detail),function(lt){Hn[lt?"unshift":"push"](()=>{gt=lt,n(3,gt)})},lt=>{setTimeout(()=>Ut(lt),32)}]}class _a extends fn{constructor(e){super(),$n(this,e,F3,L3,dn,{class:0,scrollBlockInteractionDist:22,scrollStep:23,scrollFocusMargin:24,scrollDirection:1,scrollAutoCancel:25,elasticity:26,onscroll:27,maskFeatherSize:21,maskFeatherStartOpacity:19,maskFeatherEndOpacity:20,scroll:28},null,[-1,-1])}}function z3(t){let e,n,i,r,o;return{c(){e=$t("span"),S(e,"class","PinturaStatusMessage")},m(a,s){tt(a,e,s),e.innerHTML=t[0],i=!0,r||(o=[Mt(e,"measure",function(){Cn(t[1])&&t[1].apply(this,arguments)}),Tn(Fr.call(null,e))],r=!0)},p(a,[s]){t=a,(!i||1&s)&&(e.innerHTML=t[0])},i(a){i||(xl(()=>{n||(n=zg(e,t[4],{duration:t[2]},!0)),n.run(1)}),i=!0)},o(a){n||(n=zg(e,t[4],{duration:t[2]},!1)),n.run(0),i=!1},d(a){a&&J(e),a&&n&&n.end(),r=!1,Gn(o)}}}function D3(t,e,n){let i,r,{text:o}=e,{onmeasure:a=pe}=e;const s=mi("isAnimated");return D(t,s,l=>n(5,r=l)),t.$$set=l=>{"text"in l&&n(0,o=l.text),"onmeasure"in l&&n(1,a=l.onmeasure)},t.$$.update=()=>{32&t.$$.dirty&&n(2,i=r?500:0)},[o,a,i,s,function(l,{duration:c}){return{duration:c,tick:d=>{l.style.opacity=d}}},r]}class $b extends fn{constructor(e){super(),$n(this,e,D3,z3,dn,{text:0,onmeasure:1})}}function B3(t){let e,n,i;const r=t[5].default,o=yr(r,t,t[4],null);return{c(){e=$t("span"),o&&o.c(),S(e,"class",n="PinturaStatusAside "+t[1]),Tt(e,"transform",t[2]),Tt(e,"opacity",t[0])},m(a,s){tt(a,e,s),o&&o.m(e,null),i=!0},p(a,[s]){o&&o.p&&(!i||16&s)&&xr(o,r,a,a[4],i?br(r,a[4],s,null):vr(a[4]),null),(!i||2&s&&n!==(n="PinturaStatusAside "+a[1]))&&S(e,"class",n),4&s&&Tt(e,"transform",a[2]),1&s&&Tt(e,"opacity",a[0])},i(a){i||(R(o,a),i=!0)},o(a){B(o,a),i=!1},d(a){a&&J(e),o&&o.d(a)}}}function O3(t,e,n){let i,{$$slots:r={},$$scope:o}=e,{offset:a=0}=e,{opacity:s=0}=e,{class:l}=e;return t.$$set=c=>{"offset"in c&&n(3,a=c.offset),"opacity"in c&&n(0,s=c.opacity),"class"in c&&n(1,l=c.class),"$$scope"in c&&n(4,o=c.$$scope)},t.$$.update=()=>{8&t.$$.dirty&&n(2,i=`translateX(${a}px)`)},[s,l,i,a,o,r]}class fb extends fn{constructor(e){super(),$n(this,e,O3,B3,dn,{offset:3,opacity:0,class:1})}}let lh=null;var W3=t=>{if(lh===null&&(lh=ar()&&"visualViewport"in window),!lh)return!1;const e=visualViewport.height,n=()=>{t(visualViewport.height<e?"visible":"hidden")};return visualViewport.addEventListener("resize",n),()=>visualViewport.removeEventListener("resize",n)};function lf(t){let e,n;const i=[{onclick:t[1]},t[3]];let r={};for(let o=0;o<i.length;o+=1)r=Oi(r,i[o]);return e=new Ss({props:r}),{c(){Wt(e.$$.fragment)},m(o,a){Bt(e,o,a),n=!0},p(o,a){const s=10&a[0]?Lr(i,[2&a[0]&&{onclick:o[1]},8&a[0]&&Nr(o[3])]):{};e.$set(s)},i(o){n||(R(e.$$.fragment,o),n=!0)},o(o){B(e.$$.fragment,o),n=!1},d(o){Ot(e,o)}}}function cf(t){let e,n;const i=[{onclick:t[0]},{class:"PinturaInputFormButtonConfirm"},t[2]];let r={};for(let o=0;o<i.length;o+=1)r=Oi(r,i[o]);return e=new Ss({props:r}),{c(){Wt(e.$$.fragment)},m(o,a){Bt(e,o,a),n=!0},p(o,a){const s=5&a[0]?Lr(i,[1&a[0]&&{onclick:o[0]},i[1],4&a[0]&&Nr(o[2])]):{};e.$set(s)},i(o){n||(R(e.$$.fragment,o),n=!0)},o(o){B(e.$$.fragment,o),n=!1},d(o){Ot(e,o)}}}function _3(t){let e,n,i,r,o,a,s,l,c=t[3]&&lf(t);const d=t[29].default,u=yr(d,t,t[28],null);let p=t[2]&&cf(t);return{c(){e=$t("div"),n=$t("div"),c&&c.c(),i=ce(),r=$t("div"),u&&u.c(),o=ce(),p&&p.c(),S(r,"class","PinturaInputFormFields"),S(n,"class","PinturaInputFormInner"),S(e,"class","PinturaInputForm"),S(e,"data-layout",t[4]),Tt(e,"opacity",t[6]),Tt(e,"left",t[7]),Tt(e,"top",t[8]),Tt(e,"right",t[9]),Tt(e,"bottom",t[10])},m(h,$){tt(h,e,$),At(e,n),c&&c.m(n,null),At(n,i),At(n,r),u&&u.m(r,null),At(n,o),p&&p.m(n,null),t[30](e),a=!0,s||(l=[Mt(r,"keydown",t[14]),Mt(e,"focusin",t[11]),Mt(e,"focusout",t[12]),Mt(e,"measure",t[13]),Tn(Fr.call(null,e))],s=!0)},p(h,$){h[3]?c?(c.p(h,$),8&$[0]&&R(c,1)):(c=lf(h),c.c(),R(c,1),c.m(n,i)):c&&(Le(),B(c,1,1,()=>{c=null}),Fe()),u&&u.p&&(!a||268435456&$[0])&&xr(u,d,h,h[28],a?br(d,h[28],$,null):vr(h[28]),null),h[2]?p?(p.p(h,$),4&$[0]&&R(p,1)):(p=cf(h),p.c(),R(p,1),p.m(n,null)):p&&(Le(),B(p,1,1,()=>{p=null}),Fe()),(!a||16&$[0])&&S(e,"data-layout",h[4]),64&$[0]&&Tt(e,"opacity",h[6]),128&$[0]&&Tt(e,"left",h[7]),256&$[0]&&Tt(e,"top",h[8]),512&$[0]&&Tt(e,"right",h[9]),1024&$[0]&&Tt(e,"bottom",h[10])},i(h){a||(R(c),R(u,h),R(p),a=!0)},o(h){B(c),B(u,h),B(p),a=!1},d(h){h&&J(e),c&&c.d(),u&&u.d(h),p&&p.d(),t[30](null),s=!1,Gn(l)}}}function V3(t,e,n){let i,r,o,a,s,{$$slots:l={},$$scope:c}=e,{onconfirm:d}=e,{oncancel:u}=e,{autoFocus:p=!0}=e,{autoPositionCursor:h=!0}=e,{buttonConfirm:$}=e,{buttonCancel:g}=e,{layout:f="stack"}=e,{parentRect:x}=e,{align:v}=e,{justify:w}=e,{parentMargin:T=16}=e,{panelOffset:I=ci()}=e,{willHandleKeydown:M=()=>!0}=e,F=!1,C,z,j={top:void 0,bottom:void 0},A=0,y,st,G,k;const H=()=>{const V=s.querySelector("input, textarea");V.focus(),A>=1||V.select()},rt=()=>{F=!0,ct||!Uo()&&!i1()||n(24,j={top:"1em",bottom:"auto"}),Uo()&&(V=>{let N;const kt=et=>N=et.touches[0].screenY,bt=et=>{const Pt=et.touches[0].screenY,wt=et.target;/textarea/i.test(wt.nodeName)?(Pt>N?wt.scrollTop==0&&et.preventDefault():Pt<N?wt.scrollTop+wt.offsetHeight==wt.scrollHeight&&et.preventDefault():et.preventDefault(),N=Pt):et.preventDefault()};V.addEventListener("touchstart",kt),V.addEventListener("touchmove",bt)})(s),n(6,A=1)};let gt;const ct=W3(V=>{a?V!=="hidden"||F?(clearTimeout(z),z=void 0,n(24,j={top:visualViewport.height-C.height-I.y+"px"}),V==="visible"?(n(5,s.dataset.stick=!0,s),H(),rt()):(F=!1,n(6,A=0))):H():n(24,j={top:"4.5em",bottom:"auto"})});return bs(()=>{p&&H()}),Xo(()=>{ct&&ct()}),t.$$set=V=>{"onconfirm"in V&&n(0,d=V.onconfirm),"oncancel"in V&&n(1,u=V.oncancel),"autoFocus"in V&&n(15,p=V.autoFocus),"autoPositionCursor"in V&&n(16,h=V.autoPositionCursor),"buttonConfirm"in V&&n(2,$=V.buttonConfirm),"buttonCancel"in V&&n(3,g=V.buttonCancel),"layout"in V&&n(4,f=V.layout),"parentRect"in V&&n(17,x=V.parentRect),"align"in V&&n(18,v=V.align),"justify"in V&&n(19,w=V.justify),"parentMargin"in V&&n(20,T=V.parentMargin),"panelOffset"in V&&n(21,I=V.panelOffset),"willHandleKeydown"in V&&n(22,M=V.willHandleKeydown),"$$scope"in V&&n(28,c=V.$$scope)},t.$$.update=()=>{8519680&t.$$.dirty[0]&&n(27,i=x&&C),144572416&t.$$.dirty[0]&&n(26,r=i?((V,N,kt,bt,et)=>{let Pt,wt;return Pt=bt==="center"?V.x+.5*V.width-.5*N.width:bt==="right"?V.x+V.width-N.width-et:V.x+et,wt=kt==="center"?V.y+.5*V.height-.5*N.height:kt==="bottom"?V.y+V.height-N.height-et:V.y+et,{top:wt+"px",right:"auto",bottom:"auto",left:Pt+"px"}})(x,C,v,w,T):void 0),201326592&t.$$.dirty[0]&&n(7,y=i?r.left:void 0),218103808&t.$$.dirty[0]&&n(8,st=i?r.top:j.top),201326592&t.$$.dirty[0]&&n(9,G=i?r.right:void 0),218103808&t.$$.dirty[0]&&n(10,k=i?r.bottom:j.bottom),32&t.$$.dirty[0]&&n(25,o=s&&getComputedStyle(s)),33554432&t.$$.dirty[0]&&(a=o&&o.getPropertyValue("--editor-modal")==="1")},[d,u,$,g,f,s,A,y,st,G,k,V=>{var N;((kt=>/textarea/i.test(kt))(V.target)||sb(V.target))&&(gt=Date.now(),h&&((N=V.target).selectionStart=N.selectionEnd=N.value.length),clearTimeout(z),z=setTimeout(rt,200))},V=>{Date.now()-gt>50||(V.stopPropagation(),H())},({detail:V})=>{n(23,C={width:V.width,height:V.height})},V=>{if(M(V))return V.key==="Enter"?d():V.key==="Escape"?u():void 0},p,h,x,v,w,T,I,M,C,j,o,r,i,c,l,function(V){Hn[V?"unshift":"push"](()=>{s=V,n(5,s)})}]}class yb extends fn{constructor(e){super(),$n(this,e,V3,_3,dn,{onconfirm:0,oncancel:1,autoFocus:15,autoPositionCursor:16,buttonConfirm:2,buttonCancel:3,layout:4,parentRect:17,align:18,justify:19,parentMargin:20,panelOffset:21,willHandleKeydown:22},null,[-1,-1])}}var df=(t,e)=>{t.fastSeek&&t.fastSeek(e),t.currentTime=e},bb=t=>t.touches&&t.touches.length&&t.touches[0].touchType==="stylus";const N3=["aspectRatio","isRotatedSideways","flip","cropSize"],uf=v0.map(([t])=>t).filter(t=>!N3.includes(t));var As=(t,e)=>new CustomEvent("ping",{detail:{type:t,data:e},cancelable:!0,bubbles:!0}),xb=(t,e)=>(e?Bs(t,e):t).replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase(),pf=(t,e=ai)=>{const{subscribe:n,set:i}=fe(void 0);return{subscribe:n,destroy:((r,o)=>{const a=matchMedia(r);return a.addListener(o),o(a),{get matches(){return a.matches},destroy:()=>a.removeListener(o)}})(t,({matches:r})=>i(e(r))).destroy}},hf=(t,e,n)=>new Promise((i,r)=>{(async()=>{ac(t)&&i(await Xy(t));const o=await e.read(t),a=l=>D2(l,n).then(c=>e.apply(c,o)).then(i).catch(r);if(z2(t)||!F2()||ka()||Uo())return a(t);let s;try{s=await hd((l,c)=>createImageBitmap(l).then(d=>c(null,d)).catch(c),[t])}catch{}s&&s.width?await n1()?C0()&&o>1?i(await(async l=>pd(await rc(l)))(s)):i(s):i(e.apply(s,o)):a(t)})()}),mf=(t,e)=>new Promise(async n=>{if(t.width<e.width&&t.height<e.height)return n(t);const i=Math.min(e.width/t.width,e.height/t.height),r=i*t.width,o=i*t.height,a=fi("canvas",{width:r,height:o}),s=a.getContext("2d",{willReadFrequently:!0}),l=Ql(t)?await rc(t):t;s.drawImage(l,0,0,r,o),n(pd(a))});let ch=null;var H3=()=>{if(ch===null){let t=fi("canvas");ch=!!l1(t),or(t),t=void 0}return ch};const gf=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],hl={precision:1e-4},Tu={precision:.01*hl.precision};var j3=()=>{const t=[],e=[],n=[],i=()=>{e.forEach(o=>o(n))},r=o=>{o.unsub=o.subscribe(a=>((s,l)=>{const c=t.indexOf(s);c<0||(n[c]=l,i())})(o,a)),i()};return{get length(){return t.length},clear:()=>{t.forEach(o=>o.unsub()),t.length=0,n.length=0},unshift:o=>{t.unshift(o),r(o)},get:o=>t[o],push:o=>{t.push(o),r(o)},remove:o=>{o.unsub();const a=t.indexOf(o);t.splice(a,1),n.splice(a,1)},forEach:o=>t.forEach(o),filter:o=>t.filter(o),subscribe:o=>(e.push(o),o(n),()=>{e.splice(e.indexOf(o),1)})}},dh=t=>t[0]<.25&&t[1]<.25&&t[2]<.25,vb=(t={})=>new Promise(e=>{const{accept:n="image/*"}=t,i=fi("input",{style:"position:absolute;visibility:hidden;width:0;height:0;",type:"file",accept:n}),r=()=>{const[o]=i.files;i.parentNode&&i.remove(),i.removeEventListener("change",r),e(o)};i.addEventListener("change",r),Uo()&&document.body.append(i),i.click()}),dd=t=>{try{return t()}catch(e){console.error(e)}},U3=([t,e])=>t+.5*(e-t),_s=t=>Math.round(100*t),L0=t=>ut(t.clientX,t.clientY),Oh=(t,e,n)=>{const i=L0(t);return Xi(Xi(i,e),n)};function G3(t,e,n){let i,r,o,a,s,l,c,d,u,p,h,$,g,f,x,v,w,T,I,M,F,{root:C}=e,{locale:z}=e,{stores:j}=e,{allowPan:A=!0}=e,{allowZoom:y=!0}=e,{enablePan:st=!0}=e,{enableZoom:G=!0}=e,{enableZoomControls:k=G}=e,{enableZoomInput:H=!0}=e,{enablePanInput:rt=!0}=e,{enablePanLimit:gt=!0}=e,{panLimitGutterScalar:ct=0}=e,{zoomOptions:V=[.25,.5,1,1.25,1.5,2,3,4,6,8,16]}=e,{zoomAdjustStep:N=.25}=e,{zoomAdjustFactor:kt=.1}=e,{zoomAdjustWheelFactor:bt=1}=e,{elasticity:et=5}=e,{imageSelectionRectCentered:Pt}=e,{imageSelectionRectScalar:wt}=e,{zoomLevel:Q=null}=e,{zoomControls:Ut}=e,{zoomMultiTouching:lt=!1}=e;const{isAnimated:q,isInteracting:vt,rootRect:dt,stageRect:Ht,stageScalar:it,imageSelectionPan:Vt,imageSelectionZoom:Dt,imageSelectionStageFitScalar:Zt,imageSelectionRect:mt,imageSelectionStoredState:Ft,imagePreviewUpscale:ht}=j;D(t,q,ot=>n(71,M=ot)),D(t,vt,ot=>n(70,T=ot)),D(t,dt,ot=>n(67,x=ot)),D(t,Ht,ot=>n(66,f=ot)),D(t,it,ot=>n(46,I=ot)),D(t,Vt,ot=>n(65,h=ot)),D(t,Dt,ot=>n(43,p=ot)),D(t,Zt,ot=>n(44,$=ot)),D(t,mt,ot=>n(68,v=ot)),D(t,Ft,ot=>n(72,F=ot)),D(t,ht,ot=>n(45,g=ot));const Yt=mi("fixScrollDirection");D(t,Yt,ot=>n(69,w=ot));let Nt=!1,Qt,re,xt,_;const ke=ot=>{const me=C.querySelector(".PinturaMain > .PinturaUtilMain")||C.querySelector('div[data-inert="false"] .PinturaUtilMain');return!!me&&!!me.contains(ot.target)&&!Os(ot.target)},ne=(ot={})=>{const{pan:me=h,zoom:se=p}=ot;It(Ft,F={translation:me,zoom:se},F)},Xt=()=>h&&h.x===0&&h.y===0,he=()=>{It(Dt,p=void 0,p),Xt()||It(Vt,h=ci(),h),Re.set(void 0,{hard:!0})},ae=()=>{he(),ne()},Re=mn(void 0,{precision:.01});Re.subscribe(ot=>{if(ot===void 0)return It(Dt,p=void 0,p),void(Xt()||It(Vt,h=ci(),h));const me=p;ot<=1?Xt()||It(Vt,h=ci(),h):ot<=me&&It(Vt,h=Vr(h,.8),h),It(Dt,p=ot,p)});const nn=ot=>{Re.update(me=>{const se=ot(me||$);return ne({zoom:se}),se})},Ct=ot=>{ot?Re.set(ot,{hard:M===!1}):(ot=void 0,Re.set(void 0,{hard:!0})),It(Dt,p=ot,p),ne({zoom:ot})};let de;function ln(){const ot=Date.now();!Ne(de)||ot-de>500?de=ot:(de=void 0,Ct(o?d===1?$:1:d===$?1:$))}const Je=(ot,me)=>{const se=wt*me,ge={...Pt},oe=1-di(ct,0,1);_r(ge,se<oe?se:oe);const qe={...Pt};_r(qe,se),fa(qe,ot);const ze={...qe};return qe.x>ge.x&&(ze.x=ge.x),qe.y>ge.y&&(ze.y=ge.y),qe.x+qe.width<ge.x+ge.width&&(ze.x=ge.x+ge.width-qe.width),qe.y+qe.height<ge.y+ge.height&&(ze.y=ge.y+ge.height-qe.height),Xi(Ln(ze),Ln(ge))},Qe=({translation:ot,zoom:me=1,elastify:se=!0})=>{if(!Qt)return;let ge=ot;const oe=ut(Qt.x+ge.x,Qt.y+ge.y);if(!gt)return oe;const qe=Je(oe,me);return se?A3(qe,oe,et):qe};let Ie,Ye;const yn=()=>{Ye=void 0,It(vt,T=!0,T),n(34,Nt=rt),Ie=!1,xt=!1,Qt={...h},re=g?p||$:o?p||1:p||$},Sn=ot=>{const{scalar:me,translation:se,isMultiTouching:ge}=ot.detail;if(!Qt||!ge&&!rt)return;ge&&Vr(se,.5),(rt||ge)&&(Ie=!0),lt||n(13,lt=ge);const oe=i?di(re*me,s,l):1,qe=Qe({translation:se,zoom:oe,elastify:!0}),ze=zs(qe);_=zs(h),xt=ze<_,i&&Dt.set(oe),Vt.set(qe),Ye=lt&&{translation:ot.detail.translation,scalar:me}},Fn=ot=>{It(vt,T=!1,T),n(34,Nt=!1),n(13,lt=!1),xt&&_<50&&(Qt=void 0,re=void 0,Vt.set(ci()))},zn=ot=>{It(vt,T=!1,T),n(34,Nt=!1),n(13,lt=!1),Promise.resolve().then(()=>{if(Ie&&Qt){const me=Ye||ot.detail,se=i?di(re*me.scalar,s,l):1,ge=Qe({elastify:!1,translation:me.translation,zoom:se});Vt.set(ge)}Qt=void 0,re=void 0,rt&&ot.detail.isDoubleTap&&ae(),ne()})};let un,Y=Date.now(),at=0,Z=!1,zt=!1;const ue=ot=>{if(!ke(ot)||(ot.preventDefault(),ot.stopPropagation(),zt))return;clearTimeout(un);const me=p1(ot,{fixScrollDirection:w}),se=Date.now(),ge=se-Y;Y=se;const oe=Math.abs(me/ge)>.2;at=oe?at+1:0;const qe=1+-1*me*bt/(oe?50:100),ze=Oh(ot,x,f);De(ze,qe,{isZoomingFast:oe})},De=(ot,me,{isZoomingFast:se})=>{const ge=g?p||$:o?p||1:p||$,oe=ge*me,qe=ci(),ze=h,ui=g?$:o?1:$,Oe=Math.abs(oe-ui),rn=oe<ge,In=ge>ui&&rn||ge<ui&&oe>ge,Dn=at>=5;if(se||(Z=!1),at>0&&!Z&&(Z=In),Dn&&Z)return ae(),zt=!0,void setTimeout(()=>{zt=!1},100);if(Dn)return;!se&&In&&Oe<=.05&&(un=setTimeout(()=>{ae()},250)),It(Dt,p=di(oe,s,l),p);const pn=An(v);_r(pn,ge),fa(pn,ze);const ti=Ln(pn),we=An(pn);_r(we,p-ge+1,ot);const Ze=Ln(we),en=Km(Xi(Ze,ti),ge);((hi,wi,pi)=>{hi.x=wi,hi.y=pi})(qe,ze.x+en.x,ze.y+en.y),It(Vt,h=rn&&se?Vr(Ve(h),.85):Je(qe,ge),h),ne()},ye=ot=>(ot?"add":"remove")+"EventListener";let Lt,Te,cn,an;const nt=ot=>{ot.preventDefault(),Te={...h},an=An(v),cn=Oh(ot,x,f),Lt=g?p||$:o?p||1:p||$},Gt=ot=>{ot.preventDefault(),It(Dt,p=di(ot.scale*Lt,s,l),p);const me=An(an);_r(me,Lt),fa(me,Te);const se=Ln(me),ge=An(me);_r(ge,p-Lt+1,cn);const oe=Ln(ge),qe=Km(Xi(oe,se),Lt),ze={x:Te.x+qe.x,y:Te.y+qe.y};It(Vt,h=Je(ze,p),h)},Be=ot=>{ot.preventDefault()},xe=ot=>{C[ye(ot)]("wheel",ue),Uo()||(C[ye(ot)]("gesturestart",nt),C[ye(ot)]("gesturechange",Gt),C[ye(ot)]("gestureend",Be))},te=ot=>{const me=ye(ot);C[me]("interactionstart",yn),C[me]("interactionupdate",Sn),C[me]("interactionrelease",Fn),C[me]("interactionend",zn)};let tn;return bs(()=>{tn=ks(C,{drag:!0,pinch:!0,inertia:!0,inertiaDurationMultiplier:10,shouldStartInteraction:ke})}),Xo(()=>{xe(!1),te(!1),tn.destroy(),tn=void 0}),t.$$set=ot=>{"root"in ot&&n(14,C=ot.root),"locale"in ot&&n(15,z=ot.locale),"stores"in ot&&n(16,j=ot.stores),"allowPan"in ot&&n(17,A=ot.allowPan),"allowZoom"in ot&&n(18,y=ot.allowZoom),"enablePan"in ot&&n(19,st=ot.enablePan),"enableZoom"in ot&&n(20,G=ot.enableZoom),"enableZoomControls"in ot&&n(21,k=ot.enableZoomControls),"enableZoomInput"in ot&&n(22,H=ot.enableZoomInput),"enablePanInput"in ot&&n(23,rt=ot.enablePanInput),"enablePanLimit"in ot&&n(24,gt=ot.enablePanLimit),"panLimitGutterScalar"in ot&&n(25,ct=ot.panLimitGutterScalar),"zoomOptions"in ot&&n(26,V=ot.zoomOptions),"zoomAdjustStep"in ot&&n(27,N=ot.zoomAdjustStep),"zoomAdjustFactor"in ot&&n(28,kt=ot.zoomAdjustFactor),"zoomAdjustWheelFactor"in ot&&n(29,bt=ot.zoomAdjustWheelFactor),"elasticity"in ot&&n(30,et=ot.elasticity),"imageSelectionRectCentered"in ot&&n(31,Pt=ot.imageSelectionRectCentered),"imageSelectionRectScalar"in ot&&n(32,wt=ot.imageSelectionRectScalar),"zoomLevel"in ot&&n(33,Q=ot.zoomLevel),"zoomControls"in ot&&n(12,Ut=ot.zoomControls),"zoomMultiTouching"in ot&&n(13,lt=ot.zoomMultiTouching)},t.$$.update=()=>{var ot,me;5505024&t.$$.dirty[0]&&n(36,i=y&&G&&H),655360&t.$$.dirty[0]&&n(35,r=A&&st),393216&t.$$.dirty[0]&&(A||y?(It(Dt,p=G?F.zoom:void 0,p),It(Vt,h=st?Ve(F.translation):Xt()?h:ci(),h),Re.set(p)):he()),32768&t.$$.dirty[1]&&(o=I>=1),67141632&t.$$.dirty[0]|57344&t.$$.dirty[1]&&n(40,a=[(g||I<1)&&[$,_s($)+"%",{sublabel:z.labelZoomFit}],...V.map(se=>[se,_s(se)+"%"])].filter(Boolean).map(se=>(se[0]===1&&(se[2]={sublabel:z.labelZoomActual}),se)).sort((se,ge)=>{const oe=se[0]||$,qe=ge[0]||$;return oe<qe?-1:qe<oe?1:0})),8704&t.$$.dirty[1]&&n(38,s=Math.min(a.reduce((se,[ge])=>ge<se?ge:se,Number.MAX_SAFE_INTEGER),$)),512&t.$$.dirty[1]&&n(37,l=a.reduce((se,[ge])=>ge>se?ge:se,Number.MIN_SAFE_INTEGER)),4&t.$$.dirty[1]&&Q!==null&&Ct(Q),61440&t.$$.dirty[1]&&n(42,d=p||(g||I<1?$:1)),2560&t.$$.dirty[1]&&n(39,(ot=a.map(([se])=>se),me=d,c=ot.findIndex(se=>se===me))),2048&t.$$.dirty[1]&&n(41,u=_s(d)+"%"),405045248&t.$$.dirty[0]|6080&t.$$.dirty[1]&&n(12,Ut=(y||y)&&k?[["Button","zoom-out",{hideLabel:!0,label:z.labelZoomOut,icon:z.iconZoomOut,disabled:p===s,onclick:()=>nn(se=>Math.max(s,se-N)),onhold:()=>nn(se=>Math.max(s,se*(1-kt)))}],["Dropdown","zoom-level",{label:u,title:z.labelZoom,labelClass:"PinturaFixedWidthCharacters",options:a,selectedIndex:c,onchange:se=>Ct(se.value),onclick:ln}],["Button","zoom-in",{hideLabel:!0,label:z.labelZoomIn,icon:z.iconZoomIn,disabled:p===l,onclick:()=>nn(se=>Math.min(l,se+N)),onhold:()=>nn(se=>Math.min(l,se*(1+kt)))}]]:[]),16384&t.$$.dirty[0]|32&t.$$.dirty[1]&&C&&xe(i),16384&t.$$.dirty[0]|16&t.$$.dirty[1]&&C&&te(r),8404992&t.$$.dirty[0]|24&t.$$.dirty[1]&&C&&C.style.setProperty("--cursor",r&&rt?Nt?"grabbing":"grab":"")},[q,vt,dt,Ht,it,Vt,Dt,Zt,mt,Ft,ht,Yt,Ut,lt,C,z,j,A,y,st,G,k,H,rt,gt,ct,V,N,kt,bt,et,Pt,wt,Q,Nt,r,i,l,s,c,a,u,d,p,$,g,I]}class Z3 extends fn{constructor(e){super(),$n(this,e,G3,null,dn,{root:14,locale:15,stores:16,allowPan:17,allowZoom:18,enablePan:19,enableZoom:20,enableZoomControls:21,enableZoomInput:22,enablePanInput:23,enablePanLimit:24,panLimitGutterScalar:25,zoomOptions:26,zoomAdjustStep:27,zoomAdjustFactor:28,zoomAdjustWheelFactor:29,elasticity:30,imageSelectionRectCentered:31,imageSelectionRectScalar:32,zoomLevel:33,zoomControls:12,zoomMultiTouching:13},null,[-1,-1,-1,-1])}}const{window:ml}=b0;function $f(t){let e,n,i,r=t[41]&&ff(t),o=t[38]&&vf(t);return{c(){r&&r.c(),e=ce(),o&&o.c(),n=Di()},m(a,s){r&&r.m(a,s),tt(a,e,s),o&&o.m(a,s),tt(a,n,s),i=!0},p(a,s){a[41]?r?(r.p(a,s),1024&s[1]&&R(r,1)):(r=ff(a),r.c(),R(r,1),r.m(e.parentNode,e)):r&&(Le(),B(r,1,1,()=>{r=null}),Fe()),a[38]?o?(o.p(a,s),128&s[1]&&R(o,1)):(o=vf(a),o.c(),R(o,1),o.m(n.parentNode,n)):o&&(Le(),B(o,1,1,()=>{o=null}),Fe())},i(a){i||(R(r),R(o),i=!0)},o(a){B(r),B(o),i=!1},d(a){r&&r.d(a),a&&J(e),o&&o.d(a),a&&J(n)}}}function ff(t){let e,n,i,r,o;const a=[Y3,X3],s=[];function l(c,d){return c[39]?0:c[35]?1:-1}return~(i=l(t))&&(r=s[i]=a[i](t)),{c(){e=$t("div"),n=$t("p"),r&&r.c(),Tt(n,"transform",t[72]),S(e,"class","PinturaStatus"),Tt(e,"opacity",t[54])},m(c,d){tt(c,e,d),At(e,n),~i&&s[i].m(n,null),o=!0},p(c,d){let u=i;i=l(c),i===u?~i&&s[i].p(c,d):(r&&(Le(),B(s[u],1,1,()=>{s[u]=null}),Fe()),~i?(r=s[i],r?r.p(c,d):(r=s[i]=a[i](c),r.c()),R(r,1),r.m(n,null)):r=null),1024&d[2]&&Tt(n,"transform",c[72]),8388608&d[1]&&Tt(e,"opacity",c[54])},i(c){o||(R(r),o=!0)},o(c){B(r),o=!1},d(c){c&&J(e),~i&&s[i].d()}}}function X3(t){let e,n,i,r;e=new $b({props:{text:t[35].text||"",onmeasure:t[221]}});let o=t[35].aside&&yf(t);return{c(){Wt(e.$$.fragment),n=ce(),o&&o.c(),i=Di()},m(a,s){Bt(e,a,s),tt(a,n,s),o&&o.m(a,s),tt(a,i,s),r=!0},p(a,s){const l={};16&s[1]&&(l.text=a[35].text||""),e.$set(l),a[35].aside?o?(o.p(a,s),16&s[1]&&R(o,1)):(o=yf(a),o.c(),R(o,1),o.m(i.parentNode,i)):o&&(Le(),B(o,1,1,()=>{o=null}),Fe())},i(a){r||(R(e.$$.fragment,a),R(o),r=!0)},o(a){B(e.$$.fragment,a),B(o),r=!1},d(a){Ot(e,a),a&&J(n),o&&o.d(a),a&&J(i)}}}function Y3(t){let e,n,i,r;return e=new $b({props:{text:t[39],onmeasure:t[221]}}),i=new fb({props:{class:"PinturaStatusIcon",offset:t[82],opacity:t[83],$$slots:{default:[J3]},$$scope:{ctx:t}}}),{c(){Wt(e.$$.fragment),n=ce(),Wt(i.$$.fragment)},m(o,a){Bt(e,o,a),tt(o,n,a),Bt(i,o,a),r=!0},p(o,a){const s={};256&a[1]&&(s.text=o[39]),e.$set(s);const l={};1048576&a[2]&&(l.offset=o[82]),2097152&a[2]&&(l.opacity=o[83]),8&a[0]|134217728&a[19]&&(l.$$scope={dirty:a,ctx:o}),i.$set(l)},i(o){r||(R(e.$$.fragment,o),R(i.$$.fragment,o),r=!0)},o(o){B(e.$$.fragment,o),B(i.$$.fragment,o),r=!1},d(o){Ot(e,o),o&&J(n),Ot(i,o)}}}function yf(t){let e,n;return e=new fb({props:{class:"PinturaStatusButton",offset:t[82],opacity:t[83],$$slots:{default:[q3]},$$scope:{ctx:t}}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};1048576&r[2]&&(o.offset=i[82]),2097152&r[2]&&(o.opacity=i[83]),16&r[1]|134217728&r[19]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function bf(t){let e,n;return e=new hb({props:{progress:t[35].progressIndicator.progress}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};16&r[1]&&(o.progress=i[35].progressIndicator.progress),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function xf(t){let e,n;const i=[t[35].closeButton,{hideLabel:!0}];let r={};for(let o=0;o<i.length;o+=1)r=Oi(r,i[o]);return e=new Ss({props:r}),{c(){Wt(e.$$.fragment)},m(o,a){Bt(e,o,a),n=!0},p(o,a){const s=16&a[1]?Lr(i,[Nr(o[35].closeButton),i[1]]):{};e.$set(s)},i(o){n||(R(e.$$.fragment,o),n=!0)},o(o){B(e.$$.fragment,o),n=!1},d(o){Ot(e,o)}}}function q3(t){let e,n,i,r=t[35].progressIndicator.visible&&bf(t),o=t[35].closeButton&&t[35].text&&xf(t);return{c(){r&&r.c(),e=ce(),o&&o.c(),n=Di()},m(a,s){r&&r.m(a,s),tt(a,e,s),o&&o.m(a,s),tt(a,n,s),i=!0},p(a,s){a[35].progressIndicator.visible?r?(r.p(a,s),16&s[1]&&R(r,1)):(r=bf(a),r.c(),R(r,1),r.m(e.parentNode,e)):r&&(Le(),B(r,1,1,()=>{r=null}),Fe()),a[35].closeButton&&a[35].text?o?(o.p(a,s),16&s[1]&&R(o,1)):(o=xf(a),o.c(),R(o,1),o.m(n.parentNode,n)):o&&(Le(),B(o,1,1,()=>{o=null}),Fe())},i(a){i||(R(r),R(o),i=!0)},o(a){B(r),B(o),i=!1},d(a){r&&r.d(a),a&&J(e),o&&o.d(a),a&&J(n)}}}function K3(t){let e,n=t[3].iconSupportError+"";return{c(){e=Er("g")},m(i,r){tt(i,e,r),e.innerHTML=n},p(i,r){8&r[0]&&n!==(n=i[3].iconSupportError+"")&&(e.innerHTML=n)},d(i){i&&J(e)}}}function J3(t){let e,n;return e=new Zo({props:{$$slots:{default:[K3]},$$scope:{ctx:t}}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};8&r[0]|134217728&r[19]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function vf(t){let e,n,i,r,o,a,s,l,c,d,u,p,h,$,g=t[10]&&wf(t),f=t[46]&&t[45]&&Sf(t);const x=[ow,rw],v=[];function w(C,z){return C[46]?0:1}function T(C){t[444](C)}function I(C){t[445](C)}function M(C){t[446](C)}i=w(t),r=v[i]=x[i](t),a=new _5({props:{isAnimated:t[53],isTransparent:t[20],pixelRatio:t[57],textPixelRatio:t[6],backgroundColor:t[56],maskRect:t[58],maskOpacity:t[73]?t[73].maskOpacity:1,maskMarkupOpacity:t[7],maskFrameOpacity:t[5],clipAnnotationsToImage:t[85],images:t[55],interfaceImages:t[86],loadImageData:t[28],enableGrid:t[11],gridSize:t[87],gridColors:[t[88],t[89]],gridOpacity:t[90],selectionColor:t[91],csp:t[92]||{},willRequest:t[81]||t[93],willRender:t[441],didRender:t[442]}});let F={root:t[2],locale:t[3],stores:t[202],allowPan:t[95],enablePan:t[17],enablePanLimit:t[21],panLimitGutterScalar:t[22],enablePanInput:t[96],allowZoom:t[97],enableZoom:t[18],enableZoomInput:t[19]!==void 0?t[19]:t[98],enableZoomControls:t[99],zoomOptions:t[13]||t[23],zoomAdjustStep:t[14]||t[24],zoomAdjustFactor:t[15]||t[25],zoomAdjustWheelFactor:t[16]||t[26],imageSelectionRectCentered:t[100],imageSelectionRectScalar:t[101],elasticity:Wh*t[8]};return t[0]!==void 0&&(F.zoomLevel=t[0]),t[33]!==void 0&&(F.zoomControls=t[33]),t[34]!==void 0&&(F.zoomMultiTouching=t[34]),d=new Z3({props:F}),Hn.push(()=>Io(d,"zoomLevel",T)),Hn.push(()=>Io(d,"zoomControls",I)),Hn.push(()=>Io(d,"zoomMultiTouching",M)),{c(){g&&g.c(),e=ce(),f&&f.c(),n=ce(),r.c(),o=ce(),Wt(a.$$.fragment),s=ce(),l=$t("div"),c=ce(),Wt(d.$$.fragment),S(l,"class","PinturaRootPortal")},m(C,z){g&&g.m(C,z),tt(C,e,z),f&&f.m(C,z),tt(C,n,z),v[i].m(C,z),tt(C,o,z),Bt(a,C,z),tt(C,s,z),tt(C,l,z),t[443](l),tt(C,c,z),Bt(d,C,z),$=!0},p(C,z){C[10]?g?(g.p(C,z),1024&z[0]&&R(g,1)):(g=wf(C),g.c(),R(g,1),g.m(e.parentNode,e)):g&&(Le(),B(g,1,1,()=>{g=null}),Fe()),C[46]&&C[45]?f?(f.p(C,z),49152&z[1]&&R(f,1)):(f=Sf(C),f.c(),R(f,1),f.m(n.parentNode,n)):f&&(Le(),B(f,1,1,()=>{f=null}),Fe());let j=i;i=w(C),i===j?v[i].p(C,z):(Le(),B(v[j],1,1,()=>{v[j]=null}),Fe(),r=v[i],r?r.p(C,z):(r=v[i]=x[i](C),r.c()),R(r,1),r.m(o.parentNode,o));const A={};4194304&z[1]&&(A.isAnimated=C[53]),1048576&z[0]&&(A.isTransparent=C[20]),67108864&z[1]&&(A.pixelRatio=C[57]),64&z[0]&&(A.textPixelRatio=C[6]),33554432&z[1]&&(A.backgroundColor=C[56]),134217728&z[1]&&(A.maskRect=C[58]),2048&z[2]&&(A.maskOpacity=C[73]?C[73].maskOpacity:1),128&z[0]&&(A.maskMarkupOpacity=C[7]),32&z[0]&&(A.maskFrameOpacity=C[5]),8388608&z[2]&&(A.clipAnnotationsToImage=C[85]),16777216&z[1]&&(A.images=C[55]),16777216&z[2]&&(A.interfaceImages=C[86]),268435456&z[0]&&(A.loadImageData=C[28]),2048&z[0]&&(A.enableGrid=C[11]),33554432&z[2]&&(A.gridSize=C[87]),201326592&z[2]&&(A.gridColors=[C[88],C[89]]),268435456&z[2]&&(A.gridOpacity=C[90]),536870912&z[2]&&(A.selectionColor=C[91]),1073741824&z[2]&&(A.csp=C[92]||{}),524288&z[2]|1&z[3]&&(A.willRequest=C[81]||C[93]),512&z[0]|270991424&z[1]|2&z[3]&&(A.willRender=C[441]),62&z[2]&&(A.didRender=C[442]),a.$set(A);const y={};4&z[0]&&(y.root=C[2]),8&z[0]&&(y.locale=C[3]),4&z[3]&&(y.allowPan=C[95]),131072&z[0]&&(y.enablePan=C[17]),2097152&z[0]&&(y.enablePanLimit=C[21]),4194304&z[0]&&(y.panLimitGutterScalar=C[22]),8&z[3]&&(y.enablePanInput=C[96]),16&z[3]&&(y.allowZoom=C[97]),262144&z[0]&&(y.enableZoom=C[18]),524288&z[0]|32&z[3]&&(y.enableZoomInput=C[19]!==void 0?C[19]:C[98]),64&z[3]&&(y.enableZoomControls=C[99]),8396800&z[0]&&(y.zoomOptions=C[13]||C[23]),16793600&z[0]&&(y.zoomAdjustStep=C[14]||C[24]),33587200&z[0]&&(y.zoomAdjustFactor=C[15]||C[25]),67174400&z[0]&&(y.zoomAdjustWheelFactor=C[16]||C[26]),128&z[3]&&(y.imageSelectionRectCentered=C[100]),256&z[3]&&(y.imageSelectionRectScalar=C[101]),256&z[0]&&(y.elasticity=Wh*C[8]),!u&&1&z[0]&&(u=!0,y.zoomLevel=C[0],Go(()=>u=!1)),!p&&4&z[1]&&(p=!0,y.zoomControls=C[33],Go(()=>p=!1)),!h&&8&z[1]&&(h=!0,y.zoomMultiTouching=C[34],Go(()=>h=!1)),d.$set(y)},i(C){$||(R(g),R(f),R(r),R(a.$$.fragment,C),R(d.$$.fragment,C),$=!0)},o(C){B(g),B(f),B(r),B(a.$$.fragment,C),B(d.$$.fragment,C),$=!1},d(C){g&&g.d(C),C&&J(e),f&&f.d(C),C&&J(n),v[i].d(C),C&&J(o),Ot(a,C),C&&J(s),C&&J(l),t[443](null),C&&J(c),Ot(d,C)}}}function wf(t){let e,n,i,r,o;return n=new Kr({props:{items:t[69]}}),{c(){e=$t("div"),Wt(n.$$.fragment),S(e,"class","PinturaNav PinturaNavTools")},m(a,s){tt(a,e,s),Bt(n,e,null),i=!0,r||(o=[Mt(e,"measure",t[430]),Tn(Fr.call(null,e))],r=!0)},p(a,s){const l={};128&s[2]&&(l.items=a[69]),n.$set(l)},i(a){i||(R(n.$$.fragment,a),i=!0)},o(a){B(n.$$.fragment,a),i=!1},d(a){a&&J(e),Ot(n),r=!1,Gn(o)}}}function Sf(t){let e,n,i;return n=new _a({props:{elasticity:t[8]*_h,scrollDirection:t[76]?"y":"x",$$slots:{default:[iw]},$$scope:{ctx:t}}}),{c(){e=$t("div"),Wt(n.$$.fragment),S(e,"class","PinturaNav PinturaNavMain")},m(r,o){tt(r,e,o),Bt(n,e,null),i=!0},p(r,o){const a={};256&o[0]&&(a.elasticity=r[8]*_h),16384&o[2]&&(a.scrollDirection=r[76]?"y":"x"),12288&o[1]|135168&o[2]|134217728&o[19]&&(a.$$scope={dirty:o,ctx:r}),n.$set(a)},i(r){i||(R(n.$$.fragment,r),i=!0)},o(r){B(n.$$.fragment,r),i=!1},d(r){r&&J(e),Ot(n)}}}function Q3(t){let e,n;const i=[t[79],{tabs:t[44]}];let r={$$slots:{default:[nw,({tab:o})=>({615:o}),({tab:o})=>[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o?67108864:0]]},$$scope:{ctx:t}};for(let o=0;o<i.length;o+=1)r=Oi(r,i[o]);return e=new c1({props:r}),e.$on("select",t[431]),{c(){Wt(e.$$.fragment)},m(o,a){Bt(e,o,a),n=!0},p(o,a){const s=8192&a[1]|131072&a[2]?Lr(i,[131072&a[2]&&Nr(o[79]),8192&a[1]&&{tabs:o[44]}]):{};201326592&a[19]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){n||(R(e.$$.fragment,o),n=!0)},o(o){B(e.$$.fragment,o),n=!1},d(o){Ot(e,o)}}}function tw(t){let e,n;return e=new Kr({props:{items:t[44]}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};8192&r[1]&&(o.items=i[44]),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function ew(t){let e,n=t[615].icon+"";return{c(){e=Er("g")},m(i,r){tt(i,e,r),e.innerHTML=n},p(i,r){67108864&r[19]&&n!==(n=i[615].icon+"")&&(e.innerHTML=n)},d(i){i&&J(e)}}}function nw(t){let e,n,i,r,o,a=t[615].label+"";return e=new Zo({props:{$$slots:{default:[ew]},$$scope:{ctx:t}}}),{c(){Wt(e.$$.fragment),n=ce(),i=$t("span"),r=Ti(a)},m(s,l){Bt(e,s,l),tt(s,n,l),tt(s,i,l),At(i,r),o=!0},p(s,l){const c={};201326592&l[19]&&(c.$$scope={dirty:l,ctx:s}),e.$set(c),(!o||67108864&l[19])&&a!==(a=s[615].label+"")&&Yi(r,a)},i(s){o||(R(e.$$.fragment,s),o=!0)},o(s){B(e.$$.fragment,s),o=!1},d(s){Ot(e,s),s&&J(n),s&&J(i)}}}function iw(t){let e,n,i,r;const o=[tw,Q3],a=[];function s(l,c){return l[74]?0:1}return e=s(t),n=a[e]=o[e](t),{c(){n.c(),i=Di()},m(l,c){a[e].m(l,c),tt(l,i,c),r=!0},p(l,c){let d=e;e=s(l),e===d?a[e].p(l,c):(Le(),B(a[d],1,1,()=>{a[d]=null}),Fe(),n=a[e],n?n.p(l,c):(n=a[e]=o[e](l),n.c()),R(n,1),n.m(i.parentNode,i))},i(l){r||(R(n),r=!0)},o(l){B(n),r=!1},d(l){a[e].d(l),l&&J(i)}}}function rw(t){let e,n,i;function r(a){t[437](a)}let o={locale:t[3],class:"PinturaMain",view:t[207](t[43]),props:t[206](t[43],t[27]),stores:t[202]};return t[1][t[43]]!==void 0&&(o.component=t[1][t[43]]),e=new rb({props:o}),Hn.push(()=>Io(e,"component",r)),e.$on("measure",t[233]),e.$on("show",t[438]),e.$on("hide",t[439]),e.$on("fade",t[440]),{c(){Wt(e.$$.fragment)},m(a,s){Bt(e,a,s),i=!0},p(a,s){const l={};8&s[0]&&(l.locale=a[3]),4096&s[1]&&(l.view=a[207](a[43])),134217728&s[0]|4096&s[1]&&(l.props=a[206](a[43],a[27])),!n&&2&s[0]|4096&s[1]&&(n=!0,l.component=a[1][a[43]],Go(()=>n=!1)),e.$set(l)},i(a){i||(R(e.$$.fragment,a),i=!0)},o(a){B(e.$$.fragment,a),i=!1},d(a){Ot(e,a)}}}function ow(t){let e,n;const i=[{class:"PinturaMain"},{visible:t[62]},t[79],{panels:t[78]}];let r={$$slots:{default:[aw,({panel:o,panelIsActive:a})=>({613:o,614:a}),({panel:o,panelIsActive:a})=>[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(o?16777216:0)|(a?33554432:0)]]},$$scope:{ctx:t}};for(let o=0;o<i.length;o+=1)r=Oi(r,i[o]);return e=new d1({props:r}),e.$on("measure",t[436]),{c(){Wt(e.$$.fragment)},m(o,a){Bt(e,o,a),n=!0},p(o,a){const s=196609&a[2]?Lr(i,[i[0],1&a[2]&&{visible:o[62]},131072&a[2]&&Nr(o[79]),65536&a[2]&&{panels:o[78]}]):{};134217738&a[0]|184549376&a[19]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){n||(R(e.$$.fragment,o),n=!0)},o(o){B(e.$$.fragment,o),n=!1},d(o){Ot(e,o)}}}function aw(t){let e,n,i;function r(a){t[432](a,t[613])}let o={locale:t[3],view:t[207](t[613]),props:t[206](t[613],t[27]),isActive:t[614],stores:t[202]};return t[1][t[613]]!==void 0&&(o.component=t[1][t[613]]),e=new rb({props:o}),Hn.push(()=>Io(e,"component",r)),e.$on("measure",t[233]),e.$on("show",function(){return t[433](t[613])}),e.$on("hide",function(){return t[434](t[613])}),e.$on("fade",function(...a){return t[435](t[613],...a)}),{c(){Wt(e.$$.fragment)},m(a,s){Bt(e,a,s),i=!0},p(a,s){t=a;const l={};8&s[0]&&(l.locale=t[3]),16777216&s[19]&&(l.view=t[207](t[613])),134217728&s[0]|16777216&s[19]&&(l.props=t[206](t[613],t[27])),33554432&s[19]&&(l.isActive=t[614]),!n&&2&s[0]|16777216&s[19]&&(n=!0,l.component=t[1][t[613]],Go(()=>n=!1)),e.$set(l)},i(a){i||(R(e.$$.fragment,a),i=!0)},o(a){B(e.$$.fragment,a),i=!1},d(a){Ot(e,a)}}}function kf(t){let e;return{c(){e=$t("span"),S(e,"class","PinturaEditorOverlay"),Tt(e,"opacity",t[102])},m(n,i){tt(n,e,i)},p(n,i){512&i[3]&&Tt(e,"opacity",n[102])},d(n){n&&J(e)}}}function Cf(t){let e,n;const i=[{layout:"row"},{parentRect:t[50]},t[60]];let r={$$slots:{default:[sw]},$$scope:{ctx:t}};for(let o=0;o<i.length;o+=1)r=Oi(r,i[o]);return e=new yb({props:r}),{c(){Wt(e.$$.fragment)},m(o,a){Bt(e,o,a),n=!0},p(o,a){const s=537395200&a[1]?Lr(i,[i[0],524288&a[1]&&{parentRect:o[50]},536870912&a[1]&&Nr(o[60])]):{};1610612736&a[1]|134217728&a[19]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){n||(R(e.$$.fragment,o),n=!0)},o(o){B(e.$$.fragment,o),n=!1},d(o){Ot(e,o)}}}function sw(t){let e,n,i;return{c(){e=$t("input"),e.value=n=t[60].text,S(e,"placeholder",i=t[60].placeholder),S(e,"type","text"),S(e,"spellcheck","false"),S(e,"autocorrect","off"),S(e,"autocapitalize","off")},m(r,o){tt(r,e,o),t[447](e)},p(r,o){536870912&o[1]&&n!==(n=r[60].text)&&e.value!==n&&(e.value=n),536870912&o[1]&&i!==(i=r[60].placeholder)&&S(e,"placeholder",i)},d(r){r&&J(e),t[447](null)}}}function lw(t){let e,n,i,r,o,a;xl(t[429]);let s=t[40]&&$f(t),l=t[102]>0&&kf(t),c=t[60]&&Cf(t);return{c(){e=$t("div"),s&&s.c(),n=ce(),l&&l.c(),i=ce(),c&&c.c(),S(e,"id",t[4]),S(e,"class",t[77]),S(e,"data-env",t[75]),S(e,"dir",t[12])},m(d,u){tt(d,e,u),s&&s.m(e,null),At(e,n),l&&l.m(e,null),At(e,i),c&&c.m(e,null),t[448](e),r=!0,o||(a=[Mt(ml,"keydown",t[224]),Mt(ml,"keyup",t[225]),Mt(ml,"blur",t[226]),Mt(ml,"paste",t[230]),Mt(ml,"resize",t[429]),Mt(e,"ping",function(){Cn(t[68])&&t[68].apply(this,arguments)}),Mt(e,"contextmenu",t[227]),Mt(e,"touchstart",t[222],{passive:!1}),Mt(e,"touchmove",function(){Cn(t[71])&&t[71].apply(this,arguments)}),Mt(e,"pointermove",function(){Cn(t[70])&&t[70].apply(this,arguments)}),Mt(e,"transitionend",t[212]),Mt(e,"dropfiles",t[228]),Mt(e,"measure",t[449]),Mt(e,"click",function(){Cn(t[42]?t[229]:pe)&&(t[42]?t[229]:pe).apply(this,arguments)}),Tn(Fr.call(null,e,{observeViewRect:!0,isMeasureRoot:!0})),Tn(D5.call(null,e)),Tn(ib.call(null,e))],o=!0)},p(d,u){(t=d)[40]?s?(s.p(t,u),512&u[1]&&R(s,1)):(s=$f(t),s.c(),R(s,1),s.m(e,n)):s&&(Le(),B(s,1,1,()=>{s=null}),Fe()),t[102]>0?l?l.p(t,u):(l=kf(t),l.c(),l.m(e,i)):l&&(l.d(1),l=null),t[60]?c?(c.p(t,u),536870912&u[1]&&R(c,1)):(c=Cf(t),c.c(),R(c,1),c.m(e,null)):c&&(Le(),B(c,1,1,()=>{c=null}),Fe()),(!r||16&u[0])&&S(e,"id",t[4]),(!r||32768&u[2])&&S(e,"class",t[77]),(!r||8192&u[2])&&S(e,"data-env",t[75]),(!r||4096&u[0])&&S(e,"dir",t[12])},i(d){r||(R(s),R(c),r=!0)},o(d){B(s),B(c),r=!1},d(d){d&&J(e),s&&s.d(),l&&l.d(),c&&c.d(),t[448](null),o=!1,Gn(a)}}}const Wh=1,_h=10;function cw(t,e,n){let i,r,o,a,s,l,c,d,u,p,h,$,g,f,x,v,w,T,I,M,F,C,z,j,A,y,st,G,k,H,rt,gt,ct,V,N,kt,bt,et,Pt,wt,Q,Ut,lt,q,vt,dt,Ht,it,Vt,Dt,Zt,mt,Ft,ht,Yt,Nt,Qt,re,xt,_,ke,ne,Xt,he,ae,Re,nn,Ct,de,ln,Je,Qe,Ie,Ye,yn,Sn,Fn,zn,un,Y,at,Z,zt,ue,De,ye,Lt,Te,cn,an,nt,Gt,Be,xe,te,tn,ot,me,se,ge,oe,qe,ze,ui,Oe,rn,In,Dn,pn,ti,we,Ze,en,hi,wi,pi,Kn,gi,sr,Si,Tr,Yo,pr,yi,ca,Wi,_n,Ma,qi,lr,Ai,hr,mr,Ki,ki,ao,qo,Eo,Ao,xo,Lo,vo,so,zr,lo,Hr,nr,er,Dr,co,Zn,_i,Jr,Ci,wo,ir,Ko,Br,So,Vi,Or,ei,Ji,Fo,zo,Qr,jr,ko,wr,uo,Co,O,Kt,En,je,be,$e,qn,Rn,ni,$i,Bn,Sr,po,Ue,Jo,Wr,Va,Qo,xi,Li,ho,Do,Na,L,ie,Me,xn,Vn,On,on,kn,Xn,Mn,Jn,Ni,vi,Mi,Wn,Mr,da,Xs,Cs,ns,Ha,ja=Ke,is=Ke;D(t,F5,m=>n(417,be=m)),t.$$.on_destroy.push(()=>ja()),t.$$.on_destroy.push(()=>is());const Pa=Ja(),To=Ta();let{class:Ua}=e,{layout:bi}=e,{stores:to}=e,{locale:Yn}=e,{id:eo}=e,{util:si}=e,{utils:mo}=e,{animations:Ra="auto"}=e,{disabled:Ur=!1}=e,{previewUpscale:Ts=!1}=e,{previewPad:rs=!1}=e,{previewMaskOpacity:$d=.95}=e,{previewImageDataMaxSize:Sl}=e,{previewImageTextPixelRatio:kl}=e,{markupMaskOpacity:sc=1}=e,{zoomMaskOpacity:Cl=.85}=e,{elasticityMultiplier:os=10}=e,{willRevert:lc=()=>Promise.resolve(!0)}=e,{willProcessImage:cc=()=>Promise.resolve(!0)}=e,{willRenderCanvas:Tl=ai}=e,{willRenderToolbar:dc=ai}=e,{willRenderUtilTabs:uc=ai}=e,{willSetHistoryInitialState:pc=ai}=e,{enableButtonExport:hc=!0}=e,{enableButtonRevert:Ml=!0}=e,{enableNavigateHistory:Ys=!0}=e,{enableToolbar:as=!0}=e,{enableUtils:mc=!0}=e,{enableButtonClose:gc=!1}=e,{enableDropImage:qs=!1}=e,{enablePasteImage:Pl=!1}=e,{enableBrowseImage:ss=!1}=e,{enableTransparencyGrid:$c=!1}=e,{layoutDirectionPreference:Rl="auto"}=e,{layoutHorizontalUtilsPreference:ta="left"}=e,{layoutVerticalUtilsPreference:Il="bottom"}=e,{layoutVerticalToolbarPreference:b="top"}=e,{layoutVerticalControlGroupsPreference:W="bottom"}=e,{layoutVerticalControlTabsPreference:P="bottom"}=e,{status:X}=e,{formatStatusImageLoading:K=function(m,U){const{state:ft}=m;if(!ft||!ft.task)return U.statusImageLoadNone;if(ft.error){if(ft.error.code==="IMAGE_TOO_SMALL")return U.statusImageLoadMinSize;if(ft.error.code==="VIDEO_TOO_SHORT"){const Rt=Array.isArray(U.unitSeconds)?ft.error.metadata.minDuration===1?U.unitSeconds[0]:U.unitSeconds[1]:U.unitSeconds;return Bs(U.statusImageLoadMinDuration,{seconds:Rt},"{","}")}return U.statusImageLoadError}return ft.task==="blob-to-bitmap"?U.statusImageLoadPrepare:U.statusImageLoadBusy}}=e,{formatStatusImageProcessing:yt=function(m,U){const{state:ft}=m;if(ft&&ft.task)return ft.task==="store"?ft.error?U.statusImageUploadError:U.statusImageUploadBusy:ft.error?U.statusImageProcessError:U.statusImageProcessBusy}}=e,{formatStatusSupportError:Et=function(m,U){const{features:ft}=m;return{features:ft.join(", ")}}}=e,{textDirection:le}=e,{markupEditorZoomLevel:_t=null}=e,{markupEditorZoomLevels:ee}=e,{markupEditorZoomAdjustStep:qt}=e,{markupEditorZoomAdjustFactor:Pe}=e,{markupEditorZoomAdjustWheelFactor:sn}=e,{markupEditorInteractionMode:Jt=!1}=e,{muteAudio:hn=!0}=e,{willSetMediaInitialTimeOffset:Ee=(m,U)=>m*U3(U[0])}=e,{enablePan:Se=!0}=e,{enableZoom:We=!0}=e,{enableZoomControls:Ce=!0}=e,{enableZoomInput:ve}=e,{enablePanInput:Xe}=e,{enableCanvasAlpha:Qn=!1}=e,{enablePanLimit:_e}=e,{panLimitGutterScalar:vn}=e,{pan:ii=null}=e,{zoomPresetOptions:kr=[.25,.5,1,1.25,1.5,2,3,4,6,8,16]}=e,{zoomAdjustStep:Pr=.25}=e,{zoomAdjustFactor:Cr=.1}=e,{zoomAdjustWheelFactor:Bi=1}=e,{zoomLevel:Pi=null}=e,{fixScrollDirection:Hi=!1}=e;const Mo=fe(Hi);$o("fixScrollDirection",Mo);const Po=ar()&&"visualViewport"in window,Bo=fe("hidden");function Ro(m){const{height:U,scale:ft}=m.target,Rt=U*ft/window.screen.height<.75?"visible":"hidden";Bo.set(Rt)}let Ia,ua;$o("softKeyboardState",Bo),Po&&window.visualViewport.addEventListener("resize",Ro);let{imagePreviewSrc:Ms}=e,{imageOrienter:Oo={read:()=>1,apply:m=>m}}=e,{pluginComponents:Wo}=e,{pluginOptions:ea={}}=e;const El=Pa.sub,go={};let{root:Ri}=e;const Ga=()=>{ze.setAttribute("data-redraw","true"),Js.set({})},cr=fe(!0);D(t,cr,m=>n(483,Yo=m));const _o=fe(void 0);D(t,_o,m=>n(427,Do=m));const ls=fe(0);D(t,ls,m=>n(424,xi=m));const _0=fe(!1),fd=m=>{_0.set(m.type==="play"),Pa.pub(m.type)};let V0,$1,N0,f1,y1=!1;const b1=()=>{if(!o||!Al())return;f1=u,It(_o,Do=void 0,Do);const m=ze;y1=!1;const U=1/24,ft=cs();(Math.abs(c*ft-xi*ft)<=U||ft-ft*xi<=U)&&It(ls,xi=l,xi),yd(xi*cs()),m.play().catch(()=>{});let Rt=yc();const pt=()=>{if(Al())return;N0=requestAnimationFrame(pt);let St=yc();St-Rt<=0&&(St=Rt+.01),Rt=St,It(ls,xi=St/cs(),xi),f1>=0&&xi>=c&&(It(ls,xi=c,xi),Ks()),u>-1&&(y1=!0),y1&&u===-1&&p>0&&(It(ls,xi=s[p][0],xi),yd(xi*cs())),It(xd,Jo=xi*cs(),Jo),Ga()};pt()},Ks=()=>{o&&!Al()&&(It(_o,Do=void 0,Do),f1=void 0,ze.pause(),cancelAnimationFrame(N0),Ga())},Al=()=>ze&&ze.paused,x1=()=>{if(o)return Al()?b1():Ks()},v1=()=>{o&&(ze.muted=!0)},w1=()=>{o&&(ze.muted=!1)},H0=()=>{o&&It(fc,ho=!ho,ho)},fc=fe(hn);D(t,fc,m=>n(426,ho=m));const cs=()=>{if(o)return ze.duration},yc=()=>{if(o)return ze.currentTime},yd=m=>{o&&(df(ze,m),It(ls,xi=m/Li,xi))},Js=fe({});D(t,Js,m=>n(52,ca=m)),$o("redrawTrigger",Js);const bd=fe(os);D(t,bd,m=>n(500,Va=m)),$o("elasticityMultiplier",bd);let bc=[];const S1=mn();D(t,S1,m=>n(102,Ha=m));const j0=k0()||1024,U0=Fi(j0,j0),G0=Hy(),jb=m=>Promise.resolve(Wr&&Wr(m,{resourceType:"image"})).then(U=>{if(U===!1)return;const{headers:ft,credentials:Rt}=U||{};return fetch(m,{headers:ft,credentials:Rt}).then(pt=>{if(pt.status!==200)throw`${pt.status} (${pt.statusText})`;return pt.blob()}).then(pt=>hf(pt,Oo,G0)).then(pt=>mf(pt,g))});let{imageSourceToImageData:k1=m=>He(m)?jb(m):od(m)?new Promise(U=>U(pd(m))):o0(m)||md(m)?hf(m,Oo,G0).then(U=>mf(U,g)):void 0}=e;const C1=(()=>{let m,U;const ft=uf.reduce((Rt,pt)=>(Rt[pt]=function(St,jt,Ge){let wn=[];return{set:jt,update:Ge,publish:jn=>{wn.forEach(ri=>ri(jn))},subscribe:jn=>(wn.push(jn),St(jn),()=>{wn=wn.filter(ri=>ri!==jn)})}}(St=>{if(!U)return St();U.stores[pt].subscribe(St)()},St=>{U&&U.stores[pt].set(St)},St=>{U&&U.stores[pt].update(St)}),Rt),{});return{update:Rt=>{if(U=Rt,m&&(m.forEach(pt=>pt()),m=void 0),!Rt)return ft.file.publish(void 0),void ft.loadState.publish(void 0);m=uf.map(pt=>Rt.stores[pt].subscribe(St=>{ft[pt].publish(St)}))},stores:ft,destroy:()=>{m&&m.forEach(Rt=>Rt())}}})(),{file:T1,size:Qs,duration:M1,currentTime:xd,trim:P1,volume:Z0,minDuration:Ub,maxDuration:R1,loadState:vd,processState:I1,cropAspectRatio:wd,cropLimitToImage:E1,crop:Ea,cropMinSize:Gb,cropMaxSize:Zb,cropRange:Xb,cropOrigin:Yb,cropRectAspectRatio:qb,rotation:Ll,rotationRange:Kb,targetSize:Jb,flipX:Sd,flipY:kd,backgroundColor:Cd,backgroundImage:X0,colorMatrix:Y0,convolutionMatrix:q0,gamma:K0,vignette:J0,noise:Q0,decoration:Td,annotation:Md,manipulation:Pd,redaction:Rd,frame:tl,selection:A1,state:Id}=C1.stores;D(t,T1,m=>n(401,lo=m)),D(t,Qs,m=>n(375,rn=m)),D(t,M1,m=>n(425,Li=m)),D(t,xd,m=>n(499,Jo=m)),D(t,P1,m=>n(422,Ue=m)),D(t,Z0,m=>n(423,Qo=m)),D(t,R1,m=>n(428,Na=m)),D(t,vd,m=>n(393,ki=m)),D(t,I1,m=>n(392,Ki=m)),D(t,wd,m=>n(496,qn=m)),D(t,E1,m=>n(85,xn=m)),D(t,Ea,m=>n(412,Ji=m)),D(t,Ll,m=>n(378,pn=m)),D(t,Sd,m=>n(377,Dn=m)),D(t,kd,m=>n(376,In=m)),D(t,Cd,m=>n(383,sr=m)),D(t,Td,m=>n(48,Oe=m)),D(t,Md,m=>n(49,ti=m)),D(t,Pd,m=>n(380,pi=m)),D(t,Rd,m=>n(381,Kn=m)),D(t,tl,m=>n(47,ui=m)),D(t,A1,m=>n(59,Bn=m)),D(t,Id,m=>n(485,er=m)),$o("components",{DynamicComponentTree:Kr}),$o("previewcontrols",{play:b1,pause:Ks,togglePlayPause:x1,mute:v1,unmute:w1,toggleMute:H0,setCurrentTime:yd,getCurrentTime:yc,getDuration:cs,frameOffset:ls,framePeekOffset:_o,isPlaying:_0,isMuted:fc});const tm=(m,U,ft=0)=>new Promise((Rt,pt)=>{if(ac(m))return void Gy(m).then(wn=>{const jn=Ne(Jo)?Jo:Ee(wn.duration,Ue||[[0,1]]);Zy(wn,jn).then(Rt)});let St,jt=!1;U.cancel=()=>jt=!0;const Ge=Date.now();k1(m).then(wn=>{const jn=Date.now()-Ge;clearTimeout(St),St=setTimeout(()=>{jt||Rt(wn)},Math.max(0,ft-jn))}).catch(pt)}),{images:em,shapePreprocessor:nm,imageScrambler:im,imageRedactionRendering:rm,willRequest:om,willRequestResource:am,csp:sm}=to;let xc;D(t,em,m=>n(421,po=m)),D(t,nm,m=>n(420,Sr=m)),D(t,im,m=>n(384,Si=m)),D(t,rm,m=>n(382,gi=m)),D(t,om,m=>n(81,Wr=m)),D(t,am,m=>n(93,Ni=m)),D(t,sm,m=>n(92,Jn=m));const Qb=Nn(X0,(m,U)=>{if(!m)return U(void 0);xc&&(xc.cancel(),xc=void 0),xc={cancel:pe},tm(m,xc).then(U).catch(ft=>{})}),tx=Id.subscribe(m=>Pa.pub("update",m)),ex=fe();$o("ui",fe({})),$o("selection",A1);const L1=fe(!0);D(t,L1,m=>n(95,Mi=m));const F1=fe(!0);D(t,F1,m=>n(97,Mr=m));const z1=fe(!0);D(t,z1,m=>n(419,$i=m));const Ed=fe(!0);D(t,Ed,m=>n(497,Rn=m));const D1=fe(!0);D(t,D1,m=>n(98,da=m));const B1=fe();D(t,B1,m=>n(99,Xs=m));const Ad=fe();D(t,Ad,m=>n(498,ni=m));const O1=Nn([Ad,Ed],()=>ni!==void 0?ni:Rn);D(t,O1,m=>n(96,Wn=m));const vc=fe([0,0,0]);D(t,vc,m=>n(56,Jr=m));const Ld=fe([1,1,1]);D(t,Ld,m=>n(481,wi=m));const wc=mn([1,1,1]);D(t,wc,m=>n(480,hi=m));const W1=fe();D(t,W1,m=>n(91,Mn=m));const lm=fe(),_1=fe();D(t,_1,m=>n(51,pr=m));const Fl=fe();D(t,Fl,m=>n(373,oe=m));const zl=fe(Ds());D(t,zl,m=>n(80,Dr=m));const V1=fe(0);D(t,V1,m=>n(418,$e=m));const Sc=fe(Ds());D(t,Sc,m=>n(84,Me=m));const el=fe();D(t,el,m=>n(478,qe=m));const Fd=pf("(pointer: fine)",m=>m?"pointer-fine":"pointer-coarse");D(t,Fd,m=>n(399,so=m));const zd=pf("(hover: hover)",m=>m?"pointer-hover":"pointer-no-hover");D(t,zd,m=>n(398,vo=m));const cm=fe(!1),kc=fe(!1);D(t,kc,m=>n(379,en=m));const N1=Zl(void 0,m=>{const U=mn(0),ft=[kc.subscribe(Rt=>{U.set(Rt?1:0,{hard:!_n})}),U.subscribe(m)];return()=>ft.forEach(Rt=>Rt())});D(t,N1,m=>n(479,Ze=m));const Dd=fe();D(t,Dd,m=>n(484,Ao=m));const Bd=fe();let H1;D(t,Bd,m=>n(53,_n=m)),$o("isAnimated",Bd);const Od=fe(Ts);D(t,Od,m=>n(402,Hr=m));const nl=fe(!1);D(t,nl,m=>n(490,Qr=m)),$o("imageIsStatic",nl);const Cc=fe();D(t,Cc,m=>n(491,jr=m));const j1=fe();D(t,j1,m=>n(488,Fo=m));const dm=Zl(void 0,m=>{const U=fe(void 0),ft=[Ea.subscribe(()=>{if(!Ji)return;if(Qr)return U.set(An(Ji));const Rt=sf(Ji,Fo,5*os);U.set(Rt)}),U.subscribe(m)];return()=>ft.forEach(Rt=>Rt())}),pa=fe();D(t,pa,m=>n(487,ei=m));const Wd=fe();D(t,Wd,m=>n(489,zo=m));const U1=fe(void 0);D(t,U1,m=>n(494,Kt=m));const um=fe(ci());D(t,um,m=>n(495,En=m));const pm=(m,U)=>{if(!U||!m)return{top:0,right:0,bottom:0,left:0};const ft=my(U,m,f),Rt=hy(ft,m);return{top:Math.abs(Rt.top),right:Math.abs(Rt.right),bottom:Math.abs(Rt.bottom),left:Math.abs(Rt.left)}},hm=fe({}),G1=Nn([el,zl,Sc,hm],([m,U,ft,Rt],pt)=>{if(!m)return pt(void 0);let St=0;H.length!==1||h||b==="bottom"||(St=ft.y+ft.height),pt(Ui(m.x+U.x,m.y+U.y+St,m.width,m.height))});let Tc={left:0,right:0,top:0,bottom:0};const _d=fe(!1),Dl=Nn([_d,tl,G1,kc],([m,U,ft,Rt],pt)=>{if(!ft)return pt({left:0,right:0,top:0,bottom:0});if(!m)return;const St=Math.min(ft.width,ft.height),jt=pm({width:St,height:St},U);gn(Tc.top,4)===gn(jt.top,4)&&gn(Tc.bottom,4)===gn(jt.bottom,4)&&gn(Tc.right,4)===gn(jt.right,4)&&gn(Tc.left,4)===gn(jt.left,4)||(Tc=jt,pt(jt))});D(t,Dl,m=>n(410,So=m));const Bl=Nn([_d,Dl],([m,U],ft)=>{if(!m)return ft(!1);ft(Object.values(U).some(Rt=>Rt>0))});D(t,Bl,m=>n(411,Vi=m));const nx=Nn([_d,el,Bl,Dl],([m,U,ft,Rt],pt)=>{if(U)return m&&ft?void pt(Ui(U.x+Rt.left,U.y+Rt.top,U.width-Rt.left-Rt.right,U.height-Rt.top-Rt.bottom)):pt({...U})}),Za=Nn([G1,Bl,Dl],([m,U,ft],Rt)=>m?U?void Rt(Ui(m.x+ft.left,m.y+ft.top,m.width-ft.left-ft.right,m.height-ft.top-ft.bottom)):Rt(m):Rt(void 0));D(t,Za,m=>n(50,we=m));const ix=Nn([nl,Qs,Ll],([m,U,ft],Rt)=>{if(!m||!U)return Rt(void 0);const pt=Yr(U);Rt(Rr(pt,ft))}),Z1=Nn([ix],([m],U)=>{if(!m)return U(void 0);const ft=ur(m);U(rd(ft))});D(t,Z1,m=>n(414,uo=m));const ds=Nn([Za,Ea,Z1,Od],([m,U,ft,Rt],pt)=>{if(!m||!U||!(!jr&&!Fo))return;const{width:St,height:jt}=ft||U,Ge=Math.min(m.width/St,m.height/jt);pt(Rt?Ge:Math.min(1,Ge))});D(t,ds,m=>n(413,wr=m)),$o("imageStaticVisualCorners",Nn([nl,Qs,Ll,Za,el,ds],([m,U,ft,Rt,pt,St],jt)=>{if(!(m&&Rt&&pt&&U))return jt(void 0);const Ge=Yr(U),wn=rd(_r(Ge,St)),jn=Lu(Rt,wn);wn.x=jn.x,wn.y=jn.y,jt(Rr(wn,ft))}));const Ol=fe(void 0);D(t,Ol,m=>n(416,je=m));const mm=Nn([Ea,Za],([m,U])=>{if(U&&m)return Math.min(U.width/m.width,U.height/m.height)}),X1=Nn([Ea,pa],([m,U])=>m&&U?Math.min(m.width/U.width,m.height/U.height):1);D(t,X1,m=>n(101,ns=m));const Mc=Nn([Ol,X1],([m,U])=>m&&U?U*m:1);D(t,Mc,m=>n(493,Co=m));const il=fe(ci());D(t,il,m=>n(415,O=m));const gm=fe({scalar:Co,translation:O}),$m=()=>{gm.set({scalar:void 0,translation:ci()})},Vd=Zl(void 0,m=>{const U=mn(void 0,{precision:1e-4}),ft=Yc()===1?St=>aa(St,Math.round):ai,Rt=()=>{if(!ei)return;const St=en||!Ao;if(Qr){const Ge=An(ei);return fa(Ge,En),fa(Ge,we),U.set(Ge,{hard:St})}const jt=sf(ei,Kt,Wh*os);jt.width<0&&(jt.width=0,jt.x=ei.x),jt.height<0&&(jt.height=0,jt.y=ei.y),fa(jt,we),fa(jt,O),_r(jt,Co),!St&&ft(jt),U.set(jt,{hard:St})},pt=[Za.subscribe(Rt),pa.subscribe(Rt),Mc.subscribe(Rt),il.subscribe(Rt),tl.subscribe(Rt),U.subscribe(m)];return()=>pt.forEach(St=>St())});D(t,Vd,m=>n(58,Br=m));const Y1=fe(1);D(t,Y1,m=>n(486,Or=m));const q1=()=>{if(!Ji||!we)return;let m=fl(An(Ji),wr||1);const U=Lu(we,fl(An(uo),wr));fa(m,U);const ft=qe.width/m.width,Rt=qe.height/m.height,pt=Math.min(1,ft,Rt);Y1.set(pt),_r(m,pt),((St,jt)=>{const[Ge,wn,jn,ri]=bl(St);Ge<jt.y&&(St.y=Math.max(jt.y,St.y)),wn>jt.width&&(St.x=jt.width-St.width),jn>jt.height&&(St.y=jt.height-St.height),ri<jt.x&&(St.x=Math.max(jt.x,St.x))})(m,{...qe,x:0,y:0}),pa.set(m)},fm=Nn([Za,ds,Ea,Qs],([m,U,ft,Rt],pt)=>{m&&(ft||Rt)&&pt(ym(m,U||1,ft||Rt))});D(t,fm,m=>n(100,Cs=m));const ym=(m,U,ft)=>ft.width<=m.width&&ft.height<=m.height?Lu(m,fl(An(ft),U)):oo(m,fr(ft));let K1,bm;const J1=m=>{if(h&&K1&&ya(K1,m)&&bm===wr)return;if(Qr)return q1();K1=m,bm=wr;const U=ym(m,wr,Ji||rn);pa.set(U)};let xm=!1;const rx=ds.subscribe(m=>{!xm&&m!==void 0&&Ji&&(J1(we),xm=!0)}),ox=Za.subscribe(m=>{m&&wr!==void 0&&Ji&&J1(m)}),ax=nl.subscribe(m=>{!m&&we&&J1(we)});let Q1;const sx=Wd.subscribe(m=>{if(!m)return Q1=void 0,void It(Cc,jr=void 0,jr);Q1=ko;const U=An(Ji);Cc.set(U)}),lx=pa.subscribe(m=>{if(!m||!zo)return;const U=(ft=An(m),Rt=zo,ft.x-=Rt.x,ft.y-=Rt.y,ft.width-=Rt.width,ft.height-=Rt.height,ft);var ft,Rt;((St,jt)=>{St.x/=jt,St.y/=jt,St.width/=jt,St.height/=jt})(U,Q1);const pt=((St,jt)=>(St.x+=jt.x,St.y+=jt.y,St.width+=jt.width,St.height+=jt.height,St))(An(jr),U);Ea.set(pt)}),cx=Ea.subscribe(m=>{if(!m||!ei)return;if(Qr)return void(zo||q1());if(en||zo||Fo)return;const U=fr(ei),ft=fr(m);if(gn(U,6)===gn(ft,6))return;const{width:Rt,height:pt}=Ji,St=Math.min(we.width/Rt,we.height/pt),jt=Fi(m.width*St,m.height*St),Ge=.5*(ei.width-jt.width),wn=.5*(ei.height-jt.height),jn=Ui(Math.max(0,Math.min(we.width-jt.width,ei.x+Ge)),Math.max(0,Math.min(we.height-jt.height,ei.y+wn)),jt.width,jt.height);pa.set(jn)}),vm=Nn([ds,Ea,pa,nl],([m,U,ft,Rt],pt)=>{if(!m||!U||!ft)return;if(Rt)return pt(Or);const St=ft.width/U.width,jt=ft.height/U.height;pt(Math.max(St,jt)/m)}),Nd=Nn([ds,vm],([m,U],ft)=>{U&&ft(m*U)});D(t,Nd,m=>n(492,ko=m));let Wl={left:0,right:0,top:0,bottom:0};const wm=Nn([tl,pa],([m,U],ft)=>{if(!U)return ft(Wl);const Rt=pm(U,m);gn(Wl.top,4)===gn(Rt.top,4)&&gn(Wl.bottom,4)===gn(Rt.bottom,4)&&gn(Wl.right,4)===gn(Rt.right,4)&&gn(Wl.left,4)===gn(Rt.left,4)||(Wl=Rt,ft(Rt))}),dx=Nn([wm],([m],U)=>{U(Object.values(m).some(ft=>ft>0))}),tp=mn(.075,{stiffness:.03,damping:.4,precision:.001}),ux=Nn([wc,vc,tp,Vd,Mc,tl,dx,wm,Bl],([m,U,ft,Rt,pt,St,jt,Ge,wn],jn)=>{if(!Rt||h)return jn([]);let{x:ri,y:Pn,width:rr,height:li}=Rt;ri+=.5,Pn+=.5,rr-=.5,li-=.5;const gr=[];if(St){if(jt){let{left:oi,right:ma,top:al,bottom:_l}=Ge;oi*=pt,ma*=pt,al*=pt,_l*=pt;const Pp=dh(U)?[1,1,1,.125]:[0,0,0,.075];gr.push({x:ri-oi-.5,y:Pn-al-.5,width:rr+oi+ma+1,height:li+al+_l+1,strokeWidth:1,strokeColor:Pp,opacity:wn?1:.5})}const na=dh(m);St&&St.frameColor&&dh(St.frameColor)||na||(gr.push({x:ri-1,y:Pn-1,width:rr+2,height:li+2,strokeWidth:2,strokeColor:[0,0,0,.1],opacity:ft}),gr.push({x:ri+1,y:Pn+1,width:rr-2,height:li-2,strokeWidth:2,strokeColor:[0,0,0,.1],opacity:ft}))}jn([...gr,{x:ri,y:Pn,width:rr,height:li,strokeWidth:1,strokeColor:m,opacity:ft}])}),Pc=fe([]);D(t,Pc,m=>n(404,co=m));const Sm=Nn([ux,Pc],([m,U],ft)=>{ft([...m,...U])});D(t,Sm,m=>n(94,vi=m));const ep=mn(0,{precision:.001});D(t,ep,m=>n(406,_i=m));const np=mn();D(t,np,m=>n(409,ir=m));const ip=mn();D(t,ip,m=>n(408,wo=m));const rp=mn();D(t,rp,m=>n(407,Ci=m));const op=mn();D(t,op,m=>n(405,Zn=m));const Rc=fe(!1);D(t,Rc,m=>n(391,mr=m));const Ic=fe();let Ps;D(t,Ic,m=>n(394,ao=m));const ap=Nn([Rc,Ic],([m,U],ft)=>{if(!m||!U)return void ft(void 0);if(Ps&&(Ps.cancel(),n(295,Ps=void 0)),gd(U))return ft(E2(U));const Rt=ha.length?0:_n?250:0;n(295,Ps={cancel:pe}),tm(U,Ps,Rt).then(ft).catch(pt=>{It(vd,ki.error=pt,ki)}).finally(()=>{n(295,Ps=void 0)})});ja(),ja=Xr(ap,m=>n(374,ze=m));let{imagePreviewCurrent:Ec}=e;const sp=fe({});D(t,sp,m=>n(396,xo=m));const Hd=fe([]);D(t,Hd,m=>n(86,Vn=m));const jd=Nn([Za,Fl,Qs,dm,pa,Nd,Ll,Sd,kd,Mc,il,cm],([m,U,ft,Rt,pt,St,jt,Ge,wn,jn,ri,Pn],rr)=>{if(!m||!pt)return;const li=b5(m,U,ft,Rt,pt,jn,ri,St,jt,Ge,wn);!Pn&&y(li),rr(li)});D(t,jd,m=>n(397,Lo=m));const km=Nn([Y0,q0,K0,J0,Q0],([m,U,ft,Rt,pt],St)=>{const jt=m&&Object.keys(m).map(Ge=>m[Ge]).filter(Boolean);St({gamma:ft||void 0,vignette:Rt||void 0,noise:pt||void 0,convolutionMatrix:U||void 0,colorMatrix:jt&&jt.length&&g0(jt)})});let Ud,lp;const Cm=(()=>{if(!Uo())return!1;const m=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/i)||[],[,U,ft]=m.map(Rt=>parseInt(Rt,10)||0);return U>13||U===13&&ft>=4})(),Ac=fe({});D(t,Ac,m=>n(385,yi=m)),$o("env",Ac);const Tm=Yc(),cp=Zl(Tm,m=>{const U=()=>m(Yc()),ft=matchMedia(`(resolution: ${Tm}dppx)`);return ft.addListener(U),()=>ft.removeListener(U)});D(t,cp,m=>n(57,Ko=m));const Xa=((m,U,ft)=>{const{sub:Rt,pub:pt}=Ja(),{willUndo:St=()=>!0}=ft||{},jt=[],Ge=fe(0),wn=[],jn=()=>wn.forEach(Pn=>Pn({index:Ba(Ge),length:jt.length})),ri={get index(){return Ba(Ge)},set index(Pn){Pn=Number.isInteger(Pn)?Pn:0,Pn=di(Pn,0,jt.length-1),Ge.set(Pn),U(jt[ri.index]),jn()},get state(){return jt[jt.length-1]},length:()=>jt.length,undo(){if(St()===!1)return;const Pn=ri.index--;return pt("undo",Pn),Pn},redo(){const Pn=ri.index++;return pt("redo",ri.index),Pn},revert(){jt.length=1,ri.index=0,pt("revert")},write(Pn){Pn&&U({...m(),...Pn});const rr=m(),li=jt[jt.length-1];JSON.stringify(rr)!==JSON.stringify(li)&&(jt.length=ri.index+1,jt.push(rr),Ge.set(jt.length-1),jn(),pt("writehistory"))},set(Pn={}){jt.length=0,ri.index=0;const rr=Array.isArray(Pn)?Pn:[Pn];jt.push(...rr),ri.index=jt.length-1},get:()=>[...jt],subscribe:Pn=>(wn.push(Pn),Pn({index:ri.index,length:jt.length}),()=>wn.splice(wn.indexOf(Pn),1)),on:Rt};return ri})(()=>er,m=>{It(Id,er=m,er),zl.set(Dr)},{willUndo:()=>!$x()||(gx(),!1)});is(),is=Xr(Xa,m=>n(403,nr=m));const Mm=()=>{const m={x:0,y:0,...rn},U=aa(oo(m,er.cropAspectRatio),Math.round),ft=pc({...er,rotation:0,crop:U},er),Rt=[ft];JSON.stringify(ft)!==JSON.stringify(er)&&Rt.push({...er}),Xa.set(Rt)},px=vd.subscribe(m=>{m&&m.complete&&Mm()}),hx=()=>lc().then(m=>m&&Xa.revert()),mx=[Md,Td,Rd,Pd],gx=()=>{mx.forEach(m=>{m.update(U=>U.length&&fo(U[U.length-1])?U.slice(0,-1):U)})},$x=()=>k.filter(m=>m.length).some(m=>fo(m[m.length-1])),Rs=fe(!1);D(t,Rs,m=>n(386,Wi=m));const fx=()=>{It(Rs,Wi=!0,Wi),cc().then(m=>{if(!m)return void It(Rs,Wi=!1,Wi);let U;U=Fc.subscribe(ft=>{ft===1&&(U&&U(),To("processImage"))})})},yx=I1.subscribe(m=>{if(!m)return void It(Rs,Wi=!1,Wi);It(Rs,Wi=!0,Wi);const{complete:U,abort:ft}=m;(U||ft)&&It(Rs,Wi=!1,Wi)}),ha=j3();D(t,ha,m=>n(55,qo=m));const bx=Nn([ha],([m],U)=>{if(!m.length)return U();const{origin:ft,translation:Rt,rotation:pt,scale:St}=m[0];U({origin:ft,translation:Rt,rotation:pt,scale:St})}),Gd=fe();D(t,Gd,m=>n(400,zr=m));let Zd,Xd=[];const Pm=fe(),dp=fe(),xx=Nn([Ol,dp,ds,mm],([m,U,ft,Rt])=>m||(U||ft<1?Rt:1)),Rm={...to,imageFile:T1,imageSize:Qs,mediaDuration:M1,mediaMinDuration:Ub,mediaMaxDuration:R1,mediaTrim:P1,imageBackgroundColor:Cd,imageBackgroundImage:X0,imageCropAspectRatio:wd,imageCropMinSize:Gb,imageCropMaxSize:Zb,imageCropLimitToImage:E1,imageCropRect:Ea,imageCropRectOrigin:Yb,imageCropRectSnapshot:Cc,imageCropRectAspectRatio:qb,imageCropRange:Xb,imageRotation:Ll,imageRotationRange:Kb,imageFlipX:Sd,imageFlipY:kd,imageOutputSize:Jb,imageColorMatrix:Y0,imageConvolutionMatrix:q0,imageGamma:K0,imageVignette:J0,imageNoise:Q0,imageManipulation:Pd,imageDecoration:Td,imageAnnotation:Md,imageRedaction:Rd,imageFrame:tl,imagePreview:ap,imagePreviewSource:Ic,imageTransforms:jd,imagePreviewModifiers:sp,history:Xa,animation:Dd,pixelRatio:cp,elasticityMultiplier:os,scrollElasticity:_h,rangeInputElasticity:5,redrawTrigger:Js,pointerAccuracy:Fd,pointerHoverable:zd,env:Ac,rootRect:Fl,stageRect:Za,stageRectBase:G1,stageRecenter:hm,stageScalar:ds,stagePadding:Dl,stagePadded:Bl,presentationScalar:Nd,imagePreviewUpscale:dp,utilRect:el,utilRectPadded:nx,allowPlayPause:cr,allowPan:L1,allowZoom:F1,allowZoomControls:z1,enableZoomInput:D1,enablePanInput:Ed,enablePanInputStatus:O1,imageSelectionMultiTouching:Pm,rootBackgroundColor:vc,rootForegroundColor:Ld,rootLineColor:wc,rootColorSecondary:lm,imageOutlineOpacity:tp,utilTools:Gd,imageSelectionPan:il,imageSelectionZoom:Ol,imageSelectionZoomCurrent:xx,imageSelectionStageFitScalar:mm,imageSelectionStoredState:gm,imageOverlayMarkup:Pc,interfaceImages:Hd,isInteracting:kc,isTransformingImage:cm,isInteractingFraction:N1,imageCropRectIntent:j1,imageCropRectPresentation:dm,imageSelectionRect:pa,imageSelectionRectIntent:U1,imageSelectionRectPresentation:Vd,imageSelectionRectSnapshot:Wd,imageScalar:vm,imageTransformsInterpolated:bx,imageEffects:km};delete Rm.image;const vx="util-"+la();let up=[];const Im=m=>rt.find(([U])=>m===U);let Lc=[];const pp=m=>{n(62,Lc=Lc.concat(m))},hp=m=>{n(62,Lc=Lc.filter(U=>U!==m))},mp=(m,U)=>{n(304,N[m]=U,N)};let Em=Uo();const Am=(m,U,ft)=>{let Rt=ke.getPropertyValue(m);Rt=ft?ft(Rt):/^[0-9]+$/.test(Rt)?parseFloat(Rt):void 0,U.set(Rt,{hard:!_n})},rl=(m,U,ft=!1)=>{const Rt=(pt=>{const St=ke.getPropertyValue(pt);return Bh(St)})(m);Rt&&Rt[3]!==0&&(ft||(Rt.length=3),U.set(Rt,{hard:!_n}))},gp=fe();D(t,gp,m=>n(87,On=m));const $p=fe();D(t,$p,m=>n(88,on=m));const fp=fe();D(t,fp,m=>n(89,kn=m));const Yd=mn(0,{damping:.9});D(t,Yd,m=>n(90,Xn=m));const Lm=()=>{rl("color",Ld),rl(Qn?"--color-background":"background-color",vc),rl("outline-color",wc),rl("--color-primary",W1),rl("--color-secondary",lm),rl("--grid-color-even",$p,!0),rl("--grid-color-odd",fp,!0),Am("--grid-size",gp),Am("--editor-inset-top",V1,m=>parseInt(m,10))},Fm=Nn([jd,km,Cd,Qb],([m,U,ft,Rt])=>m&&{...m,...U,backgroundColor:ft,backgroundImage:Rt});D(t,Fm,m=>n(395,Eo=m));const wx=()=>{const m=ha.length?void 0:{resize:1.05},U=((ft,Rt,pt={})=>{const{resize:St=1,opacity:jt=0}=pt,Ge={opacity:[mn(jt,{...hl,stiffness:.1}),ai],resize:[mn(St,{...hl,stiffness:.1}),ai],translation:[mn(void 0,hl),ai],rotation:[mn(void 0,Tu),ai],origin:[mn(void 0,hl),ai],scale:[mn(void 0,Tu),ai],gamma:[mn(void 0,Tu),li=>li||1],vignette:[mn(void 0,Tu),li=>li||0],colorMatrix:[mn([...gf],hl),li=>li||[...gf]],convolutionMatrix:[fe(void 0),li=>li&&li.clarity||void 0],backgroundColor:[mn(void 0,hl),(li,gr,na)=>{if(Array.isArray(li)){if(Array.isArray(gr)){const oi=[...li];gr[3]===0?(oi[3]=0,na(oi)):oi[3]===0&&((li=[...gr])[3]=0)}return li}}],backgroundImage:[fe(void 0),ai]},wn=Object.entries(Ge).map(([li,gr])=>[li,gr[0]]),jn=wn.map(([,li])=>li),ri=Object.entries(Ge).reduce((li,[gr,na])=>{const[oi,ma]=na;return li[gr]=(al,_l)=>oi.set(ma(al,Pn[gr],Pp=>{oi.set(Pp,{hard:!0})}),_l),li},{});let Pn;const rr=Nn(jn,li=>(Pn=li.reduce((gr,na,oi)=>(gr[wn[oi][0]]=na,gr),{}),Pn.data=ft,Pn.size=Rt,Pn.scale*=li[1],Pn));return rr.get=()=>Pn,rr.set=(li,gr)=>{const na={hard:!gr};Object.entries(li).forEach(([oi,ma])=>{ri[oi]&&ri[oi](ma,na)})},rr})(ze,rn,m);ha.unshift(U),zm(Eo)},zm=m=>{ha.forEach((U,ft)=>{const Rt=ft===0?1:0;U.set({...m,opacity:Rt,resize:1},Ao)})};let qd;const Fc=T0(void 0,{duration:500});let yp;D(t,Fc,m=>n(54,Ai=m));const Kd=fe(!1);let us;D(t,Kd,m=>n(390,hr=m));const Jd=mn(void 0,{stiffness:.1,damping:.7,precision:.25});D(t,Jd,m=>n(82,L=m));const Qd=mn(0,{stiffness:.1,precision:.05});D(t,Qd,m=>n(83,ie=m));const zc=mn(0,{stiffness:.02,damping:.5,precision:.25});D(t,zc,m=>n(388,qi=m));const bp=mn(void 0,{stiffness:.02,damping:.5,precision:.25});D(t,bp,m=>n(389,lr=m));const tu=mn(void 0,{stiffness:.02,damping:.5,precision:.25});let eu;D(t,tu,m=>n(387,Ma=m));const Sx=()=>{To("abortLoadImage")},kx=()=>{To("abortProcessImage"),It(Rs,Wi=!1,Wi)},Dm=m=>{m.target&&m.target.dataset.touchScroll==="true"||bb(m)||m.preventDefault()},Cx=Cm?m=>{const U=m.touches?m.touches[0]:m;U.pageX>20&&U.pageX<window.innerWidth-20||Dm(m)}:pe,ol=fe([]);D(t,ol,m=>n(482,Tr=m)),$o("keysPressed",ol);const xp=m=>{!m||ec(m)&&!(U=>/^image/.test(U.type)&&!/svg/.test(U.type))(m)||!ec(m)&&!/^http/.test(m)||To("loadImage",m)},Tx=m=>{m&&xp(m)};let Is,Bm,Dc,vp=[];const Om=fe();$o("rootPortal",Om),$o("rootRect",Fl);const Wm=()=>({foregroundColor:[...wi],lineColor:[...hi],utilVisibility:{...N},isInteracting:en,isInteractingFraction:Ze,rootRect:An(oe),stageRect:An(we),manipulationShapesDirty:su,annotationShapesDirty:iu,decorationShapesDirty:ou,frameShapesDirty:au}),_m=(m,U,ft)=>ji(m,Fi(Math.round(U.width/ft),Math.round(U.height/ft))),Vm=(m,U,ft)=>{var Rt;return m._translate=ut((Rt=U).x,Rt.y),m._scale=ft,m},nu=m=>{const U=[];return m.forEach(ft=>U.push(Mx(ft))),U.filter(Boolean)},Mx=m=>$r(m)?(m.points=[ut(m.x1,m.y1),ut(m.x2,m.y2)],m):(!(U=>tr(U)&&!U.text.length)(m)||m.backgroundColor&&m.backgroundColor[3]!==0||(Xu(m)&&(m.width=5,m.height=m.lineHeight),m.strokeWidth=1,m.strokeColor=[1,1,1,.5],m.backgroundColor=[0,0,0,.1]),m);let Nm,wp=[],Sp=[],kp=[],Cp=[],Tp=[],Hm={};const jm=(m,U,ft,Rt,pt,St,jt)=>{const{manipulationShapesDirty:Ge,annotationShapesDirty:wn,decorationShapesDirty:jn,frameShapesDirty:ri,selectionRect:Pn,scale:rr}=m,li=Nm!==rr,gr=li||!ya(Hm,Pn);gr&&(Nm=rr,Hm=Pn),Ge&&(kp=U.filter(mu).map(Ii).map(oi=>ji(oi,rn))),(wn||ft!==ti)&&(wp=ft.filter(mu).map(Ii).sort((oi,ma)=>oi.alwaysOnTop?1:ma.alwaysOnTop?-1:0).map(oi=>ji(oi,rn))),(li||ru||wn||ft!==ti)&&(Sp=nu(wp.map(oi=>f(oi,{flipX:Dn,flipY:In,rotation:pn,scale:rr,context:Yr(rn)})).flat())),(jn||Rt!==Oe||gr)&&(Cp=nu(Rt.filter(mu).map(Ii).sort((oi,ma)=>oi.alwaysOnTop?1:ma.alwaysOnTop?-1:0).map(oi=>_m(oi,Pn,rr)).map(oi=>f(oi,{context:Pn})).flat().map(oi=>Vm(oi,Pn,rr)))),(ri||St!==ui||gr)&&(Tp=St?nu([St].map(Ii).map(oi=>_m(oi,Pn,rr)).map(f).flat().map(oi=>Vm(oi,Pn,rr))):[]);let na=nu(pt.filter(mu));return typeof window<"u"&&(oi=>{if(oi&&oi._v7q0jhw)return;const[ma]=[[85,110,108,105,99,101,110,115,101,100,32,80,105,110,116,117,114,97,32,105,110,115,116,97,110,99,101]].map(al=>al.map(_l=>String.fromCharCode(_l)).join(""));na=[...na,{x:Pn.x+.5*Pn.width-82,y:Pn.y+Pn.height-16-12,width:164,height:16,text:ma,fontWeight:900,fontSize:12,color:[1,1,1,.25]}]})(window),{manipulationShapesDirty:Ge,manipulationShapes:kp,annotationShapesDirty:wn,annotationShapes:Sp,decorationShapesDirty:jn,decorationShapes:Cp,frameShapesDirty:ri,frameShapes:Tp,interfaceShapes:na,selectionShapes:jt.map(Ii).map(oi=>ji(oi,rn))}};let iu=!0,ru=!0,ou=!0,au=!0,su=!0;Xo(()=>{Ks(),ze&&He(ze.src)&&/^blob:/.test(ze.src)&&URL.revokeObjectURL(ze.src),tx(),ox(),rx(),ax(),sx(),lx(),cx(),px(),yx(),Fd.destroy(),zd.destroy(),C1.destroy(),ha.clear(),wp.length=0,Sp.length=0,kp.length=0,Cp.length=0,Tp.length=0,Is&&or(Is),Po&&window.visualViewport.removeEventListener("resize",Ro);try{n(235,Ec=void 0),n(296,qd=void 0)}catch{}});let Mp;return t.$$set=m=>{"class"in m&&n(236,Ua=m.class),"layout"in m&&n(237,bi=m.layout),"stores"in m&&n(238,to=m.stores),"locale"in m&&n(3,Yn=m.locale),"id"in m&&n(4,eo=m.id),"util"in m&&n(239,si=m.util),"utils"in m&&n(240,mo=m.utils),"animations"in m&&n(241,Ra=m.animations),"disabled"in m&&n(242,Ur=m.disabled),"previewUpscale"in m&&n(243,Ts=m.previewUpscale),"previewPad"in m&&n(244,rs=m.previewPad),"previewMaskOpacity"in m&&n(5,$d=m.previewMaskOpacity),"previewImageDataMaxSize"in m&&n(245,Sl=m.previewImageDataMaxSize),"previewImageTextPixelRatio"in m&&n(6,kl=m.previewImageTextPixelRatio),"markupMaskOpacity"in m&&n(7,sc=m.markupMaskOpacity),"zoomMaskOpacity"in m&&n(246,Cl=m.zoomMaskOpacity),"elasticityMultiplier"in m&&n(8,os=m.elasticityMultiplier),"willRevert"in m&&n(247,lc=m.willRevert),"willProcessImage"in m&&n(248,cc=m.willProcessImage),"willRenderCanvas"in m&&n(9,Tl=m.willRenderCanvas),"willRenderToolbar"in m&&n(249,dc=m.willRenderToolbar),"willRenderUtilTabs"in m&&n(250,uc=m.willRenderUtilTabs),"willSetHistoryInitialState"in m&&n(251,pc=m.willSetHistoryInitialState),"enableButtonExport"in m&&n(252,hc=m.enableButtonExport),"enableButtonRevert"in m&&n(253,Ml=m.enableButtonRevert),"enableNavigateHistory"in m&&n(254,Ys=m.enableNavigateHistory),"enableToolbar"in m&&n(10,as=m.enableToolbar),"enableUtils"in m&&n(255,mc=m.enableUtils),"enableButtonClose"in m&&n(256,gc=m.enableButtonClose),"enableDropImage"in m&&n(257,qs=m.enableDropImage),"enablePasteImage"in m&&n(258,Pl=m.enablePasteImage),"enableBrowseImage"in m&&n(259,ss=m.enableBrowseImage),"enableTransparencyGrid"in m&&n(11,$c=m.enableTransparencyGrid),"layoutDirectionPreference"in m&&n(260,Rl=m.layoutDirectionPreference),"layoutHorizontalUtilsPreference"in m&&n(261,ta=m.layoutHorizontalUtilsPreference),"layoutVerticalUtilsPreference"in m&&n(262,Il=m.layoutVerticalUtilsPreference),"layoutVerticalToolbarPreference"in m&&n(263,b=m.layoutVerticalToolbarPreference),"layoutVerticalControlGroupsPreference"in m&&n(264,W=m.layoutVerticalControlGroupsPreference),"layoutVerticalControlTabsPreference"in m&&n(265,P=m.layoutVerticalControlTabsPreference),"status"in m&&n(234,X=m.status),"formatStatusImageLoading"in m&&n(266,K=m.formatStatusImageLoading),"formatStatusImageProcessing"in m&&n(267,yt=m.formatStatusImageProcessing),"formatStatusSupportError"in m&&n(268,Et=m.formatStatusSupportError),"textDirection"in m&&n(12,le=m.textDirection),"markupEditorZoomLevel"in m&&n(269,_t=m.markupEditorZoomLevel),"markupEditorZoomLevels"in m&&n(13,ee=m.markupEditorZoomLevels),"markupEditorZoomAdjustStep"in m&&n(14,qt=m.markupEditorZoomAdjustStep),"markupEditorZoomAdjustFactor"in m&&n(15,Pe=m.markupEditorZoomAdjustFactor),"markupEditorZoomAdjustWheelFactor"in m&&n(16,sn=m.markupEditorZoomAdjustWheelFactor),"markupEditorInteractionMode"in m&&n(270,Jt=m.markupEditorInteractionMode),"muteAudio"in m&&n(271,hn=m.muteAudio),"willSetMediaInitialTimeOffset"in m&&n(272,Ee=m.willSetMediaInitialTimeOffset),"enablePan"in m&&n(17,Se=m.enablePan),"enableZoom"in m&&n(18,We=m.enableZoom),"enableZoomControls"in m&&n(273,Ce=m.enableZoomControls),"enableZoomInput"in m&&n(19,ve=m.enableZoomInput),"enablePanInput"in m&&n(274,Xe=m.enablePanInput),"enableCanvasAlpha"in m&&n(20,Qn=m.enableCanvasAlpha),"enablePanLimit"in m&&n(21,_e=m.enablePanLimit),"panLimitGutterScalar"in m&&n(22,vn=m.panLimitGutterScalar),"pan"in m&&n(275,ii=m.pan),"zoomPresetOptions"in m&&n(23,kr=m.zoomPresetOptions),"zoomAdjustStep"in m&&n(24,Pr=m.zoomAdjustStep),"zoomAdjustFactor"in m&&n(25,Cr=m.zoomAdjustFactor),"zoomAdjustWheelFactor"in m&&n(26,Bi=m.zoomAdjustWheelFactor),"zoomLevel"in m&&n(0,Pi=m.zoomLevel),"fixScrollDirection"in m&&n(276,Hi=m.fixScrollDirection),"imagePreviewSrc"in m&&n(279,Ms=m.imagePreviewSrc),"imageOrienter"in m&&n(280,Oo=m.imageOrienter),"pluginComponents"in m&&n(281,Wo=m.pluginComponents),"pluginOptions"in m&&n(27,ea=m.pluginOptions),"root"in m&&n(2,Ri=m.root),"imageSourceToImageData"in m&&n(28,k1=m.imageSourceToImageData),"imagePreviewCurrent"in m&&n(235,Ec=m.imagePreviewCurrent)},t.$$.update=()=>{if(268435456&t.$$.dirty[8]&&Mo.set(Hi),8&t.$$.dirty[0]&&n(302,i=!!Yn),1&t.$$.dirty[0]|2097152&t.$$.dirty[8]&&n(0,Pi=Pi===null?_t:Pi),2&t.$$.dirty[0]|4&t.$$.dirty[9]){let pt=!1;Wo.forEach(([St])=>{go[St]||(n(1,go[St]={},go),pt=!0)}),pt&&n(293,bc=[...Wo])}var m,U,ft,Rt;if(8388608&t.$$.dirty[7]|8404992&t.$$.dirty[9]&&n(354,H=i&&bc.length?mo||bc.map(([pt])=>pt):[]),134217728&t.$$.dirty[0]|16384&t.$$.dirty[9]|8192&t.$$.dirty[11]|536870912&t.$$.dirty[12]&&n(355,rt=((pt,St,jt,Ge)=>{const wn=St.filter(([jn])=>pt.includes(jn)).filter(([jn,{isSupported:ri}])=>ri({...Ge,...jt[jn]})).map(([jn,ri])=>[jn,ri.Component]);return ys(wn,up,(jn,ri)=>jn[0]===ri[0]&&jn[1]===ri[1])?up:(up=wn,wn)})(H,bc,ea,{src:lo})),16384&t.$$.dirty[11]&&n(308,gt=rt.length),8&t.$$.dirty[0]|536870912&t.$$.dirty[9]|8192&t.$$.dirty[11]&&n(353,ct=gt&&H.map(pt=>{const St=Im(pt);if(St)return{id:pt,view:St[1],tabIcon:Yn[pt+"Icon"],tabLabel:Yn[pt+"Label"]}}).filter(Boolean)||[]),4096&t.$$.dirty[11]&&n(372,r=!!ct.find(pt=>pt.id==="trim")),5&t.$$.dirty[12]|4194304&t.$$.dirty[13]&&n(307,o=!!(Li&&ze&&r)),4194304&t.$$.dirty[7]|536870912&t.$$.dirty[9]&&n(43,V=gt&&si&&typeof si=="string"&&Im(si)?si:gt>0?rt[0][0]:void 0),4096&t.$$.dirty[1]|268435456&t.$$.dirty[9]&&o&&V&&Ks(),268435456&t.$$.dirty[9]|4&t.$$.dirty[12]&&(o?(ze.addEventListener("play",fd),ze.addEventListener("pause",fd)):ze&&ze.nodeName==="video"&&(ze.removeEventListener("play",fd),ze.removeEventListener("pause",fd))),268435456&t.$$.dirty[9]&&o&&ls.set(yc()/cs()),18874368&t.$$.dirty[13]&&(pt=>{if(!Al())return;const St=Date.now();if($1&&St-$1<16)return;$1=St;const jt=Li*pt;if(jt.toFixed(1)===V0)return;V0=jt.toFixed(1);const Ge=ze,wn=()=>{Ge.removeEventListener("seeked",wn),Ga()};Ge.addEventListener("seeked",wn),df(Ge,jt)})(Do||xi),2097152&t.$$.dirty[13]&&n(370,a=xi&&gn(xi,6)),38273024&t.$$.dirty[13]&&n(368,s=Ue||[[0,Math.min(Li,Na)/Li]]),134217728&t.$$.dirty[11]&&(l=s[0][0]),134217728&t.$$.dirty[11]&&(c=s[s.length-1][1]),134217728&t.$$.dirty[11]&&n(371,d=s.map(([pt,St])=>[gn(pt,6),gn(St,6)])),1610612736&t.$$.dirty[11]&&n(369,u=d.findIndex(([pt,St])=>a>=pt&&a<=St)),1879048192&t.$$.dirty[11]&&(p=u===-1&&d.findIndex((pt,St,jt)=>{const Ge=jt[St-1];return Ge?a<=pt[0]&&a>=Ge[1]:a<=pt[0]})),8388608&t.$$.dirty[8]&&fc.set(hn),4&t.$$.dirty[12]|8388608&t.$$.dirty[13]&&(ze&&ho?v1():w1()),268435456&t.$$.dirty[9]|2097152&t.$$.dirty[13]&&o&&xd.set(cs()*xi),4&t.$$.dirty[12]|1048576&t.$$.dirty[13]&&ze&&(pt=>{o&&(ze.volume=Math.min(1,pt))})(Qo),256&t.$$.dirty[0]&&It(bd,Va=os,Va),1048576&t.$$.dirty[7]&&n(364,h=bi==="overlay"),128&t.$$.dirty[8]|8388608&t.$$.dirty[11]&&n(45,$=mc&&!h),134217730&t.$$.dirty[0]&&ea&&Object.entries(ea).forEach(([pt,St])=>{Object.entries(St).forEach(([jt,Ge])=>{go[pt]&&n(1,go[pt][jt]=Ge,go)})}),16384&t.$$.dirty[13]&&n(365,w=!be),16777216&t.$$.dirty[7]|50331648&t.$$.dirty[11]&&It(Bd,_n=Ra==="always"?x:Ra!=="never"&&x&&w,_n),4194304&t.$$.dirty[1]|33554432&t.$$.dirty[7]&&S1.set(Ur?1:0,{hard:!_n}),268435456&t.$$.dirty[7]&&(g=Sl?(m=Sl,U=U0,Fi(Math.min(m.width,U.width),Math.min(m.height,U.height))):U0),262144&t.$$.dirty[13]&&C1.update(po[0]),131072&t.$$.dirty[13]&&(f=Sr?(pt,St)=>Sr(pt,{flipX:void 0,flipY:void 0,rotation:void 0,...St,isPreview:!0}):ai),268435456&t.$$.dirty[1]&&Array.isArray(Bn)&&To("selectionchange",[...Bn]),33554432&t.$$.dirty[8]|65536&t.$$.dirty[13]&&B1.set($i&&Ce),71303168&t.$$.dirty[8]&&Ad.set(Jt==="pan"||Xe),1048576&t.$$.dirty[1]&&pr&&Fl.set(Ui(pr.x,pr.y,pr.width,pr.height)),8388608&t.$$.dirty[11]|2097154&t.$$.dirty[12]&&oe&&h&&ki&&ki.complete&&(()=>{const pt=qn,St=fr(oe);pt&&pt===St||(wd.set(fr(oe)),Mm())})(),8192&t.$$.dirty[11]&&n(46,Pt=H.length>1),32768&t.$$.dirty[1]&&(Pt||zl.set(Ds())),1024&t.$$.dirty[0]|32768&t.$$.dirty[13]&&(as||Sc.set(Ui(0,$e,0,0))),33554432&t.$$.dirty[11]|128&t.$$.dirty[12]&&n(367,v=!en&&x),1048576&t.$$.dirty[1]&&n(309,Be=pr&&pr.width>0&&pr.height>0),8&t.$$.dirty[0]|1610612736&t.$$.dirty[9]&&n(40,xe=Be&&Yn&&!!gt),512&t.$$.dirty[1]&&setTimeout(()=>n(294,H1=xe),1),16777216&t.$$.dirty[7]|32768&t.$$.dirty[9]|83886080&t.$$.dirty[11]&&It(Dd,Ao=Ra==="always"?v:Ra!=="never"&&v&&H1&&w,Ao),67108864&t.$$.dirty[7]|8388608&t.$$.dirty[11]&&Od.set(Ts||h),134217728&t.$$.dirty[7]&&_d.set(rs),134217728&t.$$.dirty[8]&&ii&&il.set(ii),4&t.$$.dirty[0]|9216&t.$$.dirty[13]&&Ri&&(Ri.dispatchEvent(As("markupzoom",je)),Ri.dispatchEvent(As("zoom",Ne(je)?je:wr))),4&t.$$.dirty[0]|4096&t.$$.dirty[13]&&Ri&&(Ri.dispatchEvent(As("markuppan",O)),Ri.dispatchEvent(As("pan",O))),512&t.$$.dirty[13]&&Ji&&$m(),2048&t.$$.dirty[13]&&uo&&q1(),4198400&t.$$.dirty[1]&&V&&tp.set(.075,{hard:!_n}),536870912&t.$$.dirty[7]&&n(362,T=Cl),384&t.$$.dirty[13]&&n(363,I=Vi?-Math.max(...Object.values(So)):0),138936320&t.$$.dirty[1]|6291456&t.$$.dirty[11]&&Br){let pt=Br.x-we.x,St=we.x+we.width-(Br.x+Br.width),jt=Br.y-we.y,Ge=we.y+we.height-(Br.y+Br.height),wn=Math.min(pt,jt,St,Ge);ep.set(wn>I?0:Math.min(T,Math.abs(wn/64)),{hard:!_n})}if(67108864&t.$$.dirty[1]&&n(361,M=.55/Ko),4718592&t.$$.dirty[1]|1048576&t.$$.dirty[11]&&we&&np.set({x:0,y:we.y,width:we.x<64?0:we.x,height:we.height+M},{hard:!_n}),4718592&t.$$.dirty[1]|1048576&t.$$.dirty[11]|2&t.$$.dirty[12]&&we&&ip.set({x:0,y:0,width:oe.width,height:we.y+M},{hard:!_n}),4718592&t.$$.dirty[1]|1048576&t.$$.dirty[11]|2&t.$$.dirty[12]&&we){let pt=we.x+we.width,St=oe.width-(we.x+we.width);St<64&&(pt+=St,St=0),rp.set({x:pt,y:we.y,width:St,height:we.height+M},{hard:!_n})}if(4718592&t.$$.dirty[1]|2&t.$$.dirty[12]&&we&&op.set({x:0,y:we.y+we.height,width:oe.width,height:oe.height-(we.y+we.height)},{hard:!_n}),33554432&t.$$.dirty[1]|72&t.$$.dirty[13]&&n(357,F=ir&&{id:"stage-overlay",backgroundColor:Jr,opacity:_i,...ir}),33554432&t.$$.dirty[1]|40&t.$$.dirty[13]&&n(360,C=wo&&{id:"stage-overlay",backgroundColor:Jr,opacity:_i,...wo}),33554432&t.$$.dirty[1]|24&t.$$.dirty[13]&&n(359,z=Ci&&{id:"stage-overlay",backgroundColor:Jr,opacity:_i,...Ci}),33554432&t.$$.dirty[1]|12&t.$$.dirty[13]&&n(358,j=Zn&&{id:"stage-overlay",backgroundColor:Jr,opacity:_i,...Zn}),983040&t.$$.dirty[11]&&n(356,A=[C,z,j,F].filter(Boolean)),32768&t.$$.dirty[11]|2&t.$$.dirty[13]&&A&&co&&Pc.update(pt=>[...pt.filter(St=>St.id!=="stage-overlay"),...A]),1&t.$$.dirty[9]|536870912&t.$$.dirty[12]&&Ic.set(Ms||lo||void 0),4&t.$$.dirty[0]|262144&t.$$.dirty[7]|4&t.$$.dirty[12]&&(n(235,Ec=ze),ze&&Ri.dispatchEvent(As("loadpreview",Ec))),4194304&t.$$.dirty[12]&&ao&&(il.set(ci()),Ol.set(void 0),$m(),Hd.set([])),1&t.$$.dirty[13]&&n(313,st=nr.index>0),1&t.$$.dirty[13]&&n(312,G=nr.index<nr.length-1),393216&t.$$.dirty[1]|768&t.$$.dirty[12]&&(k=[ti,Oe,Kn,pi]),8&t.$$.dirty[1]&&Pm.set(Zd),1073741824&t.$$.dirty[12]&&dp.set(Hr),4096&t.$$.dirty[1]&&ex.set(V),33554432&t.$$.dirty[9]|4096&t.$$.dirty[11]&&n(304,N=ct.reduce((pt,St)=>(pt[St.id]=N&&N[St.id]||0,pt),{})),4096&t.$$.dirty[1]&&n(79,kt={name:vx,selected:V}),4096&t.$$.dirty[11]&&n(335,bt=ct.map(pt=>({id:pt.id,icon:pt.tabIcon,label:pt.tabLabel}))),4096&t.$$.dirty[11]&&n(78,et=ct.map(pt=>pt.id)),524288&t.$$.dirty[7]&&n(77,wt=bn(["PinturaRoot","PinturaRootComponent",Ua])),2&t.$$.dirty[12]&&n(349,Q=oe&&(oe.width>1e3?"wide":oe.width<600?"narrow":void 0)),2&t.$$.dirty[12]&&n(336,Ut=oe&&(oe.width<=320||oe.height<=460)),2&t.$$.dirty[12]&&n(348,lt=oe&&(oe.height>1e3?"tall":oe.height<600?"short":void 0)),4&t.$$.dirty[0]&&n(315,q=Ri&&Ri.parentNode&&Ri.parentNode.classList.contains("PinturaModal")),1&t.$$.dirty[1]|32&t.$$.dirty[10]|2&t.$$.dirty[12]&&n(341,vt=q&&oe&&Ud>oe.width),2&t.$$.dirty[1]|32&t.$$.dirty[10]|2&t.$$.dirty[12]&&n(340,dt=q&&oe&&lp>oe.height),1073741824&t.$$.dirty[10]|1&t.$$.dirty[11]&&n(342,Ht=vt&&dt),1048576&t.$$.dirty[0]&&n(339,it=Qn),256&t.$$.dirty[11]&&n(310,Vt=Q==="narrow"),4096&t.$$.dirty[8]|2&t.$$.dirty[12]&&n(350,(ft=oe,Rt=Rl,Dt=oe?Rt==="auto"?ft.width>ft.height?"landscape":"portrait":Rt==="horizontal"?ft.width<500?"portrait":"landscape":Rt==="vertical"?ft.height<400?"landscape":"portrait":void 0:"landscape")),512&t.$$.dirty[11]&&n(76,Zt=Dt==="landscape"),1&t.$$.dirty[10]|128&t.$$.dirty[11]&&n(338,mt=Vt||lt==="short"),1&t.$$.dirty[1]|2&t.$$.dirty[12]&&n(337,Ft=Em&&oe&&Ud===oe.width&&!Cm),4&t.$$.dirty[1]|268435456&t.$$.dirty[12]&&n(311,ht=[...zr||[],...Xd].filter(Boolean)),8192&t.$$.dirty[8]&&n(347,Yt="has-navigation-preference-"+ta),16384&t.$$.dirty[8]&&n(346,Nt="has-navigation-preference-"+Il),32768&t.$$.dirty[8]&&n(343,Qt="has-toolbar-preference-"+b),65536&t.$$.dirty[8]&&n(345,re="has-controlgroups-preference-"+W),131072&t.$$.dirty[8]&&n(344,xt="has-controltabs-preference-"+P),2&t.$$.dirty[12]&&n(352,_=oe!==void 0&&oe.width>0&&oe.height>0),4&t.$$.dirty[0]|2048&t.$$.dirty[11]&&n(351,ke=_&&Ri&&getComputedStyle(Ri)),1024&t.$$.dirty[11]&&ke&&Lm(),1024&t.$$.dirty[0]|4243456&t.$$.dirty[1]|34603008&t.$$.dirty[7]|2080374816&t.$$.dirty[10]|1023&t.$$.dirty[11]|201334784&t.$$.dirty[12]&&Ac.set({...yi,layoutMode:bi,orientation:Dt,horizontalSpace:Q,verticalSpace:lt,navigationHorizontalPreference:Yt,navigationVerticalPreference:Nt,controlGroupsVerticalPreference:re,controlTabsVerticalpreference:xt,toolbarVerticalPreference:Qt,isModal:q,isDisabled:Ur,isCentered:Ht,isCenteredHorizontally:vt,isCenteredVertically:dt,isAnimated:_n,isTransparent:it,pointerAccuracy:so,pointerHoverable:vo,isCompact:mt,hasSwipeNavigation:Ft,hasLimitedSpace:Ut,hasToolbar:as,hasNavigation:Pt&&$,isIOS:Em,browserVersion:C0()?"chrome-"+(navigator.userAgent.match(/Chrome\/([0-9]+)/)||[])[1]:void 0}),8192&t.$$.dirty[12]&&n(75,ne=Object.entries(yi).map(([pt,St])=>/^is|has/.test(pt)?St?xb(pt):void 0:St).filter(Boolean).join(" ")),4096&t.$$.dirty[1]&&V&&Gd.set([]),4096&t.$$.dirty[1]|4&t.$$.dirty[8]|33554432&t.$$.dirty[10]|8192&t.$$.dirty[12]&&n(44,Xt=uc(bt.map(pt=>({...pt,selected:V===pt.id})),{...yi},()=>Js.set({}))),8192&t.$$.dirty[1]&&n(74,he=!!Xt.find(pt=>Array.isArray(pt))),50331648&t.$$.dirty[12]&&n(73,ae=Lo&&Object.entries(xo).filter(([,pt])=>pt!=null).reduce((pt,[,St])=>pt={...pt,...St},{})),2097152&t.$$.dirty[12]&&n(332,de=ki&&ki.task==="any-to-file"),4194304&t.$$.dirty[10]&&de&&ha&&ha.clear(),8388608&t.$$.dirty[12]&&n(334,Re=!!Eo&&!!Eo.translation),131072&t.$$.dirty[9]|16777216&t.$$.dirty[10]|4&t.$$.dirty[12]&&Re&&ze&&ze!==qd&&(n(296,qd=ze),wx()),16777216&t.$$.dirty[10]|8388608&t.$$.dirty[12]&&Re&&zm(Eo),16777216&t.$$.dirty[1]&&qo&&qo.length>1){let pt=[];ha.forEach((St,jt)=>{jt!==0&&St.get().opacity<=0&&pt.push(St)}),pt.forEach(St=>ha.remove(St))}if(8&t.$$.dirty[0]|8388608&t.$$.dirty[10]&&n(39,Ct=Yn&&nn.length&&function(pt,St){if(Un(St.labelSupportError))return St.labelSupportError(pt);const jt=Et({features:pt},St);return Bs(St.labelSupportError,jt,"{","}")}(nn,Yn)),2097152&t.$$.dirty[12]&&n(324,ln=ki&&!!ki.error),2097152&t.$$.dirty[12]&&n(42,Je=!ki||!ki.complete&&ki.task===void 0),2097152&t.$$.dirty[12]&&n(325,Qe=ki&&(ki.taskLengthComputable?ki.taskProgress:1/0)),4194304&t.$$.dirty[10]&&de&&It(Rc,mr=!1,mr),4194304&t.$$.dirty[1]|262144&t.$$.dirty[9]|2097152&t.$$.dirty[12]&&ki&&ki.complete){const pt=_n?250:0;clearTimeout(yp),n(297,yp=setTimeout(()=>{It(Rc,mr=!0,mr)},pt))}if(2048&t.$$.dirty[1]|16384&t.$$.dirty[10]|2621440&t.$$.dirty[12]&&n(329,Ie=ki&&!ln&&!Je&&!mr),65536&t.$$.dirty[9]|4194308&t.$$.dirty[12]&&n(328,Ye=!(!ao||ze&&!Ps)),4194304&t.$$.dirty[1]|524288&t.$$.dirty[12]&&(mr?setTimeout(()=>Yd.set(1,{hard:!_n}),_n?500:0):Yd.set(0,{hard:!_n})),1064960&t.$$.dirty[12]&&n(323,yn=!!(Wi||Ki&&Ki.progress!==void 0&&!Ki.complete)),8192&t.$$.dirty[10]&&yn&&Ks(),2048&t.$$.dirty[1]|2097152&t.$$.dirty[12]&&n(326,Sn=ki&&!(ki.error||Je)),8&t.$$.dirty[0]|2097152&t.$$.dirty[12]&&n(327,Fn=Yn&&function(pt,St){const jt=pt?!pt.complete||pt.error?pt:{task:"blob-to-bitmap",progress:1/0}:void 0;let Ge=Un(St.statusLabelLoadImage)?St.statusLabelLoadImage(jt):K({state:jt},St);return pt&&pt.error&&pt.error.metadata&&(Ge=Bs(Ge,pt.error.metadata,"{","}")),Ge}(ki,Yn)),8&t.$$.dirty[0]|1048576&t.$$.dirty[12]&&n(322,zn=Ki&&Yn&&function(pt,St){return Un(St.statusLabelProcessImage)?St.statusLabelProcessImage(pt):yt({state:pt},St)}(Ki,Yn)),1048576&t.$$.dirty[12]&&n(320,un=Ki&&(Ki.taskLengthComputable?Ki.taskProgress:1/0)),1048576&t.$$.dirty[12]&&n(321,Y=Ki&&!Ki.error),1048576&t.$$.dirty[12]&&n(319,at=!(!Ki||!Ki.error)),8&t.$$.dirty[0]|2048&t.$$.dirty[1]|131072&t.$$.dirty[7]|1048064&t.$$.dirty[10])if(X){let pt,St,jt,Ge,wn;He(X)&&(pt=X),Ne(X)?St=X:Array.isArray(X)&&([pt,St,wn]=X,St===!1&&(Ge=!0),Ne(St)&&(jt=!0)),n(35,us=(pt||St)&&{text:pt,aside:Ge||jt,progressIndicator:{visible:jt,progress:St},closeButton:Ge&&{label:Yn.statusLabelButtonClose,icon:Yn.statusIconButtonClose,onclick:wn||(()=>n(234,X=void 0))}})}else n(35,us=Yn&&Je||ln||Ie||Ye?{text:Fn,aside:ln||Sn,progressIndicator:{visible:Sn,progress:Qe},closeButton:ln&&{label:Yn.statusLabelButtonClose,icon:Yn.statusIconButtonClose,onclick:Sx}}:Yn&&yn&&zn?{text:zn,aside:at||Y,progressIndicator:{visible:Y,progress:un},closeButton:at&&{label:Yn.statusLabelButtonClose,icon:Yn.statusIconButtonClose,onclick:kx}}:void 0);if(131072&t.$$.dirty[7]&&n(331,Z=X!==void 0),4194304&t.$$.dirty[1]|32&t.$$.dirty[10]|1048576&t.$$.dirty[12]&&q&&Ki&&Ki.complete&&(Kd.set(!0),setTimeout(()=>Kd.set(!1),_n?100:0)),4&t.$$.dirty[0]|4096&t.$$.dirty[1]|524288&t.$$.dirty[12]&&mr&&Ri&&Ri.dispatchEvent(As("selectutil",V)),2304&t.$$.dirty[1]|2908160&t.$$.dirty[10]|262144&t.$$.dirty[12]&&n(330,zt=hr||Ct||Je||ln||Ie||Ye||yn||Z),1048576&t.$$.dirty[10]&&It(Fc,Ai=zt?1:0,Ai),4194304&t.$$.dirty[1]|1048576&t.$$.dirty[10]&&Fc.set(zt?1:0,{duration:_n?500:1}),8388608&t.$$.dirty[1]&&n(41,ue=Ai>0),16&t.$$.dirty[1]&&n(318,De=!(!us||!us.aside)),4195344&t.$$.dirty[1]|524288&t.$$.dirty[9]|256&t.$$.dirty[10]|131072&t.$$.dirty[12]&&ue&&us){clearTimeout(eu);const pt={hard:_n===!1};if(De){const St=!!us.error||!_n;Qd.set(1,pt),Jd.set(lr,{hard:St}),n(298,eu=setTimeout(()=>{zc.set(16,pt)},1))}else Qd.set(0,pt),n(298,eu=setTimeout(()=>{zc.set(0,pt)},1))}if(1024&t.$$.dirty[1]&&(ue||(tu.set(void 0,{hard:!0}),Jd.set(void 0,{hard:!0}),zc.set(0,{hard:!0}))),65536&t.$$.dirty[12]&&n(317,ye=.5*qi),128&t.$$.dirty[10]|32768&t.$$.dirty[12]&&n(72,Lt=`translateX(${Ma-ye}px)`),256&t.$$.dirty[1]|12&t.$$.dirty[12]&&n(38,se=ze&&rn&&!Ct),128&t.$$.dirty[1]|96&t.$$.dirty[10]&&n(314,cn=Te&&(se||q)?Dm:pe),16&t.$$.dirty[10]&&n(71,an=cn),16&t.$$.dirty[10]&&n(70,nt=cn),8&t.$$.dirty[0]|2097152&t.$$.dirty[1]|370&t.$$.dirty[8]|15&t.$$.dirty[10]|8192&t.$$.dirty[12]&&n(69,Gt=Yn&&ca&&dd(()=>dc([["div","alpha",{class:"PinturaNavGroup"},[["div","alpha-set",{class:"PinturaNavSet"},[gc&&["Button","close",{label:Yn.labelClose,icon:Yn.iconButtonClose,onclick:()=>To("close"),hideLabel:!0}],Ml&&["Button","revert",{label:Yn.labelButtonRevert,icon:Yn.iconButtonRevert,disabled:!st,onclick:hx,hideLabel:!0}]]]]],["div","beta",{class:"PinturaNavGroup PinturaNavGroupFloat"},[Ys&&["div","history",{class:"PinturaNavSet"},[["Button","undo",{label:Yn.labelButtonUndo,icon:Yn.iconButtonUndo,disabled:!st,onclick:Xa.undo,hideLabel:!0}],["Button","redo",{label:Yn.labelButtonRedo,icon:Yn.iconButtonRedo,disabled:!G,onclick:Xa.redo,hideLabel:!0}]]],ht.length&&["div","plugin-tools",{class:"PinturaNavSet"},ht.filter(Boolean).map(([pt,St,jt])=>[pt,St,{...jt}])]]],["div","gamma",{class:"PinturaNavGroup"},[hc&&["Button","export",{label:Yn.labelButtonExport,icon:Vt&&Yn.iconButtonExport,class:"PinturaButtonExport",onclick:fx,hideLabel:Vt}]]]],{...yi},()=>Js.set({})))),512&t.$$.dirty[12]&&n(306,te=Kn&&!!Kn.length),134217728&t.$$.dirty[9]|520&t.$$.dirty[12]&&n(305,tn=te&&vy(rn,Kn)),201326592&t.$$.dirty[9]|6148&t.$$.dirty[12]&&te&&((pt,St,jt,Ge)=>{if(!St||!pt||Bm===St)return;Bm=St;const wn={dataSizeScalar:jt};Ge&&Ge[3]>0&&(wn.backgroundColor=[...Ge]),St(pt,wn).then(jn=>{Is&&or(Is),jn.setAttribute("data-retain",!0),n(299,Is=jn)})})(ze,Si,tn,sr),1048576&t.$$.dirty[9]|1544&t.$$.dirty[12]&&Kn&&Is&&rn){const{width:pt,height:St}=rn,jt=ka()?"pixelated":gi==="auto"?"auto":"pixelated";n(300,vp=Kn.map(Ge=>{const wn=Ui(Ge.x,Ge.y,Ge.width,Ge.height),jn=Rr(An(wn),Ge.rotation).map(ri=>ut(ri.x/pt,ri.y/St));return{...Ge,id:"redaction",flipX:!1,flipY:!1,cornerRadius:0,strokeWidth:0,strokeColor:void 0,backgroundColor:[0,0,0,0],backgroundImage:Is,backgroundImageRendering:jt,backgroundCorners:jn}}))}2097152&t.$$.dirty[9]|256&t.$$.dirty[12]&&n(37,ot=[...vp,...pi||[]]),32&t.$$.dirty[1]&&Dc&&Om.set(Dc),4&t.$$.dirty[0]|128&t.$$.dirty[1]&&se&&Ri&&Ri.dispatchEvent(As("ready")),262144&t.$$.dirty[1]&&n(63,iu=!0),120&t.$$.dirty[12]&&n(64,ru=!0),131072&t.$$.dirty[1]&&n(65,ou=!0),65536&t.$$.dirty[1]&&n(66,au=!0),64&t.$$.dirty[1]&&n(67,su=!0),2&t.$$.dirty[12]&&n(303,ge=!!oe&&oe.height>0),29360128&t.$$.dirty[9]&&!i&&ge&&(clearTimeout(Mp),n(301,Mp=setTimeout(()=>{i||_y("locale")},32)))},n(366,x=!M0()),y=Yc()===1?m=>{m&&(jo(m.origin,Math.round),jo(m.translation,Math.round))}:ai,n(333,nn=[!H3()&&"WebGL"].filter(Boolean)),n(316,Te=Uo()||i1()&&Oa()),n(68,me=((m,U=!0)=>ft=>{ft.type==="ping"&&(U&&ft.stopPropagation(),m(ft.detail.type,ft.detail.data))})(Pa.pub)),[Pi,go,Ri,Yn,eo,$d,kl,sc,os,Tl,as,$c,le,ee,qt,Pe,sn,Se,We,ve,Qn,_e,vn,kr,Pr,Cr,Bi,ea,k1,ap,Xa,Ud,lp,Xd,Zd,us,Dc,ot,se,Ct,xe,ue,Je,V,Xt,$,Pt,ui,Oe,ti,we,pr,ca,_n,Ai,qo,Jr,Ko,Br,Bn,Ia,ua,Lc,iu,ru,ou,au,su,me,Gt,nt,an,Lt,ae,he,ne,Zt,wt,et,kt,Dr,Wr,L,ie,Me,xn,Vn,On,on,kn,Xn,Mn,Jn,Ni,vi,Mi,Wn,Mr,da,Xs,Cs,ns,Ha,cr,_o,ls,fc,Js,bd,S1,T1,Qs,M1,xd,P1,Z0,R1,vd,I1,wd,E1,Ea,Ll,Sd,kd,Cd,Td,Md,Pd,Rd,tl,A1,Id,em,nm,im,rm,om,am,sm,L1,F1,z1,Ed,D1,B1,Ad,O1,vc,Ld,wc,W1,_1,Fl,zl,V1,Sc,el,Fd,zd,kc,N1,Dd,Bd,Od,nl,Cc,j1,pa,Wd,U1,um,Dl,Bl,Za,Z1,ds,Ol,X1,Mc,il,Vd,Y1,fm,Nd,Pc,Sm,ep,np,ip,rp,op,Rc,Ic,sp,Hd,jd,Ac,cp,Rs,ha,Gd,Rm,pp,hp,mp,(m,U)=>U[m],m=>ct.find(U=>U.id===m).view,gp,$p,fp,Yd,({target:m,propertyName:U})=>{m===Ri&&/background|outline/.test(U)&&ke&&Lm()},Fm,Fc,Kd,Jd,Qd,zc,bp,tu,m=>{const U=!(!us||!us.closeButton)||!_n;bp.set(m.detail.width,{hard:U}),tu.set(Math.round(.5*-m.detail.width),{hard:U})},Cx,ol,m=>{const{keyCode:U,metaKey:ft,ctrlKey:Rt,shiftKey:pt}=m;if(U===9&&Ur)return void m.preventDefault();if(m.target&&U===32&&Ri.contains(m.target)&&!Os(m.target)&&(Yo&&o&&x1(),m.preventDefault()),U===90&&(ft||Rt))return void(pt&&ft?Xa.redo():Xa.undo());if(U===89&&Rt)return void Xa.redo();if(U===229||m.target&&(U===8||U===46)&&!Ri.contains(m.target)&&Os(m.target))return;const St=new Set([...Tr,U]);ol.set(Array.from(St))},({key:m,keyCode:U})=>{if(m==="Meta")return ol.set([]);ol.set(Tr.filter(ft=>ft!==U))},()=>{ol.set([])},m=>{Os(m.target)||m.preventDefault()},m=>{qs&&xp(m.detail.resources[0])},()=>{ss&&vb().then(Tx)},m=>{if(!Pl)return;const U=di((window.innerWidth-Math.abs(oe.x))/oe.width,0,1),ft=di((window.innerHeight-Math.abs(oe.y))/oe.height,0,1);U<.75&&ft<.75||xp((m.clipboardData||window.clipboardData).files[0])},Wm,jm,m=>{qe&&ya(m.detail,qe)||It(el,qe=m.detail,qe)},X,Ec,Ua,bi,to,si,mo,Ra,Ur,Ts,rs,Sl,Cl,lc,cc,dc,uc,pc,hc,Ml,Ys,mc,gc,qs,Pl,ss,Rl,ta,Il,b,W,P,K,yt,Et,_t,Jt,hn,Ee,Ce,Xe,ii,Hi,()=>n(60,Ia=void 0),(m,U,ft)=>{const{text:Rt="",placeholder:pt="",autoClose:St=!0,align:jt="top",justify:Ge="center",buttonConfirm:wn,buttonCancel:jn}=ft;n(60,Ia={align:jt,justify:Ge,text:Rt,placeholder:pt,buttonConfirm:wn,buttonCancel:jn,onconfirm:()=>{m(ua.value),St&&n(60,Ia=void 0)},oncancel:()=>{U(void 0),n(60,Ia=void 0)}})},Ms,Oo,Wo,El,b1,Ks,Al,x1,v1,w1,H0,cs,yc,yd,bc,H1,Ps,qd,yp,eu,Is,vp,Mp,i,ge,N,tn,te,o,gt,Be,Vt,ht,G,st,cn,q,Te,ye,De,at,un,Y,zn,yn,ln,Qe,Sn,Fn,Ye,Ie,zt,Z,de,nn,Re,bt,Ut,Ft,mt,it,dt,vt,Ht,Qt,xt,re,Nt,Yt,lt,Q,Dt,ke,_,ct,H,rt,A,F,j,z,C,M,T,I,h,w,x,v,s,u,a,d,r,oe,ze,rn,In,Dn,pn,en,pi,Kn,gi,sr,Si,yi,Wi,Ma,qi,lr,hr,mr,Ki,ki,ao,Eo,xo,Lo,vo,so,zr,lo,Hr,nr,co,Zn,_i,Ci,wo,ir,So,Vi,Ji,wr,uo,O,je,be,$e,$i,Sr,po,Ue,Qo,xi,Li,ho,Do,Na,function(){n(31,Ud=ml.innerWidth),n(32,lp=ml.innerHeight)},m=>It(Sc,Me=m.detail,Me),({detail:m})=>n(43,V=m),function(m,U){t.$$.not_equal(go[U],m)&&(go[U]=m,n(1,go),n(281,Wo),n(27,ea))},m=>pp(m),m=>hp(m),(m,{detail:U})=>mp(m,U),m=>It(zl,Dr=m.detail,Dr),function(m){t.$$.not_equal(go[V],m)&&(go[V]=m,n(1,go),n(281,Wo),n(27,ea))},()=>pp(V),()=>hp(V),({detail:m})=>mp(V,m),m=>{const U={...m,...Wm()},{annotationShapes:ft,decorationShapes:Rt,interfaceShapes:pt,frameShapes:St,selectionShapes:jt}=Tl({annotationShapes:ti,decorationShapes:Oe,interfaceShapes:vi,frameShapes:ui,selectionShapes:Bn},U);return jm(U,ot,ft,Rt,pt,St,jt)},()=>{n(63,iu=!1),n(64,ru=!1),n(65,ou=!1),n(66,au=!1),n(67,su=!1)},function(m){Hn[m?"unshift":"push"](()=>{Dc=m,n(36,Dc)})},function(m){Pi=m,n(0,Pi),n(269,_t)},function(m){Xd=m,n(33,Xd)},function(m){Zd=m,n(34,Zd)},function(m){Hn[m?"unshift":"push"](()=>{ua=m,n(61,ua)})},function(m){Hn[m?"unshift":"push"](()=>{Ri=m,n(2,Ri)})},m=>It(_1,pr=m.detail,pr)]}class Tf extends fn{constructor(e){super(),$n(this,e,cw,lw,dn,{class:236,layout:237,stores:238,locale:3,id:4,util:239,utils:240,animations:241,disabled:242,previewUpscale:243,previewPad:244,previewMaskOpacity:5,previewImageDataMaxSize:245,previewImageTextPixelRatio:6,markupMaskOpacity:7,zoomMaskOpacity:246,elasticityMultiplier:8,willRevert:247,willProcessImage:248,willRenderCanvas:9,willRenderToolbar:249,willRenderUtilTabs:250,willSetHistoryInitialState:251,enableButtonExport:252,enableButtonRevert:253,enableNavigateHistory:254,enableToolbar:10,enableUtils:255,enableButtonClose:256,enableDropImage:257,enablePasteImage:258,enableBrowseImage:259,enableTransparencyGrid:11,layoutDirectionPreference:260,layoutHorizontalUtilsPreference:261,layoutVerticalUtilsPreference:262,layoutVerticalToolbarPreference:263,layoutVerticalControlGroupsPreference:264,layoutVerticalControlTabsPreference:265,status:234,formatStatusImageLoading:266,formatStatusImageProcessing:267,formatStatusSupportError:268,textDirection:12,markupEditorZoomLevel:269,markupEditorZoomLevels:13,markupEditorZoomAdjustStep:14,markupEditorZoomAdjustFactor:15,markupEditorZoomAdjustWheelFactor:16,markupEditorInteractionMode:270,muteAudio:271,willSetMediaInitialTimeOffset:272,enablePan:17,enableZoom:18,enableZoomControls:273,enableZoomInput:19,enablePanInput:274,enableCanvasAlpha:20,enablePanLimit:21,panLimitGutterScalar:22,pan:275,zoomPresetOptions:23,zoomAdjustStep:24,zoomAdjustFactor:25,zoomAdjustWheelFactor:26,zoomLevel:0,fixScrollDirection:276,hideTextInput:277,showTextInput:278,imagePreviewSrc:279,imageOrienter:280,pluginComponents:281,pluginOptions:27,sub:282,pluginInterface:1,root:2,play:283,pause:284,isPaused:285,togglePlayPause:286,mute:287,unmute:288,toggleMute:289,getDuration:290,getCurrentTime:291,setCurrentTime:292,imageSourceToImageData:28,imagePreview:29,imagePreviewCurrent:235,history:30},null,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}get class(){return this.$$.ctx[236]}set class(e){this.$$set({class:e}),E()}get layout(){return this.$$.ctx[237]}set layout(e){this.$$set({layout:e}),E()}get stores(){return this.$$.ctx[238]}set stores(e){this.$$set({stores:e}),E()}get locale(){return this.$$.ctx[3]}set locale(e){this.$$set({locale:e}),E()}get id(){return this.$$.ctx[4]}set id(e){this.$$set({id:e}),E()}get util(){return this.$$.ctx[239]}set util(e){this.$$set({util:e}),E()}get utils(){return this.$$.ctx[240]}set utils(e){this.$$set({utils:e}),E()}get animations(){return this.$$.ctx[241]}set animations(e){this.$$set({animations:e}),E()}get disabled(){return this.$$.ctx[242]}set disabled(e){this.$$set({disabled:e}),E()}get previewUpscale(){return this.$$.ctx[243]}set previewUpscale(e){this.$$set({previewUpscale:e}),E()}get previewPad(){return this.$$.ctx[244]}set previewPad(e){this.$$set({previewPad:e}),E()}get previewMaskOpacity(){return this.$$.ctx[5]}set previewMaskOpacity(e){this.$$set({previewMaskOpacity:e}),E()}get previewImageDataMaxSize(){return this.$$.ctx[245]}set previewImageDataMaxSize(e){this.$$set({previewImageDataMaxSize:e}),E()}get previewImageTextPixelRatio(){return this.$$.ctx[6]}set previewImageTextPixelRatio(e){this.$$set({previewImageTextPixelRatio:e}),E()}get markupMaskOpacity(){return this.$$.ctx[7]}set markupMaskOpacity(e){this.$$set({markupMaskOpacity:e}),E()}get zoomMaskOpacity(){return this.$$.ctx[246]}set zoomMaskOpacity(e){this.$$set({zoomMaskOpacity:e}),E()}get elasticityMultiplier(){return this.$$.ctx[8]}set elasticityMultiplier(e){this.$$set({elasticityMultiplier:e}),E()}get willRevert(){return this.$$.ctx[247]}set willRevert(e){this.$$set({willRevert:e}),E()}get willProcessImage(){return this.$$.ctx[248]}set willProcessImage(e){this.$$set({willProcessImage:e}),E()}get willRenderCanvas(){return this.$$.ctx[9]}set willRenderCanvas(e){this.$$set({willRenderCanvas:e}),E()}get willRenderToolbar(){return this.$$.ctx[249]}set willRenderToolbar(e){this.$$set({willRenderToolbar:e}),E()}get willRenderUtilTabs(){return this.$$.ctx[250]}set willRenderUtilTabs(e){this.$$set({willRenderUtilTabs:e}),E()}get willSetHistoryInitialState(){return this.$$.ctx[251]}set willSetHistoryInitialState(e){this.$$set({willSetHistoryInitialState:e}),E()}get enableButtonExport(){return this.$$.ctx[252]}set enableButtonExport(e){this.$$set({enableButtonExport:e}),E()}get enableButtonRevert(){return this.$$.ctx[253]}set enableButtonRevert(e){this.$$set({enableButtonRevert:e}),E()}get enableNavigateHistory(){return this.$$.ctx[254]}set enableNavigateHistory(e){this.$$set({enableNavigateHistory:e}),E()}get enableToolbar(){return this.$$.ctx[10]}set enableToolbar(e){this.$$set({enableToolbar:e}),E()}get enableUtils(){return this.$$.ctx[255]}set enableUtils(e){this.$$set({enableUtils:e}),E()}get enableButtonClose(){return this.$$.ctx[256]}set enableButtonClose(e){this.$$set({enableButtonClose:e}),E()}get enableDropImage(){return this.$$.ctx[257]}set enableDropImage(e){this.$$set({enableDropImage:e}),E()}get enablePasteImage(){return this.$$.ctx[258]}set enablePasteImage(e){this.$$set({enablePasteImage:e}),E()}get enableBrowseImage(){return this.$$.ctx[259]}set enableBrowseImage(e){this.$$set({enableBrowseImage:e}),E()}get enableTransparencyGrid(){return this.$$.ctx[11]}set enableTransparencyGrid(e){this.$$set({enableTransparencyGrid:e}),E()}get layoutDirectionPreference(){return this.$$.ctx[260]}set layoutDirectionPreference(e){this.$$set({layoutDirectionPreference:e}),E()}get layoutHorizontalUtilsPreference(){return this.$$.ctx[261]}set layoutHorizontalUtilsPreference(e){this.$$set({layoutHorizontalUtilsPreference:e}),E()}get layoutVerticalUtilsPreference(){return this.$$.ctx[262]}set layoutVerticalUtilsPreference(e){this.$$set({layoutVerticalUtilsPreference:e}),E()}get layoutVerticalToolbarPreference(){return this.$$.ctx[263]}set layoutVerticalToolbarPreference(e){this.$$set({layoutVerticalToolbarPreference:e}),E()}get layoutVerticalControlGroupsPreference(){return this.$$.ctx[264]}set layoutVerticalControlGroupsPreference(e){this.$$set({layoutVerticalControlGroupsPreference:e}),E()}get layoutVerticalControlTabsPreference(){return this.$$.ctx[265]}set layoutVerticalControlTabsPreference(e){this.$$set({layoutVerticalControlTabsPreference:e}),E()}get status(){return this.$$.ctx[234]}set status(e){this.$$set({status:e}),E()}get formatStatusImageLoading(){return this.$$.ctx[266]}set formatStatusImageLoading(e){this.$$set({formatStatusImageLoading:e}),E()}get formatStatusImageProcessing(){return this.$$.ctx[267]}set formatStatusImageProcessing(e){this.$$set({formatStatusImageProcessing:e}),E()}get formatStatusSupportError(){return this.$$.ctx[268]}set formatStatusSupportError(e){this.$$set({formatStatusSupportError:e}),E()}get textDirection(){return this.$$.ctx[12]}set textDirection(e){this.$$set({textDirection:e}),E()}get markupEditorZoomLevel(){return this.$$.ctx[269]}set markupEditorZoomLevel(e){this.$$set({markupEditorZoomLevel:e}),E()}get markupEditorZoomLevels(){return this.$$.ctx[13]}set markupEditorZoomLevels(e){this.$$set({markupEditorZoomLevels:e}),E()}get markupEditorZoomAdjustStep(){return this.$$.ctx[14]}set markupEditorZoomAdjustStep(e){this.$$set({markupEditorZoomAdjustStep:e}),E()}get markupEditorZoomAdjustFactor(){return this.$$.ctx[15]}set markupEditorZoomAdjustFactor(e){this.$$set({markupEditorZoomAdjustFactor:e}),E()}get markupEditorZoomAdjustWheelFactor(){return this.$$.ctx[16]}set markupEditorZoomAdjustWheelFactor(e){this.$$set({markupEditorZoomAdjustWheelFactor:e}),E()}get markupEditorInteractionMode(){return this.$$.ctx[270]}set markupEditorInteractionMode(e){this.$$set({markupEditorInteractionMode:e}),E()}get muteAudio(){return this.$$.ctx[271]}set muteAudio(e){this.$$set({muteAudio:e}),E()}get willSetMediaInitialTimeOffset(){return this.$$.ctx[272]}set willSetMediaInitialTimeOffset(e){this.$$set({willSetMediaInitialTimeOffset:e}),E()}get enablePan(){return this.$$.ctx[17]}set enablePan(e){this.$$set({enablePan:e}),E()}get enableZoom(){return this.$$.ctx[18]}set enableZoom(e){this.$$set({enableZoom:e}),E()}get enableZoomControls(){return this.$$.ctx[273]}set enableZoomControls(e){this.$$set({enableZoomControls:e}),E()}get enableZoomInput(){return this.$$.ctx[19]}set enableZoomInput(e){this.$$set({enableZoomInput:e}),E()}get enablePanInput(){return this.$$.ctx[274]}set enablePanInput(e){this.$$set({enablePanInput:e}),E()}get enableCanvasAlpha(){return this.$$.ctx[20]}set enableCanvasAlpha(e){this.$$set({enableCanvasAlpha:e}),E()}get enablePanLimit(){return this.$$.ctx[21]}set enablePanLimit(e){this.$$set({enablePanLimit:e}),E()}get panLimitGutterScalar(){return this.$$.ctx[22]}set panLimitGutterScalar(e){this.$$set({panLimitGutterScalar:e}),E()}get pan(){return this.$$.ctx[275]}set pan(e){this.$$set({pan:e}),E()}get zoomPresetOptions(){return this.$$.ctx[23]}set zoomPresetOptions(e){this.$$set({zoomPresetOptions:e}),E()}get zoomAdjustStep(){return this.$$.ctx[24]}set zoomAdjustStep(e){this.$$set({zoomAdjustStep:e}),E()}get zoomAdjustFactor(){return this.$$.ctx[25]}set zoomAdjustFactor(e){this.$$set({zoomAdjustFactor:e}),E()}get zoomAdjustWheelFactor(){return this.$$.ctx[26]}set zoomAdjustWheelFactor(e){this.$$set({zoomAdjustWheelFactor:e}),E()}get zoomLevel(){return this.$$.ctx[0]}set zoomLevel(e){this.$$set({zoomLevel:e}),E()}get fixScrollDirection(){return this.$$.ctx[276]}set fixScrollDirection(e){this.$$set({fixScrollDirection:e}),E()}get hideTextInput(){return this.$$.ctx[277]}get showTextInput(){return this.$$.ctx[278]}get imagePreviewSrc(){return this.$$.ctx[279]}set imagePreviewSrc(e){this.$$set({imagePreviewSrc:e}),E()}get imageOrienter(){return this.$$.ctx[280]}set imageOrienter(e){this.$$set({imageOrienter:e}),E()}get pluginComponents(){return this.$$.ctx[281]}set pluginComponents(e){this.$$set({pluginComponents:e}),E()}get pluginOptions(){return this.$$.ctx[27]}set pluginOptions(e){this.$$set({pluginOptions:e}),E()}get sub(){return this.$$.ctx[282]}get pluginInterface(){return this.$$.ctx[1]}get root(){return this.$$.ctx[2]}set root(e){this.$$set({root:e}),E()}get play(){return this.$$.ctx[283]}get pause(){return this.$$.ctx[284]}get isPaused(){return this.$$.ctx[285]}get togglePlayPause(){return this.$$.ctx[286]}get mute(){return this.$$.ctx[287]}get unmute(){return this.$$.ctx[288]}get toggleMute(){return this.$$.ctx[289]}get getDuration(){return this.$$.ctx[290]}get getCurrentTime(){return this.$$.ctx[291]}get setCurrentTime(){return this.$$.ctx[292]}get imageSourceToImageData(){return this.$$.ctx[28]}set imageSourceToImageData(e){this.$$set({imageSourceToImageData:e}),E()}get imagePreview(){return this.$$.ctx[29]}get imagePreviewCurrent(){return this.$$.ctx[235]}set imagePreviewCurrent(e){this.$$set({imagePreviewCurrent:e}),E()}get history(){return this.$$.ctx[30]}}typeof window<"u"&&(t=>{if(t&&t._v7q0jhw)return;const[e,n,i]=[[99,111,110,115,111,108,101],[108,111,103],[84,104,105,115,32,118,101,114,115,105,111,110,32,111,102,32,80,105,110,116,117,114,97,32,105,115,32,102,111,114,32,116,101,115,116,105,110,103,32,112,117,114,112,111,115,101,115,32,111,110,108,121,46,32,86,105,115,105,116,32,104,116,116,112,115,58,47,47,112,113,105,110,97,46,110,108,47,112,105,110,116,117,114,97,32,116,111,32,112,117,114,99,104,97,115,101,32,97,32,108,105,99,101,110,115,101,46,32,86,105,115,105,116,32,104,116,116,112,115,58,47,47,112,113,105,110,97,46,110,108,47,112,105,110,116,117,114,97,47,99,104,97,116,32,105,102,32,121,111,117,32,104,97,118,101,32,97,110,121,32,113,117,101,115,116,105,111,110,115,46]].map(r=>r.map(o=>String.fromCharCode(o)).join(""));t&&t[e]&&t[e][n](i)})(window);const dw=["klass","stores","isVisible","isActive","isActiveFraction","locale"],uw=["history","klass","stores","navButtons","pluginComponents","pluginInterface","pluginOptions","sub","imagePreviewSrc","imagePreview","imagePreviewCurrent"],pw=["locale"];let uh;const wb=new Set([]),Wu={},Vh=new Map,hw=(...t)=>{t.filter(e=>!!e.util).forEach(e=>{const[n,i,r=()=>!0]=e.util;Vh.has(n)||(Vh.set(n,{Component:i,isSupported:r}),P0(i).filter(o=>!dw.includes(o)).forEach(o=>{wb.add(o),Wu[o]?Wu[o].push(n):Wu[o]=[n]}))})};var Sb=[...Vy,"init","update","undo","redo","revert","writehistory","destroy","show","hide","close","ready","zoom","pan","loadpreview","selectshape","blurshape","updateshape","addshape","removeshape","selectstyle","markuptap","markupzoom","markuppan","selectutil","selectcontrol","selectiondown","selectionup","selectionchange"],kb=(t,e,n={})=>{const{prefix:i="pintura:"}=n;return Sb.map(r=>t.on(r,o=>od(e)?((a,s,l)=>a.dispatchEvent(new CustomEvent(s,{detail:l,bubbles:!0,cancelable:!0})))(e,`${i}${r}`,o):e(r,o)))};const mw=t=>He(t[0]),gw=t=>!mw(t),Cb=t=>t[1],Nh=t=>t[3]||[],$w=(t,e)=>{const n=Hh(t,e);return mb(n,i=>Cb(i)===t),n},Hh=(t,e)=>{if(gw(e)){if(e.find(i=>Cb(i)===t))return e;const n=e.find(i=>Hh(t,Nh(i)));return n&&n[3]}return Hh(t,Nh(e))},fw=()=>[.75,.25,.25,0,0,.25,.75,.25,0,0,.25,.25,.75,0,0,0,0,0,1,0],yw=()=>[1.398,-.316,.065,-.273,.201,-.051,1.278,-.08,-.273,.201,-.051,.119,1.151,-.29,.215,0,0,0,1,0],bw=()=>[1.073,-.015,.092,-.115,-.017,.107,.859,.184,-.115,-.017,.015,.077,1.104,-.115,-.017,0,0,0,1,0],xw=()=>[1.06,0,0,0,0,0,1.01,0,0,0,0,0,.93,0,0,0,0,0,1,0],vw=()=>[1.1,0,0,0,-.1,0,1.1,0,0,-.1,0,0,1.2,0,-.1,0,0,0,1,0],ww=()=>[.212,.715,.114,0,0,.212,.715,.114,0,0,.212,.715,.114,0,0,0,0,0,1,0],Sw=()=>[.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,0,0,0,1,0],kw=()=>[.163,.518,.084,-.01,.208,.163,.529,.082,-.02,.21,.171,.529,.084,0,.214,0,0,0,1,0],Cw=()=>[.338,.991,.117,.093,-.196,.302,1.049,.096,.078,-.196,.286,1.016,.146,.101,-.196,0,0,0,1,0],Tw=()=>[.393,.768,.188,0,0,.349,.685,.167,0,0,.272,.533,.13,0,0,0,0,0,1,0],Mw=()=>[.289,.62,.185,0,.077,.257,.566,.163,0,.115,.2,.43,.128,0,.188,0,0,0,1,0],Pw=()=>[.269,.764,.172,.05,.1,.239,.527,.152,0,.176,.186,.4,.119,0,.159,0,0,0,1,0],Rw=()=>[.547,.764,.134,0,-.147,.281,.925,.12,0,-.135,.225,.558,.33,0,-.113,0,0,0,1,0],Iw={chrome:yw,fade:bw,pastel:fw,cold:vw,warm:xw,monoDefault:ww,monoWash:kw,monoNoir:Sw,monoStark:Cw,sepiaDefault:Tw,sepiaRust:Pw,sepiaBlues:Mw,sepiaColor:Rw};var Ew={filterFunctions:Iw,filterOptions:[["Default",[[void 0,t=>t.labelDefault]]],["Classic",[["chrome",t=>t.filterLabelChrome],["fade",t=>t.filterLabelFade],["cold",t=>t.filterLabelCold],["warm",t=>t.filterLabelWarm],["pastel",t=>t.filterLabelPastel]]],["Monochrome",[["monoDefault",t=>t.filterLabelMonoDefault],["monoNoir",t=>t.filterLabelMonoNoir],["monoStark",t=>t.filterLabelMonoStark],["monoWash",t=>t.filterLabelMonoWash]]],["Sepia",[["sepiaDefault",t=>t.filterLabelSepiaDefault],["sepiaRust",t=>t.filterLabelSepiaRust],["sepiaBlues",t=>t.filterLabelSepiaBlues],["sepiaColor",t=>t.filterLabelSepiaColor]]]]};const Aw={base:0,min:-.25,max:.25,getLabel:t=>_s(t/.25),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.brightness)return t.brightness[4]},setValue:(t,e)=>t.update(n=>({...n,brightness:[1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0]}))},Lw={base:1,min:.5,max:1.5,getLabel:t=>_s(2*(t-.5)-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.contrast)return t.contrast[0]},setValue:(t,e)=>t.update(n=>({...n,contrast:[e,0,0,0,.5*(1-e),0,e,0,0,.5*(1-e),0,0,e,0,.5*(1-e),0,0,0,1,0]}))},Fw={base:1,min:0,max:2,getLabel:t=>_s(t-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.saturation)return(t.saturation[0]-.213)/.787},setValue:(t,e)=>t.update(n=>({...n,saturation:[.213+.787*e,.715-.715*e,.072-.072*e,0,0,.213-.213*e,.715+.285*e,.072-.072*e,0,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,0,1,0]}))},zw={base:1,min:.5,max:1.5,getLabel:t=>_s(2*(t-.5)-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.exposure)return t.exposure[0]},setValue:(t,e)=>t.update(n=>({...n,exposure:[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0]}))},Dw={base:1,min:.15,max:4,getLabel:t=>_s(t<1?(t-.15)/.85-1:(t-1)/3),getStore:({imageGamma:t})=>t},Bw={base:0,min:-1,max:1,getStore:({imageVignette:t})=>t},Ow={base:0,min:-1,max:1,getStore:({imageConvolutionMatrix:t})=>t,getValue:t=>{if(t.clarity)return t.clarity[0]===0?t.clarity[1]/-1:t.clarity[1]/-2},setValue:(t,e)=>{t.update(n=>({...n,clarity:e>=0?[0,-1*e,0,-1*e,1+4*e,-1*e,0,-1*e,0]:[-1*e,-2*e,-1*e,-2*e,1+-3*e,-2*e,-1*e,-2*e,-1*e]}))}},Ww={base:0,min:-1,max:1,getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(!t.temperature)return;const e=t.temperature[0];return e>=1?(e-1)/.1:(1-e)/-.15},setValue:(t,e)=>t.update(n=>({...n,temperature:e>0?[1+.1*e,0,0,0,0,0,1,0,0,0,0,0,1+.1*-e,0,0,0,0,0,1,0]:[1+.15*e,0,0,0,0,0,1+.05*e,0,0,0,0,0,1+.15*-e,0,0,0,0,0,1,0]}))};var _w={finetuneControlConfiguration:{gamma:Dw,brightness:Aw,contrast:Lw,saturation:Fw,exposure:zw,temperature:Ww,clarity:Ow,vignette:Bw},finetuneOptions:[["brightness",t=>t.finetuneLabelBrightness],["contrast",t=>t.finetuneLabelContrast],["saturation",t=>t.finetuneLabelSaturation],["exposure",t=>t.finetuneLabelExposure],["temperature",t=>t.finetuneLabelTemperature],["gamma",t=>t.finetuneLabelGamma],!M0()&&["clarity",t=>t.finetuneLabelClarity],["vignette",t=>t.finetuneLabelVignette]].filter(Boolean)};const bo=(t,e="thumb")=>["div",e,{style:t,textContent:" "}],Vw={shape:{frameColor:[1,1,1],frameStyle:"solid",frameSize:"2.5%"},thumb:'<rect stroke-width="5" x="0" y="0" width="100%" height="100%"/>'},Nw={shape:{frameColor:[1,1,1],frameStyle:"solid",frameSize:"2.5%",frameRound:!0},thumb:'<rect stroke-width="5" x="0" y="0" width="100%" height="100%" rx="12%"/>'},Hw={shape:{frameColor:[1,1,1],frameStyle:"line",frameInset:"2.5%",frameSize:".3125%",frameRadius:0},thumb:[bo("top:.5em;left:.5em;right:.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor")]},jw={shape:{frameColor:[1,1,1],frameStyle:"line",frameAmount:2,frameInset:"2.5%",frameSize:".3125%",frameOffset:"1.25%",frameRadius:0},thumb:[bo("top:.75em;left:.75em;right:.75em;bottom:.75em; outline: 3px double")]},Uw={shape:{frameColor:[1,1,1],frameStyle:"edge",frameInset:"2.5%",frameOffset:"5%",frameSize:".3125%"},thumb:[bo("top:.75em;left:.5em;bottom:.75em;border-left:1px solid","a"),bo("top:.75em;right:.5em;bottom:.75em;border-right:1px solid","b"),bo("top:.5em;left:.75em;right:.75em;border-top:1px solid","c"),bo("bottom:.5em;left:.75em;right:.75em;border-bottom:1px solid","d")]},Gw={shape:{frameColor:[1,1,1],frameStyle:"edge",frameInset:"2.5%",frameSize:".3125%"},thumb:[bo("top:-.5em;left:.5em;right:.5em;bottom:-.5em; box-shadow: inset 0 0 0 1px currentColor","a"),bo("top:.5em;left:-.5em;right:-.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor","b")]},Zw={shape:{frameColor:[1,1,1],frameStyle:"edge",frameOffset:"1.5%",frameSize:".3125%"},thumb:[bo("top:.3125em;left:.5em;bottom:.3125em;border-left:1px solid","a"),bo("top:.3125em;right:.5em;bottom:.3125em;border-right:1px solid","b"),bo("top:.5em;left:.3125em;right:.3125em;border-top:1px solid","c"),bo("bottom:.5em;left:.3125em;right:.3125em;border-bottom:1px solid","d")]},Xw={shape:{frameColor:[1,1,1],frameStyle:"hook",frameInset:"2.5%",frameSize:".3125%",frameLength:"5%"},thumb:[bo("top:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-top: 1px solid","a"),bo("top:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-top: 1px solid","b"),bo("bottom:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-bottom: 1px solid","c"),bo("bottom:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-bottom: 1px solid","d")]},Yw={shape:{frameColor:[1,1,1],frameStyle:"polaroid"},thumb:'<rect stroke-width="20%" x="-5%" y="-5%" width="110%" height="96%"/>'};var qw={frameStyles:{solidSharp:Vw,solidRound:Nw,lineSingle:Hw,lineMultiple:jw,edgeSeparate:Uw,edgeCross:Gw,edgeOverlap:Zw,hook:Xw,polaroid:Yw},frameOptions:[[void 0,t=>t.labelNone],["solidSharp",t=>t.frameLabelMatSharp],["solidRound",t=>t.frameLabelMatRound],["lineSingle",t=>t.frameLabelLineSingle],["lineMultiple",t=>t.frameLabelLineMultiple],["edgeCross",t=>t.frameLabelEdgeCross],["edgeSeparate",t=>t.frameLabelEdgeSeparate],["edgeOverlap",t=>t.frameLabelEdgeOverlap],["hook",t=>t.frameLabelCornerHooks],["polaroid",t=>t.frameLabelPolaroid]]},nc=t=>t.charAt(0).toUpperCase()+t.slice(1);let jc=null;var ph=()=>{if(jc===null)if(ar())try{jc=document.fonts.check("16px TestNonExistingFont")===!1}catch{jc=!1}else jc=!1;return jc};const ud=(t,e)=>n=>n[e?`${e}${nc(t)}`:t],Kw=t=>[t,""+t],h1=(t,e)=>n=>[t[n],ud(n,e)],Tb=t=>Array.isArray(t)&&t.every(Ne)?t.map(Kw):t,ul=[1,.2549,.2118],Mf=[1,1,1,0],Jw=t=>{const{hideLabel:e=!0}=t||{};return pS(["new","add","subtract"].map(n=>[n,ud(n,"shapeLabelSelectionMode"),{icon:ud(n,"shapeIconSelectionMode"),hideLabel:e}]),{title:n=>n.shapeTitleSelectionMode,layout:"radio"})},Qw=t=>Rb(t,{title:e=>e.shapeTitleBrushSize,layout:"radio",optionHideLabel:!0,optionIcon:(e,n)=>`<circle fill="currentColor" stroke-width=".05em" stroke="currentColor" fill-opacity=".25" cx="12" cy="12" r="${2+8*n}"/>`}),Pf={eraser:()=>({eraseRadius:8,cursorStyle:"ellipse",cursorSize:"eraseRadius"}),path:()=>({points:[],disableAddPoints:!1}),line:()=>({x1:0,y1:0,x2:0,y2:0,disableErase:!1}),rectangle:()=>({x:0,y:0,width:0,height:0}),ellipse:()=>({x:0,y:0,rx:0,ry:0}),text:()=>({x:0,y:0,text:"Text",disableTextScale:!0})},hs=(t,e={},n)=>{if(!Pf[t])return;const{position:i="relative",inputMode:r="drag",isSelection:o=!1,interpolateInput:a=!1}=n||{};return[{...Pf[t](),...e},{position:i,inputMode:r,isSelection:o,interpolateInput:a}]},Mb=t=>{const e={sharpie:hs("path",{bitmap:!0,strokeJoin:"round",strokeCap:"round",strokeWidth:"0.5%",strokeColor:[...ul],cursorStyle:"ellipse",cursorSize:"strokeWidth",disableErase:!1,disableResize:!0,disableMove:!0},{interpolateInput:!0}),eraser:hs("eraser"),path:hs("path",{pathClose:void 0,strokeWidth:"0.5%",strokeColor:[...ul],backgroundColor:[0,0,0,0]},{inputMode:"step"}),line:hs("line",{strokeColor:[...ul],strokeWidth:"0.5%"}),arrow:hs("line",{lineStart:"none",lineEnd:"arrow-solid",strokeColor:[...ul],strokeWidth:"0.5%"}),rectangle:hs("rectangle",{strokeColor:[...Mf],backgroundColor:[...ul]}),ellipse:hs("ellipse",{strokeColor:[...Mf],backgroundColor:[...ul]}),text:hs("text",{color:[...ul],fontSize:"2%"})};return t&&Object.entries(t).forEach(([n,i])=>{Array.isArray(i)?e[n]=i:Gs(i)&&e[n]&&(e[n]=[{...e[n][0],...i},e[n][1]])}),e},hh=(t,e,n)=>[t,e||ud(t,"shapeLabelTool"),{icon:ud(t,"shapeIconTool"),...n}],tS=(t=["move","view","sharpie","eraser","path","line","arrow","rectangle","ellipse","text","preset"])=>t.map(e=>He(e)?hh(e):Array.isArray(e)?Gs(e[1])?hh(e[0],void 0,e[1]):hh(e[0],e[1],e[2]):void 0).filter(Boolean),eS=t=>Object.keys(t).map(h1(t,"shapeTitleColor")),nS=t=>Object.keys(t).map(h1(t,"labelSize")),iS=t=>Object.keys(t).map(h1(t,"labelSize")),Rf=t=>Object.keys(t).map(h1(t,"labelSize")),rS=t=>[...t],oS=t=>t.map(e=>[e,n=>n["shapeLabelFontStyle"+e.filter(i=>i!=="normal").map(nc).join("")]]),aS=t=>t.map(e=>[xb(e),n=>n["shapeTitleLineDecoration"+nc(e)],{icon:n=>n["shapeIconLineDecoration"+nc(e)]}]),Qa=(t,e)=>{const{defaultKey:n,defaultValue:i,defaultOptions:r}=e||{},o=[];return n&&(o[0]=[i,a=>a[n],{...r}]),[...o,...t]},If=t=>t.split(",").map(e=>e.trim()).some(e=>document.fonts.check("16px "+e)),Ef=(t={})=>["ToggleSlider",{...t}],sS=(t,e={defaultKey:"labelDefault"})=>["Dropdown",{title:n=>n.shapeTitleFontFamily,onload:({options:n=[]})=>{ph()&&n.map(([i])=>i).filter(Boolean).filter(i=>!If(i)).forEach(i=>{const r="PinturaFontTest-"+i.replace(/[^a-zA-Z0-9]+/g,"").toLowerCase();document.getElementById(r)||document.body.append(fi("span",{textContent:" ",id:r,class:"PinturaFontTest",style:`font-family:${i};font-size:0;color:transparent;`}))})},ondestroy:()=>{ph()&&document.querySelectorAll(".PinturaFontTest").forEach(n=>n.remove())},optionLabelStyle:n=>"font-family: "+n,options:Qa(t,e),optionFilter:n=>{if(!ph())return!0;const[i]=n;return i?If(i):!0}}],F0=(t,e={})=>["ColorPicker",{options:Qa(t),...e}],lS=(t,e={})=>F0(t,{title:n=>n.labelColor,...e}),Pb=t=>(e,n={})=>F0(e,{title:i=>i[t],...n}),cS=Pb("shapeTitleBackgroundColor"),dS=Pb("shapeTitleTextColor"),uS=(t,e={})=>F0(t,{title:n=>n.shapeTitleStrokeColor,options:Qa(t),buttonClass:"PinturaColorPickerButtonStroke",onchange:(n,i)=>{const r=i.strokeWidth;(Ne(r)||He(r)?parseFloat(r):0)>0||(i.strokeWidth=e&&e.defaultStrokeWidth||"0.5%")},...e}),Rb=(t,e)=>{const{title:n,optionHideLabel:i=!1,layout:r,optionIcon:o=!1}=e||{},a=Tb(t),s=t.map(([u])=>He(u)?parseFloat(u):u),l=Math.max(...s),c=Math.min(...s),d=l-c;return[r==="radio"?"RadioGroup":"Dropdown",{title:n===!1?void 0:n||(u=>u.shapeTitleStrokeWidth),options:u=>{const p=e?a.map(h=>{const[$,g,f={}]=h,x=He($)?parseFloat($):$,v=(x-c)/d;let w;return o==="line"?w=`<path stroke="currentColor" stroke-linecap="square" stroke-width="${.1+.875*v}em" d="M3,12 H20"/>`:o==="dot"?w=`<circle fill="currentColor" cx="12" cy="12" r="${2+8*v}"/>`:He(o)?w=o:Un(o)&&(w=o(x,v)),[$,g,{icon:w,hideLabel:i,...f}]}):a;return Ae(u,"backgroundColor")?Qa(p,{defaultKey:"shapeLabelStrokeNone"}):Qa(p)},onchange:(u,p)=>{if(!u)return;const h=p.strokeColor||[];if(h[3])return;const $=[...h];$[3]=1,p.strokeColor=$}}]},pS=(t,e)=>{const{title:n,layout:i}=e||{};return[i==="radio"?"RadioGroup":"Dropdown",{title:n,options:Qa(t)}]},Ib=(t,e,n)=>["Dropdown",{title:i=>i[e],options:Qa(t,{defaultKey:"labelNone",defaultOptions:{icon:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H14"/></g>'}}),optionIconStyle:n}],hS=t=>Ib(t,"shapeTitleLineStart","transform: scaleX(-1)"),mS=t=>Ib(t,"shapeTitleLineEnd"),gS=t=>["Dropdown",{title:e=>e.shapeTitleFontStyle,optionLabelStyle:e=>e&&`font-style:${e[0]};font-weight:${e[1]}`,options:Qa(t,{defaultKey:"shapeLabelFontStyleNormal"})}],Eb=t=>["ShorthandControl",t];function $S(t){return function(e){let n=1,i=0;for(;Math.round(e*n)/n!==e&&(n*=10,i++,!(i>10)););return i}(He(t)?parseFloat(t):t)<4}const Ab=(t,e,n,i)=>{i||t.find(([o])=>o===n)||(i={defaultKey:"labelAuto",defaultValue:n});const r=Tb(t);return["Dropdown",{title:e,options:Qa(r,i),formatValue:o=>$S(o)?o:Ne(o)?Math.floor(o):Math.floor(parseFloat(o))+"%",...i}]},fS=(t,e)=>Ab(t,n=>n.shapeTitleFontSize,"4%",e),yS=(t,e)=>Ab(t,n=>n.shapeTitleLineHeight,"120%",e),bS=t=>["RadioGroup",{title:e=>e.shapeTitleTextAlign,options:Qa(t)}],mh={colorOptions:()=>eS({transparent:[1,1,1,0],white:[1,1,1],silver:[.8667,.8667,.8667],gray:[.6667,.6667,.6667],black:[0,0,0],navy:[0,.1216,.2471],blue:[0,.4549,.851],aqua:[.498,.8588,1],teal:[.2235,.8,.8],olive:[.2392,.6,.4392],green:[.1804,.8,.251],yellow:[1,.8627,0],orange:[1,.5216,.1059],red:[1,.2549,.2118],maroon:[.5216,.0784,.2941],fuchsia:[.9412,.0706,.7451],purple:[.6941,.051,.7882]}),lineEndStyleOptions:()=>aS(["bar","arrow","arrowSolid","circle","circleSolid","square","squareSolid"]),fontFamilyOptions:()=>rS([["Helvetica, Arial, Verdana, 'Droid Sans', sans-serif","Sans Serif"],["'Arial Black', 'Avenir-Black', 'Arial Bold'","Black"],["'Arial Narrow', 'Futura-CondensedMedium'","Narrow"],["'Trebuchet MS'","Humanist"],["Georgia, 'Avenir-Black', 'Times New Roman', 'Droid Serif', serif","Serif"],["Palatino","Old-Style"],["'Times New Roman', 'TimesNewRomanPSMT'","Transitional"],["Menlo, Monaco, 'Lucida Console', monospace","Monospaced"],["'Courier New', monospace","Slab Serif"]]),fontStyleOptions:()=>oS([["normal","bold"],["italic","normal"],["italic","bold"]]),textAlignOptions:()=>["left","center","right"].map(t=>[t,e=>e["shapeTitleTextAlign"+nc(t)],{hideLabel:!0,icon:e=>e["shapeIconTextAlign"+nc(t)]}]),strokeWidthOptions:()=>Rf({extraSmall:"0.25%",small:"0.5%",mediumSmall:"1%",medium:"1.75%",mediumLarge:"2.5%",large:"3.5%",extraLarge:"5%"}),brushSizeOptions:()=>Rf(Object.entries({extraSmall:"0.25%",small:"0.5%",mediumSmall:"1%",medium:"1.75%",mediumLarge:"2.5%",large:"3.5%",extraLarge:"5%"}).reduce((t,[e,n])=>(t[e]=2*parseFloat(n)+"%",t),{})),fontSizeOptions:()=>nS({extraSmall:"2%",small:"4%",mediumSmall:"8%",medium:"10%",mediumLarge:"15%",large:"20%",extraLarge:"25%"}),lineHeightOptions:()=>iS({extraSmall:"40%",small:"60%",mediumSmall:"100%",medium:"120%",mediumLarge:"140%",large:"180%",extraLarge:"220%"})},xS=new Intl.NumberFormat("default",{minimumFractionDigits:1,maximumFractionDigits:1}),Lb=(t,e)=>He(e)?t+"%":t,Fb=(t,e,n,i)=>He(i)?Math.round(t/n*100)+"%":""+xS.format(t),gh={getValue:t=>parseFloat(t),setValue:Lb,label:Fb,step:.05,labelClass:"PinturaPercentageLabel"},vS={factory:Eb,options:{title:"Text shadow",controls:[["ToggleSlider","x",{...gh,min:-100,max:100,labelPrefix:"X"}],["ToggleSlider","y",{...gh,min:-100,max:100,labelPrefix:"Y"}],["ToggleSlider","blur",{...gh,min:0,max:25,labelPrefix:t=>t.shapeTitleTextShadowBlur}],["ColorPicker","color",{enablePresets:!1}]]}},Mu={defaultColor:{factory:lS,items:"colorOptions"},defaultNumber:{factory:Ef},defaultPercentage:{factory:Ef,options:{getValue:t=>parseFloat(t),setValue:t=>t+"%",step:.05,label:(t,e,n)=>Math.round(t/n*100)+"%",labelClass:"PinturaPercentageLabel"}},backgroundColor:{items:"colorOptions",factory:cS},strokeColor:{items:"colorOptions",factory:uS},strokeWidth:{items:"strokeWidthOptions",factory:Rb},brushSize:{items:"brushSizeOptions",factory:Qw},drawMode:{factory:Jw},lineStart:{items:"lineEndStyleOptions",factory:hS},lineEnd:{items:"lineEndStyleOptions",factory:mS},color:{items:"colorOptions",factory:dS},fontFamily:{items:"fontFamilyOptions",factory:sS},fontStyle_fontWeight:{items:"fontStyleOptions",factory:gS},fontSize:{items:"fontSizeOptions",factory:fS},lineHeight:{items:"lineHeightOptions",factory:yS},textAlign:{items:"textAlignOptions",factory:bS},textShadowX_textShadowY_textShadowBlur_textShadowColor:vS,textOutlineWidth_textOutlineColor:{factory:Eb,options:{title:"Text outline",controls:[["ToggleSlider","width",{getValue:t=>parseFloat(t),setValue:Lb,label:Fb,min:0,max:15,step:.05,labelClass:"PinturaPercentageLabel",labelPrefix:t=>t.shapeTitleTextOutlineWidth}],["ColorPicker","color",{enablePresets:!1}]]}},cornerRadius:{factory:"defaultPercentage",options:{min:0,max:50,title:t=>t.shapeTitleCornerRadius}},frameColor:{factory:"defaultColor"},frameSize:{factory:"defaultPercentage",options:{min:.2,max:10,title:t=>t.labelSize}},frameInset:{factory:"defaultPercentage",options:{min:.5,max:10,title:t=>t.labelOffset}},frameOffset:{factory:"defaultPercentage",options:{min:.5,max:10,title:t=>t.labelOffset}},frameRadius:{factory:"defaultPercentage",options:{min:.5,max:10,title:t=>t.labelRadius}},frameAmount:{factory:"defaultNumber",options:{min:1,max:5,step:1,title:t=>t.labelAmount}}},zb=(t={})=>{const e={...Mu,...t},n={};return Object.entries(e).forEach(([i,r])=>{if(!/Options$/.test(i))if(Mu[i]&&Gs(r)&&!Ei(r)){const{component:o,factory:a,items:s,options:l={}}=e[i];if(He(a))n[i]=[a,l];else{const c=Mu[i].items;let d=He(c)?e[c]||mh[c]():void 0;He(s)&&mh[s]?d=e[s]?e[s].every(p=>!Array.isArray(p))?e[s].map(p=>[p,p]):e[s]:mh[s]():(s||l.items)&&(d=s||l.items);let u=a||Mu[i].factory;Un(u)?n[i]=d?u(d,l):u(l):o&&(n[i]=[o,{...l,items:s}])}}else n[i]=r}),n};function wS(t){let e,n,i,r,o;const a=t[7].default,s=yr(a,t,t[6],null);return{c(){e=$t("div"),n=$t("div"),s&&s.c(),S(n,"class","PinturaToolbarInner"),S(e,"class","PinturaToolbar"),S(e,"data-layout",t[1]),S(e,"data-overflow",t[0])},m(l,c){tt(l,e,c),At(e,n),s&&s.m(n,null),i=!0,r||(o=[Mt(n,"measure",t[3]),Tn(Fr.call(null,n)),Mt(e,"measure",t[2]),Tn(Fr.call(null,e))],r=!0)},p(l,[c]){s&&s.p&&(!i||64&c)&&xr(s,a,l,l[6],i?br(a,l[6],c,null):vr(l[6]),null),(!i||2&c)&&S(e,"data-layout",l[1]),(!i||1&c)&&S(e,"data-overflow",l[0])},i(l){i||(R(s,l),i=!0)},o(l){B(s,l),i=!1},d(l){l&&J(e),s&&s.d(l),r=!1,Gn(o)}}}function SS(t,e,n){let i,r,{$$slots:o={},$$scope:a}=e,s=0,l=0,c=0;const d=()=>{n(0,r=i==="compact"&&s>c?"overflow":void 0)};return t.$$set=u=>{"$$scope"in u&&n(6,a=u.$$scope)},t.$$.update=()=>{48&t.$$.dirty&&n(1,i=l>c?"compact":"default")},[r,i,({detail:u})=>{const{width:p}=u;n(5,c=p),d()},({detail:u})=>{const{width:p}=u;p>l&&n(4,l=p),s=p,r||d()},l,c,a,o]}class Db extends fn{constructor(e){super(),$n(this,e,SS,wS,dn,{})}}function kS(t){let e,n,i,r;const o=t[5].default,a=yr(o,t,t[4],null);return{c(){e=$t("div"),a&&a.c(),S(e,"class",t[0])},m(s,l){tt(s,e,l),a&&a.m(e,null),n=!0,i||(r=[Mt(e,"measure",function(){Cn(t[1]&&t[3])&&(t[1]&&t[3]).apply(this,arguments)}),Tn(t[2].call(null,e))],i=!0)},p(s,[l]){t=s,a&&a.p&&(!n||16&l)&&xr(a,o,t,t[4],n?br(o,t[4],l,null):vr(t[4]),null),(!n||1&l)&&S(e,"class",t[0])},i(s){n||(R(a,s),n=!0)},o(s){B(a,s),n=!1},d(s){s&&J(e),a&&a.d(s),i=!1,Gn(r)}}}function CS(t,e,n){let{$$slots:i={},$$scope:r}=e;const o=Ta();let{class:a=null}=e;const s=mi("measurable");let l=!1;return bs(()=>n(1,l=!0)),t.$$set=c=>{"class"in c&&n(0,a=c.class),"$$scope"in c&&n(4,r=c.$$scope)},[a,l,s,({detail:c})=>o("measure",c),r,i]}class TS extends fn{constructor(e){super(),$n(this,e,CS,kS,dn,{class:0})}}const MS=t=>({}),Af=t=>({}),PS=t=>({}),Lf=t=>({}),RS=t=>({}),Ff=t=>({});function zf(t){let e,n;const i=t[4].header,r=yr(i,t,t[3],Ff);return{c(){e=$t("div"),r&&r.c(),S(e,"class","PinturaUtilHeader")},m(o,a){tt(o,e,a),r&&r.m(e,null),n=!0},p(o,a){r&&r.p&&(!n||8&a)&&xr(r,i,o,o[3],n?br(i,o[3],a,RS):vr(o[3]),Ff)},i(o){n||(R(r,o),n=!0)},o(o){B(r,o),n=!1},d(o){o&&J(e),r&&r.d(o)}}}function Df(t){let e,n;const i=t[4].footer,r=yr(i,t,t[3],Af);return{c(){e=$t("div"),r&&r.c(),S(e,"class","PinturaUtilFooter")},m(o,a){tt(o,e,a),r&&r.m(e,null),n=!0},p(o,a){r&&r.p&&(!n||8&a)&&xr(r,i,o,o[3],n?br(i,o[3],a,MS):vr(o[3]),Af)},i(o){n||(R(r,o),n=!0)},o(o){B(r,o),n=!1},d(o){o&&J(e),r&&r.d(o)}}}function IS(t){let e,n,i,r,o,a,s=t[1]&&zf(t);const l=t[4].main,c=yr(l,t,t[3],Lf),d=c||function(p){let h,$;return h=new TS({props:{class:"PinturaStage"}}),h.$on("measure",p[5]),{c(){Wt(h.$$.fragment)},m(g,f){Bt(h,g,f),$=!0},p:Ke,i(g){$||(R(h.$$.fragment,g),$=!0)},o(g){B(h.$$.fragment,g),$=!1},d(g){Ot(h,g)}}}(t);let u=t[2]&&Df(t);return{c(){s&&s.c(),e=ce(),n=$t("div"),d&&d.c(),i=ce(),u&&u.c(),r=ce(),o=Di(),S(n,"class","PinturaUtilMain")},m(p,h){s&&s.m(p,h),tt(p,e,h),tt(p,n,h),d&&d.m(n,null),t[6](n),tt(p,i,h),u&&u.m(p,h),tt(p,r,h),tt(p,o,h),a=!0},p(p,[h]){p[1]?s?(s.p(p,h),2&h&&R(s,1)):(s=zf(p),s.c(),R(s,1),s.m(e.parentNode,e)):s&&(Le(),B(s,1,1,()=>{s=null}),Fe()),c&&c.p&&(!a||8&h)&&xr(c,l,p,p[3],a?br(l,p[3],h,PS):vr(p[3]),Lf),p[2]?u?(u.p(p,h),4&h&&R(u,1)):(u=Df(p),u.c(),R(u,1),u.m(r.parentNode,r)):u&&(Le(),B(u,1,1,()=>{u=null}),Fe())},i(p){a||(R(s),R(d,p),R(u),R(!1),a=!0)},o(p){B(s),B(d,p),B(u),B(!1),a=!1},d(p){s&&s.d(p),p&&J(e),p&&J(n),d&&d.d(p),t[6](null),p&&J(i),u&&u.d(p),p&&J(r),p&&J(o)}}}function ES(t,e,n){let{$$slots:i={},$$scope:r}=e,{hasHeader:o=!!e.$$slots.header}=e,{hasFooter:a=!!e.$$slots.footer}=e,{root:s}=e;return t.$$set=l=>{n(7,e=Oi(Oi({},e),ad(l))),"hasHeader"in l&&n(1,o=l.hasHeader),"hasFooter"in l&&n(2,a=l.hasFooter),"root"in l&&n(0,s=l.root),"$$scope"in l&&n(3,r=l.$$scope)},e=ad(e),[s,o,a,r,i,function(l){qr.call(this,t,l)},function(l){Hn[l?"unshift":"push"](()=>{s=l,n(0,s)})}]}class wl extends fn{constructor(e){super(),$n(this,e,ES,IS,dn,{hasHeader:1,hasFooter:2,root:0})}}function Bf(t){let e;return{c(){e=$t("div"),S(e,"class","PinturaRangeInputMeter"),Tt(e,"transform",`translateX(${t[10].x-t[13].x}px) translateY(${t[10].y-t[13].y}px)`)},m(n,i){tt(n,e,i),e.innerHTML=t[7]},p(n,i){128&i[0]&&(e.innerHTML=n[7]),1024&i[0]&&Tt(e,"transform",`translateX(${n[10].x-n[13].x}px) translateY(${n[10].y-n[13].y}px)`)},d(n){n&&J(e)}}}function AS(t){let e,n,i,r,o,a,s,l,c,d,u,p=t[10]&&Bf(t);return{c(){e=$t("div"),n=$t("span"),i=ce(),r=$t("button"),o=Ti(t[1]),s=ce(),l=$t("div"),p&&p.c(),S(n,"class","PinturaRangeInputValue"),S(r,"class","PinturaRangeInputReset"),S(r,"type","button"),r.disabled=a=t[0]===t[2],S(l,"class","PinturaRangeInputInner"),S(l,"data-value-limited",t[5]),Tt(l,"--range-mask-from",t[9]),Tt(l,"--range-mask-to",t[8]),S(e,"class","PinturaRangeInput"),S(e,"tabindex","0")},m(h,$){tt(h,e,$),At(e,n),n.innerHTML=t[3],At(e,i),At(e,r),At(r,o),At(e,s),At(e,l),p&&p.m(l,null),d||(u=[Mt(r,"click",t[18]),Mt(l,"interactionstart",t[14]),Mt(l,"interactionupdate",t[16]),Mt(l,"interactionend",t[17]),Mt(l,"interactionrelease",t[15]),Tn(c=ks.call(null,l,{inertia:t[6]})),Mt(l,"measure",t[39]),Tn(Fr.call(null,l)),Mt(e,"wheel",t[20],{passive:!1}),Mt(e,"nudge",t[21]),Tn(ws.call(null,e,{direction:"horizontal",preventDefault:!0}))],d=!0)},p(h,$){8&$[0]&&(n.innerHTML=h[3]),2&$[0]&&Yi(o,h[1]),5&$[0]&&a!==(a=h[0]===h[2])&&(r.disabled=a),h[10]?p?p.p(h,$):(p=Bf(h),p.c(),p.m(l,null)):p&&(p.d(1),p=null),32&$[0]&&S(l,"data-value-limited",h[5]),c&&Cn(c.update)&&64&$[0]&&c.update.call(null,{inertia:h[6]}),512&$[0]&&Tt(l,"--range-mask-from",h[9]),256&$[0]&&Tt(l,"--range-mask-to",h[8])},i:Ke,o:Ke,d(h){h&&J(e),p&&p.d(),d=!1,Gn(u)}}}function LS(t,e,n){let i,r,o,a,s,l,c,d,u,p,h,$,{labelReset:g="Reset"}=e,{direction:f="x"}=e,{min:x=0}=e,{max:v=1}=e,{base:w=x}=e,{value:T=0}=e,{valueLabel:I=0}=e,{valueMin:M}=e,{valueMax:F}=e,{oninputstart:C=pe}=e,{oninputmove:z=pe}=e,{oninputend:j=pe}=e,{elasticity:A=0}=e,{nudgeMultiplier:y}=e,{step:st=8}=e;const G=mi("isAnimated");D(t,G,dt=>n(6,p=dt));const k=mi("fixScrollDirection");D(t,k,dt=>n(45,h=dt));const H=(dt,Ht,it)=>Math.ceil((dt-it)/Ht)*Ht+it;let rt,gt,ct;const V={x:2,y:0},N=(dt,Ht,it)=>`M ${dt-it} ${Ht} a ${it} ${it} 0 1 0 0 -1`;let kt,bt,et=!1,Pt={snap:!1,elastic:!1};const wt=(dt,Ht,it)=>{const Vt=dt[f]+Ht[f],Dt=di(Vt,kt[1][f],kt[0][f]),Zt=A?Dt+Fs(Vt-Dt,A):Dt,mt=it.elastic?Zt:Dt,Ft=ut(0,0);return Ft[f]=mt,Q.set(Ft,{hard:it.snap}),di(lt(Ft,f),x,v)},Q=mn();D(t,Q,dt=>n(10,$=dt));const Ut=(dt,Ht)=>{const it=.5*(rt[Ht]-a[Ht])-(qc(dt,x,v)*a[Ht]-.5*a[Ht]);return{x:Ht==="x"?it:0,y:Ht==="y"?it:0}},lt=(dt,Ht)=>{const it=-(dt[Ht]-.5*rt[Ht])/a[Ht];return x+it*i},q=Q.subscribe(dt=>{dt&&bt&&z(di(lt(dt,f),x,v))}),vt=dt=>{const Ht=[Ut(M??x,f),Ut(F??v,f)],it={x:f==="x"?$.x+dt:0,y:f==="y"?$.y+dt:0},Vt=di(it[f],Ht[1][f],Ht[0][f]),Dt={...$,[f]:Vt};It(Q,$=Dt,$);const Zt=di(lt(Dt,f),x,v);C(),z(Zt),j(Zt)};return Xo(()=>{q()}),t.$$set=dt=>{"labelReset"in dt&&n(1,g=dt.labelReset),"direction"in dt&&n(22,f=dt.direction),"min"in dt&&n(23,x=dt.min),"max"in dt&&n(24,v=dt.max),"base"in dt&&n(2,w=dt.base),"value"in dt&&n(0,T=dt.value),"valueLabel"in dt&&n(3,I=dt.valueLabel),"valueMin"in dt&&n(25,M=dt.valueMin),"valueMax"in dt&&n(26,F=dt.valueMax),"oninputstart"in dt&&n(27,C=dt.oninputstart),"oninputmove"in dt&&n(28,z=dt.oninputmove),"oninputend"in dt&&n(29,j=dt.oninputend),"elasticity"in dt&&n(30,A=dt.elasticity),"nudgeMultiplier"in dt&&n(31,y=dt.nudgeMultiplier),"step"in dt&&n(32,st=dt.step)},t.$$.update=()=>{if(25165824&t.$$.dirty[0]&&n(34,i=v-x),41943040&t.$$.dirty[0]&&n(36,r=M!=null?Math.max(M,x):x),83886080&t.$$.dirty[0]&&n(35,o=F!=null?Math.min(F,v):v),25165828&t.$$.dirty[0]&&n(38,s=qc(w,x,v)),16&t.$$.dirty[0]|128&t.$$.dirty[1]&&rt){const dt=.5*rt.y;let Ht,it=40*s,Vt="",Dt=rt.y,Zt="";for(let mt=0;mt<=40;mt++){const Ft=V.x+10*mt,ht=dt;Vt+=N(Ft,ht,mt%5==0?2:.75)+" ",Ht=Ft+V.x,mt===it&&(Zt=`<path d="M${Ft} ${ht-4} l2 3 l-2 -1 l-2 1 z"/>`)}n(7,gt=`<svg width="${Ht}" height="${Dt}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${Ht} ${Dt}" aria-hidden="true" focusable="false">
        ${Zt}
        <rect rx="4" ry="4" y="${dt-4}"" height="8"/>
        <path fill-rule="evenodd" d="${Vt.trim()}"/></svg>`),n(33,ct={x:Ht-2*V.x,y:Dt})}16&t.$$.dirty[0]|4&t.$$.dirty[1]&&(a=rt&&ct),25165824&t.$$.dirty[0]|48&t.$$.dirty[1]&&n(5,l=r!==x||o!==v),32&t.$$.dirty[0]|48&t.$$.dirty[1]&&n(37,c=l?function(dt,Ht){const Vt=qc(dt,x,v),Dt=qc(Ht,x,v);return[100*gn(H(Vt,.025,0)-.0125)+"%",100*gn(H(Dt,.025,0)-.0125)+"%"]}(r,o):void 0),64&t.$$.dirty[1]&&n(9,d=c?c[0]:""),64&t.$$.dirty[1]&&n(8,u=c?c[1]:""),4194385&t.$$.dirty[0]|8&t.$$.dirty[1]&&i&&rt&&rt.x&&rt.y&&Q.set(Ut(T,f),{hard:p===!1})},[T,g,w,I,rt,l,p,gt,u,d,$,G,k,V,()=>{et=!1,bt=Ba(Q),kt=[Ut(M??x,f),Ut(F??v,f)],C()},()=>{et=!0},({detail:dt})=>{Pt.snap=!et,Pt.elastic=!et,wt(bt,dt.translation,Pt)},({detail:dt})=>{Pt.snap=!1,Pt.elastic=!1;const Ht=wt(bt,dt.translation,Pt);if(bt=void 0,kt=void 0,Math.abs(Ht-w)<.01)return j(w);j(Ht)},()=>{n(0,T=di(w,r,o)),C(),j(T)},Q,dt=>{dt.preventDefault(),dt.stopPropagation();const Ht=p1(dt,{fixScrollDirection:h})*st;vt(Ht)},({detail:dt})=>{vt(dt[f]*Math.abs(y||8))},f,x,v,M,F,C,z,j,A,y,st,ct,i,o,r,c,s,dt=>n(4,rt=(Ht=>ut(Ht.width,Ht.height))(dt.detail))]}class z0 extends fn{constructor(e){super(),$n(this,e,LS,AS,dn,{labelReset:1,direction:22,min:23,max:24,base:2,value:0,valueLabel:3,valueMin:25,valueMax:26,oninputstart:27,oninputmove:28,oninputend:29,elasticity:30,nudgeMultiplier:31,step:32},null,[-1,-1])}}var FS={[Vs]:t=>({x:t.x,y:t.y}),[va]:t=>({x:t.x+t.width,y:t.y}),[Ns]:t=>({x:t.x+t.width,y:t.y}),[wa]:t=>({x:t.x+t.width,y:t.y+t.height}),[Hs]:t=>({x:t.x,y:t.y+t.height}),[Sa]:t=>({x:t.x,y:t.y+t.height}),[js]:t=>({x:t.x,y:t.y}),[xa]:t=>({x:t.x,y:t.y})};const Bb={t:"top",r:"right",b:"bottom",l:"left"},Ob={t:"vertical",b:"vertical",r:"horizontal",l:"horizontal"};function Of(t,e,n){const i=t.slice();return i[15]=e[n].key,i[16]=e[n].translate,i[17]=e[n].scale,i[18]=e[n].type,i[19]=e[n].opacity,i[20]=e[n].role,i[21]=e[n].tabindex,i[22]=e[n].label,i[23]=e[n].orientation,i[24]=e[n].valuemin,i[25]=e[n].valuemax,i[26]=e[n].valuenow,i}function Wf(t,e){let n,i,r,o,a,s,l,c,d,u,p,h;return{key:t,first:null,c(){n=$t("div"),S(n,"role",i=e[20]),S(n,"tabindex",r=e[21]),S(n,"aria-label",o=e[22]),S(n,"aria-orientation",a=e[23]),S(n,"aria-valuemin",s=e[24]),S(n,"aria-valuemax",l=e[25]),S(n,"aria-valuenow",c=e[26]),S(n,"class","PinturaRectManipulator"),S(n,"data-direction",d=e[15]),S(n,"data-shape",u=e[18]==="edge"?"edge":""+e[0]),Tt(n,"--tx",e[16].x),Tt(n,"--ty",e[16].y),Tt(n,"--sx",e[17].x),Tt(n,"--sy",e[17].y),Tt(n,"opacity",e[19]),this.first=n},m($,g){tt($,n,g),p||(h=[Mt(n,"nudge",function(){Cn(e[6](e[15]))&&e[6](e[15]).apply(this,arguments)}),Tn(ws.call(null,n,{preventDefault:!0})),Mt(n,"interactionstart",function(){Cn(e[5]("resizestart",e[15]))&&e[5]("resizestart",e[15]).apply(this,arguments)}),Mt(n,"interactionupdate",function(){Cn(e[5]("resizemove",e[15]))&&e[5]("resizemove",e[15]).apply(this,arguments)}),Mt(n,"interactionend",function(){Cn(e[5]("resizeend",e[15]))&&e[5]("resizeend",e[15]).apply(this,arguments)}),Tn(ks.call(null,n))],p=!0)},p($,g){e=$,2&g&&i!==(i=e[20])&&S(n,"role",i),2&g&&r!==(r=e[21])&&S(n,"tabindex",r),2&g&&o!==(o=e[22])&&S(n,"aria-label",o),2&g&&a!==(a=e[23])&&S(n,"aria-orientation",a),2&g&&s!==(s=e[24])&&S(n,"aria-valuemin",s),2&g&&l!==(l=e[25])&&S(n,"aria-valuemax",l),2&g&&c!==(c=e[26])&&S(n,"aria-valuenow",c),2&g&&d!==(d=e[15])&&S(n,"data-direction",d),3&g&&u!==(u=e[18]==="edge"?"edge":""+e[0])&&S(n,"data-shape",u),2&g&&Tt(n,"--tx",e[16].x),2&g&&Tt(n,"--ty",e[16].y),2&g&&Tt(n,"--sx",e[17].x),2&g&&Tt(n,"--sy",e[17].y),2&g&&Tt(n,"opacity",e[19])},d($){$&&J(n),p=!1,Gn(h)}}}function zS(t){let e,n=[],i=new Map,r=t[1];const o=a=>a[15];for(let a=0;a<r.length;a+=1){let s=Of(t,r,a),l=o(s);i.set(l,n[a]=Wf(l,s))}return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=Di()},m(a,s){for(let l=0;l<n.length;l+=1)n[l].m(a,s);tt(a,e,s)},p(a,[s]){99&s&&(r=a[1],n=es(n,s,o,1,a,r,i,e.parentNode,Fy,Wf,e,Of))},i:Ke,o:Ke,d(a){for(let s=0;s<n.length;s+=1)n[s].d(a);a&&J(e)}}}function DS(t,e,n){let i,r,o,a,{rect:s=null}=e,{bounds:l=null}=e,{visible:c=!1}=e,{cornerStyle:d}=e;const u=mi("isAnimated");D(t,u,f=>n(12,a=f));const p=mn(void 0,{precision:1e-4,stiffness:.2,damping:.4});D(t,p,f=>n(11,o=f));const h=mn(0,{precision:.001});let $;D(t,h,f=>n(10,r=f));const g=Ta();return t.$$set=f=>{"rect"in f&&n(7,s=f.rect),"bounds"in f&&n(8,l=f.bounds),"visible"in f&&n(9,c=f.visible),"cornerStyle"in f&&n(0,d=f.cornerStyle)},t.$$.update=()=>{4608&t.$$.dirty&&p.set(c?1:.5,{hard:a===!1}),4608&t.$$.dirty&&h.set(c?1:0,{hard:a===!1}),3456&t.$$.dirty&&n(1,i=Object.keys(yh).map((f,x)=>{const v=yh[f],w=FS[v](s),T=v.length===1?"edge":"corner",I=T==="corner";let M;if(T==="edge"&&l){let F,C,z;v==="l"&&(F=l.x,C=Math.min(l.width,s.x+s.width),z=s.x),v==="t"&&(F=l.y,C=Math.min(l.height,s.y+s.height),z=s.y),v==="r"&&(F=s.x,C=l.width,z=s.x+s.width),v==="b"&&(F=s.y,C=l.height,z=s.y+s.height),M={role:"slider",tabindex:0,label:"Drag "+Bb[v],orientation:""+Ob[v],valuemin:Math.round(F),valuemax:Math.round(C),valuenow:Math.round(z)}}return{key:v,type:T,scale:{x:/^(t|b)$/.test(v)?s.width:I?di(o,.5,1.25):1,y:/^(r|l)$/.test(v)?s.height:I?di(o,.5,1.25):1},translate:{x:w.x,y:w.y},opacity:r,...M}}))},[d,i,u,p,h,(f,x)=>({detail:v})=>{$&&x!==$||f!=="resizestart"&&$===void 0||(f==="resizestart"&&($=x),f==="resizeend"&&($=void 0),g(f,{direction:x,translation:v&&v.translation}))},f=>({detail:x})=>{g("resizestart",{direction:f,translation:{x:0,y:0}}),g("resizemove",{direction:f,translation:x}),g("resizeend",{direction:f,translation:{x:0,y:0}})},s,l,c,r,o,a]}class BS extends fn{constructor(e){super(),$n(this,e,DS,zS,dn,{rect:7,bounds:8,visible:9,cornerStyle:0})}}var OS=t=>{function e(a,s){t.dispatchEvent(new CustomEvent(a,{detail:s}))}const n=a=>{a.preventDefault(),t.addEventListener("gesturechange",i),t.addEventListener("gestureend",r),e("gesturedown")},i=a=>{a.preventDefault(),e("gestureupdate",a.scale)},r=a=>{e("gestureup",a.scale),a.preventDefault(),o()},o=()=>{t.removeEventListener("gesturechange",i),t.removeEventListener("gestureend",r)};return t.addEventListener("gesturestart",n),{destroy:()=>{o(),t.removeEventListener("gesturestart",n)}}},D0={[Vs]:Hs,[Ns]:js,[Hs]:Vs,[js]:Ns,[xa]:wa,[va]:Sa,[wa]:xa,[Sa]:va},B0=t=>{const e=t===js||t===Ns,n=t===Vs||t===Hs;return[t===Ns||t===va||t===wa,t===js||t===Sa||t===xa,t===Vs||t===va||t===xa,t===Hs||t===wa||t===Sa,e,n,e||n]},_f=(t,e,n,i={})=>{const{target:r,translate:o}=e,{aspectRatio:a,minSize:s,maxSize:l}=i,c=nd[D0[r]],d=Zi(ut(t.x,t.y),ut(c[0]*t.width,c[1]*t.height)),u=nd[r],p=Zi(An(t),ut(u[0]*t.width,u[1]*t.height)),[h,$,g,f,x,v,w]=B0(r);let T=o.x,I=o.y;x?I=0:v&&(T=0);const{inner:M,outer:F}=WS(d,r,n,{aspectRatio:a,minSize:s,maxSize:l});let[C,z,j,A]=bl(t);if(h?A=d.x:$&&(z=d.x),f?C=d.y:g&&(j=d.y),h){const y=M.x+M.width,st=F.x+F.width;z=di(p.x+T,y,st)}else if($){const y=F.x,st=M.x;A=di(p.x+T,y,st)}if(f){const y=M.y+M.height,st=F.y+F.height;j=di(p.y+I,y,st)}else if(g){const y=F.y,st=M.y;C=di(p.y+I,y,st)}if(A>M.x&&(A=M.x),z<M.x+M.width&&(z=M.x+M.width),C>M.y&&(C=M.y),j<M.y+M.height&&(j=M.y+M.height),A<F.x){const y=F.x-A;A=F.x,z+=y}if(z>F.x+F.width){const y=z-(F.x+F.width);z=F.x+F.width,A-=y}if(C<F.y){const y=F.y-C;C=F.y,j+=y}if(j>F.y+F.height){const y=j-(F.y+F.height);j=F.y+F.height,C-=y}if(a)if(w){let y=z-A,st=j-C;x?(st=y/a,C=d.y-.5*st,j=d.y+.5*st):v&&(y=st*a,A=d.x-.5*y,z=d.x+.5*y)}else{const y=ut(p.x+T-d.x,p.y+I-d.y);r===va?(y.x=Math.max(0,y.x),y.y=Math.min(0,y.y)):r===wa?(y.x=Math.max(0,y.x),y.y=Math.max(0,y.y)):r===Sa?(y.x=Math.min(0,y.x),y.y=Math.max(0,y.y)):r===xa&&(y.x=Math.min(0,y.x),y.y=Math.min(0,y.y));const st=zs(y),G=zs(ut(M.width,M.height)),k=zs(ut(F.width,F.height)),H=di(st,G,k),rt=ut(a,1),gt=Vr(yo(rt),H);r===va?(z=d.x+gt.x,C=d.y-gt.y):r===wa?(z=d.x+gt.x,j=d.y+gt.y):r===Sa?(A=d.x-gt.x,j=d.y+gt.y):r===xa&&(A=d.x-gt.x,C=d.y-gt.y)}return Ui(A,C,z-A,j-C)};const WS=(t,e,n,i)=>{const{aspectRatio:r,minSize:o,maxSize:a}=i,s=e===Ns||e===va||e===wa,l=e===js||e===Sa||e===xa,c=e===Vs||e===va||e===xa,d=e===Hs||e===wa||e===Sa,u=e===js||e===Ns,p=e===Vs||e===Hs,h=An(n);s?(h.x=t.x,h.width-=t.x):l&&(h.width=t.x),d?(h.y=t.y,h.height-=t.y):c&&(h.height=t.y);const $=((M,F)=>Ca(0,0,M,F))(Math.min(h.width,a.width),Math.min(h.height,a.height));if(r){if(u){const M=Math.min(t.y,n.height-t.y);$.height=Math.min(2*M,$.height)}else if(p){const M=Math.min(t.x,n.width-t.x);$.width=Math.min(2*M,$.width)}}const g=r?yl(fs(Yr(o),r)):o,f=r?yl(oo($,r)):$;let x,v,w,T;s?x=t.x:l&&(v=t.x),d?w=t.y:c&&(T=t.y),s?v=x+g.width:l&&(x=v-g.width),d?T=w+g.height:c&&(w=T-g.height),u?(w=t.y-.5*g.height,T=t.y+.5*g.height):p&&(x=t.x-.5*g.width,v=t.x+.5*g.width);const I=ur([ut(x,w),ut(v,T)]);return s?v=x+f.width:l&&(x=v-f.width),d?T=w+f.height:c&&(w=T-f.height),u?(w=t.y-.5*f.height,T=t.y+.5*f.height):p&&(x=t.x-.5*f.width,v=t.x+.5*f.width),x=Math.max(n.x,x),v=Math.min(n.x+n.width,v),w=Math.max(n.y,w),T=Math.min(n.y+n.height,T),{inner:I,outer:ur([ut(x,w),ut(v,T)])}};var Vf=t=>180*t/Math.PI;function _S(t){let e,n,i;return n=new z0({props:{elasticity:t[5],min:t[9],max:t[10],value:t[11],valueMin:Math.max(t[9],t[0]),valueMax:Math.min(t[10],t[1]),labelReset:t[6],base:t[12],valueLabel:Math.round(Vf(t[11]))+"&deg;",oninputstart:t[2],oninputmove:t[17],oninputend:t[18]}}),{c(){e=$t("div"),Wt(n.$$.fragment),S(e,"class","PinturaImageRotator")},m(r,o){tt(r,e,o),Bt(n,e,null),i=!0},p(r,[o]){const a={};32&o&&(a.elasticity=r[5]),512&o&&(a.min=r[9]),1024&o&&(a.max=r[10]),2048&o&&(a.value=r[11]),513&o&&(a.valueMin=Math.max(r[9],r[0])),1026&o&&(a.valueMax=Math.min(r[10],r[1])),64&o&&(a.labelReset=r[6]),4096&o&&(a.base=r[12]),2048&o&&(a.valueLabel=Math.round(Vf(r[11]))+"&deg;"),4&o&&(a.oninputstart=r[2]),392&o&&(a.oninputmove=r[17]),400&o&&(a.oninputend=r[18]),n.$set(a)},i(r){i||(R(n.$$.fragment,r),i=!0)},o(r){B(n.$$.fragment,r),i=!1},d(r){r&&J(e),Ot(n)}}}function VS(t,e,n){let i,r,o,a,s,l,c,{rotation:d}=e,{valueMin:u}=e,{valueMax:p}=e,{oninputstart:h=pe}=e,{oninputmove:$=pe}=e,{oninputend:g=pe}=e,{elasticity:f=0}=e,{labelReset:x}=e,{rotationMin:v}=e,{rotationMax:w}=e;return t.$$set=T=>{"rotation"in T&&n(13,d=T.rotation),"valueMin"in T&&n(0,u=T.valueMin),"valueMax"in T&&n(1,p=T.valueMax),"oninputstart"in T&&n(2,h=T.oninputstart),"oninputmove"in T&&n(3,$=T.oninputmove),"oninputend"in T&&n(4,g=T.oninputend),"elasticity"in T&&n(5,f=T.elasticity),"labelReset"in T&&n(6,x=T.labelReset),"rotationMin"in T&&n(14,v=T.rotationMin),"rotationMax"in T&&n(15,w=T.rotationMax)},t.$$.update=()=>{16384&t.$$.dirty&&n(9,i=v+1e-9),32768&t.$$.dirty&&n(10,r=w-1e-9),1536&t.$$.dirty&&n(12,o=i+.5*(r-i)),32768&t.$$.dirty&&n(16,a=2*w),8192&t.$$.dirty&&n(8,s=Math.sign(d)),73728&t.$$.dirty&&n(7,l=Math.round(Math.abs(d)/a)*a),8576&t.$$.dirty&&n(11,c=d-s*l)},[u,p,h,$,g,f,x,l,s,i,r,c,o,d,v,w,a,T=>$(s*l+T),T=>g(s*l+T)]}class NS extends fn{constructor(e){super(),$n(this,e,VS,_S,dn,{rotation:13,valueMin:0,valueMax:1,oninputstart:2,oninputmove:3,oninputend:4,elasticity:5,labelReset:6,rotationMin:14,rotationMax:15})}}function HS(t){let e,n;return e=new vs({props:{class:"PinturaPresetListFilter",layout:"row",options:t[8],selectedIndex:t[7],onchange:t[10]}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};256&r&&(o.options=i[8]),128&r&&(o.selectedIndex=i[7]),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function jS(t){let e,n;return e=new I0({props:{icon:t[0],label:t[1],labelClass:t[2],hideLabel:t[3],options:t[9],selectedIndex:t[4],onchange:t[5],optionMapper:t[6],$$slots:{controls:[HS]},$$scope:{ctx:t}}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,[r]){const o={};1&r&&(o.icon=i[0]),2&r&&(o.label=i[1]),4&r&&(o.labelClass=i[2]),8&r&&(o.hideLabel=i[3]),512&r&&(o.options=i[9]),16&r&&(o.selectedIndex=i[4]),32&r&&(o.onchange=i[5]),64&r&&(o.optionMapper=i[6]),262528&r&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}const Nf='fill="none" stroke="currentColor"';function US(t,e,n){let i,r,o,{icon:a}=e,{label:s}=e,{labelClass:l}=e,{hideLabel:c}=e,{options:d}=e,{selectedIndex:u}=e,{onchange:p}=e,{optionMapper:h}=e,{filter:$="landscape"}=e,{onfilterchange:g=pe}=e;const f=(v,w,T,I,M)=>`
    <rect ${Nf} x="${v}" y="${w}" width="${T}" height="${I}" rx="${M}"/>`,x=(v,w)=>`<path ${Nf} d="M${v} ${w} l2 2 l3 -4"/>`;return t.$$set=v=>{"icon"in v&&n(0,a=v.icon),"label"in v&&n(1,s=v.label),"labelClass"in v&&n(2,l=v.labelClass),"hideLabel"in v&&n(3,c=v.hideLabel),"options"in v&&n(12,d=v.options),"selectedIndex"in v&&n(4,u=v.selectedIndex),"onchange"in v&&n(5,p=v.onchange),"optionMapper"in v&&n(6,h=v.optionMapper),"filter"in v&&n(11,$=v.filter),"onfilterchange"in v&&n(13,g=v.onfilterchange)},t.$$.update=()=>{6144&t.$$.dirty&&n(9,i=((v,w)=>(v||[]).map(T=>He(T[0])?(T[1]=T[1].map(w),T):w(T)))(d,(v=>w=>{const[T,I,M={}]=w;return Ne(T)&&(M.hidden=v==="landscape"?T<1:T>1),[T,I,M]})($))),2048&t.$$.dirty&&n(7,r=$==="landscape"?0:1),128&t.$$.dirty&&n(8,o=[["landscape","Landscape",{hideLabel:!0,icon:f(2,6,19,12,2)+(r===0?x(9,12):"")}],["portrait","Portrait",{hideLabel:!0,icon:f(5,3,13,18,2)+(r===1?x(9,12):"")}]])},[a,s,l,c,u,p,h,r,o,i,v=>{n(11,$=v.value),g(v.value)},$,d,g]}class GS extends fn{constructor(e){super(),$n(this,e,US,jS,dn,{icon:0,label:1,labelClass:2,hideLabel:3,options:12,selectedIndex:4,onchange:5,optionMapper:6,filter:11,onfilterchange:13})}}const Hf=t=>jo(t,e=>gn(e,6)),jf=t=>aa(t,e=>gn(e,6)),Es=(t,e,n=1e-4)=>Math.abs(t-e)<n;var ZS=(t,e,n,i,r={})=>{const{aspectRatio:o}=r;t=jf(t),i=i.map(Hf);const a=tg(t,D0[n.target]),s=jo(a,x=>gn(x,6)),l=o?fs(r.minSize,o):r.minSize,c=o?oo(r.maxSize,o):r.maxSize,d=tg(e,n.target);if(ro(d,a)<1){e=An(t);const x=Math.min(l.width/t.width,l.height/t.height);_r(e,x,a)}e=Qm(An(e),l,c,a);let u=An(e);e=jf(e);const p=Z2(i,1),h=No(t),$=No(e),g=h.findIndex(x=>Ls(jo(x,v=>gn(v,6)),s)),f=x=>p.map(v=>e0(v,x)).filter(Boolean).pop();if(o){const x=$.map((v,w)=>{if(w===g)return;const T=ut(a.x-v.x,a.y-v.y);yo(T),Vr(T,.5);const I=ut(a.x-T.x,a.y-T.y),M=Us(I,Hf(v)),F=f(M);if(!F)return;const C=h[w];return{intersection:F,cornerDist:ro(a,C),intersectionDist:ro(a,F)}}).filter(Boolean);if(x.length){const v=x.reduce((w,T)=>{const I=T.intersectionDist/T.cornerDist;return I<w?I:w},Number.MAX_SAFE_INTEGER);u=An(t),_r(u,v,a)}}else{const x=n.target.length===1,v=!(i[0].y===i[1].y||i[0].x===i[1].x),w=h.map((T,I)=>{if(I===g)return;const M=$[I],F=!Es(M.x,s.x)&&!Es(M.y,s.y);if(!x&&!v&&F||x&&(Es(M.x,s.x)||Es(M.y,s.y)))return;const C=Ve(x?T:a),z=Xi(Ve(C),M);yo(z),Vr(z,.5),x?Zi(C,z):Xi(C,z);const j=Us(C,M);return f(j)||void 0}).filter(Boolean);if(w.length){const[T,I,M,F]=B0(n.target);let[C,z,j,A]=bl(e);w.forEach(({x:y,y:st})=>{const G=gn(y,6),k=gn(st,6);M&&!Es(k,s.y)&&(C=Math.max(C,st)),T&&!Es(G,s.x)&&(z=Math.min(z,y)),F&&!Es(k,s.y)&&(j=Math.min(j,st)),I&&!Es(G,s.x)&&(A=Math.max(A,y))}),u=Yx([C,z,j,A]),_r(u,.9999,a)}}return Qm(u,l,c,a),u};function XS(t){let e,n;return e=new Kr({props:{items:t[12]}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};4096&r[0]&&(o.items=i[12]),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function YS(t){let e,n,i;return n=new Db({props:{$$slots:{default:[XS]},$$scope:{ctx:t}}}),{c(){e=$t("div"),Wt(n.$$.fragment),S(e,"slot","header")},m(r,o){tt(r,e,o),Bt(n,e,null),i=!0},p(r,o){const a={};4096&o[0]|1024&o[7]&&(a.$$scope={dirty:o,ctx:r}),n.$set(a)},i(r){i||(R(n.$$.fragment,r),i=!0)},o(r){B(n.$$.fragment,r),i=!1},d(r){r&&J(e),Ot(n)}}}function Uf(t){let e,n;return e=new Ss({props:{onclick:t[90],label:t[4].cropLabelButtonRecenter,icon:t[4].cropIconButtonRecenter,disabled:!t[9],hideLabel:!0,class:"PinturaButtonCenter",style:`opacity:${t[31]};transform:translate3d(${t[32].x}px, ${t[32].y}px,0)`}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};16&r[0]&&(o.label=i[4].cropLabelButtonRecenter),16&r[0]&&(o.icon=i[4].cropIconButtonRecenter),512&r[0]&&(o.disabled=!i[9]),3&r[1]&&(o.style=`opacity:${i[31]};transform:translate3d(${i[32].x}px, ${i[32].y}px,0)`),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function Gf(t){let e,n;return e=new BS({props:{rect:t[8],bounds:t[14],visible:t[13],cornerStyle:t[1]}}),e.$on("resizestart",t[70]),e.$on("resizemove",t[71]),e.$on("resizeend",t[72]),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};256&r[0]&&(o.rect=i[8]),16384&r[0]&&(o.bounds=i[14]),8192&r[0]&&(o.visible=i[13]),2&r[0]&&(o.cornerStyle=i[1]),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function Zf(t){let e,n;return{c(){e=$t("div"),n=$t("p"),S(e,"class","PinturaImageInfo"),S(e,"data-custom",t[24])},m(i,r){tt(i,e,r),At(e,n),n.innerHTML=t[23]},p(i,r){8388608&r[0]&&(n.innerHTML=i[23]),16777216&r[0]&&S(e,"data-custom",i[24])},d(i){i&&J(e)}}}function qS(t){let e,n,i,r,o,a,s,l,c=t[22]&&t[10]&&Uf(t),d=t[22]&&Gf(t),u=t[11]&&Zf(t);return{c(){e=$t("div"),n=$t("div"),c&&c.c(),i=ce(),d&&d.c(),o=ce(),u&&u.c(),S(n,"class","PinturaStage"),S(e,"slot","main")},m(p,h){tt(p,e,h),At(e,n),c&&c.m(n,null),At(n,i),d&&d.m(n,null),t[168](n),At(e,o),u&&u.m(e,null),a=!0,s||(l=[Tn(Fr.call(null,n)),Mt(n,"measure",t[166]),Mt(n,"wheel",function(){Cn(t[2]&&t[89])&&(t[2]&&t[89]).apply(this,arguments)},{passive:!1}),Mt(n,"interactionstart",t[76]),Mt(n,"interactionupdate",t[77]),Mt(n,"interactionrelease",t[79]),Mt(n,"interactionend",t[78]),Tn(r=ks.call(null,n,{drag:!0,inertia:!0,pinch:t[2],shouldStartInteraction:Yf,getEventPosition:t[169]})),Mt(n,"gesturedown",t[86]),Mt(n,"gestureupdate",t[87]),Mt(n,"gestureup",t[88]),Tn(OS.call(null,n))],s=!0)},p(p,h){(t=p)[22]&&t[10]?c?(c.p(t,h),4195328&h[0]&&R(c,1)):(c=Uf(t),c.c(),R(c,1),c.m(n,i)):c&&(Le(),B(c,1,1,()=>{c=null}),Fe()),t[22]?d?(d.p(t,h),4194304&h[0]&&R(d,1)):(d=Gf(t),d.c(),R(d,1),d.m(n,null)):d&&(Le(),B(d,1,1,()=>{d=null}),Fe()),r&&Cn(r.update)&&67108868&h[0]&&r.update.call(null,{drag:!0,inertia:!0,pinch:t[2],shouldStartInteraction:Yf,getEventPosition:t[169]}),t[11]?u?u.p(t,h):(u=Zf(t),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i(p){a||(R(c),R(d),a=!0)},o(p){B(c),B(d),a=!1},d(p){p&&J(e),c&&c.d(),d&&d.d(),t[168](null),u&&u.d(),s=!1,Gn(l)}}}function Xf(t){let e,n,i,r;const o=[{class:"PinturaControlList"},{tabs:t[7]},t[19]];let a={$$slots:{default:[KS,({tab:c})=>({226:c}),({tab:c})=>[0,0,0,0,0,0,0,c?512:0]]},$$scope:{ctx:t}};for(let c=0;c<o.length;c+=1)a=Oi(a,o[c]);e=new c1({props:a}),e.$on("select",t[167]);const s=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[18]},t[19]];let l={$$slots:{default:[t6,({panel:c})=>({225:c}),({panel:c})=>[0,0,0,0,0,0,0,c?256:0]]},$$scope:{ctx:t}};for(let c=0;c<s.length;c+=1)l=Oi(l,s[c]);return i=new d1({props:l}),{c(){Wt(e.$$.fragment),n=ce(),Wt(i.$$.fragment)},m(c,d){Bt(e,c,d),tt(c,n,d),Bt(i,c,d),r=!0},p(c,d){const u=524416&d[0]?Lr(o,[o[0],128&d[0]&&{tabs:c[7]},524288&d[0]&&Nr(c[19])]):{};1536&d[7]&&(u.$$scope={dirty:d,ctx:c}),e.$set(u);const p=786432&d[0]?Lr(s,[s[0],s[1],262144&d[0]&&{panels:c[18]},524288&d[0]&&Nr(c[19])]):{};2046853144&d[0]|1280&d[7]&&(p.$$scope={dirty:d,ctx:c}),i.$set(p)},i(c){r||(R(e.$$.fragment,c),R(i.$$.fragment,c),r=!0)},o(c){B(e.$$.fragment,c),B(i.$$.fragment,c),r=!1},d(c){Ot(e,c),c&&J(n),Ot(i,c)}}}function KS(t){let e,n,i=t[226].label+"";return{c(){e=$t("span"),n=Ti(i)},m(r,o){tt(r,e,o),At(e,n)},p(r,o){512&o[7]&&i!==(i=r[226].label+"")&&Yi(n,i)},d(r){r&&J(e)}}}function JS(t){let e,n;return e=new z0({props:{elasticity:t[27]*t[46],base:r6,min:t[25],max:i6,valueMin:t[29][0],valueMax:t[29][1],value:t[30],labelReset:t[4].labelReset,valueLabel:Math.round(100*t[30])+"%",oninputstart:t[83],oninputmove:t[84],oninputend:t[85]}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};134217728&r[0]&&(o.elasticity=i[27]*i[46]),33554432&r[0]&&(o.min=i[25]),536870912&r[0]&&(o.valueMin=i[29][0]),536870912&r[0]&&(o.valueMax=i[29][1]),1073741824&r[0]&&(o.value=i[30]),16&r[0]&&(o.labelReset=i[4].labelReset),1073741824&r[0]&&(o.valueLabel=Math.round(100*i[30])+"%"),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function QS(t){let e,n;return e=new NS({props:{elasticity:t[27]*t[46],rotation:t[15],labelReset:t[4].labelReset,valueMin:t[28][0],valueMax:t[28][1],rotationMin:-t[3],rotationMax:t[3],oninputstart:t[73],oninputmove:t[74],oninputend:t[75]}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};134217728&r[0]&&(o.elasticity=i[27]*i[46]),32768&r[0]&&(o.rotation=i[15]),16&r[0]&&(o.labelReset=i[4].labelReset),268435456&r[0]&&(o.valueMin=i[28][0]),268435456&r[0]&&(o.valueMax=i[28][1]),8&r[0]&&(o.rotationMin=-i[3]),8&r[0]&&(o.rotationMax=i[3]),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function t6(t){let e,n,i,r;const o=[QS,JS],a=[];function s(l,c){return l[225]===l[95]+"-rotation"?0:l[225]===l[95]+"-zoom"?1:-1}return~(e=s(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=Di()},m(l,c){~e&&a[e].m(l,c),tt(l,i,c),r=!0},p(l,c){let d=e;e=s(l),e===d?~e&&a[e].p(l,c):(n&&(Le(),B(a[d],1,1,()=>{a[d]=null}),Fe()),~e?(n=a[e],n?n.p(l,c):(n=a[e]=o[e](l),n.c()),R(n,1),n.m(i.parentNode,i)):n=null)},i(l){r||(R(n),r=!0)},o(l){B(n),r=!1},d(l){~e&&a[e].d(l),l&&J(i)}}}function e6(t){let e,n,i=t[20]&&Xf(t);return{c(){e=$t("div"),i&&i.c(),S(e,"slot","footer"),Tt(e,"transform",t[17])},m(r,o){tt(r,e,o),i&&i.m(e,null),n=!0},p(r,o){r[20]?i?(i.p(r,o),1048576&o[0]&&R(i,1)):(i=Xf(r),i.c(),R(i,1),i.m(e,null)):i&&(Le(),B(i,1,1,()=>{i=null}),Fe()),131072&o[0]&&Tt(e,"transform",r[17])},i(r){n||(R(i),n=!0)},o(r){B(i),n=!1},d(r){r&&J(e),i&&i.d()}}}function n6(t){let e,n,i;function r(a){t[170](a)}let o={hasHeader:t[21],$$slots:{footer:[e6],main:[qS],header:[YS]},$$scope:{ctx:t}};return t[16]!==void 0&&(o.root=t[16]),e=new wl({props:o}),Hn.push(()=>Io(e,"root",r)),e.$on("measure",t[171]),{c(){Wt(e.$$.fragment)},m(a,s){Bt(e,a,s),i=!0},p(a,s){const l={};2097152&s[0]&&(l.hasHeader=a[21]),2145320958&s[0]|3&s[1]|1024&s[7]&&(l.$$scope={dirty:s,ctx:a}),!n&&65536&s[0]&&(n=!0,l.root=a[16],Go(()=>n=!1)),e.$set(l)},i(a){i||(R(e.$$.fragment,a),i=!0)},o(a){B(e.$$.fragment,a),i=!1},d(a){Ot(e,a)}}}const i6=1,r6=0,Yf=(t,e)=>t.target===e;function o6(t,e,n){let i,r,o,a,s,l,c,d,u,p,h,$,g,f,x,v,w,T,I,M,F,C,z,j,A,y,st,G,k,H,rt,gt,ct,V,N,kt,bt,et,Pt,wt,Q,Ut,lt,q,vt,dt,Ht,it,Vt,Dt,Zt,mt,Ft,ht,Yt,Nt,Qt,re,xt,_,ke,ne,Xt,he,ae,Re,nn,Ct,de,ln,Je,Qe,Ie,Ye,yn=Ke,Sn=()=>(yn(),yn=Xr(Fn,L=>n(13,rt=L)),Fn);t.$$.on_destroy.push(()=>yn());let{isActive:Fn}=e;Sn();let{stores:zn}=e,{cropImageSelectionCornerStyle:un="circle"}=e,{cropWillRenderImageSelectionGuides:Y=(L,ie)=>{const Me=L=="rotate";return{rows:Me?5:3,cols:Me?5:3,opacity:.25*ie}}}=e,{cropAutoCenterImageSelectionTimeout:at}=e,{cropEnableZoomMatchImageAspectRatio:Z=!0}=e,{cropEnableRotateMatchImageAspectRatio:zt="never"}=e,{cropEnableRotationInput:ue=!0}=e,{cropEnableZoom:De=!0}=e,{cropEnableZoomInput:ye=!0}=e,{cropEnableZoomAutoHide:Lt=!0}=e,{cropEnableImageSelection:Te=!0}=e,{cropEnableInfoIndicator:cn=!1}=e,{cropEnableZoomTowardsWheelPosition:an=!0}=e,{cropEnableLimitWheelInputToCropSelection:nt=!0}=e,{cropEnableCenterImageSelection:Gt=!0}=e,{cropEnableButtonRotateLeft:Be=!0}=e,{cropEnableButtonRotateRight:xe=!1}=e,{cropEnableButtonFlipHorizontal:te=!0}=e,{cropEnableButtonFlipVertical:tn=!1}=e,{cropSelectPresetOptions:ot}=e,{cropEnableSelectPreset:me=!0}=e,{cropEnableFilterMatchAspectRatio:se=!0}=e,{cropSelectPresetFilter:ge=!1}=e,{cropEnableButtonToggleCropLimit:oe=!1}=e,{cropWillRenderTools:qe=ai}=e,{cropWillRenderInfoIndicator:ze}=e,{cropActiveTransformTool:ui="rotation"}=e,{cropMinimizeToolbar:Oe="auto"}=e,{cropInteractionFocus:rn="image"}=e,{cropRotationRange:In=$a}=e,{cropMaskOpacity:Dn=.85}=e,{locale:pn={}}=e,{cropFormatIconSelectPreset:ti=function(L){const{aspectRatio:ie}=L,[Me,xn,Vn]=ie?[ie<1?1:.3,ie===1?.85:.5,ie>1?1:.3]:[.2,.3,.4];return{a:Me,b:xn,c:Vn}}}=e,{cropFormatIconCropBoundary:we=function(L){const{isBoundToImage:ie}=L,[Me,xn,Vn,On]=ie?[.3,1,0,0]:[0,0,.3,1];return{a:Me,b:xn,c:Vn,d:On}}}=e;const Ze=mi("isAnimated");D(t,Ze,L=>n(144,gt=L));const en=mi("elasticityMultiplier");D(t,en,L=>n(27,de=L));const hi=mi("redrawTrigger");D(t,hi,L=>n(165,Ct=L));const wi=mi("imageIsStatic");D(t,wi,L=>n(150,Pt=L));const pi=mi("imageStaticVisualCorners");D(t,pi,L=>n(187,ke=L));const Kn=mi("fixScrollDirection");D(t,Kn,L=>n(181,ht=L));let gi="idle";const sr=fe();D(t,sr,L=>n(162,ae=L));const Si=()=>xt===void 0,Tr=L=>1/L,Yo=L=>{se&&ge!==L&&(n(97,ge=L),xt&&xt!==1&&pr()&&It(Vi,xt=Tr(xt),xt))},pr=()=>{if(xt===1||!i)return!1;const L=Tr(xt);return!!Ws(ae).find(([ie])=>ie===L)},yi=(L,ie,Me)=>Ya(Me)?ie.width===Math.round(L.height)||ie.height===Math.round(L.width):ie.width===Math.round(L.width)||ie.height===Math.round(L.height),ca=()=>(Si()||zt==="always"&&pr())&&((L,ie,Me)=>{const xn=Wa(_2(io(ie),Me),on=>Math.abs(Math.round(on))),Vn=tc(xn),On=Ln(L);return Ls(Vn,On)})(Q,Dt,Zt)&&yi(Q,Dt,Zt),Wi=L=>{if(zt!=="never"&&ca()){It(nr,Zt+=L,Zt);const ie=Ya(Zt),Me=ie?Dt.height:Dt.width,xn=ie?Dt.width:Dt.height;It(ir,Q=Ui(0,0,Me,xn),Q),Si()||It(Vi,xt=ga(Me,xn),xt)}else It(nr,Zt+=L,Zt)},{history:_n,env:Ma,isInteracting:qi,isInteractingFraction:lr,isTransformingImage:Ai,rootRect:hr,stageRect:mr,utilRect:Ki,utilRectPadded:ki,rootLineColor:ao,allowPan:qo,allowZoom:Eo,allowPlayPause:Ao,rangeInputElasticity:xo,presentationScalar:Lo,utilTools:vo,imagePreviewModifiers:so,imageOutlineOpacity:zr,imageFlipX:lo,imageFlipY:Hr,imageRotation:nr,imageRotationRange:er,imageOutputSize:Dr,imageSelectionRect:co,imageSelectionRectSnapshot:Zn,imageSelectionRectIntent:_i,imageSelectionRectPresentation:Jr,imageCropRectIntent:Ci,imageCropRectOrigin:wo,imageCropRect:ir,imageCropMinSize:Ko,imageCropMaxSize:Br,imageCropRange:So,imageCropAspectRatio:Vi,imageCropLimitToImage:Or,imageSize:ei,imageScalar:Ji,imageOverlayMarkup:Fo,stagePadded:zo,stageRecenter:Qr}=zn;function jr(L,ie){return Un(L.cropIconSelectPreset)?Ar(L.cropIconSelectPreset,L,ie):Bs(L.cropIconSelectPreset,ti({aspectRatio:ie}),"{","}")}function ko(L,ie){return Un(L.cropIconCropBoundary)?Ar(L.cropIconCropBoundary,L,ie):Bs(L.cropIconCropBoundary,we({isBoundToImage:ie}),"{","}")}let wr;D(t,Ma,L=>n(145,ct=L)),D(t,qi,L=>n(149,et=L)),D(t,Ai,L=>n(179,it=L)),D(t,hr,L=>n(26,Yt=L)),D(t,mr,L=>n(157,Ht=L)),D(t,ki,L=>n(14,q=L)),D(t,Lo,L=>n(154,lt=L)),D(t,vo,L=>n(189,Xt=L)),D(t,so,L=>n(178,kt=L)),D(t,lo,L=>n(164,nn=L)),D(t,Hr,L=>n(163,Re=L)),D(t,nr,L=>n(15,Zt=L)),D(t,er,L=>n(28,ln=L)),D(t,Dr,L=>n(151,wt=L)),D(t,co,L=>n(156,dt=L)),D(t,Zn,L=>n(155,vt=L)),D(t,_i,L=>n(188,ne=L)),D(t,Jr,L=>n(148,bt=L)),D(t,Ci,L=>n(182,Nt=L)),D(t,wo,L=>n(184,re=L)),D(t,ir,L=>n(152,Q=L)),D(t,Ko,L=>n(160,Ft=L)),D(t,Br,L=>n(186,_=L)),D(t,So,L=>n(183,Qt=L)),D(t,Vi,L=>n(185,xt=L)),D(t,Or,L=>n(159,mt=L)),D(t,ei,L=>n(158,Dt=L)),D(t,Ji,L=>n(153,Ut=L)),D(t,zo,L=>n(147,N=L));const uo=(L,ie)=>{const Me={target:L,translate:ie},xn=pu(io(Ft),lt),Vn=pu(io(_),lt);let On=_f(vt,Me,{...q,x:0,y:0},{aspectRatio:xt,minSize:xn,maxSize:Vn});if(On=((kn,Xn,Mn)=>{const[Jn,Ni,vi,Mi]=bl(kn),Wn={...kn};if(Jn<Xn.y&&(kn.height=kn.height-(Xn.y-Jn),kn.y=Xn.y),Ni>Xn.x+Xn.width&&(kn.width=Xn.x+Xn.width-kn.x),vi>Xn.y+Xn.height&&(kn.height=Xn.y+Xn.height-kn.y),Mi<Xn.x&&(kn.width=kn.width-(Xn.x-Mi),kn.x=Xn.x),Mn){const Mr=Math.min(1,Wn.width/kn.width,Wn.height/kn.height);return fl(Wn,Mr)}return kn})(On,{...q,x:0,y:0},xt),!mt)return{boundsLimited:On,boundsIntent:On};let on=ZS(vt,On,Me,ke,{aspectRatio:xt,minSize:xn,maxSize:Vn});return{boundsLimited:on,boundsIntent:on}},Co=(L,ie)=>{const Me={target:L,translate:ie},xn=pu(io(Ft),lt),Vn=pu(io(_),lt),On=((on,kn,Xn={})=>{const{target:Mn,translate:Jn}=kn,{aspectRatio:Ni,minSize:vi}=Xn,Mi=nd[D0[Mn]],Wn=Zi(An(on),ut(Mi[0]*on.width,Mi[1]*on.height)),Mr=nd[Mn],da=Zi(An(on),ut(Mr[0]*on.width,Mr[1]*on.height)),[Xs,Cs,ns,Ha,ja,is,Pa]=B0(Mn);let To=Jn.x,Ua=Jn.y;ja?Ua=0:is&&(To=0);let[bi,to,Yn,eo]=bl(on);if(Xs?eo=Wn.x:Cs&&(to=Wn.x),Ha?bi=Wn.y:ns&&(Yn=Wn.y),Xs?to=da.x+To:Cs&&(eo=da.x+To),Ha?Yn=da.y+Ua:ns&&(bi=da.y+Ua),vi&&ja&&Yn-bi<vi.height){const si=vi.height-(Yn-bi);bi-=.5*si,Yn+=.5*si}if(vi&&is&&to-eo<vi.width){const si=vi.width-(to-eo);eo-=.5*si,to+=.5*si}if(Ni)if(Pa){let si=to-eo,mo=Yn-bi;ja?(mo=si/Ni,bi=Wn.y-.5*mo,Yn=Wn.y+.5*mo):is&&(si=mo*Ni,eo=Wn.x-.5*si,to=Wn.x+.5*si)}else{const si=ut(da.x+To-Wn.x,da.y+Ua-Wn.y);Mn===va?(si.x=Math.max(0,si.x),si.y=Math.min(0,si.y)):Mn===wa?(si.x=Math.max(0,si.x),si.y=Math.max(0,si.y)):Mn===Sa?(si.x=Math.min(0,si.x),si.y=Math.max(0,si.y)):Mn===xa&&(si.x=Math.min(0,si.x),si.y=Math.min(0,si.y));const mo=zs(si),Ra=ut(Ni,1),Ur=Vr(yo(Ra),mo);Mn===va?(to=Wn.x+Ur.x,bi=Wn.y-Ur.y):Mn===wa?(to=Wn.x+Ur.x,Yn=Wn.y+Ur.y):Mn===Sa?(eo=Wn.x-Ur.x,Yn=Wn.y+Ur.y):Mn===xa&&(eo=Wn.x-Ur.x,bi=Wn.y-Ur.y)}return Ui(eo,bi,to-eo,Yn-bi)})(vt,Me,{aspectRatio:xt,minSize:xn});return{boundsLimited:_f(vt,Me,{...q,x:0,y:0},{aspectRatio:xt,minSize:xn,maxSize:Vn}),boundsIntent:On}};let O,Kt;const En=({translation:L,scalar:ie})=>{Pt&&(ie=1,L=Yl(Ve(L)));const Me=Math.min(dt.width/Q.width,dt.height/Q.height),xn=Vr(Ve(L),1/Me);let Vn;if(Kt){const On=Xi(Ve(Kt),L);Kt=L,Vn=fa(An(Q),On)}else Vn=fa(An(O),Yl(Ve(xn))),ie!==void 0&&_r(Vn,1/ie);It(Ci,Nt=Vn,Nt),It(ir,Q=Vn,Q)},je=Nn([So,ir],([L,ie],Me)=>{if(!ie)return;const[xn,Vn]=L,On=fr(ie);Me([yl(aa(fs(xn,On),gn)),yl(aa(oo(Vn,On),gn))])});D(t,je,L=>n(180,Vt=L));const be=Nn([ei,Or,Ko,Br,So,nr],([L,ie,Me,xn,Vn,On],on)=>{if(!L)return;const kn=Vn[0],Xn=Vn[1];let Mn,Jn;ie?(Mn=((Ni,vi,Mi)=>Ya(Mi)?1-1/Math.min(Ni.height/vi.width,Ni.width/vi.height):1-1/Math.min(Ni.width/vi.width,Ni.height/vi.height))(L,Xn,On),Jn=Math.min(kn.width/Me.width,kn.height/Me.height)):(Mn=-1,Jn=1),on([Mn,Jn].map(Ni=>gn(Ni)))});D(t,be,L=>n(29,Je=L));const $e=Nn([ei,ir,So,nr],([L,ie,Me,xn],Vn)=>{if(!L||!ie)return Vn(0);let On;const on=Me[0],kn=Me[1],Xn=ie.width,Mn=ie.height,Jn=fr(ie),Ni=Ya(xn)?Fi(L.height,L.width):L,vi=oo(Ni,Jn);if(Xn<=vi.width||Mn<=vi.height){const Mi=vi.width-on.width,Wn=vi.height-on.height;On=Mi===0||Wn===0?1:1-Math.min((Xn-on.width)/Mi,(Mn-on.height)/Wn)}else{const Mi=kn.width-vi.width,Wn=kn.height-vi.height,Mr=oo({width:Mi,height:Wn},Jn);On=-Math.min((Xn-vi.width)/Mr.width,(Mn-vi.height)/Mr.height)}Vn(On)});D(t,$e,L=>n(30,Qe=L));const qn=L=>{const ie=fr(O);let Me,xn,Vn;const On=Ya(Zt)?Fi(Dt.height,Dt.width):Dt,on=oo(On,ie);if(L>=0){const Mn=on.width-Qt[0].width,Jn=on.height-Qt[0].height;Me=on.width-Mn*L,xn=on.height-Jn*L,Vn=fs({width:Me,height:xn},ie)}else{const Mn=Qt[1].width-on.width,Jn=Qt[1].height-on.height;Me=on.width+Mn*-L,xn=on.height+Jn*-L,Vn=oo({width:Me,height:xn},ie)}Me=Vn.width,xn=Vn.height;const kn=O.x+.5*O.width-.5*Me,Xn=O.y+.5*O.height-.5*xn;It(ir,Q={x:kn,y:Xn,width:Me,height:xn},Q)};let Rn;const ni=L=>{const ie=_r(An(Rn),1/L);It(Ci,Nt=ie,Nt),It(ir,Q=ie,Q)};let $i;const Bn=()=>{Qr.set({})};let Sr;const po=mn(0,{precision:1e-4});D(t,po,L=>n(31,Ie=L));const Ue=mn();D(t,Ue,L=>n(32,Ye=L));const Jo=Nn([Vi,Dr,sr],([L,ie,Me],xn)=>{if(!i)return;const Vn=Ws(Me),On=[...Vn].map(on=>on[0]).sort((on,kn)=>Ei(on[0])&&!Ei(kn[0])?1:-1).find(on=>{if(Ei(on)&&ie){const[kn,Xn]=on,Mn=ie.width===kn&&ie.height===Xn,Jn=L===ga(kn,Xn);return Mn&&Jn}return on===L});if(!On)return xn(void 0);xn(Vn.map(on=>on[0]).findIndex(on=>Ei(on)?ys(on,On):on===On))});D(t,Jo,L=>n(161,he=L));const Wr=(L,ie)=>{if(!i||L===-1||L===void 0)return;const Me=Ws(ie)[L][0];return Me?Ei(Me)?ga(Me[0],Me[1]):Me:void 0},Va=Nn([ao,Jr,lr],([L,ie,Me],xn)=>{const{rows:Vn,cols:On,opacity:on}=Y(gi,Me);if(!ie||on<=0)return xn([]);const{x:kn,y:Xn,width:Mn,height:Jn}=ie,Ni=Mn/On,vi=Jn/Vn,Mi=[];for(let Wn=1;Wn<=Vn-1;Wn++){const Mr=Xn+vi*Wn;Mi.push({id:"image-selection-guide-row-"+Wn,points:[ut(kn,Mr),ut(kn+Mn,Mr)],opacity:on,strokeWidth:1,strokeColor:L})}for(let Wn=1;Wn<=On-1;Wn++){const Mr=kn+Ni*Wn;Mi.push({id:"image-selection-guide-col-"+Wn,points:[ut(Mr,Xn),ut(Mr,Xn+Jn)],opacity:on,strokeWidth:1,strokeColor:L})}xn(Mi)});D(t,Va,L=>n(146,V=L));const Qo="crop-"+la();let xi,Li=Qo+"-"+(ue?ui:"zoom"),ho=Li,Do;const Na=mn(gt?20:0);return D(t,Na,L=>n(143,H=L)),t.$$set=L=>{"isActive"in L&&Sn(n(0,Fn=L.isActive)),"stores"in L&&n(99,zn=L.stores),"cropImageSelectionCornerStyle"in L&&n(1,un=L.cropImageSelectionCornerStyle),"cropWillRenderImageSelectionGuides"in L&&n(100,Y=L.cropWillRenderImageSelectionGuides),"cropAutoCenterImageSelectionTimeout"in L&&n(101,at=L.cropAutoCenterImageSelectionTimeout),"cropEnableZoomMatchImageAspectRatio"in L&&n(102,Z=L.cropEnableZoomMatchImageAspectRatio),"cropEnableRotateMatchImageAspectRatio"in L&&n(103,zt=L.cropEnableRotateMatchImageAspectRatio),"cropEnableRotationInput"in L&&n(104,ue=L.cropEnableRotationInput),"cropEnableZoom"in L&&n(2,De=L.cropEnableZoom),"cropEnableZoomInput"in L&&n(105,ye=L.cropEnableZoomInput),"cropEnableZoomAutoHide"in L&&n(106,Lt=L.cropEnableZoomAutoHide),"cropEnableImageSelection"in L&&n(107,Te=L.cropEnableImageSelection),"cropEnableInfoIndicator"in L&&n(108,cn=L.cropEnableInfoIndicator),"cropEnableZoomTowardsWheelPosition"in L&&n(109,an=L.cropEnableZoomTowardsWheelPosition),"cropEnableLimitWheelInputToCropSelection"in L&&n(110,nt=L.cropEnableLimitWheelInputToCropSelection),"cropEnableCenterImageSelection"in L&&n(111,Gt=L.cropEnableCenterImageSelection),"cropEnableButtonRotateLeft"in L&&n(112,Be=L.cropEnableButtonRotateLeft),"cropEnableButtonRotateRight"in L&&n(113,xe=L.cropEnableButtonRotateRight),"cropEnableButtonFlipHorizontal"in L&&n(114,te=L.cropEnableButtonFlipHorizontal),"cropEnableButtonFlipVertical"in L&&n(115,tn=L.cropEnableButtonFlipVertical),"cropSelectPresetOptions"in L&&n(116,ot=L.cropSelectPresetOptions),"cropEnableSelectPreset"in L&&n(117,me=L.cropEnableSelectPreset),"cropEnableFilterMatchAspectRatio"in L&&n(118,se=L.cropEnableFilterMatchAspectRatio),"cropSelectPresetFilter"in L&&n(97,ge=L.cropSelectPresetFilter),"cropEnableButtonToggleCropLimit"in L&&n(119,oe=L.cropEnableButtonToggleCropLimit),"cropWillRenderTools"in L&&n(120,qe=L.cropWillRenderTools),"cropWillRenderInfoIndicator"in L&&n(121,ze=L.cropWillRenderInfoIndicator),"cropActiveTransformTool"in L&&n(122,ui=L.cropActiveTransformTool),"cropMinimizeToolbar"in L&&n(123,Oe=L.cropMinimizeToolbar),"cropInteractionFocus"in L&&n(124,rn=L.cropInteractionFocus),"cropRotationRange"in L&&n(3,In=L.cropRotationRange),"cropMaskOpacity"in L&&n(125,Dn=L.cropMaskOpacity),"locale"in L&&n(4,pn=L.locale),"cropFormatIconSelectPreset"in L&&n(126,ti=L.cropFormatIconSelectPreset),"cropFormatIconCropBoundary"in L&&n(127,we=L.cropFormatIconCropBoundary)},t.$$.update=()=>{8192&t.$$.dirty[0]|1&t.$$.dirty[4]&&wi.set(rn==="selection"&&rt),8388608&t.$$.dirty[3]&&n(134,i=ot&&Array.isArray(ot)&&ot.length),8388608&t.$$.dirty[3]|1024&t.$$.dirty[4]&&sr.set(i?ot:[]),8192&t.$$.dirty[0]|1048576&t.$$.dirty[4]&&rt&&zr.set(1,{hard:!gt}),8192&t.$$.dirty[0]&&qo.set(!rt),8192&t.$$.dirty[0]&&Eo.set(!rt),8192&t.$$.dirty[0]&&rt&&Ao.set(!0),2097152&t.$$.dirty[4]&&n(129,h=ct.layoutMode==="overlay"),16777216&t.$$.dirty[3]|32&t.$$.dirty[4]&&n(133,F=me&&!h),16384&t.$$.dirty[0]|2&t.$$.dirty[5]&&n(142,l=q&&dt&&Lu(q,dt)),262144&t.$$.dirty[4]|2&t.$$.dirty[5]&&n(140,c=!(!dt||!l)),327680&t.$$.dirty[4]|2&t.$$.dirty[5]&&n(138,d=c&&ya(dt,l,L=>gn(L,5))),32784&t.$$.dirty[0]|209190928&t.$$.dirty[3]|2115072&t.$$.dirty[4]|2040&t.$$.dirty[5]&&n(12,r=Ct&&qe([Be&&["Button","rotate-left",{label:pn.cropLabelButtonRotateLeft,labelClass:"PinturaToolbarContentWide",icon:pn.cropIconButtonRotateLeft,onclick:()=>{Wi(-Math.PI/2),_n.write()}}],xe&&["Button","rotate-right",{label:pn.cropLabelButtonRotateRight,labelClass:"PinturaToolbarContentWide",icon:pn.cropIconButtonRotateRight,onclick:()=>{Wi(Math.PI/2),_n.write()}}],te&&["Button","flip-horizontal",{label:pn.cropLabelButtonFlipHorizontal,labelClass:"PinturaToolbarContentWide",icon:pn.cropIconButtonFlipHorizontal,onclick:()=>{Ya(Zt)?It(Hr,Re=!Re,Re):It(lo,nn=!nn,nn),_n.write()}}],tn&&["Button","flip-vertical",{label:pn.cropLabelButtonFlipVertical,labelClass:"PinturaToolbarContentWide",icon:pn.cropIconButtonFlipVertical,onclick:()=>{Ya(Zt)?It(lo,nn=!nn,nn):It(Hr,Re=!Re,Re),_n.write()}}],F&&i&&[ge===!1?"Dropdown":GS,"select-preset",{icon:jr(pn,Wr(he,ae)),label:Ar(pn.cropLabelSelectPreset,pn,Wr(he,ae)),labelClass:"PinturaToolbarContentWide",options:ae,filter:ge,onfilterchange:Yo,selectedIndex:he,onchange:({value:L})=>{Ei(L)?(It(Vi,xt=ga(L[0],L[1]),xt),It(Dr,wt=W2(L),wt)):It(Vi,xt=L,xt),d&&Bn(),_n.write()},optionMapper:L=>{let ie=!1;const Me=Ei(L.value)?L.value[0]/L.value[1]:L.value;if(Me){const xn=Xl(Dt,Zt,Me);ie=xn.width<Ft.width||xn.height<Ft.height}return L.icon=((xn,Vn={})=>{const{width:On=24,height:on=24,bounds:kn=16,radius:Xn=3}=Vn;let Mn,Jn,Ni,vi,Mi=Ei(xn)?ga(xn[0],xn[1]):xn,Wn=!!Mi;return Mi=Wn?Mi:1,Ni=Mi>1?kn:Mi*kn,vi=Ni/Mi,Mn=Math.round(.5*(On-Ni)),Jn=Math.round(.5*(on-vi)),`<rect fill="${Wn?"currentColor":"none"}" stroke="${Wn?"none":"currentColor"}" stroke-width="${On/16}" stroke-dasharray="${[On/12,On/6].join(" ")}" x="${Mn}" y="${Jn}" width="${Ni}" height="${vi}" rx="${Xn}"/>`})(L.value,{bounds:14}),{...L,disabled:ie}}}],oe&&["Dropdown","select-crop-limit",{icon:ko(pn,mt),label:pn.cropLabelCropBoundary,labelClass:"PinturaToolbarContentWide",onchange:({value:L})=>{It(Or,mt=L,mt),_n.write()},options:[[!0,pn.cropLabelCropBoundaryEdge,{icon:ko(pn,!0)}],[!1,pn.cropLabelCropBoundaryNone,{icon:ko(pn,!1)}]]}]].filter(Boolean),ct,()=>hi.set({})).filter(Boolean)),12288&t.$$.dirty[0]|1073741824&t.$$.dirty[3]|2097184&t.$$.dirty[4]&&It(vo,Xt=rt&&Oe!=="never"&&(Oe==="always"||ct.verticalSpace==="short"||h)?r.map(([L,ie,Me])=>Array.isArray(Me)?[L,ie,Me]:[L,ie,{...Me,hideLabel:!0}]):[],Xt),16&t.$$.dirty[5]&&n(25,o=mt?0:-1),16384&t.$$.dirty[0]|4&t.$$.dirty[5]&&n(135,a=q&&ut(-(Ht.x-q.x),-(Ht.y-q.y))),16779264&t.$$.dirty[4]&&n(136,s=bt&&a&&ut(cd(bt.x+.5*bt.width+a.x),cd(bt.y+.5*bt.height+a.y))),1&t.$$.dirty[5]&&n(139,u=vt!=null),16384&t.$$.dirty[0]|262144&t.$$.dirty[4]&&n(141,p=q&&l&&(l.height===q.height||l.width===q.width)),1610743808&t.$$.dirty[4]&&n(137,$=!p&&lt<1&&Ut<1),122880&t.$$.dirty[4]&&n(9,g=c&&!u&&(!d||$)),32768&t.$$.dirty[3]|268435488&t.$$.dirty[4]&&n(11,f=cn&&!!Q&&!h),268435456&t.$$.dirty[3]&&n(24,x=!!ze||void 0),2048&t.$$.dirty[0]|268435456&t.$$.dirty[3]|402653184&t.$$.dirty[4]&&n(23,v=f&&ze?ze(Q,wt):f&&function(L,ie){let Me={};if(ie){const xn=L.width/L.height;ie.width&&!ie.height&&(Me=Fi(ie.width,ie.width/xn)),ie.height&&!ie.width&&(Me=Fi(ie.height*xn,ie.height)),Me=io(ie)}else Me=Fi(L.width,L.height);return`${Math.round(Me.width)} &times; ${Math.round(Me.height)}`}(Q,wt)),16779264&t.$$.dirty[4]&&n(8,I=bt&&a&&{x:bt.x+a.x,y:bt.y+a.y,width:bt.width,height:bt.height}),256&t.$$.dirty[0]|16384&t.$$.dirty[3]|32&t.$$.dirty[4]&&n(22,w=Te&&!!I&&!h),262400&t.$$.dirty[3]|67112960&t.$$.dirty[4]&&n(10,T=Gt&&!!s&&!at&&!Pt),512&t.$$.dirty[0]|256&t.$$.dirty[3]|33554448&t.$$.dirty[4]&&g&&at&&!et&&(clearTimeout(Sr),n(128,Sr=setTimeout(Bn,at))),33554448&t.$$.dirty[4]&&et&&clearTimeout(Sr),1536&t.$$.dirty[0]|1048576&t.$$.dirty[4]&&po.set(T&&g?1:0,{hard:gt===!1}),1052672&t.$$.dirty[4]&&Ue.set(s,{hard:gt===!1}),8192&t.$$.dirty[0]|8388608&t.$$.dirty[4]&&(rt&&!N?(It(so,kt.crop={maskOpacity:Dn,maskMarkupOpacity:Dn},kt),so.set(kt)):(delete kt.crop,so.set(kt))),4194304&t.$$.dirty[4]&&V&&Fo.update(L=>{const ie=L.filter(Me=>!/^image\-selection\-guide/.test(Me.id));return rt?[...ie,...V]:ie}),2097152&t.$$.dirty[4]&&n(132,M=ct.verticalSpace!=="short"),1073741824&t.$$.dirty[3]|288&t.$$.dirty[4]&&n(21,C=Oe==="never"&&!h||M&&Oe!=="always"),4&t.$$.dirty[0]|4096&t.$$.dirty[3]&&n(131,z=De&&ye),8192&t.$$.dirty[3]|384&t.$$.dirty[4]&&n(130,j=Lt?M&&z:z),2048&t.$$.dirty[3]|64&t.$$.dirty[4]&&n(20,A=ue||j),64&t.$$.dirty[4]&&(j||n(5,ho=Li)),32&t.$$.dirty[0]&&n(19,y={name:Qo,selected:ho}),16&t.$$.dirty[0]|2048&t.$$.dirty[3]|64&t.$$.dirty[4]&&n(7,st=[ue&&{id:Qo+"-rotation",label:pn.cropLabelTabRotation},j&&{id:Qo+"-zoom",label:pn.cropLabelTabZoom}].filter(Boolean)),128&t.$$.dirty[0]&&n(18,G=st.map(L=>L.id)),64&t.$$.dirty[0]|32&t.$$.dirty[4]&&xi&&!xi.children.length&&h&&xi.dispatchEvent(new CustomEvent("measure",{detail:xi.rect})),8192&t.$$.dirty[0]|1048576&t.$$.dirty[4]&&gt&&Na.set(rt?0:20),524288&t.$$.dirty[4]&&n(17,k=H?`translateY(${H}px)`:"none")},[Fn,un,De,In,pn,ho,xi,st,I,g,T,f,r,rt,q,Zt,Do,k,G,y,A,C,w,v,x,o,Yt,de,ln,Je,Qe,Ie,Ye,Ze,en,hi,wi,pi,Kn,sr,Ma,qi,Ai,hr,mr,ki,xo,Lo,vo,so,lo,Hr,nr,er,Dr,co,Zn,_i,Jr,Ci,wo,ir,Ko,Br,So,Vi,Or,ei,Ji,zo,()=>{gi="select",It(qi,et=!0,et),It(Zn,vt=An(dt),vt),wr=Pt?uo:Co},({detail:L})=>{const{boundsLimited:ie,boundsIntent:Me}=wr(L.direction,L.translation);It(Ai,it=!0,it),It(_i,ne=Me,ne),It(co,dt=ie,dt)},({detail:L})=>{const{boundsLimited:ie}=wr(L.direction,L.translation);It(Ai,it=!1,it),It(qi,et=!1,et),It(_i,ne=void 0,ne),zs(L.translation)&&(It(co,dt=ie,dt),_n.write()),It(Zn,vt=void 0,vt),gi=void 0},()=>{gi="rotate",It(qi,et=!0,et),It(wo,re=An(Q),re)},L=>{It(Ai,it=!0,it),It(nr,Zt=L,Zt)},L=>{It(Ai,it=!1,it),It(qi,et=!1,et),It(nr,Zt=L,Zt),_n.write(),It(wo,re=void 0,re)},()=>{gi="pan",Kt=void 0,It(qi,et=!0,et),O=An(Q)},({detail:L})=>{It(Ai,it=!0,it),En(L)},({detail:L})=>{It(Ai,it=!1,it),It(qi,et=!1,et),(zs(L.translation)>0||L.scalar!==0)&&(En(L),_n.write()),It(Ci,Nt=void 0,Nt),O=void 0},({detail:{translation:L}})=>{Pt&&(L=Yl(Ve(L))),Kt=L,It(qi,et=!1,et)},je,be,$e,()=>{gi="zoom",It(qi,et=!0,et),O=An(Q)},L=>{It(Ai,it=!1,it),qn(L)},L=>{qn(L),_n.write(),It(Ai,it=!1,it),It(qi,et=!1,et),O=void 0},()=>{gi="zoom",O||(Rn=An(Q),It(qi,et=!0,et))},({detail:L})=>{Rn&&(It(Ai,it=!0,it),ni(L))},({detail:L})=>{Rn&&(It(Ai,it=!1,it),It(qi,et=!1,et),ni(L),It(Ci,Nt=void 0,Nt),Rn=void 0,_n.write())},L=>{const ie=Oh(L,Yt,Ht);if(nt&&!Hu(dt,ie))return;gi="zoom",It(qi,et=!0,et),It(Ai,it=!0,it),L.preventDefault(),L.stopPropagation();const Me=p1(L,{fixScrollDirection:ht}),xn=1+Me/100,Vn=An(Q),On=Math.min(Q.width/Ft.width,Q.height/Ft.height)===1;if(Z&&mt){const Xn=yi(Q,Dt,Zt);if(Si()&&Xn&&Me>0&&d){It(qi,et=!1,et),It(Ai,it=!1,it);const Mn=Ya(Zt)?Yr({height:Dt.width,width:Dt.height}):Yr(Dt);return ya(Vn,Mn)||(clearTimeout($i),ya(_n.state.crop,Mn))?void 0:(It(ir,Q=Mn,Q),void _n.write())}}let on=Ln(Q);if(an&&rn!=="selection"&&Me<0&&!On){const Xn=Xi(Ve(ie),dt),Mn=Math.min(dt.width/Q.width,dt.height/Q.height),Jn=_r(An(dt),1.1);on=Hu(Jn,ie)?Zi(An(Q),Vr(Xn,1/Mn)):on}let kn=_r(An(Q),xn,on);if(Nu(Vt[1],kn)||(kn=Jm(Ln(kn),Vt[1])),Nu(kn,Vt[0])||(kn=Jm(Ln(kn),Vt[0])),ya(Vn,kn,gn))return It(qi,et=!1,et),void It(Ai,it=!1,it);It(ir,Q=aa(kn,Xn=>gn(Xn,5)),Q),It(qi,et=!1,et),It(Ai,it=!1,it),clearTimeout($i),$i=setTimeout(()=>{_n.write()},500)},Bn,po,Ue,Jo,Va,Qo,Na,ge,"crop",zn,Y,at,Z,zt,ue,ye,Lt,Te,cn,an,nt,Gt,Be,xe,te,tn,ot,me,se,oe,qe,ze,ui,Oe,rn,Dn,ti,we,Sr,h,j,z,M,F,i,a,s,$,d,u,c,p,l,H,gt,ct,V,N,bt,et,Pt,wt,Q,Ut,lt,vt,dt,Ht,Dt,mt,Ft,he,ae,Re,nn,Ct,function(L){qr.call(this,t,L)},({detail:L})=>n(5,ho=L),function(L){Hn[L?"unshift":"push"](()=>{xi=L,n(6,xi)})},L=>L0(L),function(L){Do=L,n(16,Do)},function(L){qr.call(this,t,L)}]}var a6={util:["crop",class extends fn{constructor(t){super(),$n(this,t,o6,n6,dn,{name:98,isActive:0,stores:99,cropImageSelectionCornerStyle:1,cropWillRenderImageSelectionGuides:100,cropAutoCenterImageSelectionTimeout:101,cropEnableZoomMatchImageAspectRatio:102,cropEnableRotateMatchImageAspectRatio:103,cropEnableRotationInput:104,cropEnableZoom:2,cropEnableZoomInput:105,cropEnableZoomAutoHide:106,cropEnableImageSelection:107,cropEnableInfoIndicator:108,cropEnableZoomTowardsWheelPosition:109,cropEnableLimitWheelInputToCropSelection:110,cropEnableCenterImageSelection:111,cropEnableButtonRotateLeft:112,cropEnableButtonRotateRight:113,cropEnableButtonFlipHorizontal:114,cropEnableButtonFlipVertical:115,cropSelectPresetOptions:116,cropEnableSelectPreset:117,cropEnableFilterMatchAspectRatio:118,cropSelectPresetFilter:97,cropEnableButtonToggleCropLimit:119,cropWillRenderTools:120,cropWillRenderInfoIndicator:121,cropActiveTransformTool:122,cropMinimizeToolbar:123,cropInteractionFocus:124,cropRotationRange:3,cropMaskOpacity:125,locale:4,cropFormatIconSelectPreset:126,cropFormatIconCropBoundary:127},null,[-1,-1,-1,-1,-1,-1,-1,-1])}get name(){return this.$$.ctx[98]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),E()}get stores(){return this.$$.ctx[99]}set stores(t){this.$$set({stores:t}),E()}get cropImageSelectionCornerStyle(){return this.$$.ctx[1]}set cropImageSelectionCornerStyle(t){this.$$set({cropImageSelectionCornerStyle:t}),E()}get cropWillRenderImageSelectionGuides(){return this.$$.ctx[100]}set cropWillRenderImageSelectionGuides(t){this.$$set({cropWillRenderImageSelectionGuides:t}),E()}get cropAutoCenterImageSelectionTimeout(){return this.$$.ctx[101]}set cropAutoCenterImageSelectionTimeout(t){this.$$set({cropAutoCenterImageSelectionTimeout:t}),E()}get cropEnableZoomMatchImageAspectRatio(){return this.$$.ctx[102]}set cropEnableZoomMatchImageAspectRatio(t){this.$$set({cropEnableZoomMatchImageAspectRatio:t}),E()}get cropEnableRotateMatchImageAspectRatio(){return this.$$.ctx[103]}set cropEnableRotateMatchImageAspectRatio(t){this.$$set({cropEnableRotateMatchImageAspectRatio:t}),E()}get cropEnableRotationInput(){return this.$$.ctx[104]}set cropEnableRotationInput(t){this.$$set({cropEnableRotationInput:t}),E()}get cropEnableZoom(){return this.$$.ctx[2]}set cropEnableZoom(t){this.$$set({cropEnableZoom:t}),E()}get cropEnableZoomInput(){return this.$$.ctx[105]}set cropEnableZoomInput(t){this.$$set({cropEnableZoomInput:t}),E()}get cropEnableZoomAutoHide(){return this.$$.ctx[106]}set cropEnableZoomAutoHide(t){this.$$set({cropEnableZoomAutoHide:t}),E()}get cropEnableImageSelection(){return this.$$.ctx[107]}set cropEnableImageSelection(t){this.$$set({cropEnableImageSelection:t}),E()}get cropEnableInfoIndicator(){return this.$$.ctx[108]}set cropEnableInfoIndicator(t){this.$$set({cropEnableInfoIndicator:t}),E()}get cropEnableZoomTowardsWheelPosition(){return this.$$.ctx[109]}set cropEnableZoomTowardsWheelPosition(t){this.$$set({cropEnableZoomTowardsWheelPosition:t}),E()}get cropEnableLimitWheelInputToCropSelection(){return this.$$.ctx[110]}set cropEnableLimitWheelInputToCropSelection(t){this.$$set({cropEnableLimitWheelInputToCropSelection:t}),E()}get cropEnableCenterImageSelection(){return this.$$.ctx[111]}set cropEnableCenterImageSelection(t){this.$$set({cropEnableCenterImageSelection:t}),E()}get cropEnableButtonRotateLeft(){return this.$$.ctx[112]}set cropEnableButtonRotateLeft(t){this.$$set({cropEnableButtonRotateLeft:t}),E()}get cropEnableButtonRotateRight(){return this.$$.ctx[113]}set cropEnableButtonRotateRight(t){this.$$set({cropEnableButtonRotateRight:t}),E()}get cropEnableButtonFlipHorizontal(){return this.$$.ctx[114]}set cropEnableButtonFlipHorizontal(t){this.$$set({cropEnableButtonFlipHorizontal:t}),E()}get cropEnableButtonFlipVertical(){return this.$$.ctx[115]}set cropEnableButtonFlipVertical(t){this.$$set({cropEnableButtonFlipVertical:t}),E()}get cropSelectPresetOptions(){return this.$$.ctx[116]}set cropSelectPresetOptions(t){this.$$set({cropSelectPresetOptions:t}),E()}get cropEnableSelectPreset(){return this.$$.ctx[117]}set cropEnableSelectPreset(t){this.$$set({cropEnableSelectPreset:t}),E()}get cropEnableFilterMatchAspectRatio(){return this.$$.ctx[118]}set cropEnableFilterMatchAspectRatio(t){this.$$set({cropEnableFilterMatchAspectRatio:t}),E()}get cropSelectPresetFilter(){return this.$$.ctx[97]}set cropSelectPresetFilter(t){this.$$set({cropSelectPresetFilter:t}),E()}get cropEnableButtonToggleCropLimit(){return this.$$.ctx[119]}set cropEnableButtonToggleCropLimit(t){this.$$set({cropEnableButtonToggleCropLimit:t}),E()}get cropWillRenderTools(){return this.$$.ctx[120]}set cropWillRenderTools(t){this.$$set({cropWillRenderTools:t}),E()}get cropWillRenderInfoIndicator(){return this.$$.ctx[121]}set cropWillRenderInfoIndicator(t){this.$$set({cropWillRenderInfoIndicator:t}),E()}get cropActiveTransformTool(){return this.$$.ctx[122]}set cropActiveTransformTool(t){this.$$set({cropActiveTransformTool:t}),E()}get cropMinimizeToolbar(){return this.$$.ctx[123]}set cropMinimizeToolbar(t){this.$$set({cropMinimizeToolbar:t}),E()}get cropInteractionFocus(){return this.$$.ctx[124]}set cropInteractionFocus(t){this.$$set({cropInteractionFocus:t}),E()}get cropRotationRange(){return this.$$.ctx[3]}set cropRotationRange(t){this.$$set({cropRotationRange:t}),E()}get cropMaskOpacity(){return this.$$.ctx[125]}set cropMaskOpacity(t){this.$$set({cropMaskOpacity:t}),E()}get locale(){return this.$$.ctx[4]}set locale(t){this.$$set({locale:t}),E()}get cropFormatIconSelectPreset(){return this.$$.ctx[126]}set cropFormatIconSelectPreset(t){this.$$set({cropFormatIconSelectPreset:t}),E()}get cropFormatIconCropBoundary(){return this.$$.ctx[127]}set cropFormatIconCropBoundary(t){this.$$set({cropFormatIconCropBoundary:t}),E()}}]};function s6(t){let e,n,i,r,o,a,s,l=t[77],c=(Un(t[77].label)?t[77].label(t[2]):t[77].label)+"";function d(...h){return t[51](t[77],...h)}const u=()=>t[52](n,l),p=()=>t[52](null,l);return{c(){e=$t("div"),n=$t("div"),i=ce(),r=$t("span"),o=Ti(c),S(n,"class",Wb),S(e,"slot","option"),S(e,"class","PinturaFilterOption")},m(h,$){tt(h,e,$),At(e,n),u(),At(e,i),At(e,r),At(r,o),a||(s=[Mt(n,"measure",d),Tn(Fr.call(null,n))],a=!0)},p(h,$){l!==(t=h)[77]&&(p(),l=t[77],u()),4&$[0]|32768&$[2]&&c!==(c=(Un(t[77].label)?t[77].label(t[2]):t[77].label)+"")&&Yi(o,c)},d(h){h&&J(e),p(),a=!1,Gn(s)}}}function l6(t){let e,n;return e=new vs({props:{locale:t[2],layout:"row",options:t[3],selectedIndex:t[12],onchange:t[32],$$slots:{option:[s6,({option:i})=>({77:i}),({option:i})=>[0,0,i?32768:0]]},$$scope:{ctx:t}}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};4&r[0]&&(o.locale=i[2]),8&r[0]&&(o.options=i[3]),4096&r[0]&&(o.selectedIndex=i[12]),1028&r[0]|98304&r[2]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function c6(t){let e,n,i,r,o,a,s,l;function c(h){t[54](h)}function d(h){t[55](h)}function u(h){t[56](h)}let p={elasticity:t[13]*t[19],onscroll:t[53],$$slots:{default:[l6]},$$scope:{ctx:t}};return t[4]!==void 0&&(p.maskFeatherStartOpacity=t[4]),t[5]!==void 0&&(p.maskFeatherEndOpacity=t[5]),t[6]!==void 0&&(p.maskFeatherSize=t[6]),n=new _a({props:p}),Hn.push(()=>Io(n,"maskFeatherStartOpacity",c)),Hn.push(()=>Io(n,"maskFeatherEndOpacity",d)),Hn.push(()=>Io(n,"maskFeatherSize",u)),n.$on("measure",t[57]),{c(){e=$t("div"),Wt(n.$$.fragment),S(e,"slot","footer"),Tt(e,"transform",t[11])},m(h,$){tt(h,e,$),Bt(n,e,null),a=!0,s||(l=[Mt(e,"transitionend",t[30]),Mt(e,"measure",t[58]),Tn(Fr.call(null,e,{observePosition:!0}))],s=!0)},p(h,$){const g={};8192&$[0]&&(g.elasticity=h[13]*h[19]),128&$[0]&&(g.onscroll=h[53]),5132&$[0]|65536&$[2]&&(g.$$scope={dirty:$,ctx:h}),!i&&16&$[0]&&(i=!0,g.maskFeatherStartOpacity=h[4],Go(()=>i=!1)),!r&&32&$[0]&&(r=!0,g.maskFeatherEndOpacity=h[5],Go(()=>r=!1)),!o&&64&$[0]&&(o=!0,g.maskFeatherSize=h[6],Go(()=>o=!1)),n.$set(g),2048&$[0]&&Tt(e,"transform",h[11])},i(h){a||(R(n.$$.fragment,h),a=!0)},o(h){B(n.$$.fragment,h),a=!1},d(h){h&&J(e),Ot(n),s=!1,Gn(l)}}}function d6(t){let e,n;return e=new wl({props:{$$slots:{footer:[c6]},$$scope:{ctx:t}}}),e.$on("measure",t[59]),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};16380&r[0]|65536&r[2]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}let Wb="PinturaFilterPreview";function u6(t,e,n){let i,r,o,a,s,l,c,d,u,p,h,$,g,f,x,v,w,T,I,M,F=Ke,C=()=>(F(),F=Xr(y,Ct=>n(43,d=Ct)),y),z=Ke,j=()=>(z(),z=Xr(A,Ct=>n(49,w=Ct)),A);t.$$.on_destroy.push(()=>F()),t.$$.on_destroy.push(()=>z());let{isActive:A}=e;j();let{isActiveFraction:y}=e;C();let{stores:st}=e,{locale:G}=e,{filterFunctions:k}=e,{filterOptions:H}=e;const rt=mi("elasticityMultiplier");D(t,rt,Ct=>n(13,M=Ct));const{history:gt,interfaceImages:ct,stageRectBase:V,utilRect:N,animation:kt,scrollElasticity:bt,imageSize:et,imagePreview:Pt,imageCropRect:wt,imageRotation:Q,imageFlipX:Ut,imageFlipY:lt,imageBackgroundColor:q,imageGamma:vt,imageColorMatrix:dt,allowPan:Ht,allowZoom:it,allowZoomControls:Vt,allowPlayPause:Dt}=st;D(t,ct,Ct=>n(60,u=Ct)),D(t,V,Ct=>n(48,v=Ct)),D(t,N,Ct=>n(47,x=Ct)),D(t,kt,Ct=>n(50,T=Ct)),D(t,et,Ct=>n(62,h=Ct)),D(t,Pt,Ct=>n(42,c=Ct)),D(t,q,Ct=>n(61,p=Ct)),D(t,vt,Ct=>n(44,$=Ct)),D(t,dt,Ct=>n(40,s=Ct));const Zt=fe({});D(t,Zt,Ct=>n(46,f=Ct));const mt=(Ct,de)=>It(Zt,f[Ct.value]=de,f),Ft=Nn(Zt,Ct=>{if(!Ct[void 0])return;const de=Ct[void 0];return I&&id(I,de)?I:io(de)});D(t,Ft,Ct=>n(63,I=Ct));const ht=Nn([A,Ft,wt,et,Q,Ut,lt],([Ct,de,ln,Je,Qe,Ie,Ye],yn)=>{if(!Ct||!de||!Je)return g;const Sn=Yr(Je),Fn=Ln(Sn),zn=x0(Je,ln,Qe),un=Ln(zn),Y=Xi(Ve(Fn),un),at=Yl(Ve(Y)),Z=Math.max(de.width/ln.width,de.height/ln.height);yn({origin:at,translation:Y,rotation:{x:Ye?Math.PI:0,y:Ie?Math.PI:0,z:Qe},scale:Z})});D(t,ht,Ct=>n(45,g=Ct));const Yt=mn(T?20:0);let Nt;D(t,Yt,Ct=>n(39,a=Ct));const Qt={};let re,xt,_,ke,ne,Xt,he={x:0,y:0};const ae=fe([]);D(t,ae,Ct=>n(41,l=Ct));const Re=Ct=>{const de={...Ct,data:c,size:h,offset:{...Ct.offset},mask:{...Ct.mask},backgroundColor:p};return de.opacity=d,de.offset.y+=a,de.mask.y+=a,de.id="filter",de},nn=()=>u.filter(Ct=>Ct.id!=="filter");return Xo(()=>{ct.set([])}),t.$$set=Ct=>{"isActive"in Ct&&j(n(0,A=Ct.isActive)),"isActiveFraction"in Ct&&C(n(1,y=Ct.isActiveFraction)),"stores"in Ct&&n(34,st=Ct.stores),"locale"in Ct&&n(2,G=Ct.locale),"filterFunctions"in Ct&&n(35,k=Ct.filterFunctions),"filterOptions"in Ct&&n(3,H=Ct.filterOptions)},t.$$.update=()=>{if(262144&t.$$.dirty[1]&&Ht.set(w),262144&t.$$.dirty[1]&&it.set(w),262144&t.$$.dirty[1]&&Vt.set(w),262144&t.$$.dirty[1]&&w&&Dt.set(!1),8&t.$$.dirty[0]&&n(38,i=Ws(H)),640&t.$$.dirty[1]&&n(12,r=((Ct,de)=>{if(!Ct||!Ct.filter||!de)return 0;const ln=Ct.filter;return de.findIndex(([Je])=>{if(!k[Je])return!1;const Qe=k[Je]();return ys(Qe,ln)})})(s,i)),786432&t.$$.dirty[1]&&T&&Yt.set(w?0:20),512&t.$$.dirty[0]|458752&t.$$.dirty[1]&&w&&x&&v&&Xt&&n(37,ne={x:v.x-x.x,y:v.y-x.y+Xt.y}),496&t.$$.dirty[0]|58096&t.$$.dirty[1]&&g&&ne&&he&&ke&&Nt){const Ct=ne.x+ke.x+he.x,de=ne.y,ln=ke.x+ne.x,Je=ln+ke.width;ae.set(i.map(([Qe],Ie)=>{const Ye=f[Qe],yn=he.x+Ye.x,Sn=yn+Ye.width;if(Sn<0||yn>ke.width)return!1;const Fn=Ct+Ye.x,zn=de+Ye.y,un=(at=>({origin:Ve(at.origin),translation:Ve(at.translation),rotation:{...at.rotation},scale:at.scale}))(g);un.offset=ut(.5*Ye.width+Fn,.5*Ye.height+zn),un.maskOpacity=1,un.mask=Ui(Fn+0,zn,Ye.width+0,Ye.height),un.maskFeather=[1,0,1,0,1,Je,1,Je],yn<_&&re<1&&(un.maskFeather[0]=re,un.maskFeather[1]=ln,un.maskFeather[2]=1,un.maskFeather[3]=ln+_),Sn>ke.width-_&&xt<1&&(un.maskFeather[4]=xt,un.maskFeather[5]=Je-_,un.maskFeather[6]=1,un.maskFeather[7]=Je),un.maskCornerRadius=Nt[Qe];let Y=s&&Object.keys(s).filter(at=>at!="filter").map(at=>s[at])||[];return Un(k[Qe])&&Y.push(k[Qe]()),un.colorMatrix=Y.length?g0(Y):void 0,un.gamma=$,un}).filter(Boolean))}if(7424&t.$$.dirty[1])if(d>0&&l){const Ct=[...nn(),...l.map(Re)];ct.set(Ct)}else ct.set(nn());256&t.$$.dirty[1]&&n(11,o=a?`translateY(${a}px)`:"none")},[A,y,G,H,re,xt,_,he,ke,Xt,Qt,o,r,M,rt,ct,V,N,kt,bt,et,Pt,q,vt,dt,Zt,mt,Ft,ht,Yt,Ct=>{Ct.target.className===Wb&&n(36,Nt=Object.keys(Qt).reduce((de,ln)=>{const Je=Qt[ln],Qe=getComputedStyle(Je),Ie=["top-left","top-right","bottom-left","bottom-right"].map(Ye=>Qe.getPropertyValue(`border-${Ye}-radius`)).map(gb).map(Ye=>1.25*Ye);return de[ln]=Ie,de},{}))},ae,({value:Ct})=>{It(dt,s={...s,filter:Un(k[Ct])?k[Ct]():void 0},s),gt.write()},"filter",st,k,Nt,ne,i,a,s,l,c,d,$,g,f,x,v,w,T,(Ct,de)=>mt(Ct,de.detail),function(Ct,de){Hn[Ct?"unshift":"push"](()=>{Qt[de.value]=Ct,n(10,Qt)})},Ct=>n(7,he=Ct),function(Ct){re=Ct,n(4,re)},function(Ct){xt=Ct,n(5,xt)},function(Ct){_=Ct,n(6,_)},Ct=>n(8,ke=Ct.detail),Ct=>n(9,Xt=Ct.detail),function(Ct){qr.call(this,t,Ct)}]}var p6={util:["filter",class extends fn{constructor(t){super(),$n(this,t,u6,d6,dn,{name:33,isActive:0,isActiveFraction:1,stores:34,locale:2,filterFunctions:35,filterOptions:3},null,[-1,-1,-1])}get name(){return this.$$.ctx[33]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),E()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),E()}get stores(){return this.$$.ctx[34]}set stores(t){this.$$set({stores:t}),E()}get locale(){return this.$$.ctx[2]}set locale(t){this.$$set({locale:t}),E()}get filterFunctions(){return this.$$.ctx[35]}set filterFunctions(t){this.$$set({filterFunctions:t}),E()}get filterOptions(){return this.$$.ctx[3]}set filterOptions(t){this.$$set({filterOptions:t}),E()}}]};function qf(t){let e,n,i,r;e=new _a({props:{elasticity:t[6]*t[9],class:"PinturaControlListScroller",$$slots:{default:[m6]},$$scope:{ctx:t}}});const o=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[4]},t[5]];let a={$$slots:{default:[g6,({panel:s})=>({42:s}),({panel:s})=>[0,s?2048:0]]},$$scope:{ctx:t}};for(let s=0;s<o.length;s+=1)a=Oi(a,o[s]);return i=new d1({props:a}),{c(){Wt(e.$$.fragment),n=ce(),Wt(i.$$.fragment)},m(s,l){Bt(e,s,l),tt(s,n,l),Bt(i,s,l),r=!0},p(s,l){const c={};64&l[0]&&(c.elasticity=s[6]*s[9]),38&l[0]|8192&l[1]&&(c.$$scope={dirty:l,ctx:s}),e.$set(c);const d=48&l[0]?Lr(o,[o[0],o[1],16&l[0]&&{panels:s[4]},32&l[0]&&Nr(s[5])]):{};128&l[0]|10240&l[1]&&(d.$$scope={dirty:l,ctx:s}),i.$set(d)},i(s){r||(R(e.$$.fragment,s),R(i.$$.fragment,s),r=!0)},o(s){B(e.$$.fragment,s),B(i.$$.fragment,s),r=!1},d(s){Ot(e,s),s&&J(n),Ot(i,s)}}}function h6(t){let e,n,i=t[43].label+"";return{c(){e=$t("span"),n=Ti(i)},m(r,o){tt(r,e,o),At(e,n)},p(r,o){4096&o[1]&&i!==(i=r[43].label+"")&&Yi(n,i)},d(r){r&&J(e)}}}function m6(t){let e,n;const i=[{class:"PinturaControlList"},{tabs:t[1]},t[5]];let r={$$slots:{default:[h6,({tab:o})=>({43:o}),({tab:o})=>[0,o?4096:0]]},$$scope:{ctx:t}};for(let o=0;o<i.length;o+=1)r=Oi(r,i[o]);return e=new c1({props:r}),e.$on("select",t[24]),{c(){Wt(e.$$.fragment)},m(o,a){Bt(e,o,a),n=!0},p(o,a){const s=34&a[0]?Lr(i,[i[0],2&a[0]&&{tabs:o[1]},32&a[0]&&Nr(o[5])]):{};12288&a[1]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){n||(R(e.$$.fragment,o),n=!0)},o(o){B(e.$$.fragment,o),n=!1},d(o){Ot(e,o)}}}function g6(t){let e,n;const i=[t[7][t[42]]];let r={};for(let o=0;o<i.length;o+=1)r=Oi(r,i[o]);return e=new z0({props:r}),{c(){Wt(e.$$.fragment)},m(o,a){Bt(e,o,a),n=!0},p(o,a){const s=128&a[0]|2048&a[1]?Lr(i,[Nr(o[7][o[42]])]):{};e.$set(s)},i(o){n||(R(e.$$.fragment,o),n=!0)},o(o){B(e.$$.fragment,o),n=!1},d(o){Ot(e,o)}}}function $6(t){let e,n,i=t[5]&&qf(t);return{c(){e=$t("div"),i&&i.c(),S(e,"slot","footer"),Tt(e,"transform",t[3])},m(r,o){tt(r,e,o),i&&i.m(e,null),n=!0},p(r,o){r[5]?i?(i.p(r,o),32&o[0]&&R(i,1)):(i=qf(r),i.c(),R(i,1),i.m(e,null)):i&&(Le(),B(i,1,1,()=>{i=null}),Fe()),8&o[0]&&Tt(e,"transform",r[3])},i(r){n||(R(i),n=!0)},o(r){B(i),n=!1},d(r){r&&J(e),i&&i.d()}}}function f6(t){let e,n;return e=new wl({props:{$$slots:{footer:[$6]},$$scope:{ctx:t}}}),e.$on("measure",t[25]),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};254&r[0]|8192&r[1]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function y6(t,e,n){let i,r,o,a,s,l,c,d,u,p,h,$=Ke,g=()=>($(),$=Xr(x,wt=>n(21,c=wt)),x);t.$$.on_destroy.push(()=>$());let{stores:f}=e,{isActive:x}=e;g();let{locale:v={}}=e,{finetuneControlConfiguration:w}=e,{finetuneOptions:T}=e,{finetuneNudgePrecision:I}=e;const{history:M,animation:F,scrollElasticity:C,rangeInputElasticity:z,imageColorMatrix:j,imageConvolutionMatrix:A,imageGamma:y,imageVignette:st,imageNoise:G,allowPan:k,allowZoom:H,allowZoomControls:rt,allowPlayPause:gt}=f;D(t,F,wt=>n(22,d=wt));const ct={imageColorMatrix:j,imageConvolutionMatrix:A,imageGamma:y,imageVignette:st,imageNoise:G},V=mi("elasticityMultiplier");D(t,V,wt=>n(6,p=wt));const N="finetune-"+la(),kt=fe({});D(t,kt,wt=>n(23,u=wt));const bt=fe({});D(t,bt,wt=>n(7,h=wt));let et=[];const Pt=mn(d?20:0);return D(t,Pt,wt=>n(20,l=wt)),t.$$set=wt=>{"stores"in wt&&n(15,f=wt.stores),"isActive"in wt&&g(n(0,x=wt.isActive)),"locale"in wt&&n(16,v=wt.locale),"finetuneControlConfiguration"in wt&&n(17,w=wt.finetuneControlConfiguration),"finetuneOptions"in wt&&n(18,T=wt.finetuneOptions),"finetuneNudgePrecision"in wt&&n(19,I=wt.finetuneNudgePrecision)},t.$$.update=()=>{var wt;2097152&t.$$.dirty[0]&&k.set(c),2097152&t.$$.dirty[0]&&H.set(c),2097152&t.$$.dirty[0]&&rt.set(c),2097152&t.$$.dirty[0]&&c&&gt.set(!0),327680&t.$$.dirty[0]&&n(1,i=T?T.map(([Q,Ut])=>({id:Q,label:Un(Ut)?Ut(v):Ut})):[]),2&t.$$.dirty[0]&&n(2,r=i.length?i[0].id:void 0),4&t.$$.dirty[0]&&n(5,o=r&&{name:N,selected:r}),2&t.$$.dirty[0]&&n(4,a=i.map(Q=>Q.id)),131072&t.$$.dirty[0]&&w&&(wt=w,et&&et.forEach(Q=>Q()),et=a.map(Q=>{const{getStore:Ut,getValue:lt=ai}=wt[Q];return Ut(ct).subscribe(q=>{const vt=q!=null?lt(q):q;It(kt,u={...u,[Q]:vt},u)})})),8519680&t.$$.dirty[0]&&w&&u&&It(bt,h=Object.keys(u).reduce((Q,Ut)=>{const{base:lt,min:q,max:vt,getLabel:dt,getStore:Ht,setValue:it=(Zt,mt)=>Zt.set(mt)}=w[Ut],Vt=Ht(ct),Dt=u[Ut]!=null?u[Ut]:lt;return Q[Ut]={base:lt,min:q,max:vt,value:Dt,valueLabel:dt?dt(Dt,q,vt,vt-q):Math.round(100*Dt),oninputmove:Zt=>{it(Vt,Zt)},oninputend:Zt=>{it(Vt,Zt),M.write()},elasticity:p*z,labelReset:v.labelReset,nudgeMultiplier:I},Q},{}),h),6291456&t.$$.dirty[0]&&d&&Pt.set(c?0:20),1048576&t.$$.dirty[0]&&n(3,s=l?`translateY(${l}px)`:"none")},[x,i,r,s,a,o,p,h,F,C,V,kt,bt,Pt,"finetune",f,v,w,T,I,l,c,d,u,({detail:wt})=>n(2,r=wt),function(wt){qr.call(this,t,wt)}]}var b6={util:["finetune",class extends fn{constructor(t){super(),$n(this,t,y6,f6,dn,{name:14,stores:15,isActive:0,locale:16,finetuneControlConfiguration:17,finetuneOptions:18,finetuneNudgePrecision:19},null,[-1,-1])}get name(){return this.$$.ctx[14]}get stores(){return this.$$.ctx[15]}set stores(t){this.$$set({stores:t}),E()}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),E()}get locale(){return this.$$.ctx[16]}set locale(t){this.$$set({locale:t}),E()}get finetuneControlConfiguration(){return this.$$.ctx[17]}set finetuneControlConfiguration(t){this.$$set({finetuneControlConfiguration:t}),E()}get finetuneOptions(){return this.$$.ctx[18]}set finetuneOptions(t){this.$$set({finetuneOptions:t}),E()}get finetuneNudgePrecision(){return this.$$.ctx[19]}set finetuneNudgePrecision(t){this.$$set({finetuneNudgePrecision:t}),E()}}]},t1=(t,e)=>{const n=e.length;return t<0?t%n+n:t>=n?t%n:t};function Kf(t,e,n){const i=t.slice();return i[51]=e[n].key,i[52]=e[n].index,i[53]=e[n].translate,i[16]=e[n].scale,i[54]=e[n].selected,i[15]=e[n].rotate,i[55]=e[n].dir,i[56]=e[n].center,i[57]=e[n].type,i[4]=e[n].visible,i[58]=e[n].role,i[59]=e[n].tabindex,i[60]=e[n].label,i[61]=e[n].orientation,i[62]=e[n].valuemin,i[63]=e[n].valuemax,i[64]=e[n].valuenow,i}function Jf(t){let e;return{c(){e=$t("div"),S(e,"class","PinturaShapeManipulator"),S(e,"data-control","point"),Tt(e,"pointer-events","none"),Tt(e,"opacity",t[6]),Tt(e,"transform",`translate3d(${t[56].x}px, ${t[56].y}px, 0) scale(${t[7]}, ${t[7]})`)},m(n,i){tt(n,e,i)},p(n,i){64&i[0]&&Tt(e,"opacity",n[6]),160&i[0]&&Tt(e,"transform",`translate3d(${n[56].x}px, ${n[56].y}px, 0) scale(${n[7]}, ${n[7]})`)},d(n){n&&J(e)}}}function Qf(t,e){let n,i,r,o,a,s,l,c,d,u,p,h,$,g;function f(...v){return e[23](e[52],...v)}let x=e[57]==="edge"&&e[4]&&Jf(e);return{key:t,first:null,c(){n=$t("div"),p=ce(),x&&x.c(),h=Di(),S(n,"role",i=e[58]),S(n,"tabindex",r=e[59]),S(n,"aria-label",o=e[60]),S(n,"aria-orientation",a=e[61]),S(n,"aria-valuemin",s=e[62]),S(n,"aria-valuemax",l=e[63]),S(n,"aria-valuenow",c=e[64]),S(n,"class","PinturaShapeManipulator"),S(n,"data-control",d=e[57]),S(n,"data-selected",u=e[54]),Tt(n,"cursor",e[55]?e[55]+"-resize":"move"),Tt(n,"opacity",e[6]),Tt(n,"--tx",e[53].x),Tt(n,"--ty",e[53].y),Tt(n,"--r",(e[57]==="edge"?e[15]:0)+"rad"),Tt(n,"--sx",e[57]==="point"?e[7]:e[16].x),Tt(n,"--sy",e[57]==="point"?e[7]:e[16].y),this.first=n},m(v,w){tt(v,n,w),tt(v,p,w),x&&x.m(v,w),tt(v,h,w),$||(g=[Mt(n,"nudge",f),Tn(ws.call(null,n,{preventDefault:!0})),Mt(n,"interactionstart",function(){Cn(e[11]("start",e[52]))&&e[11]("start",e[52]).apply(this,arguments)}),Mt(n,"interactionupdate",function(){Cn(e[11]("move",e[52]))&&e[11]("move",e[52]).apply(this,arguments)}),Mt(n,"interactionend",function(){Cn(e[11]("end",e[52]))&&e[11]("end",e[52]).apply(this,arguments)}),Tn(ks.call(null,n,{observeKeys:!0}))],$=!0)},p(v,w){e=v,32&w[0]&&i!==(i=e[58])&&S(n,"role",i),32&w[0]&&r!==(r=e[59])&&S(n,"tabindex",r),32&w[0]&&o!==(o=e[60])&&S(n,"aria-label",o),32&w[0]&&a!==(a=e[61])&&S(n,"aria-orientation",a),32&w[0]&&s!==(s=e[62])&&S(n,"aria-valuemin",s),32&w[0]&&l!==(l=e[63])&&S(n,"aria-valuemax",l),32&w[0]&&c!==(c=e[64])&&S(n,"aria-valuenow",c),32&w[0]&&d!==(d=e[57])&&S(n,"data-control",d),32&w[0]&&u!==(u=e[54])&&S(n,"data-selected",u),32&w[0]&&Tt(n,"cursor",e[55]?e[55]+"-resize":"move"),64&w[0]&&Tt(n,"opacity",e[6]),32&w[0]&&Tt(n,"--tx",e[53].x),32&w[0]&&Tt(n,"--ty",e[53].y),32&w[0]&&Tt(n,"--r",(e[57]==="edge"?e[15]:0)+"rad"),160&w[0]&&Tt(n,"--sx",e[57]==="point"?e[7]:e[16].x),160&w[0]&&Tt(n,"--sy",e[57]==="point"?e[7]:e[16].y),e[57]==="edge"&&e[4]?x?x.p(e,w):(x=Jf(e),x.c(),x.m(h.parentNode,h)):x&&(x.d(1),x=null)},d(v){v&&J(n),v&&J(p),x&&x.d(v),v&&J(h),$=!1,Gn(g)}}}function t2(t){let e,n,i;return{c(){e=$t("div"),S(e,"role","button"),S(e,"aria-label","Drag rotator"),S(e,"tabindex","0"),S(e,"class","PinturaShapeManipulator"),S(e,"data-control","rotate"),Tt(e,"transform",`translate3d(${t[0].x}px, ${t[0].y}px, 0) scale(${t[7]}, ${t[7]})`),Tt(e,"opacity",t[6])},m(r,o){tt(r,e,o),n||(i=[Mt(e,"nudge",t[13]),Tn(ws.call(null,e,{preventDefault:!0})),Mt(e,"interactionstart",t[15]("start")),Mt(e,"interactionupdate",t[15]("move")),Mt(e,"interactionend",t[15]("end")),Tn(ks.call(null,e,{observeKeys:!0}))],n=!0)},p(r,o){129&o[0]&&Tt(e,"transform",`translate3d(${r[0].x}px, ${r[0].y}px, 0) scale(${r[7]}, ${r[7]})`),64&o[0]&&Tt(e,"opacity",r[6])},d(r){r&&J(e),n=!1,Gn(i)}}}function e2(t){let e,n,i;return{c(){e=$t("div"),S(e,"role","button"),S(e,"aria-label","Drag scalar"),S(e,"tabindex","0"),S(e,"class","PinturaShapeManipulator"),S(e,"data-control","scale"),Tt(e,"transform",`translate3d(${t[1].x}px, ${t[1].y}px, 0) scale(${t[7]}, ${t[7]})`),Tt(e,"opacity",t[6])},m(r,o){tt(r,e,o),n||(i=[Mt(e,"nudge",t[14]),Tn(ws.call(null,e,{preventDefault:!0})),Mt(e,"interactionstart",t[16]("start")),Mt(e,"interactionupdate",t[16]("move")),Mt(e,"interactionend",t[16]("end")),Tn(ks.call(null,e,{observeKeys:!0}))],n=!0)},p(r,o){130&o[0]&&Tt(e,"transform",`translate3d(${r[1].x}px, ${r[1].y}px, 0) scale(${r[7]}, ${r[7]})`),64&o[0]&&Tt(e,"opacity",r[6])},d(r){r&&J(e),n=!1,Gn(i)}}}function x6(t){let e,n,i,r=[],o=new Map,a=t[5];const s=d=>d[51];for(let d=0;d<a.length;d+=1){let u=Kf(t,a,d),p=s(u);o.set(p,r[d]=Qf(p,u))}let l=t[2]&&t[0]&&t2(t),c=t[3]&&t[1]&&e2(t);return{c(){for(let d=0;d<r.length;d+=1)r[d].c();e=ce(),l&&l.c(),n=ce(),c&&c.c(),i=Di()},m(d,u){for(let p=0;p<r.length;p+=1)r[p].m(d,u);tt(d,e,u),l&&l.m(d,u),tt(d,n,u),c&&c.m(d,u),tt(d,i,u)},p(d,u){6368&u[0]&&(a=d[5],r=es(r,u,s,1,d,a,o,e.parentNode,Fy,Qf,e,Kf)),d[2]&&d[0]?l?l.p(d,u):(l=t2(d),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null),d[3]&&d[1]?c?c.p(d,u):(c=e2(d),c.c(),c.m(i.parentNode,i)):c&&(c.d(1),c=null)},i:Ke,o:Ke,d(d){for(let u=0;u<r.length;u+=1)r[u].d(d);d&&J(e),l&&l.d(d),d&&J(n),c&&c.d(d),d&&J(i)}}}function v6(t,e,n){let i,r,o,a;const s=Ta(),l=.5*$a,c=sa-l,d=sa+l,u=-sa,p=u-l,h=u+l,$=zp-l,g=-zp+l,f=l,x=-l,v=sa-$a,w=v-l,T=v+l,I=zp-$a,M=I-l,F=I+l,C=u-$a,z=C+l,j=C-l,A=u+$a,y=A+l,st=A-l;let{visible:G=!1}=e,{points:k=[]}=e,{rotatorPoint:H}=e,{bounds:rt=null}=e,{scalarPoint:gt}=e,{selectedPoint:ct}=e,{enableDragEdges:V=!0}=e,{enableDragPoints:N=!0}=e,{enableRotatePoints:kt=!0}=e,{enableScalePoints:bt=!0}=e;const et=mi("isAnimated");D(t,et,q=>n(22,r=q));const Pt=mn(.5,{precision:1e-4,stiffness:.3,damping:.7});D(t,Pt,q=>n(7,a=q));const wt=mn(0,{precision:.001,stiffness:.3,damping:.7});D(t,wt,q=>n(6,o=q));const Q=q=>{let vt="";return(q<=d&&q>=c||q>=p&&q<=h)&&(vt="ns"),(q<=g||q>=$||q>=x&&q<=f)&&(vt="ew"),(q>=M&&q<=F||q<=y&&q>=st)&&(vt="nesw"),(q>=w&&q<=T||q<=z&&q>=j)&&(vt="nwse"),vt},Ut=(q,vt)=>{let dt=0;const Ht=oa(q),it=[],Vt=q.length,[Dt,Zt,mt,Ft]=q.reduce(([ht,Yt,Nt,Qt],{x:re,y:xt})=>(Qt=Math.min(Qt,re),Yt=Math.max(Yt,re),[ht=Math.min(ht,xt),Yt,Nt=Math.max(Nt,xt),Qt]),[1/0,-1/0,-1/0,1/0]);for(;dt<Vt;dt++){const ht=t1(dt-1,q),Yt=t1(dt+1,q),Nt=q[ht],Qt=q[dt],re=q[Yt],xt=Math.atan2(re.y-Qt.y,re.x-Qt.x);if(N){const ae=yo(ut(Nt.x-Qt.x,Nt.y-Qt.y)),Re=yo(ut(re.x-Qt.x,re.y-Qt.y)),nn=ut(ae.x+Re.x,ae.y+Re.y),Ct=V?N&&Q(Math.atan2(nn.y,nn.x)):void 0;it.push({index:[dt],key:"point-"+dt,type:"point",selected:ct===dt,scale:{x:1,y:1},translate:{x:Qt.x,y:Qt.y},angle:void 0,rotate:kt,center:Qt,dir:Ct})}if(!V||Array.isArray(V)&&!V.some(([ae,Re])=>dt===ae&&Yt===Re))continue;const _=ut(Qt.x+.5*(re.x-Qt.x),Qt.y+.5*(re.y-Qt.y)),ke=["t","r","b","l"][dt];let ne,Xt,he;ke==="l"&&(ne=rt.x,Xt=Zt,he=Ft),ke==="t"&&(ne=rt.y,Xt=mt,he=Dt),ke==="r"&&(ne=Ft,Xt=rt.width,he=Zt),ke==="b"&&(ne=Dt,Xt=rt.height,he=mt),it.push({index:[dt,Yt],key:"edge-"+dt,type:"edge",scale:{x:ro(Qt,re),y:1},translate:{x:Qt.x,y:Qt.y},angle:xt,rotate:xt,center:_,visible:Array.isArray(V),dir:Q(Math.atan2(Ht.y-_.y,Ht.x-_.x)),role:"slider",tabindex:0,label:"Drag "+Bb[ke],orientation:""+Ob[ke],valuemin:Math.round(ne),valuemax:Math.round(Xt),valuenow:Math.round(he)})}return it},lt=(q,vt)=>{s("resizestart",{indexes:q,translation:ci(),isNudge:!0}),s("resizemove",{indexes:q,translation:vt,isNudge:!0}),s("resizeend",{indexes:q,translation:ci(),isNudge:!0})};return t.$$set=q=>{"visible"in q&&n(4,G=q.visible),"points"in q&&n(17,k=q.points),"rotatorPoint"in q&&n(0,H=q.rotatorPoint),"bounds"in q&&n(18,rt=q.bounds),"scalarPoint"in q&&n(1,gt=q.scalarPoint),"selectedPoint"in q&&n(19,ct=q.selectedPoint),"enableDragEdges"in q&&n(20,V=q.enableDragEdges),"enableDragPoints"in q&&n(21,N=q.enableDragPoints),"enableRotatePoints"in q&&n(2,kt=q.enableRotatePoints),"enableScalePoints"in q&&n(3,bt=q.enableScalePoints)},t.$$.update=()=>{4194320&t.$$.dirty[0]&&Pt.set(G?1:.5,{hard:r===!1}),4194320&t.$$.dirty[0]&&wt.set(G?1:0,{hard:r===!1}),131072&t.$$.dirty[0]&&n(5,i=Ut(k))},[H,gt,kt,bt,G,i,o,a,et,Pt,wt,(q,vt)=>({detail:dt})=>{const Ht=dt&&dt.translation?dt.translation:ut(0,0);s("resize"+q,{...dt,indexes:vt,translation:Ht})},lt,({detail:q})=>{s("rotatestart",{translation:ci(),isNudge:!0}),s("rotatemove",{translation:q,isNudge:!0}),s("rotateend",{translation:ci(),isNudge:!0})},({detail:q})=>{s("scalestart",{translation:ci(),isNudge:!0}),s("scalemove",{translation:q,isNudge:!0}),s("scaleend",{translation:ci(),isNudge:!0})},q=>({detail:vt})=>{const dt=vt&&vt.translation?vt.translation:ut(0,0);s("rotate"+q,{...vt,translation:dt})},q=>({detail:vt})=>{const dt=vt&&vt.translation?vt.translation:ut(0,0);s("scale"+q,{...vt,translation:dt})},k,rt,ct,V,N,r,(q,{detail:vt})=>lt(q,vt)]}class w6 extends fn{constructor(e){super(),$n(this,e,v6,x6,dn,{visible:4,points:17,rotatorPoint:0,bounds:18,scalarPoint:1,selectedPoint:19,enableDragEdges:20,enableDragPoints:21,enableRotatePoints:2,enableScalePoints:3},null,[-1,-1,-1])}}var jh=(t,e)=>{const n=L0(t);return Xi(n,e)},Pu=t=>document.createTextNode(t),_b=t=>(ka()&&t.endsWith("<div><br></div>")?t.replace(/<div><br><\/div>$/,"<br><br>"):t).replace(/<div><br><\/div>/g,"<br>").replace(/<\/div>/g,"").replace(/<div>/g,"<br>");function n2(t){let e,n,i,r;return{c(){e=$t("pre"),S(e,"class","PinturaContentEditable")},m(o,a){tt(o,e,a),e.innerHTML=t[0],i||(r=Tn(n=xs.call(null,e,t[7]+";position:absolute;z-index:-1;pointer-events:none;")),i=!0)},p(o,a){1&a[0]&&(e.innerHTML=o[0]),n&&Cn(n.update)&&128&a[0]&&n.update.call(null,o[7]+";position:absolute;z-index:-1;pointer-events:none;")},d(o){o&&J(e),i=!1,r()}}}function S6(t){let e,n,i,r,o,a,s=t[8]&&n2(t);return{c(){s&&s.c(),e=ce(),n=$t("pre"),S(n,"class","PinturaContentEditable"),S(n,"data-wrap-content",i=t[4]||t[5]?"wrap":"nowrap"),S(n,"contenteditable",""),S(n,"spellcheck",t[1]),S(n,"autocorrect",t[2]),S(n,"autocapitalize",t[3])},m(l,c){s&&s.m(l,c),tt(l,e,c),tt(l,n,c),t[26](n),o||(a=[Tn(r=xs.call(null,n,t[8]?t[15](t[7]):t[7])),Mt(n,"input",t[13]),Mt(n,"compositionend",t[12]),Mt(n,"paste",t[14]),Mt(n,"keydown",t[10]),Mt(n,"keyup",t[11]),Mt(n,"blur",t[9])],o=!0)},p(l,c){l[8]?s?s.p(l,c):(s=n2(l),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),48&c[0]&&i!==(i=l[4]||l[5]?"wrap":"nowrap")&&S(n,"data-wrap-content",i),2&c[0]&&S(n,"spellcheck",l[1]),4&c[0]&&S(n,"autocorrect",l[2]),8&c[0]&&S(n,"autocapitalize",l[3]),r&&Cn(r.update)&&384&c[0]&&r.update.call(null,l[8]?l[15](l[7]):l[7])},i:Ke,o:Ke,d(l){s&&s.d(l),l&&J(e),l&&J(n),t[26](null),o=!1,Gn(a)}}}function k6(t,e,n){let i,r,{spellcheck:o="false"}=e,{autocorrect:a="off"}=e,{autocapitalize:s="off"}=e,{wrapLines:l=!0}=e,{allowNewline:c=!0}=e,{textFormat:d="text"}=e,{formatInput:u=ai}=e,{formatPaste:p=ai}=e,{styles:h}=e,{innerHTML:$}=e,{oninput:g=pe}=e,{enableTextStyleShortcuts:f=!1}=e;const x=()=>{if(!w)return;const k=document.createRange();k.selectNodeContents(w);const H=j();H.removeAllRanges(),H.addRange(k)},v=Ta();let w;document.execCommand("defaultParagraphSeparator",!1,"br");const T=k=>k.replace(/<\/?(?:i|b|em|u|s|strike|strong|font)>/,"").replace(/style=".*?"/g,"").replace(/\n/gim,"<br>"),I=()=>{n(0,$=w.innerHTML);const k=_b($);v("input",k),g(k),requestAnimationFrame(()=>w&&w.scrollTo(0,0))},M=()=>{A(w);const k=d==="html"?w.innerHTML:T(w.innerHTML);n(6,w.innerHTML=u(k),w),y(w),I()},F={b:"bold",i:"italic",u:"underline",s:"strikethrough"},C=k=>{const H=fi("span");return H.dataset.bookmark=k,H},z=(k,H,rt)=>{const gt=C(rt);if(k.nodeType===Node.TEXT_NODE){const ct=k.textContent;if(rt==="start"){const V=Pu(ct.substring(0,H)),N=Pu(ct.substring(H));k.replaceWith(V,gt,N)}else{const V=Pu(ct.substring(0,H)),N=Pu(ct.substring(H));k.replaceWith(V,gt,N)}}else k.nodeType===Node.ELEMENT_NODE&&k.insertBefore(gt,k.childNodes[H])},j=()=>{const k=w.getRootNode();return"getSelection"in k?k.getSelection():document.getSelection()},A=k=>{const H=j();if(!H.getRangeAt||!H.rangeCount)return;const rt=H.getRangeAt(0),{startOffset:gt,endOffset:ct,startContainer:V,endContainer:N}=rt;if(k.contains(rt.startContainer)&&k.contains(rt.endContainer))if(V.nodeType===Node.TEXT_NODE&&V===N){const kt=V.textContent,bt=kt.substring(0,gt),et=C("start"),Pt=ct-gt>0?kt.substring(gt,ct):"",wt=C("end"),Q=kt.substring(ct);V.replaceWith(bt,et,Pt,wt,Q)}else z(V,gt,"start"),z(N,ct+(V===N?1:0),"end")},y=k=>{const H=st(k,"start"),rt=st(k,"end");if(!H||!rt)return;const gt=document.createRange();gt.setStart(H,0),gt.setEnd(rt,0);const ct=j();ct.removeAllRanges(),ct.addRange(gt),H.remove(),rt.remove()},st=(k,H)=>{const rt=k.children;for(let gt=0;gt<rt.length;gt++){const ct=rt[gt];if(ct.dataset.bookmark===H)return ct;if(ct.children.length){const V=st(ct,H);if(V)return V}}};let G;return t.$$set=k=>{"spellcheck"in k&&n(1,o=k.spellcheck),"autocorrect"in k&&n(2,a=k.autocorrect),"autocapitalize"in k&&n(3,s=k.autocapitalize),"wrapLines"in k&&n(4,l=k.wrapLines),"allowNewline"in k&&n(5,c=k.allowNewline),"textFormat"in k&&n(16,d=k.textFormat),"formatInput"in k&&n(17,u=k.formatInput),"formatPaste"in k&&n(18,p=k.formatPaste),"styles"in k&&n(19,h=k.styles),"innerHTML"in k&&n(0,$=k.innerHTML),"oninput"in k&&n(20,g=k.oninput),"enableTextStyleShortcuts"in k&&n(21,f=k.enableTextStyleShortcuts)},t.$$.update=()=>{var k;if(64&t.$$.dirty[0]&&n(25,i=!!w),33554433&t.$$.dirty[0]&&i&&$&&(k=$)!==w.innerHTML&&(n(6,w.innerHTML=k,w),w===document.activeElement&&x()),524336&t.$$.dirty[0])if(!l&&c){const H=h.includes(":right")?"text-indent:-100px!important":h.includes(":center")?"":"min-width:calc(100% + 100px)!important";n(7,G=h+";overflow:visible;"+H)}else n(7,G=h);524288&t.$$.dirty[0]&&n(8,r=h.includes("text-stroke"))},[$,o,a,s,l,c,w,G,r,()=>{v("blur")},k=>{if(/escape/i.test(k.code))return k.stopPropagation(),void v("cancel");const H=k.ctrlKey||k.metaKey;if(d==="html"&&H&&/b|i|u|s/.test(k.key))return f&&(rt=>{const gt=F[rt];gt&&document.execCommand(gt)})(k.key),void k.preventDefault();/enter/i.test(k.code)&&(k.stopPropagation(),k.isComposing||(H?v("confirm"):(c||k.preventDefault(),document.execCommand("insertLineBreak"),k.preventDefault())))},()=>{},k=>{k.data!==""&&M()},k=>{const{inputType:H}=k;H!=="insertCompositionText"&&H!=="deleteCompositionText"&&M()},k=>{k.preventDefault();const H=k.clipboardData.getData("text/plain"),rt=d==="html"?H:T(H),gt=p(rt);if(!gt.length)return;const ct=j().getRangeAt(0);ct.deleteContents(),ct.insertNode(document.createTextNode(gt)),I()},k=>k.replace("-webkit-text-stroke","--text-stroke").replace("text-shadow","--text-shadow"),d,u,p,h,g,f,()=>M(),()=>w&&w.focus(),x,i,function(k){Hn[k?"unshift":"push"](()=>{w=k,n(6,w)})}]}class C6 extends fn{constructor(e){super(),$n(this,e,k6,S6,dn,{spellcheck:1,autocorrect:2,autocapitalize:3,wrapLines:4,allowNewline:5,textFormat:16,formatInput:17,formatPaste:18,styles:19,innerHTML:0,oninput:20,enableTextStyleShortcuts:21,confirm:22,focus:23,select:24},null,[-1,-1])}get spellcheck(){return this.$$.ctx[1]}set spellcheck(e){this.$$set({spellcheck:e}),E()}get autocorrect(){return this.$$.ctx[2]}set autocorrect(e){this.$$set({autocorrect:e}),E()}get autocapitalize(){return this.$$.ctx[3]}set autocapitalize(e){this.$$set({autocapitalize:e}),E()}get wrapLines(){return this.$$.ctx[4]}set wrapLines(e){this.$$set({wrapLines:e}),E()}get allowNewline(){return this.$$.ctx[5]}set allowNewline(e){this.$$set({allowNewline:e}),E()}get textFormat(){return this.$$.ctx[16]}set textFormat(e){this.$$set({textFormat:e}),E()}get formatInput(){return this.$$.ctx[17]}set formatInput(e){this.$$set({formatInput:e}),E()}get formatPaste(){return this.$$.ctx[18]}set formatPaste(e){this.$$set({formatPaste:e}),E()}get styles(){return this.$$.ctx[19]}set styles(e){this.$$set({styles:e}),E()}get innerHTML(){return this.$$.ctx[0]}set innerHTML(e){this.$$set({innerHTML:e}),E()}get oninput(){return this.$$.ctx[20]}set oninput(e){this.$$set({oninput:e}),E()}get enableTextStyleShortcuts(){return this.$$.ctx[21]}set enableTextStyleShortcuts(e){this.$$set({enableTextStyleShortcuts:e}),E()}get confirm(){return this.$$.ctx[22]}get focus(){return this.$$.ctx[23]}get select(){return this.$$.ctx[24]}}const i2=["i","b","u","strike"].map(t=>({tag:t,tagOpen:new RegExp(`<${t}>`,"g"),tagClose:new RegExp(`</${t}>`,"g"),placeholderOpen:new RegExp(`___${t}O___`,"g"),placeholderClose:new RegExp(`___${t}C___`,"g")}));var T6=t=>t=((e,n=i2)=>(n.forEach(({tag:i,placeholderOpen:r,placeholderClose:o})=>{e=e.replace(r,`<${i}>`).replace(o,`</${i}>`)}),e))(t=(t=((e,n=i2)=>(n.forEach(({tag:i,tagOpen:r,tagClose:o})=>{e=e.replace(r,`___${i}O___`).replace(o,`___${i}C___`)}),e))(t)).replace(/ {2,}/g," ").replace(/\u00a0/g,"&nbsp;").split(`
`).join("<br>")),Ru=(t,e)=>He(t)?parseFloat(t)/100*e:t,Uc=(t,e)=>({x:Gr(t.x,e.width),y:Gr(t.y,e.height)});function r2(t,e,n){const i=t.slice();return i[318]=e[n],i[320]=n,i}function o2(t,e){let n,i,r,o,a,s,l,c,d,u,p,h=e[318].name+"";function $(){return e[198](e[320])}return r=new A0({props:{color:e[318].color}}),{key:t,first:null,c(){n=$t("li"),i=$t("button"),Wt(r.$$.fragment),o=ce(),a=$t("span"),s=Ti(h),c=ce(),S(i,"class","PinturaShapeListItem"),S(i,"type","button"),S(i,"aria-label",l="Select shape "+e[318].name),this.first=n},m(g,f){tt(g,n,f),At(n,i),Bt(r,i,null),At(i,o),At(i,a),At(a,s),At(n,c),d=!0,u||(p=Mt(i,"click",$),u=!0)},p(g,f){e=g;const x={};8388608&f[0]&&(x.color=e[318].color),r.$set(x),(!d||8388608&f[0])&&h!==(h=e[318].name+"")&&Yi(s,h),(!d||8388608&f[0]&&l!==(l="Select shape "+e[318].name))&&S(i,"aria-label",l)},i(g){d||(R(r.$$.fragment,g),d=!0)},o(g){B(r.$$.fragment,g),d=!1},d(g){g&&J(n),Ot(r),u=!1,p()}}}function a2(t){let e,n;return e=new w6({props:{visible:!0,points:t[14],bounds:t[4],rotatorPoint:t[31],scalarPoint:t[30],selectedPoint:t[19],enableDragEdges:t[20],enableDragPoints:t[33],enableRotatePoints:t[18],enableScalePoints:t[16]}}),e.$on("resizestart",t[42]),e.$on("resizemove",t[43]),e.$on("resizeend",t[44]),e.$on("rotatestart",t[45]),e.$on("rotatemove",t[46]),e.$on("rotateend",t[47]),e.$on("scalestart",t[48]),e.$on("scalemove",t[49]),e.$on("scaleend",t[50]),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};16384&r[0]&&(o.points=i[14]),16&r[0]&&(o.bounds=i[4]),1&r[1]&&(o.rotatorPoint=i[31]),1073741824&r[0]&&(o.scalarPoint=i[30]),524288&r[0]&&(o.selectedPoint=i[19]),1048576&r[0]&&(o.enableDragEdges=i[20]),4&r[1]&&(o.enableDragPoints=i[33]),262144&r[0]&&(o.enableRotatePoints=i[18]),65536&r[0]&&(o.enableScalePoints=i[16]),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function s2(t){let e,n,i,r;const o=[P6,M6],a=[];function s(l,c){return l[5]==="modal"?0:l[5]==="inline"?1:-1}return~(e=s(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=Di()},m(l,c){~e&&a[e].m(l,c),tt(l,i,c),r=!0},p(l,c){let d=e;e=s(l),e===d?~e&&a[e].p(l,c):(n&&(Le(),B(a[d],1,1,()=>{a[d]=null}),Fe()),~e?(n=a[e],n?n.p(l,c):(n=a[e]=o[e](l),n.c()),R(n,1),n.m(i.parentNode,i)):n=null)},i(l){r||(R(n),r=!0)},o(l){B(n),r=!1},d(l){~e&&a[e].d(l),l&&J(i)}}}function M6(t){let e,n,i,r,o,a,s={formatInput:t[52],wrapLines:!!t[15].width,textFormat:t[15].format,enableTextStyleShortcuts:t[6],allowNewline:t[32],styles:t[29]};return n=new C6({props:s}),t[202](n),n.$on("input",t[53]),n.$on("keyup",t[57]),n.$on("cancel",t[59]),n.$on("confirm",t[58]),{c(){e=$t("div"),Wt(n.$$.fragment),S(e,"class","PinturaInlineInput")},m(l,c){tt(l,e,c),Bt(n,e,null),r=!0,o||(a=[Tn(i=xs.call(null,e,t[28])),Mt(e,"focusout",t[203])],o=!0)},p(l,c){const d={};32768&c[0]&&(d.wrapLines=!!l[15].width),32768&c[0]&&(d.textFormat=l[15].format),64&c[0]&&(d.enableTextStyleShortcuts=l[6]),2&c[1]&&(d.allowNewline=l[32]),536870912&c[0]&&(d.styles=l[29]),n.$set(d),i&&Cn(i.update)&&268435456&c[0]&&i.update.call(null,l[28])},i(l){r||(R(n.$$.fragment,l),r=!0)},o(l){B(n.$$.fragment,l),r=!1},d(l){l&&J(e),t[202](null),Ot(n),o=!1,Gn(a)}}}function P6(t){let e,n;return e=new yb({props:{panelOffset:t[2],onconfirm:t[58],oncancel:t[59],buttonCancel:{icon:t[7].shapeIconInputCancel,label:t[7].shapeLabelInputCancel},buttonConfirm:{icon:t[7].shapeIconInputConfirm,label:t[7].shapeLabelInputConfirm,hideLabel:!0},willHandleKeydown:t[201],$$slots:{default:[R6]},$$scope:{ctx:t}}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};4&r[0]&&(o.panelOffset=i[2]),128&r[0]&&(o.buttonCancel={icon:i[7].shapeIconInputCancel,label:i[7].shapeLabelInputCancel}),128&r[0]&&(o.buttonConfirm={icon:i[7].shapeIconInputConfirm,label:i[7].shapeLabelInputConfirm,hideLabel:!0}),4096&r[0]&&(o.willHandleKeydown=i[201]),671088896&r[0]|2048&r[10]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function R6(t){let e,n,i,r;return{c(){e=$t("textarea"),S(e,"spellcheck","false"),S(e,"autocorrect","off"),S(e,"autocapitalize","off")},m(o,a){tt(o,e,a),t[199](e),Lg(e,t[27]),i||(r=[Mt(e,"keydown",t[55]),Mt(e,"keypress",t[54]),Mt(e,"keyup",t[57]),Mt(e,"input",t[53]),Mt(e,"input",t[200]),Tn(n=xs.call(null,e,t[29]))],i=!0)},p(o,a){134217728&a[0]&&Lg(e,o[27]),n&&Cn(n.update)&&536870912&a[0]&&n.update.call(null,o[29])},d(o){o&&J(e),t[199](null),i=!1,Gn(r)}}}function l2(t){let e,n,i,r,o;return n=new Kr({props:{items:t[24],key:t[11]}}),{c(){e=$t("div"),Wt(n.$$.fragment),S(e,"class","PinturaShapeControls"),Tt(e,"transform",t[26]),Tt(e,"opacity",t[25])},m(a,s){tt(a,e,s),Bt(n,e,null),i=!0,r||(o=[Mt(e,"measure",t[204]),Tn(Fr.call(null,e))],r=!0)},p(a,s){const l={};16777216&s[0]&&(l.items=a[24]),2048&s[0]&&(l.key=a[11]),n.$set(l),67108864&s[0]&&Tt(e,"transform",a[26]),33554432&s[0]&&Tt(e,"opacity",a[25])},i(a){i||(R(n.$$.fragment,a),i=!0)},o(a){B(n.$$.fragment,a),i=!1},d(a){a&&J(e),Ot(n),r=!1,Gn(o)}}}function I6(t){let e,n,i,r,o,a,s,l,c,d,u=[],p=new Map,h=t[23];const $=v=>v[318].id;for(let v=0;v<h.length;v+=1){let w=r2(t,h,v),T=$(w);p.set(T,u[v]=o2(T,w))}let g=t[17]&&a2(t),f=t[13]&&s2(t),x=t[21]>0&&l2(t);return{c(){e=$t("div"),n=$t("nav"),i=$t("ul");for(let v=0;v<u.length;v+=1)u[v].c();r=ce(),g&&g.c(),o=ce(),f&&f.c(),a=ce(),x&&x.c(),S(n,"class","PinturaShapeList"),S(n,"data-visible",t[22]),S(e,"class","PinturaShapeEditor"),S(e,"tabindex","0")},m(v,w){tt(v,e,w),At(e,n),At(n,i);for(let T=0;T<u.length;T+=1)u[T].m(i,null);At(e,r),g&&g.m(e,null),At(e,o),f&&f.m(e,null),At(e,a),x&&x.m(e,null),t[205](e),l=!0,c||(d=[Mt(n,"focusin",t[62]),Mt(n,"focusout",t[63]),Mt(e,"keydown",function(){Cn(t[0]?pe:t[51])&&(t[0]?pe:t[51]).apply(this,arguments)}),Mt(e,"nudge",function(){Cn(t[0]?pe:t[61])&&(t[0]?pe:t[61]).apply(this,arguments)}),Mt(e,"measure",t[197]),Mt(e,"pointermove",function(){Cn(t[0]?pe:t[64])&&(t[0]?pe:t[64]).apply(this,arguments)}),Mt(e,"pointerleave",function(){Cn(t[0]?pe:t[65])&&(t[0]?pe:t[65]).apply(this,arguments)}),Mt(e,"interactionstart",function(){Cn(t[0]?pe:t[36])&&(t[0]?pe:t[36]).apply(this,arguments)}),Mt(e,"interactionupdate",function(){Cn(t[0]?pe:t[38])&&(t[0]?pe:t[38]).apply(this,arguments)}),Mt(e,"interactioncancel",function(){Cn(t[0]?pe:t[37])&&(t[0]?pe:t[37]).apply(this,arguments)}),Mt(e,"interactionrelease",function(){Cn(t[0]?pe:t[39])&&(t[0]?pe:t[39]).apply(this,arguments)}),Mt(e,"interactionend",function(){Cn(t[0]?pe:t[40])&&(t[0]?pe:t[40]).apply(this,arguments)}),Tn(Fr.call(null,e)),Tn(ws.call(null,e)),Tn(s=ks.call(null,e,{drag:!0,inertia:!0,multiTouch:!1,observeKeys:!0,shouldStartInteraction:c2,getEventPosition:t[206]}))],c=!0)},p(v,w){t=v,8388608&w[0]|16&w[2]&&(h=t[23],Le(),u=es(u,w,$,1,t,h,p,i,Zs,o2,null,r2),Fe()),(!l||4194304&w[0])&&S(n,"data-visible",t[22]),t[17]?g?(g.p(t,w),131072&w[0]&&R(g,1)):(g=a2(t),g.c(),R(g,1),g.m(e,o)):g&&(Le(),B(g,1,1,()=>{g=null}),Fe()),t[13]?f?(f.p(t,w),8192&w[0]&&R(f,1)):(f=s2(t),f.c(),R(f,1),f.m(e,a)):f&&(Le(),B(f,1,1,()=>{f=null}),Fe()),t[21]>0?x?(x.p(t,w),2097152&w[0]&&R(x,1)):(x=l2(t),x.c(),R(x,1),x.m(e,null)):x&&(Le(),B(x,1,1,()=>{x=null}),Fe()),s&&Cn(s.update)&&8&w[0]&&s.update.call(null,{drag:!0,inertia:!0,multiTouch:!1,observeKeys:!0,shouldStartInteraction:c2,getEventPosition:t[206]})},i(v){if(!l){for(let w=0;w<h.length;w+=1)R(u[w]);R(g),R(f),R(x),l=!0}},o(v){for(let w=0;w<u.length;w+=1)B(u[w]);B(g),B(f),B(x),l=!1},d(v){v&&J(e);for(let w=0;w<u.length;w+=1)u[w].d();g&&g.d(),f&&f.d(),x&&x.d(),t[205](null),c=!1,Gn(d)}}}const c2=(t,e)=>t.target===e||t.target.className==="PinturaContentEditable";function E6(t,e,n){let i,r,o,a,s,l,c,d,u,p,h,$,g,f,x,v,w,T,I,M,F,C,z,j,A,y,st,G,k,H,rt,gt,ct,V,N,kt,bt,et,Pt,wt,Q,Ut,lt,q,vt,dt,Ht,it,Vt,Dt,Zt,mt,Ft,ht,Yt,Nt,Qt,re,xt,_,ke,ne,Xt,he,ae,Re,nn=Ke,Ct=()=>(nn(),nn=Xr(Qe,b=>n(193,ne=b)),Qe);t.$$.on_destroy.push(()=>nn());let{uid:de=la()}=e,{ui:ln}=e,{disabled:Je=!1}=e,{shapes:Qe}=e;Ct();let{selection:Ie}=e,{offset:Ye}=e,{contextRotation:yn=0}=e,{contextFlipX:Sn=!1}=e,{contextFlipY:Fn=!1}=e,{contextZoom:zn=1}=e,{active:un=!1}=e,{opacity:Y=1}=e,{parentRect:at}=e,{rootRect:Z}=e,{utilRect:zt}=e,{hoverColor:ue}=e,{caretColor:De}=e,{gridColor:ye}=e,{snapColor:Lt}=e,{textInputMode:Te="inline"}=e,{oninteractionstart:cn=pe}=e,{oninteractionupdate:an=pe}=e,{oninteractionrelease:nt=pe}=e,{oninteractionend:Gt=pe}=e,{oninteractioncancel:Be=pe}=e,{onaddshape:xe=pe}=e,{onupdateshape:te=pe}=e,{onselectshape:tn=pe}=e,{onblurshape:ot=pe}=e,{onremoveshape:me=pe}=e,{ontapshape:se=pe}=e,{onhovershape:ge=pe}=e,{ontriggerhistorywrite:oe=pe}=e,{onhovercanvas:qe=pe}=e,{ontapcanvas:ze=pe}=e,{onleavecanvas:ui=pe}=e,{beforeSelectShape:Oe=()=>!0}=e,{beforeDeselectShape:rn=()=>!0}=e,{beforeRemoveShape:In=()=>!0}=e,{beforeUpdateShape:Dn=(b,W,P)=>W}=e,{willRenderShapeControls:pn=ai}=e,{willRenderShapeTextControls:ti=ai}=e,{willStartInteraction:we=(b,W)=>!0}=e,{mapEditorPointToImagePoint:Ze}=e,{mapImagePointToEditorPoint:en}=e,{eraseRadius:hi}=e,{selectRadius:wi}=e,{enableButtonFlipVertical:pi=!1}=e,{enableTapToAddText:Kn=!0}=e,{enableMultiSelect:gi=!1}=e,{enableTextStyleControls:sr=!0}=e,{locale:Si}=e,{snapThreshold:Tr=0}=e,{snapPointer:Yo=!0}=e,{enableSnapToContext:pr=!0}=e,{gridSize:yi=0}=e;const ca=b=>{if(Tr===0)return[];let W;return pr&&(W={...at,x:0,y:0}),[...ne.filter(P=>P!==b).filter(P=>!fo(P)).filter(P=>(X=>X.disableAcceptSnap!==!0)(P)).map(P=>ji({...P},at)),W].filter(Boolean)},Wi=(b,W,P,X)=>b===0?{snapTargets:[]}:{snapThreshold:b,gridSize:W,gridRect:P,snapTargets:ca(X)},_n=mi("isAnimated");D(t,_n,b=>n(194,he=b));const Ma=mi("softKeyboardState"),qi=b=>b.set(Ba(b)),lr=b=>Ba(b).find(fo),Ai=(b,W)=>{if(!lr(W))return vh(b),ki(b,W)},hr=b=>{lr(b)&&b.update(W=>W.filter(P=>!fo(P)))},mr=b=>{const W=lr(b);if(W)return bg(W),qi(b),W},Ki=(b,W,P=(X,K)=>({...X,...K}))=>{lr(W)&&W.update(X=>X.map(K=>fo(K)?P(K,b):K))},ki=(b,W=Qe)=>(W.update(P=>[...P,b]),b),ao=(b,W,P)=>{const X=Dn({...b},W,{...P});return Da(b,X,P),b},qo=(b,W)=>{const P=ro(b,W),X=uu(b,W),K=Math.PI/8,yt=K*Math.round(X/K)-yn%K;W.x=b.x+P*Math.cos(yt),W.y=b.y+P*Math.sin(yt)},Eo=mi("keysPressed");D(t,Eo,b=>n(195,ae=b));const Ao=(b,W,P)=>b===0||W&&P?b:W||P?-b:b,xo=b=>{if(b.x===null&&b.y===null)return Lo();b.x&&n(149,vo=Ze({x:b.x,y:0}).x),b.y&&n(150,so=Ze({x:0,y:b.y}).y)},Lo=()=>{n(149,vo=null),n(150,so=null)};let vo=null,so=null;const zr=(b,W)=>{const P=en(b);return Ze(Zi(P,W))},lo=(b,W,P)=>{const X=(P-W)/b+1;return Array.from({length:X},(K,yt)=>W+yt*b)},Hr=b=>{let W=[],P=[],X=b.points;if(b.x1!==void 0&&(X=[{x:b.x1,y:b.y1},{x:b.x2,y:b.y2}]),X){const K=X.map(en),yt=ur(K),Et=K[0],le=K[K.length-1];W=[yt.x,yt.x+.5*yt.width,yt.x+yt.width,Et.x,le.x],P=[yt.y,yt.y+.5*yt.height,yt.y+yt.height,Et.y,le.y]}else if(b.text||b.width!==void 0||b.rx!==void 0){let K;if(b.text&&b.height===void 0){const Pe=no(b.text,b);K=Ui(b.x,b.y,Pe.width,Pe.height)}else K=b.width!==void 0?qa(b):qa({x:b.x-b.rx,y:b.y-b.ry,width:2*b.rx,height:2*b.ry});const yt=No(K).map(en),Et=Math.abs(b.rotation)>0?Rr(K,b.rotation).map(en):yt,le=ur(Et),_t=Ln(le),ee=.5*le.width,qt=.5*le.height;W=[_t.x-ee,_t.x,_t.x+ee],P=[_t.y-qt,_t.y,_t.y+qt]}else if(b.x!==void 0){const K=en(b);W=[K.x],P=[K.y]}return{x:W,y:P}},nr=(b,W,P)=>{let X,K,yt,Et=Number.Infinity,le=null,_t=null;for(let ee=0;ee<b.length;ee++){K=b[ee];for(let qt=0;qt<W.length;qt++)yt=W[qt],X=Math.abs(K-yt),X<P&&(_t===null||X<Et)&&(Et=X,le=K,_t=yt)}return{origin:le,target:_t}},er=(b,W,P,X,K)=>{const yt={x:null,y:null},Et={x:null,y:null},le=W.map(Hr);if(X>0){const _t=en({x:0,y:0}),ee=en({x:X,y:X}),qt=en({x:K.width,y:K.height}),Pe=ee.x-_t.x,sn=lo(Pe,_t.x,qt.x),Jt=lo(Pe,_t.y,qt.y);le.push({x:sn,y:Jt})}return le.forEach(_t=>{const{snapTranslation:ee,snapLine:qt}=((Pe,sn,Jt)=>{const hn={x:null,y:null},Ee={x:null,y:null},Se=nr(Pe.x,sn.x,Jt);Se.target!==null&&(hn.x=Se.target,Ee.x=Se.target-Se.origin);const We=nr(Pe.y,sn.y,Jt);return We.target!==null&&(hn.y=We.target,Ee.y=We.target-We.origin),{snapTranslation:Ee,snapLine:hn}})(b,_t,P);ee.x!==null&&(Et.x===null||Math.abs(ee.x)<Math.abs(Et.x))&&(Et.x=ee.x||0,yt.x=qt.x),ee.y!==null&&(Et.y===null||Math.abs(ee.y)<Math.abs(Et.y))&&(Et.y=ee.y||0,yt.y=qt.y)}),{snapTranslation:Et,snapLines:yt}},Dr=(b,W)=>(W.x!==null&&(b.x+=W.x),W.y!==null&&(b.y+=W.y),b),co=(b,W,P,X)=>{const{snapThreshold:K=0,gridSize:yt=0,gridRect:Et,snapTargets:le=[]}=X||{};let _t=null;if($r(b)){if(K){const Pe=ji({...b},at),sn=zr(ms(W),P),Jt=zr(gs(W),P),hn=Hr({...Pe,x1:sn.x,y1:sn.y,x2:Jt.x,y2:Jt.y}),{snapTranslation:Ee,snapLines:Se}=er(hn,le,K,yt,Et);Dr(P,Ee),xo(Se)}const ee=zr(ms(W),P),qt=zr(gs(W),P);_t={x1:ee.x,y1:ee.y,x2:qt.x,y2:qt.y}}else if(b.points){if(Np(Ue)&&ei(Ue,{selectedPoint:void 0}),K){const ee=ji({...b},at),qt=Hr({...ee,points:W.points.map(Jt=>zr(Jt,P))}),{snapTranslation:Pe,snapLines:sn}=er(qt,le,K,yt,Et);Dr(P,Pe),xo(sn)}_t={points:W.points.map(ee=>zr(ee,P))}}else if(Ho(b)||tr(b)||dr(b)){if(K){const ee=ji({...b},at),qt=zr(W,P),Pe=Hr({...ee,...qt}),{snapTranslation:sn,snapLines:Jt}=er(Pe,le,K,yt,Et);Dr(P,sn),xo(Jt)}_t=zr(W,P)}_t&&(ao(b,_t,at),Vi())},Zn={0:1,1:0,2:3,3:2},_i={0:3,1:2,2:1,3:0},Jr=(b,W,P,X,K)=>{const{shiftKey:yt,snapThreshold:Et=0,gridSize:le=0,gridRect:_t,snapTargets:ee=[],aspectRatio:qt,beforeResizeShape:Pe=pe}=K||{},sn=Et?(Jt,hn,Ee)=>{const{snapTranslation:Se,snapLines:We}=er(Hr(Jt),ee,Et,le,_t);Dr(hn,Se),xo(We);const Ce=zr(Ee(),hn);Jt.x=Ce.x,Jt.y=Ce.y}:pe;if($r(b)||Qi(b)&&Ae(b,"pathClose")){const[Jt]=P,hn=yt?qo:(ve,Xe)=>Xe;let Ee,Se,We;if($r(b))Jt===0?(Ee=()=>ms(W),Se=ve=>hn(gs(W),ve),We=(ve,Xe)=>{ve.x1=Xe.x,ve.y1=Xe.y}):Jt===1&&(Ee=()=>gs(W),Se=ve=>hn(ms(W),ve),We=(ve,Xe)=>{ve.x2=Xe.x,ve.y2=Xe.y});else{const ve=W.points;Ee=()=>({...ve[Jt]}),Se=Xe=>{const Qn=ve[t1(Jt-1,ve)],_e=ve[t1(Jt+1,ve)];hn(Qn,Xe),hn(_e,Xe)},We=(Xe,Qn)=>Xe.points=Xe.points.map((_e,vn)=>Jt===vn?Qn:_e)}const Ce=zr(Ee(),X);sn(Ce,X,Ee),Se(Ce),We(b,Ce)}else if(pl(b)||dr(b)||tr(b)){let Jt,hn=!1,Ee=!1;if(dr(W))Jt=Au(W);else if(pl(W))Jt=qa(W);else if(Ae(W,"width")){hn=!0,Jt=qa(W);const _e=no(W.text,W);Jt.height=_e.height}else{Ee=!0,Jt=qa(W);const _e=no(W.text,W);Jt.width=_e.width,Jt.height=_e.height}let Se=qt;b.aspectRatio?Se=b.aspectRatio:!K.shiftKey||hn||Ee||(Se=Jt.width/Jt.height);const We=qa(Jt),Ce=Ln(We),ve=b.rotation,Xe=No(We),Qn=Rr(We,ve);if(P.length===1){let _e=P[0];b.flipX&&(_e=Zn[_e]),b.flipY&&(_e=_i[_e]);const[vn,ii,kr,Pr]=Xe,Cr=en(Qn[_e]),Bi=Zi({...Cr},X),Pi=Ze(Bi);sn(Pi,X,()=>Ze(Cr));const Hi=ut(Pi.x-Qn[_e].x,Pi.y-Qn[_e].y),Mo=Zr(Ve(Hi),-ve),Po=ut(Xe[_e].x+Mo.x,Xe[_e].y+Mo.y);let Bo;_e===0&&(Bo=kr),_e===1&&(Bo=Pr),_e===2&&(Bo=vn),_e===3&&(Bo=ii);const Ro=ur([Bo,Po]);if(Se){const{width:ea,height:El}=oo(Ro,Se),[go,Ri,Ga,cr]=bl(Ro);Ro.width=ea,Ro.height=El,Po.y<Bo.y&&(Ro.y=Ga-El),Po.x<Bo.x&&(Ro.x=Ri-ea)}const Ia=Rr(Ro,ve,Ce),ua=oa(Ia),Ms=Zr(Ia[0],-ve,ua),Oo=Zr(Ia[2],-ve,ua),Wo=ur([Ms,Oo]);Pe(Wo),ao(b,dr(b)?Ym(Wo):Wo,at)}else{P=P.map(cr=>(b.flipX&&(cr=Zn[cr]),b.flipY&&(cr=_i[cr]),cr));const[_e,vn]=P.map(cr=>Qn[cr]),ii={x:_e.x+.5*(vn.x-_e.x),y:_e.y+.5*(vn.y-_e.y)},[kr,Pr]=P.map(cr=>Xe[cr]),[Cr,Bi]=P.map(cr=>{const _o=cr+2;return _o<4?Xe[_o]:Xe[_o-4]}),Pi={x:Cr.x+.5*(Bi.x-Cr.x),y:Cr.y+.5*(Bi.y-Cr.y)},Hi=en(ii),Mo=Zi({...Hi},X),Po=Ze(Mo);sn(Po,X,()=>Ze(Hi));const Bo=ut(Po.x-ii.x,Po.y-ii.y),Ro=Zr(Ve(Bo),-ve),Ia=Xi(Ve(kr),Pr),ua=jo(Ia,cr=>1-Math.abs(Math.sign(cr))),Ms=ut(Ro.x*ua.x,Ro.y*ua.y);Zi(kr,Ms),Zi(Pr,Ms);const Oo=ur(Xe);if(Se){let cr=Oo.width,_o=Oo.height;ua.y===0?_o=cr/Se:cr=_o*Se,Oo.width=cr,Oo.height=_o,ua.y===0?Oo.y=Pi.y-.5*_o:Oo.x=Pi.x-.5*cr}const Wo=Rr(Oo,ve,Ce),ea=oa(Wo),El=Zr(Wo[0],-ve,ea),go=Zr(Wo[2],-ve,ea),Ri=ur([El,go]);let Ga;dr(b)?Ga=Ym(Ri):pl(b)?Ga=Ri:hn&&(Ga={x:Ri.x,y:Ri.y,width:Ri.width}),ao(b,Ga,at)}}Vi()};let Ci;const wo=(b,W)=>{const P=b.points.filter((X,K)=>K!==W);ei(b,{points:P,selectedPoint:void 0})},ir=()=>{if(ne.length)return ne.find(fo)},Ko=()=>{if(ne.length)return ne.findIndex(fo)},Br=()=>{const b=ir();if(b)return bg(b),Vi(),b},So=()=>{if(!ir())return;const b=[...ne];b.splice(Ko(),1),Qe.set(b)},Vi=()=>{Qe.set(ne)},Or=(b,W=[],P=!0)=>{W.filter(Boolean).forEach(X=>delete b[X]),P&&Vi()},ei=(b,W,P=!0)=>{b=Object.assign(b,W),P&&Vi()},Ji=(b,W,P,X=!0)=>{b[W]=P,X&&Vi()},Fo=(b,W=!0)=>{ne.forEach(P=>ei(P,b,!1)),W&&Vi()},zo=()=>[...ne].reverse().filter(Fa),Qr=()=>[...ne].reverse().find(Fa),jr=()=>!!Qr(),ko=(b,W=!0,P=!1)=>{const X=ne.filter(Et=>gu(Et)&&Aa(Et)),K=X.findIndex(Et=>Et===b);if(((Et,le=!1)=>{if(!In(Et))return!1;Qe.set(ne.filter(_t=>_t!==Et)),le||me(Et)})(b,P)===!1)return;if(uo=b,X.length-1<=0)return Co();if(!W)return!0;const yt=K-1<0?X.length-1:K-1;return Kt(X[yt]),!0},wr=()=>{if(a){const W=[];return o.forEach((P,X)=>{gu(P)&&ko(P,X===o.length-1,!0)&&W.push(P)}),void(W.length&&oe())}const b=Qr();b&&ko(b)};let uo;const Co=(b={})=>{const{storePrevious:W=!0}=b;Object.keys(rs).forEach(X=>rs[X]={});const P=O();W&&(uo=P),Fo({isSelected:!1,isEditing:!1,_prerender:!1}),P&&ot(P)},O=()=>ne.find(Fa),Kt=(b,W=!0,P=!1)=>{if(fo(b))return;const X=O()||uo,K=Fa(b);uo=void 0,Oe(X,b)&&(P||Co(),(yt=>{yt.isSelected=!0})(b),!K&&tn(b),W&&Vi())},En=b=>{bi&&bi.confirm&&b.isEditing&&bi.confirm();const W={isSelected:!1,isEditing:!1,_prerender:!1};b.selectedPoint>-1&&(W.selectedPoint=void 0),ei(b,W),ot(b)},je=b=>{ei(b,{isSelected:!0,isEditing:!0,_prerender:Te==="inline"})},be=b=>{ei(b,{isSelected:!0,isEditing:!1,_prerender:!1})},$e=b=>{if(!b.length)return[];const W=b.filter(In);return Qe.set(ne.filter(P=>!W.includes(P))),W},qn=b=>{const W=no(b.text,b);return Ui(b.x,b.y,b.width?Math.min(b.width,W.width):W.width,b.height?Math.min(b.height,W.height):W.height)},Rn=b=>{if(pl(b))return qa(b);if(dr(b))return Au(b);const W=qn(b);return W.width=Math.max(10,b.width||W.width),W},ni=(b,W,P=0,X=()=>!0)=>[...b].reverse().filter(X).map(K=>({shape:K,priority:1})).filter(K=>{const{shape:yt}=K,Et=ji(Ii(yt),at),le=P+.5*(Et.strokeWidth||0);if(Ho(Et))return Dp(W,le,Et,yt.rotation);if(tr(Et)){const _t=Rn(Et),ee=Dp(W,le,_t,yt.rotation);let qt=!1;if(ee&&!Fa(yt)){const Pe=qn(Et);yt.textAlign!=="right"||yt.flipX||(Pe.x=_t.x+_t.width-Pe.width),yt.textAlign==="center"&&(Pe.x=_t.x+.5*_t.width-.5*Pe.width),qt=Dp(W,le,Pe,yt.rotation,Ln(_t)),qt||(K.priority=-1)}return ee}return dr(Et)?((_t,ee,qt,Pe,sn,Jt)=>{const hn=ju(ut(qt.x,qt.y),qt.rx,qt.ry,Pe,sn,Jt,12);return xh(_t,ee,hn)})(W,le,Et,yt.rotation,yt.flipX,yt.flipY):$r(Et)?Uu(W,Math.max(16,le),ms(Et),gs(Et)):Qi(Et)&&Et.pathClose?xh(W,le,Et.points):!!Qi(Et)&&(Et.points.length===1?Vo(W,Et.points[0])<le*le:X2(W,Math.max(16,le),Et.points))}).sort((K,yt)=>K.priority<yt.priority?1:K.priority>yt.priority?-1:0).map(K=>K.shape),$i=(b,W,P,X=0)=>{const K=Math.abs(X),yt=Us(W,P),Et=t0(yt,K),le=(({start:_t,end:ee},qt)=>{if(qt===0)return[ut(_t.x,_t.y),ut(_t.x,_t.y),ut(ee.x,ee.y),ut(ee.x,ee.y)];const Pe=Math.atan2(ee.y-_t.y,ee.x-_t.x),sn=Math.sin(Pe)*qt,Jt=Math.cos(Pe)*qt;return[ut(sn+_t.x,-Jt+_t.y),ut(-sn+_t.x,Jt+_t.y),ut(-sn+ee.x,Jt+ee.y),ut(sn+ee.x,-Jt+ee.y)]})(Et,K);return b.filter(_t=>{const ee=ji(Ii(_t),at);if($r(ee)||Qi(ee)){const qt=ee.points?[...ee.points]:[ms(ee),gs(ee)];return!!U2(Et,qt)}return((qt,Pe)=>!!qt.find(sn=>bh(sn,Pe))||!!Pe.find(sn=>bh(sn,qt)))(le,((qt,Pe=12)=>{if(Ho(qt))return Rr(qt,qt.rotation,Ln(qt));if(tr(qt)){const sn=Rn(qt);return Rr(sn,qt.rotation,Ln(sn))}return dr(qt)?ju(ut(qt.x,qt.y),qt.rx,qt.ry,qt.rotation,qt.flipX,qt.flipY,Pe):[]})(ee))})};let Bn,Sr,po,Ue,Jo,Wr,Va=!1,Qo=!1,xi=!1,Li=!1,ho;const Do=b=>{ho=b.map(W=>({shape:W,shapeOrigin:Ii(W),shapeOriginComputed:ji(Ii(W),at)}))},Na=()=>{clearTimeout(Sr),Sr=void 0,n(152,Li=!1),Lo()};let L=null;const ie=b=>{const W=Ne(b.rotation)&&b.rotation!==0;if(Ho(b)){if(b.width<1&&b.height<1)return;const P=Ln(b),X=No(b);return(b.flipX||b.flipY)&&ql(X,b.flipX,b.flipY,P.x,P.y),W?$l(X,b.rotation,P.x,P.y):X}if(dr(b)){if(b.rx<1&&b.ry<1)return;const P=b,X=No(Au(b));return(b.flipX||b.flipY)&&ql(X,b.flipX,b.flipY,P.x,P.y),W?$l(X,b.rotation,P.x,P.y):X}if($r(b))return[ms(b),gs(b)];if(Qi(b)){if(b.bitmap&&!b.pathClose){const P=ur(b.points);return P.x-=.5*b.strokeWidth,P.y-=.5*b.strokeWidth,P.width+=b.strokeWidth,P.height+=b.strokeWidth,ie({...b,...P})}return[...b.points]}if(tr(b)){if(b.width<5&&b.height<5)return;const P=Rn(b);P.width=Math.max(10,P.width);const X=Ln(P),K=No(P);return(b.flipX||b.flipY)&&ql(K,b.flipX,b.flipY,X.x,X.y),W?$l(K,b.rotation,X.x,X.y):K}return[]},Me=b=>{const W=ie(b);let P,X;return b.flipY?(P=oa([W[0],W[1]]),X=yo(ut(W[1].x-W[2].x,W[1].y-W[2].y))):(P=oa([W[2],W[3]]),X=yo(ut(W[2].x-W[1].x,W[2].y-W[1].y))),Vr(X,20/zn),{origin:P,dir:X}},xn=b=>W=>W.id===b,Vn=b=>{const W=xn(b);return P=>P.filter((X=>K=>!X(K))(W))},On=b=>{const W=xn(b),P=Vn(b);return()=>ln.update(X=>X.some(W)?P(X):X)},on=b=>{const W=Vn(b);return(...P)=>{ln.update(X=>[...W(X),...P.filter(Boolean)])}},kn=On("markup-hover"),Xn=on("markup-hover");let Mn;const Jn="markup-manipulator-segment-"+de,Ni=On(Jn),vi=on(Jn),Mi=(b,W)=>{const P=b[W],X=W-1<0?b[b.length-1]:b[W-1],K=W+1<b.length?b[W+1]:b[0],yt=Xi(Ve(X),P);yo(yt);const Et=Zi(Vr(yt,10),P),le=Xi(Ve(K),P);return yo(le),[Et,P,Zi(Vr(le,10),P)]},Wn=()=>{n(153,Mn=void 0),kn()},Mr="markup-multi-selection-segment-"+de,da=On(Mr),Xs=on(Mr),Cs=(b,W)=>{if(Tr<=0)return b;if(W)return Lo(),b;const P=Ze(b),X=ca(),{snapTranslation:K,snapLines:yt}=er(Hr(P),X,Tr,yi,i);return xo(yt),Dr(b,K),b},ns=mn(0);D(t,ns,b=>n(196,Re=b));const Ha="markup-grid-line-"+de,ja=On(Ha),is=on(Ha),Pa="markup-snap-line",To=On(Pa),Ua=on(Pa);let bi;Ma.subscribe(b=>{Te==="inline"&&r&&r.isEditing&&b==="hidden"&&mo()});const to=b=>{n(8,bi.innerHTML=T6(b),bi)},Yn=b=>{const W=b.value===void 0?b.innerHTML:b.value,P=r.format==="text"?_b(W).split(/<br>|<br\/>/g).join(`
`).replace(/&nbsp;/g," ").replace(/&amp;/g,"&"):W;return Xu(r)&&r.disableNewline!==!1?(X=>{const K=X.split(/[\n\r]/g);return K.length>1?K.map(yt=>yt.trim()).filter(yt=>yt.length).join(" "):K[0]})(P):P},eo=()=>{const b=Yn(bi),W=Hl(r,b),P=W===!0?b:W;let X=bt.x,K=bt.y;if(!r.height){const yt=Rr({...Pt},r.rotation),Et=no(P,u),le=Rr({x:X,y:K,...Et},r.rotation),[_t,,ee]=yt,[qt,,Pe]=le;let sn=_t,Jt=qt;r.flipX&&(sn=ee,Jt=Pe);const hn=Xi(Ve(sn),Jt);X+=hn.x,K+=hn.y}ei(r,{x:He(kt.x)?Gr(X,at.width):X,y:He(kt.y)?Gr(K,at.height):K,text:P})},si=b=>{const{key:W,ctrlKey:P,metaKey:X,altKey:K}=b;return W==="Enter"&&(P||K||X)},mo=()=>{c&&Br(),bi&&bi.confirm&&bi.confirm(),bi&&eo(),be(r),te(r)},Ra=()=>{c?So():(ei(r,{text:kt.text,x:kt.x,y:kt.y}),be(r))},Ur=(b,W,{flipX:P,flipY:X,rotation:K},yt="top left")=>{let Et,le;const[_t,ee,qt,Pe]=Rr(b,K),[sn,Jt,hn,Ee]=Rr(W,K);return yt==="top center"?(Et=oa(X?[Pe,qt]:[_t,ee]),le=oa(X?[Ee,hn]:[sn,Jt])):yt==="top right"&&!P||yt==="top left"&&P?(Et=X?qt:ee,le=X?hn:Jt):(Et=X?Pe:_t,le=X?Ee:sn),Xi(Ve(Et),le)},Ts=(b,W,P)=>ut(He(b.x)?Gr(W.x+P.x,at.width):W.x+P.x,He(b.y)?Gr(W.y+P.y,at.height):W.y+P.y),rs={},$d=()=>wo(r,r.selectedPoint),Sl=()=>je(r),kl=(b,W,P)=>{const{width:X,height:K,...yt}=P,Et=no(W.text,yt),le=Ur(Ui(P.x,P.y,b.width,b.height),Ui(P.x,P.y,Et.width,Et.height),P,"top "+W.textAlign),_t=P.disableNewline!==!1;Or(W,["width","height",_t&&"textAlign"]),ei(W,{...Ts(W,P,le)})},sc=(b,W,P,X,K={})=>{const{height:yt,...Et}=P,le=Wa(no(W.text,Et),Pe=>Math.ceil(Pe)),_t=Fi(K.width||P.width||X.width,le.height),ee=K.textAlign||"left",qt=Ur(Ui(P.x,P.y,b.width,b.height),Ui(P.x,P.y,_t.width,_t.height),P,"top "+ee);Or(W,["height"]),ei(W,{...Ts(W,P,qt),width:He(W.width)?Gr(_t.width,at.width):_t.width,textAlign:ee})},Cl=(b,W,P,X,K={})=>{const yt=Fi(K.width||X.width,K.height||X.height),Et=K.textAlign||"left",le=Ur(Ui(P.x,P.y,b.width,b.height),Ui(P.x,P.y,yt.width,yt.height),P,"top "+Et);ei(W,{...Ts(W,P,le),width:He(W.width)?Gr(yt.width,at.width):yt.width,height:He(W.width)?Gr(yt.height,at.height):yt.height,textAlign:Et})},os=()=>{const b=Wa(no(r.text,u),yt=>Math.ceil(yt)),W=Ae(r,"height"),P=!W&&Ae(r,"width"),X=r.id;let K=rs[X];if(K||(rs[X]={},K=rs[X]),W){K.textAlign=r.textAlign,K.width=u.width,K.height=u.height;const yt=Fi(u.width,u.height);sl(r,"auto-height")?sc(yt,r,u,b,K):sl(r,"auto-width")&&kl(yt,r,u)}else if(P){K.textAlign=r.textAlign,K.width=u.width;const yt=Fi(u.width,b.height);sl(r,"auto-width")?kl(yt,r,u):sl(r,"fixed-size")&&Cl(yt,r,u,b,K)}else{K.textAlign=r.textAlign||K.textAlign;const yt=Fi(Math.ceil(b.width),Math.ceil(b.height));sl(r,"fixed-size")?Cl(yt,r,u,b,K):sl(r,"auto-height")&&sc(yt,r,u,b,K)}},lc=b=>{b.stopPropagation();const W=r.flipX||!1;Ji(r,"flipX",!W),te(r)},cc=b=>{b.stopPropagation();const W=r.flipY||!1;Ji(r,"flipY",!W),te(r)},Tl=b=>{Ji(r,"opacity",b)},dc=b=>{Tl(b),te(r)},uc=b=>{b.stopPropagation(),b.target.blur(),wr()},pc=b=>{b.stopPropagation(),ne.findIndex(W=>W===r)!==ne.length-1&&(Qe.set(ne.filter(W=>W!==r).concat([r])),te(r))},hc=b=>{b.stopPropagation(),Ml()},Ml=()=>{const b=(a?o:[r]).filter(xg).map(W=>{const P=Ii(W);P.id=la();const X=ut(50,-50);if(Ae(P,"points")){const K=Kl(P,["points"],at);K.points.forEach(yt=>{yt.x+=X.x,yt.y+=X.y}),Da(P,K,at)}else if($r(P)){const K=Kl(P,["x1","y1","x2","y2"],at);K.x1+=X.x,K.y1+=X.y,K.x2+=X.x,K.y2+=X.y,Da(P,K,at)}else{const K=Kl(P,["x","y"],at);K.x+=50,K.y-=50,Da(P,K,at)}return Qe.set([...ne,P]),xe(P),P});if(b.length>1)return Co(),void b.forEach(W=>{Kt(W,!0,!0)});Kt(b[0])},Ys=mn(0,{stiffness:.2,damping:.7});D(t,Ys,b=>n(21,Xt=b));let as;const mc=(b,W)=>{const{disableTextLayout:P=[]}=W;return"height"in W?P.includes("auto-height")?b.shapeIconButtonTextLayoutAutoWidth:b.shapeIconButtonTextLayoutAutoHeight:"width"in W?P.includes("auto-width")?b.shapeIconButtonTextLayoutFixedSize:b.shapeIconButtonTextLayoutAutoWidth:P.includes("fixed-size")?b.shapeIconButtonTextLayoutAutoHeight:b.shapeIconButtonTextLayoutFixedSize},gc=(b,W)=>{const{disableTextLayout:P=[]}=W;return"height"in W?P.includes("auto-height")?b.shapeTitleButtonTextLayoutAutoWidth:b.shapeTitleButtonTextLayoutAutoHeight:"width"in W?P.includes("auto-width")?b.shapeTitleButtonTextLayoutFixedSize:b.shapeTitleButtonTextLayoutAutoWidth:P.includes("fixed-size")?b.shapeTitleButtonTextLayoutAutoHeight:b.shapeTitleButtonTextLayoutFixedSize};let qs=!1,Pl=ci(),ss;const $c=b=>{ge(b),n(153,Mn=b)},Rl=b=>{Kt(ne[b])};let ta;function Il(b){bb(b)&&b.target===ta&&b.preventDefault()}return Xo(()=>{To(),ja(),Ni(),kn(),ta.removeEventListener("touchmove",Il,!1)}),t.$$set=b=>{"uid"in b&&n(67,de=b.uid),"ui"in b&&n(68,ln=b.ui),"disabled"in b&&n(0,Je=b.disabled),"shapes"in b&&Ct(n(1,Qe=b.shapes)),"selection"in b&&n(69,Ie=b.selection),"offset"in b&&n(2,Ye=b.offset),"contextRotation"in b&&n(70,yn=b.contextRotation),"contextFlipX"in b&&n(71,Sn=b.contextFlipX),"contextFlipY"in b&&n(72,Fn=b.contextFlipY),"contextZoom"in b&&n(73,zn=b.contextZoom),"active"in b&&n(74,un=b.active),"opacity"in b&&n(75,Y=b.opacity),"parentRect"in b&&n(76,at=b.parentRect),"rootRect"in b&&n(3,Z=b.rootRect),"utilRect"in b&&n(4,zt=b.utilRect),"hoverColor"in b&&n(77,ue=b.hoverColor),"caretColor"in b&&n(78,De=b.caretColor),"gridColor"in b&&n(79,ye=b.gridColor),"snapColor"in b&&n(80,Lt=b.snapColor),"textInputMode"in b&&n(5,Te=b.textInputMode),"oninteractionstart"in b&&n(81,cn=b.oninteractionstart),"oninteractionupdate"in b&&n(82,an=b.oninteractionupdate),"oninteractionrelease"in b&&n(83,nt=b.oninteractionrelease),"oninteractionend"in b&&n(84,Gt=b.oninteractionend),"oninteractioncancel"in b&&n(85,Be=b.oninteractioncancel),"onaddshape"in b&&n(86,xe=b.onaddshape),"onupdateshape"in b&&n(87,te=b.onupdateshape),"onselectshape"in b&&n(88,tn=b.onselectshape),"onblurshape"in b&&n(89,ot=b.onblurshape),"onremoveshape"in b&&n(90,me=b.onremoveshape),"ontapshape"in b&&n(91,se=b.ontapshape),"onhovershape"in b&&n(92,ge=b.onhovershape),"ontriggerhistorywrite"in b&&n(93,oe=b.ontriggerhistorywrite),"onhovercanvas"in b&&n(94,qe=b.onhovercanvas),"ontapcanvas"in b&&n(95,ze=b.ontapcanvas),"onleavecanvas"in b&&n(96,ui=b.onleavecanvas),"beforeSelectShape"in b&&n(97,Oe=b.beforeSelectShape),"beforeDeselectShape"in b&&n(98,rn=b.beforeDeselectShape),"beforeRemoveShape"in b&&n(99,In=b.beforeRemoveShape),"beforeUpdateShape"in b&&n(100,Dn=b.beforeUpdateShape),"willRenderShapeControls"in b&&n(101,pn=b.willRenderShapeControls),"willRenderShapeTextControls"in b&&n(102,ti=b.willRenderShapeTextControls),"willStartInteraction"in b&&n(103,we=b.willStartInteraction),"mapEditorPointToImagePoint"in b&&n(104,Ze=b.mapEditorPointToImagePoint),"mapImagePointToEditorPoint"in b&&n(105,en=b.mapImagePointToEditorPoint),"eraseRadius"in b&&n(106,hi=b.eraseRadius),"selectRadius"in b&&n(107,wi=b.selectRadius),"enableButtonFlipVertical"in b&&n(108,pi=b.enableButtonFlipVertical),"enableTapToAddText"in b&&n(109,Kn=b.enableTapToAddText),"enableMultiSelect"in b&&n(110,gi=b.enableMultiSelect),"enableTextStyleControls"in b&&n(6,sr=b.enableTextStyleControls),"locale"in b&&n(7,Si=b.locale),"snapThreshold"in b&&n(111,Tr=b.snapThreshold),"snapPointer"in b&&n(112,Yo=b.snapPointer),"enableSnapToContext"in b&&n(113,pr=b.enableSnapToContext),"gridSize"in b&&n(114,yi=b.gridSize)},t.$$.update=()=>{var b,W;if(16384&t.$$.dirty[2]|2097152&t.$$.dirty[3]&&n(180,i=yi>0?{x:0,y:0,...at}:void 0),1&t.$$.dirty[0]|128&t.$$.dirty[6]&&n(12,r=!Je&&ne&&(ir()||Qr())),131072&t.$$.dirty[3]|128&t.$$.dirty[6]&&n(172,o=gi?ne.filter(Fa):[]),131072&t.$$.dirty[5]&&n(171,a=o.length>1),16384&t.$$.dirty[2]|196608&t.$$.dirty[5]&&n(192,s=a?o.map(P=>ji(Ii(P),at)):[]),4096&t.$$.dirty[0]&&n(189,l=!!r),4096&t.$$.dirty[0]&&n(174,c=r&&fo(r)),4096&t.$$.dirty[0]|524288&t.$$.dirty[5]&&n(11,d=r&&!c?r.id:void 0),4104&t.$$.dirty[0]|16384&t.$$.dirty[2]&&n(15,u=Z&&r&&ji(Ii(r),at)),4096&t.$$.dirty[0]|524288&t.$$.dirty[5]&&n(155,p=!(!r||!c)),36864&t.$$.dirty[0]|8192&t.$$.dirty[2]&&n(187,h=r&&Y&&ie(u)||[]),65536&t.$$.dirty[5]|64&t.$$.dirty[6]&&n(184,$=a?s.map(ie):[]),4096&t.$$.dirty[0]|65536&t.$$.dirty[5]&&n(191,g=!a&&r&&Sh(b=r)&&gl(b)&&b.disableResize!==!0&&(pl(b)||zu(b)||dr(b)||$r(b)||Qi(b)&&Ae(b,"pathClose"))&&!ps(r)),4096&t.$$.dirty[0]|65536&t.$$.dirty[5]&&n(18,f=!a&&r&&(P=>Sh(P)&&P.disableRotate!==!0&&(pl(P)||Ae(P,"text")||dr(P)))(r)&&!ps(r)),4096&t.$$.dirty[0]&&n(16,x=r&&tr(r)&&!zu(r)&&!ps(r)&&r.disableTextScale===!1),4096&t.$$.dirty[0]|32&t.$$.dirty[6]&&n(20,v=!!g&&function(P){return!!P&&(tr(P)&&!P.height?[[1,2],[3,0]]:!$r(P)&&!Qi(P))}(r)),1052672&t.$$.dirty[0]|32&t.$$.dirty[6]&&n(33,w=!!r&&!Array.isArray(v)&&g),196608&t.$$.dirty[5]&&n(190,T=a?(P=>{const X=P.map(yt=>ie(ji(yt,at))).flat(),K=ur(X);return No(K)})(o):[]),4096&t.$$.dirty[0]|65536&t.$$.dirty[5]|2&t.$$.dirty[6]&&n(17,I=r&&h.length>1||a),4096&t.$$.dirty[3]|65536&t.$$.dirty[5]|18&t.$$.dirty[6]&&n(185,M=a?T.map(en):h.map(en)),4&t.$$.dirty[0]|1073741824&t.$$.dirty[5]&&n(14,F=M.map(P=>ut(P.x-Ye.x,P.y-Ye.y))),4096&t.$$.dirty[0]&&n(19,C=r&&r.points&&Ne(r.selectedPoint)?r.selectedPoint:-1),524288&t.$$.dirty[0]&&n(164,z=C>=0),540672&t.$$.dirty[0]|512&t.$$.dirty[5]&&n(169,j=z?F[C]:void 0),4096&t.$$.dirty[0]|8&t.$$.dirty[6]&&n(32,A=l&&(zu(r)?!Ae(r,"disableNewline")||!r.disableNewline:r.disableNewline===!1)),4096&t.$$.dirty[3]|536870912&t.$$.dirty[4]&&(Mn&&en&&!Fa(Mn)&&Aa(Mn)?(P=>{const X=ie(ji(Ii(P),at));if(!X)return;const K=X.map(en),yt=!!P.pathClose||!(!P.bitmap&&(Qi(P)||$r(P))),Et=P.selectionStyle==="hook",le=Et?K.map((ee,qt,Pe)=>({id:"markup-hover",points:Mi(Pe,qt),strokeColor:[0,0,0,.1],strokeWidth:2})):[{id:"markup-hover",points:K.map(ee=>ut(ee.x+1,ee.y+1)),strokeColor:[0,0,0,.1],strokeWidth:2,pathClose:yt}],_t=Et?K.map((ee,qt,Pe)=>({id:"markup-hover",points:Mi(Pe,qt),strokeColor:ue,strokeWidth:2})):[{id:"markup-hover",points:K,strokeColor:ue,strokeWidth:2,pathClose:yt}];Xn(...le,..._t)})(Mn):kn()),442368&t.$$.dirty[0]|8192&t.$$.dirty[2]&&n(186,y=I&&f&&Y&&F?(P=>{const X=Me(P),K=en({x:X.origin.x+X.dir.x,y:X.origin.y+X.dir.y});return{origin:en(X.origin),position:K}})(u):void 0),4&t.$$.dirty[0]|1&t.$$.dirty[6]&&n(31,st=y&&ut(y.position.x-Ye.x,y.position.y-Ye.y)),245760&t.$$.dirty[0]|8192&t.$$.dirty[2]&&n(188,G=I&&x&&Y&&F?(P=>{const X=ie(P);let K=2;P.flipX&&P.flipY?K=0:P.flipX?K=3:P.flipY&&(K=1);const yt={...X[K]};return en({x:yt.x,y:yt.y})})(u):void 0),4&t.$$.dirty[0]|4&t.$$.dirty[6]&&n(30,k=G&&ut(G.x-Ye.x,G.y-Ye.y)),512&t.$$.dirty[6]&&n(179,ct=!!(ae||[]).find(P=>[91,93,17].includes(P))),524288&t.$$.dirty[3]|16777216&t.$$.dirty[5]&&n(181,H=!(ct||!Yo)),4096&t.$$.dirty[0]|8192&t.$$.dirty[2]|1073741824&t.$$.dirty[4]|1141374976&t.$$.dirty[5]&&r&&M&&Y>0&&(r===Mn&&Wn(),((P,X,K)=>{if(!Aa(X))return;const yt=Qi(X),Et=yt&&Ae(X,"pathClose"),le=Et&&(Bi=>Bi.strokeWidth&&((Pi,Hi)=>{const Mo=Pi.strokeColor;return!!Mo&&(Mo.length===3||Mo[3]>0)})(Bi))(X),_t=fo(X),ee=ps(X),qt=X.selectionStyle==="hook",Pe=X.disableShowPoints!==!0,{selectionOpacity:sn=1}=X;if(_t&&yt&&!Et)return;const Jt=[],hn=[...M],Ee=hn[hn.length-1],Se=hn[0],We=(ee?.05:.1)*P*sn,Ce=We>0,ve=(ee?.5:1)*P*sn,Xe=ve>0,Qn=[0,0,0],_e=[1,1,1],vn=ee?1:1.5;ae.includes(16)&&Ee&&K&&qo(Ee,K);const ii=(hn.length&&Et&&_t&&K?Vo(Se,K):1/0)<=256,kr=(hn.length&&Et&&_t&&K?Vo(Ee,K):1/0)<=256;!ii&&K&&hn.push(K);const Pr=hn.length>1,Cr=!!X.pathClose||!(!X.bitmap&&(Qi(X)||$r(X)))||hn.length>2&&ii;Pr&&Ce&&(qt?Jt.push(...hn.map((Bi,Pi,Hi)=>({id:Jn,points:Mi(Hi,Pi),strokeColor:Qn,opacity:We}))):Jt.push({id:Jn,points:hn.map(Bi=>ut(Bi.x+1,Bi.y+1)),pathClose:Cr,strokeColor:Qn,strokeWidth:2,opacity:We})),Et&&Ce&&Pe&&Jt.push(...hn.map(Bi=>({id:Jn,...Bi,rx:2*vn,ry:2*vn,backgroundColor:Qn,opacity:We}))),y&&Ce&&Jt.push({id:Jn,points:[ut(y.origin.x+1,y.origin.y+1),ut(y.position.x+1,y.position.y+1)],strokeColor:Qn,strokeWidth:2,opacity:We}),Pr&&Xe&&(qt?Jt.push(...hn.map((Bi,Pi,Hi)=>({id:Jn,points:Mi(Hi,Pi),strokeColor:_e,strokeWidth:vn,opacity:ve}))):Jt.push({id:Jn,points:hn,pathClose:Cr,strokeColor:_e,strokeWidth:vn,backgroundColor:_t&&Et&&X.backgroundColor&&X.backgroundColor[3]>0?X.backgroundColor:[0,0,0,0],opacity:ve})),Et&&Pe&&Jt.push(...hn.map(Bi=>({id:Jn,...Bi,rx:3*vn,ry:3*vn,backgroundColor:[.5,.5,.5],strokeWidth:vn,strokeColor:_e}))),Et&&_t&&Pe&&M.length>=3&&Jt.push({...Se,id:Jn,rx:vn*(ii?5:4),ry:vn*(ii?5:4),backgroundColor:ii?ue:[.5,.5,.5],strokeWidth:vn,strokeColor:_e}),Et&&_t&&le&&Pe&&!ii&&h.length>=2&&Jt.push({...Ee,id:Jn,rx:vn*(kr?5:4),ry:vn*(kr?5:4),backgroundColor:kr?ue:[.5,.5,.5],strokeWidth:vn,strokeColor:_e}),y&&Xe&&!qt&&Jt.push({id:Jn,points:[{x:y.origin.x,y:y.origin.y},{x:y.position.x,y:y.position.y}],strokeColor:_e,strokeWidth:vn,opacity:ve}),vi(...Jt)})(Y,r,c&&Qi(r)?Cs({...ss},!H):void 0)),4096&t.$$.dirty[0]&&(r||(Wn(),Ni())),4096&t.$$.dirty[3]|536870912&t.$$.dirty[5])if($.length){da();const P=$.map(X=>({id:Mr,points:X.map(en),strokeWidth:1,strokeColor:[1,1,1,.5],pathClose:!0}));Xs(...P)}else da();536870912&t.$$.dirty[4]&&n(182,rt=!!Mn),134217728&t.$$.dirty[4]&&n(183,gt=!!Ue),1073741824&t.$$.dirty[4]|469762048&t.$$.dirty[5]&&(!ss||gt||rt||Cs({...ss},!H)),131072&t.$$.dirty[2]|2101248&t.$$.dirty[3]|33554432&t.$$.dirty[5]|1024&t.$$.dirty[6]&&yi>0&&i&&en&&((P,X,K,yt)=>{const Et=en({x:0,y:0}),le=en({x:P,y:P}),_t=en({x:X.width,y:X.height}),ee=le.x-Et.x;if(ns.set(ee>6?1:0),yt<=0)return ja();const qt=lo(ee,Et.x,_t.x).map(sn=>({id:Ha,opacity:yt,points:[{x:sn,y:Et.y},{x:sn,y:_t.y}],strokeWidth:1,strokeColor:K})),Pe=lo(ee,Et.y,_t.y).map(sn=>({id:Ha,opacity:yt,points:[{x:Et.x,y:sn},{x:_t.x,y:sn}],strokeWidth:1,strokeColor:K}));is(...Pe,...qt)})(yi,i,ye,Re),262144&t.$$.dirty[2]|4096&t.$$.dirty[3]|100663296&t.$$.dirty[4]|16777216&t.$$.dirty[5]&&en&&(ct?To():((P,X,K)=>{if(P===null&&X===null)return To();let yt,Et;P!==null&&(yt={id:Pa,strokeColor:K,strokeWidth:1.5,points:[en({x:P,y:0}),en({x:P,y:at.height})]}),X!==null&&(Et={id:Pa,strokeColor:K,strokeWidth:1.5,points:[en({x:0,y:X}),en({x:at.width,y:X})]}),Ua(yt,Et)})(vo,so,Lt)),4096&t.$$.dirty[2]&&(P=>{if(!P)return Fo({_prerender:!1});const X=ne.find(K=>K.isEditing);X&&ei(X,{_prerender:Te==="inline"})})(un),512&t.$$.dirty[6]&&ae&&ae.length&&(()=>{const[P]=ae;P!==8&&P!==46||jr()&&(r.isEditing||gu(r)&&(Qi(r)&&Ne(r.selectedPoint)?setTimeout(()=>wo(r,r.selectedPoint),0):setTimeout(()=>wr(),0)))})(),288&t.$$.dirty[0]&&bi&&Te==="inline"&&bi.focus(),4096&t.$$.dirty[0]&&n(178,V=r&&tr(r)),4096&t.$$.dirty[0]|8388608&t.$$.dirty[5]&&n(13,N=V&&Hl(r)!==!1&&ps(r)),8192&t.$$.dirty[0]&&n(173,kt=N?{...r}:void 0),16384&t.$$.dirty[2]|262144&t.$$.dirty[5]&&n(175,bt=kt&&ji({...kt},at)),1048576&t.$$.dirty[5]&&n(177,et=bt&&no(bt.text,bt)),5242880&t.$$.dirty[5]&&(Pt=bt&&Ui(bt.x,bt.y,et.width,et.height)),12288&t.$$.dirty[0]&&n(27,wt=N?r.text:""),12296&t.$$.dirty[0]|16384&t.$$.dirty[2]&&n(176,Q=Z&&r&&N&&ji({...Ii(r),width:Ne(r.width)?Math.floor(r.width):void 0,height:Ne(r.height)?Math.floor(r.height):void 0},at)),8224&t.$$.dirty[0]|2097152&t.$$.dirty[5]&&n(29,Ut=N&&((P,X)=>{const{textAlign:K="left",fontFamily:yt="sans-serif",fontWeight:Et="normal",fontStyle:le="normal",letterSpacing:_t="normal",textShadowX:ee=0,textShadowY:qt=0,textShadowBlur:Pe=0,textShadowColor:sn,textOutlineWidth:Jt=0,textOutlineColor:hn}=P,Ee="!important",Se=`caret-color:${q};text-align:${K}${Ee};font-family:${yt}${Ee};font-weight:${Et}${Ee};font-style:${le}${Ee};letter-spacing:${Ne(_t)?_t+"px":"normal"}${Ee}`;if(X==="modal")return Se;const We=Jt?`;-webkit-text-stroke:${2*Jt}px ${Ir(hn)} ${Ee}`:"",Ce=Pe||ee||qt?`;text-shadow:${ee}px ${qt}px ${Pe}px ${Ir(sn)} ${Ee}`:"";let ve=P.fontSize,Xe=1,Qn="";ve>1e3&&Oa()&&(Xe=ve/1e3,Qn=`transform-origin:0 0;transform:scale(${Xe})`,ve=1e3);let _e=P.lineHeight/Xe;const vn=Ir(P.color),ii=.5*Math.max(0,ve-_e);return`--font-scalar:${Xe};--bottom-inset:${ii}px;padding:${ii}px 0 0${Ee};color:${vn}${Ee};font-size:${ve}px${Ee};line-height:${_e}px${Ee};${Se};${Qn}${We}${Ce}`})(Q,Te)),8196&t.$$.dirty[0]|2304&t.$$.dirty[2]|2097152&t.$$.dirty[5]&&n(28,lt=N&&((P,X,K,yt)=>{let Et,le;P.width&&P.height?(Et=Ln(P),le=ts(P)):(le=no(r.text,u),le.width=u.width||le.width,Et=ut(P.x+.5*le.width,P.y+.5*le.height));const _t=Math.max(0,P.fontSize-P.lineHeight)+P.lineHeight,ee=en(Et);let qt=ee.x-X.x-.5*le.width,Pe=ee.y-X.y-.5*le.height,sn=P.flipX,Jt=P.flipY,hn=P.rotation;Sn&&Fn?(sn=!sn,Jt=!Jt):Sn?(sn=!sn,hn=-hn):Fn&&(Jt=!Jt,hn=-hn),hn+=yt;const Ee=K*(sn?-1:1),Se=K*(Jt?-1:1);return`--line-height:${_t}px;width:${le.width}px;height:${le.height}px;transform:translate(${qt}px,${Pe}px) rotate(${hn}rad) scale(${Ee}, ${Se})`})(Q,Ye,zn,yn)),65536&t.$$.dirty[2]&&(q=De?Ir(De):"auto"),8480&t.$$.dirty[0]&&N&&bi&&Te==="inline"&&to(wt),4096&t.$$.dirty[0]|33&t.$$.dirty[5]&&n(160,vt=r&&!p?r:vt),32&t.$$.dirty[5]&&n(162,dt=vt&&wv(vt)),32&t.$$.dirty[5]&&n(157,Ht=vt&&sl(vt)),32&t.$$.dirty[5]&&n(159,it=vt&&xg(vt)),32&t.$$.dirty[5]&&n(158,Vt=vt&&gu(vt)),65568&t.$$.dirty[5]&&n(161,Dt=!a&&vt&&(P=>P.disableReorder!==!0)(vt)),32&t.$$.dirty[5]&&n(156,Zt=vt&&Hl(vt)!==!1),32&t.$$.dirty[5]&&n(163,mt=vt&&Ae(vt,"backgroundImage")&&wh(vt,"opacity")),4128&t.$$.dirty[0]&&n(166,Ft=r&&r.format==="html"&&Te==="inline"),4096&t.$$.dirty[0]|2049&t.$$.dirty[5]&&n(170,ht=r&&(!p||Ft)),268435456&t.$$.dirty[4]|32768&t.$$.dirty[5]|256&t.$$.dirty[6]&&Ys.set(ht&&!Li?1:0,{hard:he===!1}),16384&t.$$.dirty[0]|40960&t.$$.dirty[5]&&n(168,Yt=ht&&F.length?(W=ur(F),jo(ut(W.x+.5*W.width,W.y),cd)):Yt),528&t.$$.dirty[0]|24576&t.$$.dirty[5]&&n(167,Nt=(j||Yt)&&as&&zt&&((P,X,K,yt)=>{const Et=P.x,le=P.y,_t=Et+P.width;let ee=Math.max(X.x-.5*K.width,Et),qt=Math.max(X.y-K.height+yt,le);return ee+K.width>_t&&(ee=_t-K.width),ut(ee,qt)})(zt,j||Yt,as,-16)),4096&t.$$.dirty[5]&&n(26,Qt=Nt?`translate(${Nt.x}px, ${Nt.y}px)`:void 0),2097152&t.$$.dirty[0]|4096&t.$$.dirty[5]&&n(25,re=Nt?Xt:void 0),8192&t.$$.dirty[0]&&n(165,xt=N?"text":"shape"),6272&t.$$.dirty[0]|33536&t.$$.dirty[3]|4094&t.$$.dirty[5]|128&t.$$.dirty[6]&&n(24,_=xt==="text"&&ti&&Ft?dd(()=>ti([["div","text-styles",{class:"PinturaShapeControlsGroup"},[...[["bold",{label:"B",style:"font-weight:900;",title:"Bold",shortcut:["CMD","B"]}],["italic",{label:"I",style:"font-family:Times New Roman;font-style:italic;",title:"Italic",shortcut:["CMD","I"]}],["underline",{label:"U",style:"text-decoration:underline;",title:"Underline",shortcut:["CMD","U"]}],["strikeThrough",{label:"S",style:"text-decoration:line-through;",title:"Strikethrough",shortcut:["CMD","S"]}]].map(([P,X])=>["Button","style-"+P,{onclick:()=>document.execCommand(P),...X,style:"font-size:1.25em;text-underline-offset:1px;text-decoration-thickness:1.5px;font-weight:400;"+X.style}])]],["div","text-reset",{class:"PinturaShapeControlsGroup"},[["Button","style-reset",{onclick:()=>document.execCommand("removeFormat"),style:"font-weight:400",title:"Remove styles",label:[["span","T",{style:"font-size:1.25em;font-style:italic;font-family:Times New Roman;text-decoration:underline",textContent:"T"}],["span","x",{style:"position:relative;top:.175rem;",innerHTML:"&times;"}]]}]]]],d)):xt==="shape"&&pn&&d?dd(()=>pn(z?[["div","epsilon",{class:"PinturaShapeControlsGroup"},[["Button","remove-point",{onclick:$d,label:Si.shapeTitleButtonRemove,icon:Si.shapeIconButtonRemove,shortcut:["Backspace"],hideLabel:!0}]]]]:[mt&&["div","alpha",{class:"PinturaShapeControlsGroup"},[["ToggleSlider","adjust-opacity",{onrelease:dc,onchange:Tl,step:.01,value:Ae(r,"opacity")?r.opacity:1,label:(P,X,K)=>Math.round(P/K*100)+"%",min:0,max:1,direction:"x"}]]],["div","beta",{class:"PinturaShapeControlsGroup"},[dt&&["Button","flip-horizontal",{onclick:lc,label:Si.shapeTitleButtonFlipHorizontal,icon:Si.shapeIconButtonFlipHorizontal,hideLabel:!0}],dt&&pi&&["Button","flip-vertical",{onclick:cc,label:Si.shapeTitleButtonFlipVertical,icon:Si.shapeIconButtonFlipVertical,hideLabel:!0}],Dt&&["Button","to-front",{onclick:pc,label:Si.shapeTitleButtonMoveToFront,icon:Si.shapeIconButtonMoveToFront,hideLabel:!0,disabled:ne[ne.length-1]===vt}],it&&["Button","duplicate",{onclick:hc,label:Si.shapeTitleButtonDuplicate,icon:Si.shapeIconButtonDuplicate,shortcut:["CMD","D"],hideLabel:!0}],Vt&&["Button","remove",{onclick:uc,label:Si.shapeTitleButtonRemove,icon:Si.shapeIconButtonRemove,shortcut:["Backspace"],hideLabel:!0}]].filter(Boolean)],Zt&&Ht&&["div","gamma",{class:"PinturaShapeControlsGroup"},[["Button","text-layout",{onclick:os,label:Ar(gc,Si,r),icon:Ar(mc,Si,r),hideLabel:!0}]]],Zt&&["div","delta",{class:"PinturaShapeControlsGroup"},[["Button","edit-text",{label:Si.shapeLabelInputText,onclick:Sl}]]]].filter(Boolean),d)):[]),128&t.$$.dirty[0]|128&t.$$.dirty[6]&&n(23,ke=ne.filter(Aa).filter(P=>P.id).filter(P=>!fo(P)).map(P=>({id:P.id,color:tr(P)?P.color:$r(P)?P.strokeColor:P.backgroundColor,name:P.name||Si["shapeLabelTool"+By(Tv(P))]}))),1024&t.$$.dirty[0]&&ta&&ta.addEventListener("touchmove",Il,!1)},[Je,Qe,Ye,Z,zt,Te,sr,Si,bi,as,ta,d,r,N,F,u,x,I,f,C,v,Xt,qs,ke,_,re,Qt,wt,lt,Ut,k,st,A,w,_n,Eo,b=>{const{origin:W}=b.detail,P=gi&&ae.includes(16);ho=void 0,n(151,Ue=void 0),Jo=void 0,Wr=void 0,Va=!1,po=void 0,Qo=!1,xi=!1,Lo(),clearTimeout(Sr),Sr=setTimeout(()=>n(152,Li=!0),250);const X=ir();if(!X||Qi(X)&&Ae(X,"pathClose")||Br(),Bn=Ze(Ve(W)),X&&Qi(X)&&Ae(X,"pathClose"))return cn(b);const K=ni(ne,Bn,wi,Et=>Aa(Et)),yt=K.length&&K.shift();if(r&&ps(r))if(yt!==r)mo();else{const Et=Ae(r,"height"),le=!Et&&Ae(r,"width");if(Et||le){const _t=Ii(r),ee=Ii(_t);ji(ee,at);const qt=Wa(no(_t.text,ee),Jt=>Math.ceil(Jt)),Pe=Fi(ee.width,ee.height||qt.height);kl(Pe,_t,ee),xi=ni([{..._t,strokeWidth:"5%"}],Bn,0).length===0}}if(r&&Kn&&(Qo=!0),!yt&&r&&ps(r)&&En(r),!!we(W)){if(yt&&Fa(yt))return Va=!0,n(151,Ue=yt),a?(P&&En(yt),void Do(o)):(Jo=Ii(Ue),void(Wr=ji(Ii(Ue),at)));if(po=yt||void 0,!cn(b)&&yt){if(Kt(yt,!0,P),n(151,Ue=yt),a)return Do(o);Jo=Ii(Ue),Wr=ji(Ii(Ue),at)}}},b=>{Na(),Be(b)},b=>{const{translation:W,ctrlKey:P,metaKey:X,shiftKey:K,position:yt}=b.detail;if(Ue){if(!gl(Ue))return;if(ps(Ue)){if(!xi)return;mo()}if(K){let le=Math.abs(W.x),_t=Math.abs(W.y);L==="x"&&(_t-=64),L==="y"&&(le-=64),le>_t?(W.y=0,L="x"):_t>le&&(W.x=0,L="y")}else L=null;const Et=P||X;return ho?o.every(gl)?void ho.forEach(({shape:le,shapeOriginComputed:_t})=>{co(le,_t,W,{...Wi(0,yi,i,le)})}):void 0:co(Ue,Wr,W,{...Wi(Et?0:Tr,yi,i,Ue)})}an(b)},b=>{if(Na(),Ue){if(!a)if(b.detail.isTap&&Qi(Ue)&&dy(Ue)){const{position:W}=b.detail,P=Ze(Ve(W));((X,K)=>{const yt=X.points,Et=[];for(let qt=0;qt<yt.length-1;qt++)Et.push([yt[qt],yt[qt+1]]);Et.push([yt[yt.length-1],yt[0]]);const le=Et.findIndex(([qt,Pe])=>Uu(K,6,qt,Pe));let _t;const ee=[];for(let qt=0;qt<Et.length;qt++)ee.push(Et[qt][0]),qt===le&&(_t=qt+1,ee.push(K));ei(X,{points:ee,selectedPoint:_t})})(Ue,P)}else b.detail.isTap&&Va&&tr(Ue)&&Hl(Ue)!==!1&&je(Ue)}else nt(b)},b=>{const W=po&&b.detail.isTap,P=gi&&ae.includes(16);if(b.detail.isTap&&setTimeout(()=>{ze({target:Ue||po,position:Bn},0)}),Ue)return se(Ue),X=Ue,K=Jo,JSON.stringify(X)!==JSON.stringify(K)&&te(Ue),void n(151,Ue=void 0);var X,K;let yt=!0;if(!P){const Et=O();yt=!Et||rn(Et,po||void 0),yt&&Co({storePrevious:!1})}Gt(b),yt&&W&&Kt(po,!0,P)},ns,b=>{n(152,Li=!0),n(151,Ue=r),Wr=u},b=>{if(!Ue)return void n(152,Li=!1);const{translation:W,indexes:P,shiftKey:X,ctrlKey:K,metaKey:yt,isNudge:Et}=b.detail;Jr(Ue,Wr,P,W,{shiftKey:!Et&&X,...Wi(K||yt?0:Tr,yi,i,Ue)}),Np(Ue)&&Vo(W)>16&&ei(Ue,{selectedPoint:void 0})},b=>{if(!Ue)return void n(152,Li=!1);Kt(Ue);const{isTap:W,translation:P,indexes:X}=b.detail;W&&(Np(Ue)&&ei(Ue,{selectedPoint:Ue.selectedPoint===X[0]?void 0:X[0]}),se(Ue)),n(151,Ue=void 0),n(152,Li=!1),te(r)},b=>{Ci=Me(u).origin,n(152,Li=!0),n(151,Ue=r),Wr=u},b=>{if(!Ue)return void n(152,Li=!1);const{translation:W,shiftKey:P}=b.detail;((X,K,yt,Et)=>{const le=Rn(ji(Ii(X),at)),_t=Ln(le),ee=zr(Ci,yt);let qt=uu(ee,_t)+Math.PI/2;if(Et.shiftKey){const Pe=Math.PI/16;qt=Pe*Math.round(qt/Pe)-yn%Pe}ao(X,{rotation:qt},at),Vi()})(Ue,0,W,{shiftKey:P})},()=>{Ue?(Kt(Ue),n(151,Ue=void 0),n(152,Li=!1),te(r)):n(152,Li=!1)},b=>{n(152,Li=!0),n(151,Ue=r),Wr=u},b=>{if(!Ue)return void n(152,Li=!1);const{translation:W,ctrlKey:P,metaKey:X}=b.detail;((K,yt,Et,le)=>{const _t=qa(yt),ee=no(yt.text,yt);_t.width||(_t.width=ee.width),_t.height||(_t.height=ee.height);let qt=2;K.flipX&&K.flipY?qt=0:K.flipX?qt=3:K.flipY&&(qt=1),Jr(K,yt,[qt],Et,{...le,aspectRatio:_t.width/_t.height,beforeResizeShape:Pe=>{const sn=Pe.width/_t.width;Pe.fontSize=yt.fontSize*sn,yt.width||delete Pe.width,yt.height||delete Pe.height}})})(Ue,Wr,W,{...Wi(P||X?0:Tr,yi,i,Ue)})},()=>{Ue?(Kt(Ue),n(151,Ue=void 0),n(152,Li=!1),te(r)):n(152,Li=!1)},b=>{const{key:W}=b,P=/escape/i.test(W);if(jr())return P?(b.preventDefault(),b.stopPropagation(),En(r)):void(it&&W==="d"&&(b.metaKey||b.ctrlKey)&&(b.preventDefault(),b.stopPropagation(),Ml()))},b=>{const W=Hl(r,b);return W===!0?b:W},eo,b=>{const{target:W,key:P}=b,X=W.value||W.innerText,K=W.selectionStart||0,yt=W.selectionEnd||X.length,Et=X.substring(0,K)+P+X.substring(yt);if(Hl(r,Et)!==Et)return b.preventDefault()},b=>Xu(r)&&/enter/i.test(b.code)&&r.disableNewline!==!1?b.preventDefault():/arrow/i.test(b.code)?b.stopPropagation():/escape/i.test(b.key)?Ra():void 0,si,b=>{if(si(b))return mo()},mo,Ra,Ys,b=>{const W=zo();W&&(W.find(ps)||W.find(P=>!gl(P))||W.forEach(P=>{n(151,Ue=P),Wr=ji(Ii(Ue),at),co(Ue,Wr,b.detail)}))},b=>{n(22,qs=!0)},({relatedTarget:b})=>{b&&b.classList.contains("shape-selector__button")||n(22,qs=!1)},b=>{if(b.pointerType==="touch"||b.target.className!=="PinturaShapeEditor")return void ui();(Li||Sr)&&$c(void 0);const W=jh(b,Z);n(154,ss=Ve(W));const P=jo(Ze(W),K=>Math.round(K));if(Ls(P,Pl)||(Pl=Ve(P),qe(Li,W,P),Li||Sr)||p)return;const[X]=ni(ne,P,0,Aa);X&&fo(X)||$c(X)},b=>{b.pointerType!=="touch"&&ui()},Rl,de,ln,Ie,yn,Sn,Fn,zn,un,Y,at,ue,De,ye,Lt,cn,an,nt,Gt,Be,xe,te,tn,ot,me,se,ge,oe,qe,ze,ui,Oe,rn,In,Dn,pn,ti,we,Ze,en,hi,wi,pi,Kn,gi,Tr,Yo,pr,yi,qi,lr,Ai,hr,mr,Ki,ki,(b,W={})=>{let P,X,K,yt=[],Et=dr(b),le=tr(b),_t=W.position==="relative";const ee=W.interpolateInput,qt=ca(),Pe=Ee=>{if(!Tr)return Ee;const Se=Ze(Ee),{snapTranslation:We,snapLines:Ce}=er(Hr(Se),qt,Tr,yi,i);return Dr(Ee,We),xo(Ce),Ee},sn=!!O(),Jt=W.isSelection?Ie:Qe,hn=W.inputMode==="step";if(Qi(b)){if(hn){let Ee=!1;const Se=(We,Ce)=>{const ve=lr(Jt),Xe=We&&ut(Ru(We.x,at.width),Ru(We.y,at.height)),Qn=Xe&&en(Xe);ae.includes(16)&&Qn&&qo(Qn,Ce);const _e=Ze(Ce),vn=ve.points.length?ve.points[0]:_e,ii=ut(Ru(vn.x,at.width),Ru(vn.y,at.height)),kr=en(ii),Pr=Vo(kr,Ce);if(!Ee&&ve.points.length===1&&Pr<36)return hr(Jt);if(ve.points.length>2&&Pr<=256){ve.pathClose=!0,Aa(ve)&&Kt(ve);const Pi=mr(Jt);return void xe(Pi)}const Cr=ve.strokeWidth&&ve.strokeColor&&(ve.strokeColor[3]===void 0||ve.strokeColor[3]>0),Bi=Vo(Qn,Ce);if(Cr&&ve.points.length>1&&Bi<256){ve.pathClose=!1,ve.backgroundColor=[0,0,0,0],Aa(ve)&&Kt(ve);const Pi=mr(Jt);xe(Pi)}else if(!(ve.points.length>0&&Bi<100))return _t?Uc(_e,at):_e};return{start:We=>{const Ce=lr(Jt),{origin:ve}=We.detail;if(X=4,P=Pe(Ve(ve)),K=Ve(P),Ce){const Xe=Ce.points[Ce.points.length-1],Qn=Se(Xe,P);return Qn&&(Ce.points=[...Ce.points,Qn]),void Ki({points:Ce.points},Jt)}Ee=!0},update:We=>{if(!Ee)return;const Ce=lr(Jt);if(!Ce)return;const ve=Ce.points[0],Xe=Se(ve,ut(P.x+We.detail.translation.x,P.y+We.detail.translation.y));Xe&&(Ce.points[1]=Xe,Ki({points:Ce.points},Jt))},release:We=>We.detail.preventInertia(),cancel:()=>{hr(Jt)},end:We=>{if(!Ee)return;const Ce=Ze(P),ve=_t?Uc(Ce,at):Ce,{isTap:Xe}=We.detail;if(Xe&&ni(ne,Ce,0,Aa).length)return hr(Jt);Ai({...b,points:[ve]},Jt)}}}return{start:Ee=>{const{origin:Se}=Ee.detail;X=4,P=Ve(Se),K=Ve(P),yt.push({...K});const We=Ze(P),Ce=_t?Uc(We,at):We;Ai({...b,points:[Ce]},Jt)},update:Ee=>{const Se=lr(Jt);if(!Se)return;const{translation:We}=Ee.detail,Ce=ut(P.x+We.x,P.y+We.y),ve=ro(K,Ce);if(gn(ve,5)<=X)return;const Xe=[],Qn=uu(Ce,K),_e=X-ve,vn={x:K.x+_e*Math.cos(Qn),y:K.y+_e*Math.sin(Qn)};if(yt.push({...vn}),ee&&Se.points.length>1){const ii=yt.length,kr=Math.ceil(ve/10);let Pr=ve/30;const Cr=yt[ii-3],Bi=yt[ii-2],Pi=yt[ii-1];yt[ii-4]||(Pr*=.1),Xe.push(...Kx(Cr,Bi,Pi,kr,Pr).slice(1,-1)),yt.splice(ii-1,0,...Xe)}Xe.push(vn),K.x=vn.x,K.y=vn.y,Ki({points:Se.points.concat(Xe.map(ii=>{const kr=Ze(ii);return _t?Uc(kr,at):kr}))},Jt)},release:Ee=>Ee.detail.preventInertia(),cancel:()=>{hr(Jt)},end:Ee=>{const Se=lr(Jt);if(!Se)return;if(Ee.detail.isTap){let Ce=!1;if(Se.bitmap?(po&&(Ce=!0),sn&&(Ce=!0)):Ce=!0,Ce)return hr(Jt)}const We=mr(Jt);xe(We)}}}return Et||le||Ho(b)?{start:Ee=>{const{origin:Se}=Ee.detail;P=Pe(Ve(Se));const We=Ze(P),Ce=_t?Uc(We,at):We,ve=-1*Ao(yn,Sn,Fn),Xe={...b,rotation:ve,...Ce};Xe.flipX=Sn,Xe.flipY=Fn,delete Xe.position,Xe.opacity=0,(Et?["rx","ry"]:["width","height"]).forEach(Qn=>{Xe[Qn]=_t?"0%":0}),Ai(Xe,Jt)},update:Ee=>{const Se=lr(Jt);if(!Se)return;Se.opacity=1;let{aspectRatio:We}=Se,{translation:Ce,shiftKey:ve,ctrlKey:Xe}=Ee.detail;!We&&ve&&(We=1);const Qn=Pe(ut(P.x+Ce.x,P.y+Ce.y)),_e=Ze(P),vn=Ze(Qn);if(We){const Mo=ur([_e,vn]),Po=oo(Mo,We),Bo=vn.x<_e.x?-1:1,Ro=vn.y<_e.y?-1:1;vn.x=_e.x+Po.width*Bo,vn.y=_e.y+Po.height*Ro}const ii={x:_e.x+.5*(vn.x-_e.x),y:_e.y+.5*(vn.y-_e.y)},kr=Ao(yn,Sn,Fn);Zr(_e,kr,ii),Zr(vn,kr,ii);const Pr=Math.min(_e.x,vn.x),Cr=Math.min(_e.y,vn.y);let Bi=Math.max(_e.x,vn.x)-Pr,Pi=Math.max(_e.y,vn.y)-Cr,Hi={};Et?(Xe?(Hi.x=_e.x,Hi.y=_e.y):(Hi.x=Pr+.5*Bi,Hi.y=Cr+.5*Pi),Hi.rx=.5*Bi,Hi.ry=.5*Pi):(Xe?(Hi.x=_e.x-.5*Bi,Hi.y=_e.y-.5*Pi):(Hi.x=Pr,Hi.y=Cr),Hi.width=Bi,Hi.height=Pi),Ki(Hi,Jt,(Mo,Po)=>ao(Mo,Po,at))},release:Ee=>{Ee.detail.preventInertia()},cancel:()=>{hr(Jt)},end:Ee=>{const Se=lr(Jt);if(Se){if(Ee.detail.isTap){if(tr(Se)&&Kn&&Qo||!tr(Se)||!Kn||po)return hr(Jt);delete Se.width,delete Se.height,Se.disableNewline!==!1&&delete Se.textAlign;const We=ji({...Se},at),Ce=no(Se.text,We),ve=Ze({x:P.x,y:P.y-.5*Ce.height}),Xe=Ze({x:P.x+Ce.width,y:P.y+.5*Ce.height}),Qn={x:ve.x+.5*(Xe.x-ve.x),y:ve.y+.5*(Xe.y-ve.y)},_e=Ao(yn,Sn,Fn);Zr(ve,_e,Qn),Zr(Xe,_e,Qn);let vn=Math.min(ve.x,Xe.x),ii=Math.min(ve.y,Xe.y);vn<0&&(vn=0),ii<0&&(ii=0),vn+Ce.width>at.width&&(vn=at.width-Ce.width),ii+Ce.height>at.height&&(ii=at.height-Ce.height),Se.x=He(Se.x)?Gr(vn,at.width):vn,Se.y=He(Se.y)?Gr(ii,at.height):ii}if(Se.opacity=1,tr(Se))xe(Se);else{const We=mr(Jt);xe(We)}Aa(Se)&&Kt(Se),tr(Se)&&je(Se)}}}:$r(b)?{start:Ee=>{const{origin:Se}=Ee.detail,We=Ze(Pe(Se)),Ce=jo(We,cd);P=Ve(Se),Ai({...b,x1:_t?Gr(Ce.x,at.width):Ce.x,y1:_t?Gr(Ce.y,at.height):Ce.y,x2:_t?Gr(Ce.x,at.width):Ce.x,y2:_t?Gr(Ce.y,at.height):Ce.y,opacity:0},Jt)},update:Ee=>{if(!lr(Jt))return;const{translation:Se}=Ee.detail,We=Pe(Zi(Ve(P),Se));if(ae.includes(16)){const ve=ro(P,We),Xe=uu(P,We),Qn=Math.PI/4,_e=Qn*Math.round(Xe/Qn);We.x=P.x+ve*Math.cos(_e),We.y=P.y+ve*Math.sin(_e)}const Ce=Ze(We);Ki({x2:_t?Gr(Ce.x,at.width):Ce.x,y2:_t?Gr(Ce.y,at.height):Ce.y,opacity:1},Jt)},release:Ee=>Ee.detail.preventInertia(),cancel:()=>{hr(Jt)},end:Ee=>{const Se=lr(Jt);if(!Se)return;if(Ee.detail.isTap)return hr(Jt);Se.opacity=1;const We=mr(Jt);xe(We),Aa(Se)&&Kt(We)}}:void 0},()=>{let b,W;const P=hi*hi,X=(K,yt,Et=!1)=>{const le=Vo(K,yt);if(!Et&&le<2)return!1;const _t=ne.filter(qt=>!qt.disableErase);let ee;return ee=le<P?ni(ne,Ze(yt),hi):$i(_t,Ze(K),Ze(yt),hi),$e(ee).forEach(me),!0};return{start:K=>{b=ut(Math.round(K.detail.origin.x),Math.round(K.detail.origin.y)),X(b,b,!0),W=b},update:K=>{const{translation:yt}=K.detail,Et=ut(Math.round(b.x+yt.x),Math.round(b.y+yt.y));X(W,Et)&&(W=Ve(Et))},release:K=>K.detail.preventInertia(),cancel:()=>{hr(collection)},end:()=>{}}},ir,Ko,b=>{if(!ir())return vh(b),ki(b)},Br,So,(b={})=>({id:la(),...b}),Vi,Or,ei,Ji,(b,W,P=!0)=>{ne.forEach(X=>Ji(X,b,W,!1)),P&&Vi()},Fo,zo,Qr,jr,Co,Kt,En,je,be,$e,qn,Rn,ni,$i,vo,so,Ue,Li,Mn,ss,p,Zt,Ht,Vt,it,vt,Dt,dt,mt,z,xt,Ft,Nt,Yt,j,ht,a,o,kt,c,bt,Q,et,V,ct,i,H,rt,gt,$,M,y,h,G,l,T,g,s,ne,he,ae,Re,function(b){qr.call(this,t,b)},b=>Rl(b),function(b){Hn[b?"unshift":"push"](()=>{bi=b,n(8,bi)})},function(){wt=this.value,n(27,wt),n(13,N),n(12,r),n(178,V),n(0,Je),n(193,ne)},b=>{const{key:W}=b;if(W==="Enter"){if(si(b))return!0;if(r.disableNewline===!1)return!1}return!0},function(b){Hn[b?"unshift":"push"](()=>{bi=b,n(8,bi)})},()=>{ta&&ta.focus()},b=>n(9,as=b.detail),function(b){Hn[b?"unshift":"push"](()=>{ta=b,n(10,ta)})},b=>jh(b,Z)]}class A6 extends fn{constructor(e){super(),$n(this,e,E6,I6,dn,{uid:67,ui:68,disabled:0,shapes:1,selection:69,offset:2,contextRotation:70,contextFlipX:71,contextFlipY:72,contextZoom:73,active:74,opacity:75,parentRect:76,rootRect:3,utilRect:4,hoverColor:77,caretColor:78,gridColor:79,snapColor:80,textInputMode:5,oninteractionstart:81,oninteractionupdate:82,oninteractionrelease:83,oninteractionend:84,oninteractioncancel:85,onaddshape:86,onupdateshape:87,onselectshape:88,onblurshape:89,onremoveshape:90,ontapshape:91,onhovershape:92,ontriggerhistorywrite:93,onhovercanvas:94,ontapcanvas:95,onleavecanvas:96,beforeSelectShape:97,beforeDeselectShape:98,beforeRemoveShape:99,beforeUpdateShape:100,willRenderShapeControls:101,willRenderShapeTextControls:102,willStartInteraction:103,mapEditorPointToImagePoint:104,mapImagePointToEditorPoint:105,eraseRadius:106,selectRadius:107,enableButtonFlipVertical:108,enableTapToAddText:109,enableMultiSelect:110,enableTextStyleControls:6,locale:7,snapThreshold:111,snapPointer:112,enableSnapToContext:113,gridSize:114,syncShapeCollection:115,getShapeDraft:116,addShapeDraft:117,discardShapeDraft:118,confirmShapeDraft:119,updateShapeDraft:120,addShape:121,createShape:122,eraseShape:123,getMarkupItemDraft:124,getMarkupItemDraftIndex:125,addMarkupItemDraft:126,confirmMarkupItemDraft:127,discardMarkupItemDraft:128,createMarkupItem:129,syncShapes:130,removeMarkupShapeProps:131,updateMarkupShape:132,updateMarkupShapeProperty:133,updateMarkupItemsShapeProperty:134,updateMarkupShapeItems:135,getActiveMarkupItems:136,getActiveMarkupItem:137,hasActiveMarkupItem:138,blurShapes:139,selectShape:140,deselectMarkupItem:141,editMarkupItem:142,finishEditMarkupItem:143,removeMarkupItems:144,getTextShapeRect:145,getMarkupShapeRect:146,getShapesNearPosition:147,getShapesBetweenPoints:148},null,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}get syncShapeCollection(){return this.$$.ctx[115]}get getShapeDraft(){return this.$$.ctx[116]}get addShapeDraft(){return this.$$.ctx[117]}get discardShapeDraft(){return this.$$.ctx[118]}get confirmShapeDraft(){return this.$$.ctx[119]}get updateShapeDraft(){return this.$$.ctx[120]}get addShape(){return this.$$.ctx[121]}get createShape(){return this.$$.ctx[122]}get eraseShape(){return this.$$.ctx[123]}get getMarkupItemDraft(){return this.$$.ctx[124]}get getMarkupItemDraftIndex(){return this.$$.ctx[125]}get addMarkupItemDraft(){return this.$$.ctx[126]}get confirmMarkupItemDraft(){return this.$$.ctx[127]}get discardMarkupItemDraft(){return this.$$.ctx[128]}get createMarkupItem(){return this.$$.ctx[129]}get syncShapes(){return this.$$.ctx[130]}get removeMarkupShapeProps(){return this.$$.ctx[131]}get updateMarkupShape(){return this.$$.ctx[132]}get updateMarkupShapeProperty(){return this.$$.ctx[133]}get updateMarkupItemsShapeProperty(){return this.$$.ctx[134]}get updateMarkupShapeItems(){return this.$$.ctx[135]}get getActiveMarkupItems(){return this.$$.ctx[136]}get getActiveMarkupItem(){return this.$$.ctx[137]}get hasActiveMarkupItem(){return this.$$.ctx[138]}get blurShapes(){return this.$$.ctx[139]}get selectShape(){return this.$$.ctx[140]}get deselectMarkupItem(){return this.$$.ctx[141]}get editMarkupItem(){return this.$$.ctx[142]}get finishEditMarkupItem(){return this.$$.ctx[143]}get removeMarkupItems(){return this.$$.ctx[144]}get getTextShapeRect(){return this.$$.ctx[145]}get getMarkupShapeRect(){return this.$$.ctx[146]}get getShapesNearPosition(){return this.$$.ctx[147]}get getShapesBetweenPoints(){return this.$$.ctx[148]}}function L6(t){let e,n,i;return n=new Kr({props:{items:t[2]}}),{c(){e=$t("ul"),Wt(n.$$.fragment),S(e,"class","PinturaShapeStyleList")},m(r,o){tt(r,e,o),Bt(n,e,null),i=!0},p(r,o){const a={};4&o&&(a.items=r[2]),n.$set(a)},i(r){i||(R(n.$$.fragment,r),i=!0)},o(r){B(n.$$.fragment,r),i=!1},d(r){r&&J(e),Ot(n)}}}function F6(t){let e,n;return e=new _a({props:{class:"PinturaShapeStyles",elasticity:t[0],$$slots:{default:[z6]},$$scope:{ctx:t}}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};1&r&&(o.elasticity=i[0]),524292&r&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function z6(t){let e,n,i;return n=new Kr({props:{items:t[2]}}),{c(){e=$t("ul"),Wt(n.$$.fragment),S(e,"class","PinturaShapeStyleList")},m(r,o){tt(r,e,o),Bt(n,e,null),i=!0},p(r,o){const a={};4&o&&(a.items=r[2]),n.$set(a)},i(r){i||(R(n.$$.fragment,r),i=!0)},o(r){B(n.$$.fragment,r),i=!1},d(r){r&&J(e),Ot(n)}}}function D6(t){let e,n,i,r;const o=[F6,L6],a=[];function s(l,c){return l[1]?0:1}return n=s(t),i=a[n]=o[n](t),{c(){e=$t("div"),i.c(),Tt(e,"opacity",t[5]),Tt(e,"pointer-events",t[4]),Tt(e,"visibility",t[3])},m(l,c){tt(l,e,c),a[n].m(e,null),r=!0},p(l,[c]){let d=n;n=s(l),n===d?a[n].p(l,c):(Le(),B(a[d],1,1,()=>{a[d]=null}),Fe(),i=a[n],i?i.p(l,c):(i=a[n]=o[n](l),i.c()),R(i,1),i.m(e,null)),32&c&&Tt(e,"opacity",l[5]),16&c&&Tt(e,"pointer-events",l[4]),8&c&&Tt(e,"visibility",l[3])},i(l){r||(R(i),r=!0)},o(l){B(i),r=!1},d(l){l&&J(e),a[n].d()}}}function B6(t,e,n){let i,r,o,a,s,l,c,d,{isActive:u=!1}=e,{controls:p=[]}=e,{locale:h}=e,{scrollElasticity:$}=e,{scrollEnable:g=!0}=e,{hideTitles:f=!1}=e,{willRenderControls:x=ai}=e;const v=mi("redrawTrigger");D(t,v,M=>n(16,l=M));const w=mi("env");D(t,w,M=>n(15,s=M));const T=mi("isAnimated");D(t,T,M=>n(18,d=M));const I=mn(0,{stiffness:.25,damping:.9});return D(t,I,M=>n(17,c=M)),t.$$set=M=>{"isActive"in M&&n(10,u=M.isActive),"controls"in M&&n(11,p=M.controls),"locale"in M&&n(12,h=M.locale),"scrollElasticity"in M&&n(0,$=M.scrollElasticity),"scrollEnable"in M&&n(1,g=M.scrollEnable),"hideTitles"in M&&n(13,f=M.hideTitles),"willRenderControls"in M&&n(14,x=M.willRenderControls)},t.$$.update=()=>{263168&t.$$.dirty&&I.set(u?1:0,{hard:d===!1}),131072&t.$$.dirty&&n(5,i=c),1024&t.$$.dirty&&n(4,r=u?"auto":"none"),131072&t.$$.dirty&&n(3,o=c<=0?"hidden":"visible"),129024&t.$$.dirty&&n(2,a=l&&x(p.map(M=>["ShapeStyle",M.id,{title:M.componentProps.title,locale:h,hideTitle:f,items:[[M.component,M.id,M.componentProps]]}]),s,()=>v.set({})))},[$,g,a,o,r,i,v,w,T,I,u,p,h,f,x,s,l,c,d]}class O6 extends fn{constructor(e){super(),$n(this,e,B6,D6,dn,{isActive:10,controls:11,locale:12,scrollElasticity:0,scrollEnable:1,hideTitles:13,willRenderControls:14})}}function d2(t,e,n){const i=t.slice();return i[15]=e[n].key,i[6]=e[n].controls,i[16]=e[n].isActive,i}function u2(t,e){let n,i,r;return i=new O6({props:{isActive:e[16],controls:e[6],locale:e[1],scrollElasticity:e[2],scrollEnable:e[3],hideTitles:e[4],willRenderControls:e[5]}}),{key:t,first:null,c(){n=Di(),Wt(i.$$.fragment),this.first=n},m(o,a){tt(o,n,a),Bt(i,o,a),r=!0},p(o,a){e=o;const s={};128&a&&(s.isActive=e[16]),128&a&&(s.controls=e[6]),2&a&&(s.locale=e[1]),4&a&&(s.scrollElasticity=e[2]),8&a&&(s.scrollEnable=e[3]),16&a&&(s.hideTitles=e[4]),32&a&&(s.willRenderControls=e[5]),i.$set(s)},i(o){r||(R(i.$$.fragment,o),r=!0)},o(o){B(i.$$.fragment,o),r=!1},d(o){o&&J(n),Ot(i,o)}}}function W6(t){let e,n,i,r=[],o=new Map,a=t[7];const s=l=>l[15];for(let l=0;l<a.length;l+=1){let c=d2(t,a,l),d=s(c);o.set(d,r[l]=u2(d,c))}return{c(){e=$t("div");for(let l=0;l<r.length;l+=1)r[l].c();S(e,"class",n=bn(["PinturaShapeStyleEditor",!t[3]&&"PinturaShapeStyleEditorOverflow",t[0]]))},m(l,c){tt(l,e,c);for(let d=0;d<r.length;d+=1)r[d].m(e,null);i=!0},p(l,[c]){190&c&&(a=l[7],Le(),r=es(r,c,s,1,l,a,o,e,Zs,u2,null,d2),Fe()),(!i||9&c&&n!==(n=bn(["PinturaShapeStyleEditor",!l[3]&&"PinturaShapeStyleEditorOverflow",l[0]])))&&S(e,"class",n)},i(l){if(!i){for(let c=0;c<a.length;c+=1)R(r[c]);i=!0}},o(l){for(let c=0;c<r.length;c+=1)B(r[c]);i=!1},d(l){l&&J(e);for(let c=0;c<r.length;c+=1)r[c].d()}}}function _6(t,e,n){let i,r,o,{class:a}=e,{controls:s={}}=e,{shapeProps:l}=e,{onchange:c}=e,{locale:d}=e,{scrollElasticity:u}=e,{scrollEnable:p=!0}=e,{hideTitles:h=!1}=e,{willRenderControls:$}=e;const g=[];return t.$$set=f=>{"class"in f&&n(0,a=f.class),"controls"in f&&n(6,s=f.controls),"shapeProps"in f&&n(8,l=f.shapeProps),"onchange"in f&&n(9,c=f.onchange),"locale"in f&&n(1,d=f.locale),"scrollElasticity"in f&&n(2,u=f.scrollElasticity),"scrollEnable"in f&&n(3,p=f.scrollEnable),"hideTitles"in f&&n(4,h=f.hideTitles),"willRenderControls"in f&&n(5,$=f.willRenderControls)},t.$$.update=()=>{64&t.$$.dirty&&n(11,i=Object.keys(s).filter(f=>s[f])),2304&t.$$.dirty&&n(10,r=l&&Object.keys(l).length&&i&&wh(l)?(f=>i.filter(x=>x.split("_").every(v=>Ae(f,v)&&wh(f,v))).map(x=>{const v=(f.settings&&f.settings[x]||{}).control||x,w=x.split("_");let T=w.length>1?w.map(C=>f[C]):f[x];if(Un(s[v])){const{title:C,component:z}=s[v](T,j=>{c({[x]:j})},{selectedShapeId:f.id});return{id:v,component:Kr,componentProps:{title:C,items:z}}}let[I,M]=s[v];if(He(I)&&s[I]){const C={...M};[I,M]=s[I],M={...M,...C}}const F=Un(M.options)?M.options(f):M.options;return I==="RadioGroup"&&(M.selectedIndex=-1),Un(M.formatValue)&&(T=M.formatValue(T)),{id:v,component:I,componentProps:{...M,options:F,locale:d,value:T,optionLabelClass:"PinturaButtonLabel",onchange:C=>{const z=Gs(C)&&!Ei(C)?C.value:C;M.onchange&&M.onchange(z,f);const j=w.length>1?w.reduce((A,y,st)=>({...A,[y]:Array.isArray(z)?z[st]:z}),{}):{[x]:z};c(j)}}}}).filter(Boolean))(l):[]),1280&t.$$.dirty&&n(7,o=((f,x)=>{let v=g.find(w=>w.key===f);return v||(v={key:f,controls:x},g.push(v)),g.forEach(w=>w.isActive=!1),v.controls=x,v.isActive=!0,g})(l&&Object.keys(l).length?Object.keys(l).join("_"):"none",r||[]))},[a,d,u,p,h,$,s,o,l,c,r,i]}class m1 extends fn{constructor(e){super(),$n(this,e,_6,W6,dn,{class:0,controls:6,shapeProps:8,onchange:9,locale:1,scrollElasticity:2,scrollEnable:3,hideTitles:4,willRenderControls:5})}}var Vb=t=>/<svg /.test(t);function V6(t){let e,n;return e=new Kr({props:{items:t[10]}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};1024&r&&(o.items=i[10]),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function N6(t){let e,n,i,r;const o=[j6,H6],a=[];function s(l,c){return l[8]?0:1}return e=s(t),n=a[e]=o[e](t),{c(){n.c(),i=Di()},m(l,c){a[e].m(l,c),tt(l,i,c),r=!0},p(l,c){let d=e;e=s(l),e===d?a[e].p(l,c):(Le(),B(a[d],1,1,()=>{a[d]=null}),Fe(),n=a[e],n?n.p(l,c):(n=a[e]=o[e](l),n.c()),R(n,1),n.m(i.parentNode,i))},i(l){r||(R(n),r=!0)},o(l){B(n),r=!1},d(l){a[e].d(l),l&&J(i)}}}function H6(t){let e,n,i,r,o=t[10]&&p2(t);return i=new _a({props:{scrollAutoCancel:t[9],elasticity:t[0],$$slots:{default:[U6]},$$scope:{ctx:t}}}),{c(){e=$t("div"),o&&o.c(),n=ce(),Wt(i.$$.fragment),S(e,"class","PinturaShapePresetsFlat")},m(a,s){tt(a,e,s),o&&o.m(e,null),At(e,n),Bt(i,e,null),r=!0},p(a,s){a[10]?o?(o.p(a,s),1024&s&&R(o,1)):(o=p2(a),o.c(),R(o,1),o.m(e,n)):o&&(Le(),B(o,1,1,()=>{o=null}),Fe());const l={};512&s&&(l.scrollAutoCancel=a[9]),1&s&&(l.elasticity=a[0]),536871070&s&&(l.$$scope={dirty:s,ctx:a}),i.$set(l)},i(a){r||(R(o),R(i.$$.fragment,a),r=!0)},o(a){B(o),B(i.$$.fragment,a),r=!1},d(a){a&&J(e),o&&o.d(),Ot(i)}}}function j6(t){let e,n,i,r,o;n=new _a({props:{elasticity:t[0],class:"PinturaShapePresetsGroups",$$slots:{default:[X6]},$$scope:{ctx:t}}});const a=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[11]},t[12]];let s={$$slots:{default:[q6,({panel:l,panelIsActive:c})=>({26:l,27:c}),({panel:l,panelIsActive:c})=>(l?67108864:0)|(c?134217728:0)]},$$scope:{ctx:t}};for(let l=0;l<a.length;l+=1)s=Oi(s,a[l]);return r=new d1({props:s}),{c(){e=$t("div"),Wt(n.$$.fragment),i=ce(),Wt(r.$$.fragment),S(e,"class","PinturaShapePresetsGrouped")},m(l,c){tt(l,e,c),Bt(n,e,null),At(e,i),Bt(r,e,null),o=!0},p(l,c){const d={};1&c&&(d.elasticity=l[0]),536876128&c&&(d.$$scope={dirty:c,ctx:l}),n.$set(d);const u=6144&c?Lr(a,[a[0],a[1],2048&c&&{panels:l[11]},4096&c&&Nr(l[12])]):{};738206239&c&&(u.$$scope={dirty:c,ctx:l}),r.$set(u)},i(l){o||(R(n.$$.fragment,l),R(r.$$.fragment,l),o=!0)},o(l){B(n.$$.fragment,l),B(r.$$.fragment,l),o=!1},d(l){l&&J(e),Ot(n),Ot(r)}}}function p2(t){let e,n;return e=new Kr({props:{items:t[10]}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};1024&r&&(o.items=i[10]),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function U6(t){let e,n;return e=new R0({props:{items:t[7],onclickitem:t[1],ongrabitem:t[2],ondragitem:t[3],ondropitem:t[4]}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};128&r&&(o.items=i[7]),2&r&&(o.onclickitem=i[1]),4&r&&(o.ongrabitem=i[2]),8&r&&(o.ondragitem=i[3]),16&r&&(o.ondropitem=i[4]),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function h2(t){let e,n;return e=new Kr({props:{items:t[10]}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};1024&r&&(o.items=i[10]),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function m2(t){let e,n;return e=new Zo({props:{$$slots:{default:[G6]},$$scope:{ctx:t}}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};805306368&r&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function G6(t){let e,n=t[28].icon+"";return{c(){e=Er("g")},m(i,r){tt(i,e,r),e.innerHTML=n},p(i,r){268435456&r&&n!==(n=i[28].icon+"")&&(e.innerHTML=n)},d(i){i&&J(e)}}}function g2(t){let e,n,i=t[28].label+"";return{c(){e=$t("span"),n=Ti(i)},m(r,o){tt(r,e,o),At(e,n)},p(r,o){268435456&o&&i!==(i=r[28].label+"")&&Yi(n,i)},d(r){r&&J(e)}}}function Z6(t){let e,n,i,r=t[28].icon&&m2(t),o=!t[28].hideLabel&&g2(t);return{c(){r&&r.c(),e=ce(),o&&o.c(),n=Di()},m(a,s){r&&r.m(a,s),tt(a,e,s),o&&o.m(a,s),tt(a,n,s),i=!0},p(a,s){a[28].icon?r?(r.p(a,s),268435456&s&&R(r,1)):(r=m2(a),r.c(),R(r,1),r.m(e.parentNode,e)):r&&(Le(),B(r,1,1,()=>{r=null}),Fe()),a[28].hideLabel?o&&(o.d(1),o=null):o?o.p(a,s):(o=g2(a),o.c(),o.m(n.parentNode,n))},i(a){i||(R(r),i=!0)},o(a){B(r),i=!1},d(a){r&&r.d(a),a&&J(e),o&&o.d(a),a&&J(n)}}}function X6(t){let e,n,i,r=t[10]&&h2(t);const o=[{class:"PinturaControlList"},{tabs:t[5]},t[12],{layout:"compact"}];let a={$$slots:{default:[Z6,({tab:s})=>({28:s}),({tab:s})=>s?268435456:0]},$$scope:{ctx:t}};for(let s=0;s<o.length;s+=1)a=Oi(a,o[s]);return n=new c1({props:a}),n.$on("select",t[18]),{c(){r&&r.c(),e=ce(),Wt(n.$$.fragment)},m(s,l){r&&r.m(s,l),tt(s,e,l),Bt(n,s,l),i=!0},p(s,l){s[10]?r?(r.p(s,l),1024&l&&R(r,1)):(r=h2(s),r.c(),R(r,1),r.m(e.parentNode,e)):r&&(Le(),B(r,1,1,()=>{r=null}),Fe());const c=4128&l?Lr(o,[o[0],32&l&&{tabs:s[5]},4096&l&&Nr(s[12]),o[3]]):{};805306368&l&&(c.$$scope={dirty:l,ctx:s}),n.$set(c)},i(s){i||(R(r),R(n.$$.fragment,s),i=!0)},o(s){B(r),B(n.$$.fragment,s),i=!1},d(s){r&&r.d(s),s&&J(e),Ot(n,s)}}}function Y6(t){let e,n;return e=new R0({props:{items:t[13][t[26]].items,disabled:t[13][t[26]].disabled,onclickitem:t[1],ongrabitem:t[2],ondragitem:t[3],ondropitem:t[4]}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};67117056&r&&(o.items=i[13][i[26]].items),67117056&r&&(o.disabled=i[13][i[26]].disabled),2&r&&(o.onclickitem=i[1]),4&r&&(o.ongrabitem=i[2]),8&r&&(o.ondragitem=i[3]),16&r&&(o.ondropitem=i[4]),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function q6(t){let e,n;return e=new _a({props:{scroll:t[27]?{scrollOffset:0,animate:!1}:void 0,scrollAutoCancel:t[9],elasticity:t[0],$$slots:{default:[Y6]},$$scope:{ctx:t}}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};134217728&r&&(o.scroll=i[27]?{scrollOffset:0,animate:!1}:void 0),512&r&&(o.scrollAutoCancel=i[9]),1&r&&(o.elasticity=i[0]),603987998&r&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function K6(t){let e,n,i,r;const o=[N6,V6],a=[];function s(l,c){return l[9]?0:l[10]?1:-1}return~(n=s(t))&&(i=a[n]=o[n](t)),{c(){e=$t("div"),i&&i.c(),S(e,"class","PinturaShapePresetsPalette")},m(l,c){tt(l,e,c),~n&&a[n].m(e,null),r=!0},p(l,[c]){let d=n;n=s(l),n===d?~n&&a[n].p(l,c):(i&&(Le(),B(a[d],1,1,()=>{a[d]=null}),Fe()),~n?(i=a[n],i?i.p(l,c):(i=a[n]=o[n](l),i.c()),R(i,1),i.m(e,null)):i=null)},i(l){r||(R(i),r=!0)},o(l){B(i),r=!1},d(l){l&&J(e),~n&&a[n].d()}}}function J6(t,e,n){let i,r,o,a,s,l,c,d,u,{locale:p}=e,{presets:h}=e,{scrollElasticity:$}=e,{enableSelectImage:g=!0}=e,{willRenderPresetToolbar:f=ai}=e,{onaddpreset:x=pe}=e,{ongrabpreset:v}=e,{ondragpreset:w}=e,{ondroppreset:T}=e;const I="presets-"+la(),M=(j,A="")=>Vb(j)?j:Zu(j)?iy(j,A):`<img src="${j}" alt="${A}"/>`,F=j=>O2(n0(j)),C=["src","alt","thumb","shape","id","mount","disabled"],z=j=>j.map(A=>(y=>Ei(y)&&He(y[0])&&Ei(y[1]))(A)?{...A[2],id:`${I}-${A[0].toLowerCase()}`,label:A[0],items:z(A[1])}:(y=>{let st,G,k,H,rt,gt,ct,V=y;return He(y)?Zu(y)?(st=y,rt=y,H=M(st,rt)):(st=y,rt=F(st),H=M(st,rt)):(st=y.src,rt=y.alt||(He(st)?F(st):He(y.thumb)?F(y.thumb):void 0),H=M(y.thumb||st,rt),G=y.shape,gt=y.mount,ct=y.disabled,k=Object.keys(y).reduce((N,kt)=>(C.includes(kt)||(N[kt]=y[kt]),N),{})),{id:V,src:st,thumb:H,shape:G,shapeProps:k,alt:rt,title:rt,mount:gt,disabled:ct}})(A));return t.$$set=j=>{"locale"in j&&n(14,p=j.locale),"presets"in j&&n(15,h=j.presets),"scrollElasticity"in j&&n(0,$=j.scrollElasticity),"enableSelectImage"in j&&n(16,g=j.enableSelectImage),"willRenderPresetToolbar"in j&&n(17,f=j.willRenderPresetToolbar),"onaddpreset"in j&&n(1,x=j.onaddpreset),"ongrabpreset"in j&&n(2,v=j.ongrabpreset),"ondragpreset"in j&&n(3,w=j.ondragpreset),"ondroppreset"in j&&n(4,T=j.ondroppreset)},t.$$.update=()=>{32768&t.$$.dirty&&n(7,i=z(h)),128&t.$$.dirty&&n(9,r=i.length),640&t.$$.dirty&&n(8,o=r&&i.some(j=>!!j.items)),384&t.$$.dirty&&n(5,a=o&&i),384&t.$$.dirty&&n(13,s=o&&i.reduce((j,A)=>(j[A.id]=A,j),{})),96&t.$$.dirty&&n(6,l=l||a&&(a.find(j=>!j.disabled)||{}).id),64&t.$$.dirty&&n(12,c={name:I,selected:l}),32&t.$$.dirty&&n(11,d=a&&a.map(j=>j.id)),212994&t.$$.dirty&&n(10,u=p&&f([g&&["Button","browse",{label:p.shapeLabelButtonSelectSticker,icon:p.shapeIconButtonSelectSticker,onclick:()=>{vb().then(j=>{j&&x(j)})}}]]))},[$,x,v,w,T,a,l,i,o,r,u,d,c,s,p,h,g,f,({detail:j})=>n(6,l=j)]}class Nb extends fn{constructor(e){super(),$n(this,e,J6,K6,dn,{locale:14,presets:15,scrollElasticity:0,enableSelectImage:16,willRenderPresetToolbar:17,onaddpreset:1,ongrabpreset:2,ondragpreset:3,ondroppreset:4})}}function Q6(t){let e,n,i,r;return e=new Kr({props:{items:t[30]}}),i=new m1({props:{locale:t[4],shapeProps:t[49],onchange:t[85],controls:t[9],scrollEnable:!1,hideTitles:!0,willRenderControls:t[165]}}),{c(){Wt(e.$$.fragment),n=ce(),Wt(i.$$.fragment)},m(o,a){Bt(e,o,a),tt(o,n,a),Bt(i,o,a),r=!0},p(o,a){const s={};1073741824&a[0]&&(s.items=o[30]),e.$set(s);const l={};16&a[0]&&(l.locale=o[4]),262144&a[1]&&(l.shapeProps=o[49]),512&a[0]&&(l.controls=o[9]),i.$set(l)},i(o){r||(R(e.$$.fragment,o),R(i.$$.fragment,o),r=!0)},o(o){B(e.$$.fragment,o),B(i.$$.fragment,o),r=!1},d(o){Ot(e,o),o&&J(n),Ot(i,o)}}}function t8(t){let e,n,i;return n=new Db({props:{$$slots:{default:[Q6]},$$scope:{ctx:t}}}),{c(){e=$t("div"),Wt(n.$$.fragment),S(e,"slot","header")},m(r,o){tt(r,e,o),Bt(n,e,null),i=!0},p(r,o){const a={};1073742352&o[0]|262144&o[1]|134217728&o[6]&&(a.$$scope={dirty:o,ctx:r}),n.$set(a)},i(r){i||(R(n.$$.fragment,r),i=!0)},o(r){B(n.$$.fragment,r),i=!1},d(r){r&&J(e),Ot(n)}}}function $2(t){let e,n;const i=[{locale:t[4]},{ui:t[69]},{shapes:t[5]},{selection:t[58]},{uid:t[20]},{parentRect:t[37]},{rootRect:t[55]},{utilRect:t[39]},{offset:t[50]},{disabled:t[38]},{contextRotation:t[23]},{contextFlipX:t[24]},{contextFlipY:t[25]},{contextZoom:t[36]?t[36].scale:void 0},{active:t[35]},{opacity:t[56]},{hoverColor:t[57]},{caretColor:t[57]},{snapColor:t[57]},{gridColor:[1,1,1,.125]},{eraseRadius:t[47]},{selectRadius:t[6]},{enableButtonFlipVertical:t[10]},{enableMultiSelect:t[14]},{mapEditorPointToImagePoint:t[21]},{mapImagePointToEditorPoint:t[22]},{enableTapToAddText:t[13]},{textInputMode:t[8]},{snapThreshold:t[16]},{snapPointer:!t[48]},{enableSnapToContext:t[17]},{gridSize:t[15]},{willStartInteraction:t[95]},{oninteractionstart:t[79]},{oninteractionupdate:t[80]},{oninteractionrelease:t[81]},{oninteractionend:t[83]},{oninteractioncancel:t[82]},{onleavecanvas:t[87]},{onhovercanvas:t[86]},{onhovershape:t[89]},{ontapcanvas:t[88]},{onaddshape:t[156]},{onselectshape:t[157]},{onblurshape:t[158]},{ontapshape:t[159]},{onupdateshape:t[160]},{onremoveshape:t[161]},{ontriggerhistorywrite:t[162]},t[42]];let r={};for(let o=0;o<i.length;o+=1)r=Oi(r,i[o]);return e=new A6({props:r}),t[163](e),{c(){Wt(e.$$.fragment)},m(o,a){Bt(e,o,a),n=!0},p(o,a){const s=66315632&a[0]|252381681&a[1]|255721600&a[2]|12&a[3]?Lr(i,[16&a[0]&&{locale:o[4]},128&a[2]&&{ui:o[69]},32&a[0]&&{shapes:o[5]},134217728&a[1]&&{selection:o[58]},1048576&a[0]&&{uid:o[20]},64&a[1]&&{parentRect:o[37]},16777216&a[1]&&{rootRect:o[55]},256&a[1]&&{utilRect:o[39]},524288&a[1]&&{offset:o[50]},128&a[1]&&{disabled:o[38]},8388608&a[0]&&{contextRotation:o[23]},16777216&a[0]&&{contextFlipX:o[24]},33554432&a[0]&&{contextFlipY:o[25]},32&a[1]&&{contextZoom:o[36]?o[36].scale:void 0},16&a[1]&&{active:o[35]},33554432&a[1]&&{opacity:o[56]},67108864&a[1]&&{hoverColor:o[57]},67108864&a[1]&&{caretColor:o[57]},67108864&a[1]&&{snapColor:o[57]},i[19],65536&a[1]&&{eraseRadius:o[47]},64&a[0]&&{selectRadius:o[6]},1024&a[0]&&{enableButtonFlipVertical:o[10]},16384&a[0]&&{enableMultiSelect:o[14]},2097152&a[0]&&{mapEditorPointToImagePoint:o[21]},4194304&a[0]&&{mapImagePointToEditorPoint:o[22]},8192&a[0]&&{enableTapToAddText:o[13]},256&a[0]&&{textInputMode:o[8]},65536&a[0]&&{snapThreshold:o[16]},131072&a[1]&&{snapPointer:!o[48]},131072&a[0]&&{enableSnapToContext:o[17]},32768&a[0]&&{gridSize:o[15]},4&a[3]&&{willStartInteraction:o[95]},131072&a[2]&&{oninteractionstart:o[79]},262144&a[2]&&{oninteractionupdate:o[80]},524288&a[2]&&{oninteractionrelease:o[81]},2097152&a[2]&&{oninteractionend:o[83]},1048576&a[2]&&{oninteractioncancel:o[82]},33554432&a[2]&&{onleavecanvas:o[87]},16777216&a[2]&&{onhovercanvas:o[86]},134217728&a[2]&&{onhovershape:o[89]},67108864&a[2]&&{ontapcanvas:o[88]},1&a[1]|8&a[3]&&{onaddshape:o[156]},1&a[1]&&{onselectshape:o[157]},1&a[1]&&{onblurshape:o[158]},1&a[1]&&{ontapshape:o[159]},1&a[1]|8&a[3]&&{onupdateshape:o[160]},1&a[1]|8&a[3]&&{onremoveshape:o[161]},8&a[3]&&{ontriggerhistorywrite:o[162]},2048&a[1]&&Nr(o[42])]):{};e.$set(s)},i(o){n||(R(e.$$.fragment,o),n=!0)},o(o){B(e.$$.fragment,o),n=!1},d(o){t[163](null),Ot(e,o)}}}function e8(t){let e,n,i,r,o=t[51]&&$2(t);return{c(){e=$t("div"),o&&o.c(),S(e,"slot","main"),Tt(e,"cursor",t[46])},m(a,s){tt(a,e,s),o&&o.m(e,null),t[164](e),n=!0,i||(r=[Mt(e,"keydown",t[84]),Tn(ib.call(null,e)),Mt(e,"dropfiles",function(){Cn(t[12]?t[94]:pe)&&(t[12]?t[94]:pe).apply(this,arguments)}),Tn(Fr.call(null,e)),Mt(e,"measure",t[152])],i=!0)},p(a,s){(t=a)[51]?o?(o.p(t,s),1048576&s[1]&&R(o,1)):(o=$2(t),o.c(),R(o,1),o.m(e,null)):o&&(Le(),B(o,1,1,()=>{o=null}),Fe()),32768&s[1]&&Tt(e,"cursor",t[46])},i(a){n||(R(o),n=!0)},o(a){B(o),n=!1},d(a){a&&J(e),o&&o.d(),t[164](null),i=!1,Gn(r)}}}function n8(t){let e,n;return e=new Nb({props:{locale:t[4],presets:t[19],enableSelectImage:t[11],willRenderPresetToolbar:t[43],onaddpreset:t[93],ongrabpreset:t[90],ondragpreset:t[91],ondroppreset:t[92],scrollElasticity:t[44]}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};16&r[0]&&(o.locale=i[4]),524288&r[0]&&(o.presets=i[19]),2048&r[0]&&(o.enableSelectImage=i[11]),4096&r[1]&&(o.willRenderPresetToolbar=i[43]),8192&r[1]&&(o.scrollElasticity=i[44]),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function i8(t){let e,n,i,r=t[7]==="stack"&&f2(t),o=(t[53]&&t[34]||t[7]==="row")&&y2(t);return{c(){r&&r.c(),e=ce(),o&&o.c(),n=Di()},m(a,s){r&&r.m(a,s),tt(a,e,s),o&&o.m(a,s),tt(a,n,s),i=!0},p(a,s){a[7]==="stack"?r?(r.p(a,s),128&s[0]&&R(r,1)):(r=f2(a),r.c(),R(r,1),r.m(e.parentNode,e)):r&&(Le(),B(r,1,1,()=>{r=null}),Fe()),a[53]&&a[34]||a[7]==="row"?o?(o.p(a,s),128&s[0]|4194312&s[1]&&R(o,1)):(o=y2(a),o.c(),R(o,1),o.m(n.parentNode,n)):o&&(Le(),B(o,1,1,()=>{o=null}),Fe())},i(a){i||(R(r),R(o),i=!0)},o(a){B(r),B(o),i=!1},d(a){r&&r.d(a),a&&J(e),o&&o.d(a),a&&J(n)}}}function f2(t){let e,n,i,r;const o=[o8,r8],a=[];function s(l,c){return l[45]?0:1}return n=s(t),i=a[n]=o[n](t),{c(){e=$t("div"),i.c(),S(e,"class","PinturaControlPanels")},m(l,c){tt(l,e,c),a[n].m(e,null),r=!0},p(l,c){let d=n;n=s(l),n===d?a[n].p(l,c):(Le(),B(a[d],1,1,()=>{a[d]=null}),Fe(),i=a[n],i?i.p(l,c):(i=a[n]=o[n](l),i.c()),R(i,1),i.m(e,null))},i(l){r||(R(i),r=!0)},o(l){B(i),r=!1},d(l){l&&J(e),a[n].d()}}}function r8(t){let e,n,i;return n=new m1({props:{locale:t[4],shapeProps:t[49],onchange:t[85],controls:t[9],scrollElasticity:t[44],willRenderControls:t[18]}}),{c(){e=$t("div"),Wt(n.$$.fragment),S(e,"class","PinturaControlPanel")},m(r,o){tt(r,e,o),Bt(n,e,null),i=!0},p(r,o){const a={};16&o[0]&&(a.locale=r[4]),262144&o[1]&&(a.shapeProps=r[49]),512&o[0]&&(a.controls=r[9]),8192&o[1]&&(a.scrollElasticity=r[44]),262144&o[0]&&(a.willRenderControls=r[18]),n.$set(a)},i(r){i||(R(n.$$.fragment,r),i=!0)},o(r){B(n.$$.fragment,r),i=!1},d(r){r&&J(e),Ot(n)}}}function o8(t){let e,n,i;return n=new Nb({props:{locale:t[4],presets:t[19],enableSelectImage:t[11],willRenderPresetToolbar:t[43],onaddpreset:t[93],ongrabpreset:t[90],ondragpreset:t[91],ondroppreset:t[92],scrollElasticity:t[44]}}),{c(){e=$t("div"),Wt(n.$$.fragment),S(e,"class","PinturaControlPanel")},m(r,o){tt(r,e,o),Bt(n,e,null),i=!0},p(r,o){const a={};16&o[0]&&(a.locale=r[4]),524288&o[0]&&(a.presets=r[19]),2048&o[0]&&(a.enableSelectImage=r[11]),4096&o[1]&&(a.willRenderPresetToolbar=r[43]),8192&o[1]&&(a.scrollElasticity=r[44]),n.$set(a)},i(r){i||(R(n.$$.fragment,r),i=!0)},o(r){B(n.$$.fragment,r),i=!1},d(r){r&&J(e),Ot(n)}}}function y2(t){let e,n;return e=new _a({props:{class:"PinturaControlListScroller",elasticity:t[44],$$slots:{default:[l8]},$$scope:{ctx:t}}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};8192&r[1]&&(o.elasticity=i[44]),262801&r[0]|262154&r[1]|134217728&r[6]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function b2(t){let e,n;return e=new vs({props:{locale:t[4],class:"PinturaControlList",optionClass:"PinturaControlListOption",layout:"row",options:t[32],selectedIndex:t[32].findIndex(t[153]),onchange:t[78],$$slots:{option:[s8,({option:i})=>({212:i}),({option:i})=>[0,0,0,0,0,0,i?67108864:0]]},$$scope:{ctx:t}}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};16&r[0]&&(o.locale=i[4]),2&r[1]&&(o.options=i[32]),1&r[0]|2&r[1]&&(o.selectedIndex=i[32].findIndex(i[153])),16&r[0]|201326592&r[6]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function x2(t){let e,n;return e=new Zo({props:{$$slots:{default:[a8]},$$scope:{ctx:t}}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};16&r[0]|201326592&r[6]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function a8(t){let e,n=(Un(t[212].icon)?t[212].icon(t[4]):t[212].icon)+"";return{c(){e=Er("g")},m(i,r){tt(i,e,r),e.innerHTML=n},p(i,r){16&r[0]|67108864&r[6]&&n!==(n=(Un(i[212].icon)?i[212].icon(i[4]):i[212].icon)+"")&&(e.innerHTML=n)},d(i){i&&J(e)}}}function v2(t){let e,n,i=(Un(t[212].label)?t[212].label(t[4]):t[212].label)+"";return{c(){e=$t("span"),n=Ti(i)},m(r,o){tt(r,e,o),At(e,n)},p(r,o){16&o[0]|67108864&o[6]&&i!==(i=(Un(r[212].label)?r[212].label(r[4]):r[212].label)+"")&&Yi(n,i)},d(r){r&&J(e)}}}function s8(t){let e,n,i,r=t[212].icon&&x2(t),o=!t[212].hideLabel&&v2(t);return{c(){e=$t("div"),r&&r.c(),n=ce(),o&&o.c(),S(e,"slot","option")},m(a,s){tt(a,e,s),r&&r.m(e,null),At(e,n),o&&o.m(e,null),i=!0},p(a,s){a[212].icon?r?(r.p(a,s),67108864&s[6]&&R(r,1)):(r=x2(a),r.c(),R(r,1),r.m(e,n)):r&&(Le(),B(r,1,1,()=>{r=null}),Fe()),a[212].hideLabel?o&&(o.d(1),o=null):o?o.p(a,s):(o=v2(a),o.c(),o.m(e,null))},i(a){i||(R(r),i=!0)},o(a){B(r),i=!1},d(a){a&&J(e),r&&r.d(),o&&o.d()}}}function w2(t){let e,n;return e=new m1({props:{locale:t[4],shapeProps:t[49],onchange:t[85],controls:t[9],scrollEnable:!1,hideTitles:!0,willRenderControls:t[154]}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};16&r[0]&&(o.locale=i[4]),262144&r[1]&&(o.shapeProps=i[49]),512&r[0]&&(o.controls=i[9]),262144&r[0]&&(o.willRenderControls=i[154]),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function l8(t){let e,n,i,r=t[34]&&b2(t),o=t[7]==="row"&&w2(t);return{c(){r&&r.c(),e=ce(),o&&o.c(),n=Di()},m(a,s){r&&r.m(a,s),tt(a,e,s),o&&o.m(a,s),tt(a,n,s),i=!0},p(a,s){a[34]?r?(r.p(a,s),8&s[1]&&R(r,1)):(r=b2(a),r.c(),R(r,1),r.m(e.parentNode,e)):r&&(Le(),B(r,1,1,()=>{r=null}),Fe()),a[7]==="row"?o?(o.p(a,s),128&s[0]&&R(o,1)):(o=w2(a),o.c(),R(o,1),o.m(n.parentNode,n)):o&&(Le(),B(o,1,1,()=>{o=null}),Fe())},i(a){i||(R(r),R(o),i=!0)},o(a){B(r),B(o),i=!1},d(a){r&&r.d(a),a&&J(e),o&&o.d(a),a&&J(n)}}}function S2(t){let e,n;return e=new _a({props:{class:"PinturaControlListScroller",elasticity:t[44],$$slots:{default:[u8]},$$scope:{ctx:t}}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};8192&r[1]&&(o.elasticity=i[44]),134217744&r[0]|8388608&r[1]|134217728&r[6]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function k2(t){let e,n;return e=new Zo({props:{$$slots:{default:[c8]},$$scope:{ctx:t}}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};16&r[0]|201326592&r[6]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function c8(t){let e,n=(Un(t[212].icon)?t[212].icon(t[4]):t[212].icon)+"";return{c(){e=Er("g")},m(i,r){tt(i,e,r),e.innerHTML=n},p(i,r){16&r[0]|67108864&r[6]&&n!==(n=(Un(i[212].icon)?i[212].icon(i[4]):i[212].icon)+"")&&(e.innerHTML=n)},d(i){i&&J(e)}}}function d8(t){let e,n,i,r,o,a=(Un(t[212].label)?t[212].label(t[4]):t[212].label)+"",s=t[212].icon&&k2(t);return{c(){e=$t("div"),s&&s.c(),n=ce(),i=$t("span"),r=Ti(a),S(e,"slot","option")},m(l,c){tt(l,e,c),s&&s.m(e,null),At(e,n),At(e,i),At(i,r),o=!0},p(l,c){l[212].icon?s?(s.p(l,c),67108864&c[6]&&R(s,1)):(s=k2(l),s.c(),R(s,1),s.m(e,n)):s&&(Le(),B(s,1,1,()=>{s=null}),Fe()),(!o||16&c[0]|67108864&c[6])&&a!==(a=(Un(l[212].label)?l[212].label(l[4]):l[212].label)+"")&&Yi(r,a)},i(l){o||(R(s),o=!0)},o(l){B(s),o=!1},d(l){l&&J(e),s&&s.d()}}}function u8(t){let e,n;return e=new vs({props:{locale:t[4],class:"PinturaControlList",optionClass:"PinturaControlListOption",layout:"row",options:t[54],selectedIndex:t[54].findIndex(t[155]),onchange:t[77],$$slots:{option:[d8,({option:i})=>({212:i}),({option:i})=>[0,0,0,0,0,0,i?67108864:0]]},$$scope:{ctx:t}}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};16&r[0]&&(o.locale=i[4]),8388608&r[1]&&(o.options=i[54]),134217728&r[0]|8388608&r[1]&&(o.selectedIndex=i[54].findIndex(i[155])),16&r[0]|201326592&r[6]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function p8(t){let e,n,i,r,o;const a=[i8,n8],s=[];function l(d,u){return d[52]?0:d[45]?1:-1}~(n=l(t))&&(i=s[n]=a[n](t));let c=t[33]&&S2(t);return{c(){e=$t("div"),i&&i.c(),r=ce(),c&&c.c(),S(e,"slot","footer"),Tt(e,"transform",t[40])},m(d,u){tt(d,e,u),~n&&s[n].m(e,null),At(e,r),c&&c.m(e,null),o=!0},p(d,u){let p=n;n=l(d),n===p?~n&&s[n].p(d,u):(i&&(Le(),B(s[p],1,1,()=>{s[p]=null}),Fe()),~n?(i=s[n],i?i.p(d,u):(i=s[n]=a[n](d),i.c()),R(i,1),i.m(e,r)):i=null),d[33]?c?(c.p(d,u),4&u[1]&&R(c,1)):(c=S2(d),c.c(),R(c,1),c.m(e,null)):c&&(Le(),B(c,1,1,()=>{c=null}),Fe()),512&u[1]&&Tt(e,"transform",d[40])},i(d){o||(R(i),R(c),o=!0)},o(d){B(i),B(c),o=!1},d(d){d&&J(e),~n&&s[n].d(),c&&c.d()}}}function h8(t){let e,n;return e=new wl({props:{hasHeader:t[41],$$slots:{footer:[p8],main:[e8],header:[t8]},$$scope:{ctx:t}}}),e.$on("measure",t[166]),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};1024&r[1]&&(o.hasHeader=i[41]),2080374769&r[0]|134216703&r[1]|134217728&r[6]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function m8(t,e,n){let i,r,o,a,s,l,c,d,u,p,h,$,g,f,x,v,w,T,I,M,F,C,z,j,A,y,st,G,k,H,rt,gt,ct,V,N,kt,bt,et,Pt,wt,Q,Ut,lt,q,vt,dt,Ht,it,Vt,Dt,Zt,mt,Ft,ht,Yt,Nt,Qt,re,xt,_,ke,ne,Xt,he,ae,Re,nn,Ct,de=Ke,ln=()=>(de(),de=Xr(un,O=>n(35,vt=O)),un),Je=Ke,Qe=()=>(Je(),Je=Xr(ue,O=>n(145,Vt=O)),ue),Ie=Ke,Ye=()=>(Ie(),Ie=Xr(Kn,O=>n(37,Nt=O)),Kn),yn=Ke,Sn=()=>(yn(),yn=Xr(at,O=>n(151,he=O)),at),Fn=Ke,zn=()=>(Fn(),Fn=Xr(Y,O=>n(56,nn=O)),Y);t.$$.on_destroy.push(()=>de()),t.$$.on_destroy.push(()=>Je()),t.$$.on_destroy.push(()=>Ie()),t.$$.on_destroy.push(()=>yn()),t.$$.on_destroy.push(()=>Fn());let{isActive:un}=e;ln();let{isActiveFraction:Y}=e;zn();let{isVisible:at}=e;Sn();let{stores:Z}=e,{locale:zt={}}=e,{shapes:ue}=e;Qe();let{toolbar:De=[]}=e,{toolShapes:ye={}}=e,{toolActive:Lt}=e,{toolSelectRadius:Te}=e,{toolRetainStyles:cn=!1}=e,{toolbarLayout:an="stack"}=e,{textInputMode:nt}=e,{shapeControls:Gt={}}=e,{enableButtonFlipVertical:Be=!1}=e,{enablePresetSelectImage:xe=!0}=e,{enablePresetDropImage:te=!0}=e,{enableSelectToolToAddShape:tn=!1}=e,{enableAutoSelectMoveTool:ot=["line","arrow","path","rectangle","ellipse","text"]}=e,{enableTapToAddText:me=!1}=e,{enableMoveTool:se=!1}=e,{enableViewTool:ge=!1}=e,{enableToolShareStyles:oe=!0}=e,{enableMultiSelect:qe=!1}=e,{gridSize:ze=0}=e,{snapThreshold:ui=0}=e,{enableSnapToContext:Oe=!0}=e,{willRenderHeaderTools:rn=ai}=e,{willRenderPresetToolbar:In}=e,{willRenderShapeStyleControls:Dn}=e,{willStartInteraction:pn}=e,{shapePresets:ti=[]}=e,{utilKey:we}=e,{mapScreenPointToImagePoint:Ze}=e,{mapImagePointToScreenPoint:en}=e,{imageRotation:hi=0}=e,{imageFlipX:wi=!1}=e,{imageFlipY:pi=!1}=e,{parentRect:Kn}=e;Ye();let{hooks:gi={}}=e;const sr=mi("selection");D(t,sr,O=>n(150,ke=O));const Si=mi("isAnimated");D(t,Si,O=>n(142,dt=O));const Tr=mi("elasticityMultiplier");D(t,Tr,O=>n(146,Dt=O));const Yo=mi("ui");D(t,Yo,O=>n(177,ne=O));const pr=mi("keysPressed");let yi;D(t,pr,O=>n(149,_=O));const{env:ca,history:Wi,rootRect:_n,rootColorSecondary:Ma,enablePanInput:qi,enablePanInputStatus:lr,enableZoomInput:Ai,stageRect:hr,utilRectPadded:mr,scrollElasticity:Ki,imageOverlayMarkup:ki,imagePreviewModifiers:ao,imageCropRect:qo,stageScalar:Eo,imageSelectionRect:Ao,imageTransformsInterpolated:xo,imageSelectionPan:Lo,imageSize:vo,allowPan:so,allowZoom:zr,allowZoomControls:lo,allowPlayPause:Hr}=Z;D(t,ca,O=>n(143,Ht=O)),D(t,_n,O=>n(55,Re=O)),D(t,Ma,O=>n(57,Ct=O)),D(t,lr,O=>n(38,re=O)),D(t,hr,O=>n(147,Zt=O)),D(t,mr,O=>n(39,Xt=O)),D(t,ao,O=>n(178,ae=O)),D(t,qo,O=>n(176,Qt=O)),D(t,Eo,O=>n(174,ht=O)),D(t,Ao,O=>n(175,Yt=O)),D(t,xo,O=>n(36,mt=O)),D(t,Lo,O=>n(173,Ft=O)),D(t,vo,O=>n(148,xt=O));let nr=0,er={};const Dr=O=>{const[Kt,En]=yi[O];let je,be,$e=En.position==="relative";const qn=$e?"0%":0,Rn=$e?"0%":0;Ho(Kt)||tr(Kt)?(be=$e?"20%":.2*Nt.width,je=Ii(Kt),Ch(je),Th(je),je.x=qn,je.y=Rn,Da(je,{width:be,height:be},Nt)):dr(Kt)?(be=$e?"10%":.1*Nt.width,je=Ii(Kt),je.x=qn,je.y=Rn,Da(je,{rx:be,ry:be},Nt)):$r(Kt)&&(be=$e?"10%":.1*Nt.width,je=Ii(Kt),je.x1=qn,je.y1=Rn,je.x2=qn,je.y2=Rn),je&&Promise.resolve().then(()=>{zo(Ji(je,void 0,be))})},co=O=>Ze(jh(O,Re));let Zn,_i={},Jr,Ci;const wo=O=>{if(!(Qi(O)&&Ae(O,"pathClose")))return;const Kt=[...O.strokeColor];Kt[3]=1,Zn.updateMarkupShape(O,{pathClose:!1,strokeColor:Kt},!1),Zn.removeMarkupShapeProps(O,["backgroundColor"],!1),Zn.confirmMarkupItemDraft(),Zn.selectShape(O),bt("addshape",O),Wi.write()},ir=O=>{const Kt=Ii(O);return Object.assign(Kt,ne[we]?ne[we][Lt]:{}),uy(Kt),Kt};let Ko;const Br=(O,Kt)=>{const En={};return Object.entries(O).forEach(([je,be])=>{Ae(Kt,je)&&(En[je]=be)}),En},So=(O,Kt)=>{if(Ne(O))return O;if(O.endsWith("%"))return parseFloat(O)/100*Kt.width};let Vi,Or,ei;const Ji=(O,Kt,En)=>{let je=!1;Kt||(je=!0,Kt=kt?Ze(Ln(Zt)):Ln(Qt)),Kt.x-=Nt.x||0,Kt.y-=Nt.y||0,(wi||pi)&&(O.flipX=wi,O.flipY=pi);const be=Zn.getShapesNearPosition(Vt,Kt);if(je&&be.length){const $e=.1*Math.min(Qt.width,Qt.height);Kt.x+=Math.round(-$e+Math.random()*$e*2),Kt.y+=Math.round(-$e+Math.random()*$e*2)}if(hi!==0&&(O.rotation=wi&&pi?-hi:wi||pi?hi:-hi),Ae(O,"width")&&Ae(O,"height")){const{width:$e,height:qn}=Kl(O,["width","height"],Nt);Da(O,{x:Kt.x-.5*$e,y:Kt.y-.5*qn},Nt)}else if(dr(O))Da(O,{x:Kt.x,y:Kt.y},Nt);else if($r(O)){const{x1:$e,y1:qn,x2:Rn,y2:ni}=Kl(O,["x1","y1","x2","y2"],Nt),$i=ro(ut($e,qn),ut(Rn,ni)),Bn=He(En)?Yu(En,Nt.width):$i;Da(O,{x1:Kt.x-Bn,y1:Kt.y+Bn,x2:Kt.x+Bn,y2:Kt.y-Bn},Nt)}else if(Qi(O)){const{points:$e}=Kl(O,["points"],Nt),qn=oa($e);Da(O,{points:$e.map(Rn=>({x:Rn.x+Kt.x-qn.x,y:Rn.y+Kt.y-qn.y}))},Nt)}return O},Fo=(O,Kt)=>{const En=Ji(yg(O,Qt),Kt);return O.shape&&(Ae(O.shape,"x")&&(En.x=O.shape.x),Ae(O.shape,"y")&&(En.y=O.shape.y)),zo(En)},zo=O=>{const{beforeAddShape:Kt=()=>!0}=gi;if(Kt(O))return Zn.addShape(O),Zn.selectShape(O),bt("addshape",O),Wi.write(),O};let Qr=!1;const jr=()=>{Wi.write()};let ko;const wr=mi("redrawTrigger");D(t,wr,O=>n(144,it=O));const uo=[],Co=mn(dt?20:0);return D(t,Co,O=>n(141,q=O)),t.$$set=O=>{"isActive"in O&&ln(n(1,un=O.isActive)),"isActiveFraction"in O&&zn(n(2,Y=O.isActiveFraction)),"isVisible"in O&&Sn(n(3,at=O.isVisible)),"stores"in O&&n(100,Z=O.stores),"locale"in O&&n(4,zt=O.locale),"shapes"in O&&Qe(n(5,ue=O.shapes)),"toolbar"in O&&n(101,De=O.toolbar),"toolShapes"in O&&n(102,ye=O.toolShapes),"toolActive"in O&&n(0,Lt=O.toolActive),"toolSelectRadius"in O&&n(6,Te=O.toolSelectRadius),"toolRetainStyles"in O&&n(103,cn=O.toolRetainStyles),"toolbarLayout"in O&&n(7,an=O.toolbarLayout),"textInputMode"in O&&n(8,nt=O.textInputMode),"shapeControls"in O&&n(9,Gt=O.shapeControls),"enableButtonFlipVertical"in O&&n(10,Be=O.enableButtonFlipVertical),"enablePresetSelectImage"in O&&n(11,xe=O.enablePresetSelectImage),"enablePresetDropImage"in O&&n(12,te=O.enablePresetDropImage),"enableSelectToolToAddShape"in O&&n(104,tn=O.enableSelectToolToAddShape),"enableAutoSelectMoveTool"in O&&n(105,ot=O.enableAutoSelectMoveTool),"enableTapToAddText"in O&&n(13,me=O.enableTapToAddText),"enableMoveTool"in O&&n(106,se=O.enableMoveTool),"enableViewTool"in O&&n(107,ge=O.enableViewTool),"enableToolShareStyles"in O&&n(108,oe=O.enableToolShareStyles),"enableMultiSelect"in O&&n(14,qe=O.enableMultiSelect),"gridSize"in O&&n(15,ze=O.gridSize),"snapThreshold"in O&&n(16,ui=O.snapThreshold),"enableSnapToContext"in O&&n(17,Oe=O.enableSnapToContext),"willRenderHeaderTools"in O&&n(109,rn=O.willRenderHeaderTools),"willRenderPresetToolbar"in O&&n(110,In=O.willRenderPresetToolbar),"willRenderShapeStyleControls"in O&&n(18,Dn=O.willRenderShapeStyleControls),"willStartInteraction"in O&&n(111,pn=O.willStartInteraction),"shapePresets"in O&&n(19,ti=O.shapePresets),"utilKey"in O&&n(20,we=O.utilKey),"mapScreenPointToImagePoint"in O&&n(21,Ze=O.mapScreenPointToImagePoint),"mapImagePointToScreenPoint"in O&&n(22,en=O.mapImagePointToScreenPoint),"imageRotation"in O&&n(23,hi=O.imageRotation),"imageFlipX"in O&&n(24,wi=O.imageFlipX),"imageFlipY"in O&&n(25,pi=O.imageFlipY),"parentRect"in O&&Ye(n(26,Kn=O.parentRect)),"hooks"in O&&n(112,gi=O.hooks)},t.$$.update=()=>{var O,Kt,En,je;if(33554432&t.$$.dirty[4]&&n(124,i=_.includes(18)),1049088&t.$$.dirty[3]&&(yi&&ye===yi||n(113,yi=ye)),16&t.$$.dirty[1]&&so.set(vt),16&t.$$.dirty[1]&&zr.set(vt),16&t.$$.dirty[1]&&lo.set(vt),256&t.$$.dirty[3]&&n(33,r=Array.isArray(De)&&De.length>1&&Array.isArray(De[0][1])),4&t.$$.dirty[1]|256&t.$$.dirty[3]&&n(54,o=r?De.map((be,$e)=>[$e,be[0]]):[]),134217728&t.$$.dirty[0]|4&t.$$.dirty[1]|256&t.$$.dirty[3]&&n(140,a=r?De[nr][1]:De),524288&t.$$.dirty[0]|155648&t.$$.dirty[3]|65536&t.$$.dirty[4]&&n(32,s=((be,{willRenderPresetToolbar:$e,shapePresets:qn,enableViewTool:Rn,enableMoveTool:ni})=>{let $i=qn.length!==0||$e?be:be.filter(Bn=>Bn[0]!=="preset");return r&&($i=[["move",Bn=>Bn.shapeLabelToolMove,{icon:Bn=>Bn.shapeIconToolMove}],["view",Bn=>Bn.shapeLabelToolView,{icon:Bn=>Bn.shapeIconToolView}],...$i]),$i=ni?$i:$i.filter(Bn=>Bn[0]!=="move"),Rn?$i:$i.filter(Bn=>Bn[0]!=="view")})(a,{willRenderPresetToolbar:In,shapePresets:ti,enableMoveTool:se,enableViewTool:ge})),2&t.$$.dirty[1]&&n(138,d=!!s.length),1&t.$$.dirty[0]|2&t.$$.dirty[1]|16384&t.$$.dirty[4]&&d&&Lt===void 0&&n(0,Lt=s[0][0]),134217729&t.$$.dirty[0]|4&t.$$.dirty[1]|2097152&t.$$.dirty[3]|65536&t.$$.dirty[4]&&r&&n(114,er={...er,[nr]:a.map(([be])=>be).includes(Lt)?Lt:er[nr]||a[0][0]}),512&t.$$.dirty[0]&&n(137,l=!!Object.keys(Gt).length),2&t.$$.dirty[1]&&n(34,c=s.length>1),12&t.$$.dirty[1]&&n(53,u=c||r),1&t.$$.dirty[0]&&n(139,p=Lt!==void 0),57344&t.$$.dirty[4]&&n(52,h=(!p||d)&&l),536870912&t.$$.dirty[0]&&n(31,bt=ko&&(O=ko,(be,$e)=>{O.dispatchEvent(As(be,$e))})),1&t.$$.dirty[0]|17&t.$$.dirty[1]&&vt&&bt&&bt("selectcontrol",Lt),16&t.$$.dirty[1]&&(vt?It(ao,ae[we]={maskMarkupOpacity:.85},ae):delete ae[we]),1&t.$$.dirty[0]|1048576&t.$$.dirty[3]&&n(136,$=Lt&&yi[Lt]?yi[Lt][1]:void 0),4096&t.$$.dirty[4]&&n(125,g=$&&$.isSelection?"selection":"shapes"),3&t.$$.dirty[4]&&(be=>{if(!Zn)return;const $e=Zn.getShapeDraft(sr);$e&&(be&&(Jr=$e.drawMode),Zn.updateShapeDraft({drawMode:be?"subtract":Jr},sr))})(g==="selection"&&i),268435457&t.$$.dirty[0]&&Lt&&Zn){const be=Zn.getMarkupItemDraft();be&&wo(be)}if(1&t.$$.dirty[0]&&Lt&&Zn&&Lt!=="move"&&Zn.blurShapes(),16&t.$$.dirty[1]|134217728&t.$$.dirty[4]&&n(51,f=he&&vt),256&t.$$.dirty[1]|8388608&t.$$.dirty[4]&&n(50,x=Xt&&ut(Zt.x-Xt.x,Zt.y-Xt.y)),512&t.$$.dirty[0]&&n(135,v=Object.keys(Gt)),16384&t.$$.dirty[0]|16&t.$$.dirty[1]|2097152&t.$$.dirty[4]&&n(122,w=qe?vt&&Vt.filter(Fa):[]),536870912&t.$$.dirty[3]&&n(123,T=w.length>1),16&t.$$.dirty[1]|2097152&t.$$.dirty[4]&&n(119,I=vt&&Vt.filter(Fa)[0]),16&t.$$.dirty[1]|2097152&t.$$.dirty[4]&&n(130,M=vt&&Vt.find(be=>Vp(be))),16&t.$$.dirty[1]|2097152&t.$$.dirty[4]&&n(133,F=vt&&Vt.find(be=>fo(be))),1&t.$$.dirty[0]|16&t.$$.dirty[1]|1048576&t.$$.dirty[3]&&n(127,C=vt&&yi[Lt]?ir(yi[Lt][0]):{}),1048576&t.$$.dirty[3]&&yi&&n(115,_i={}),1&t.$$.dirty[0]|4227072&t.$$.dirty[3]|2056&t.$$.dirty[4]&&n(126,z=C&&Object.keys(C).reduce((be,$e)=>{const qn=$e==="disableStyle",Rn=$e==="settings",ni=!!v.find(Sr=>Sr.split("_").includes($e));if(!qn&&!Rn&&!ni||C[$e]===void 0||C.disableStyle===!0||C.disableStyle&&C.disableStyle.includes($e))return be;if($e==="strokeWidth"&&Object.keys(_i).includes("strokeWidth")&&_i[$e]===void 0&&Ae(C,"points"))return be[$e]=C[$e],be;const{share:$i=!0}=C.settings&&C.settings[$e]||{},Bn=oe&&$i?_i:_i[Lt]||{};return be[$e]=Ae(Bn,$e)?Bn[$e]:C[$e],be},{})),1048577&t.$$.dirty[0]|1024&t.$$.dirty[3]|4&t.$$.dirty[4]&&(cn?((be,$e,qn)=>{const Rn=ne[be],ni=Rn?Rn[$e]:{};Yo.set({...ne,[be]:{...Rn,[$e]:{...ni,...qn}}})})(we,Lt,z):(Kt=we,Yo.set({[Kt]:{}}))),16&t.$$.dirty[1]|67108864&t.$$.dirty[3]|67108868&t.$$.dirty[4]&&n(134,j=ke&&vt?I||z:void 0),1610612736&t.$$.dirty[3]|1536&t.$$.dirty[4]&&n(49,A=T?function(be){const $e={};return be.forEach(qn=>{Object.entries(qn).filter(([Rn])=>!Rn.startsWith("_")).forEach(([Rn,ni])=>{Ae($e,Rn)?Rn==="disableStyle"&&Ei(ni)&&$e[Rn].push(...ni):$e[Rn]=ni})}),$e}(w):j||F),1&t.$$.dirty[0]|8&t.$$.dirty[4]&&n(48,y=Ae(C,"eraseRadius")||Ae(C,"points")&&!Ae(C,"pathClose")||Lt==="move"||Lt==="view"),64&t.$$.dirty[1]|8&t.$$.dirty[4]&&n(47,st=C&&C.eraseRadius!==void 0?So(C.eraseRadius,Nt):void 0),16&t.$$.dirty[1]|33554432&t.$$.dirty[4]&&n(131,G=vt&&_.includes(32)),1&t.$$.dirty[0]|16&t.$$.dirty[1]&&n(132,k=vt&&Lt==="view"),384&t.$$.dirty[4]&&n(129,H=k||G),96&t.$$.dirty[4]&&n(128,rt=!!H&&(!!M||Os(document.activeElement))),16&t.$$.dirty[1]|48&t.$$.dirty[4]&&qi.set(!vt||H&&!rt),16&t.$$.dirty[1]|16&t.$$.dirty[4]&&Ai.set(!vt||!rt),64&t.$$.dirty[1]|12&t.$$.dirty[4]&&n(120,gt=C.cursorStyle?(({cursorStyle:be,cursorSize:$e},qn,Rn)=>{let ni;const $i=qn[$e];if($i===void 0?ni=So($e,Rn):Ne($i)?ni=$i:He($i)&&(ni=Rv($e,qn[$e],Rn),$e==="strokeWidth"&&(ni*=.5)),!(ni<=0||ni===void 0))return{size:ni,style:be}})(C,{...C,...z},Nt):void 0),33554432&t.$$.dirty[3]|16777216&t.$$.dirty[4]&&n(121,ct=ei&&(je=xt,(En=ei).x>=0&&En.y>=0&&En.x<=je.width&&En.y<=je.height)),1048576&t.$$.dirty[0]|160&t.$$.dirty[1]|427819008&t.$$.dirty[3]|3&t.$$.dirty[4])if(ct&&!Vi&&gt&&!re){const be=gt.size*mt.scale,$e={id:"cursor-"+we,x:Or.x,y:Or.y,strokeWidth:.5,strokeColor:[0,0,0]};gt.style==="ellipse"&&($e.rx=be,$e.ry=be);const qn={strokeWidth:2.5,strokeColor:[1,1,1],opacity:.75},Rn=[{...$e,...qn},$e];if(g==="selection"&&i){const ni=be,$i=Or.x+ni,Bn=Or.y+ni+4,Sr={id:"cursor-"+we,strokeWidth:.75,strokeColor:[0,0,0],points:[{x:$i,y:Bn},{x:$i+4,y:Bn}]};Rn.push({...Sr,...qn,strokeWidth:2,points:[{x:$i-.5,y:Bn},{x:$i+4.5,y:Bn}]},Sr)}(ni=>{ki.update($i=>[...$i.filter(Bn=>Bn.id!=="cursor-"+we),...ni])})(Rn)}else ki.update(be=>be.filter($e=>$e.id!=="cursor-"+we));1&t.$$.dirty[0]|128&t.$$.dirty[1]|478150656&t.$$.dirty[3]&&n(46,V=ct?((be,$e,qn,Rn,ni,$i)=>{if(Rn)return ni?"grabbing":"grab";if(be&&!$e)return"none";if(!$e)return $i==="move"?"default":"crosshair";let Bn=$e||qn;return Fa(Bn)?Vp(Bn)?nt==="modal"?"default":"text":!gl(Bn)||T&&!w.every(gl)?"default":"move":"default"})(gt,Vi,I,re,!1,Lt):"default"),526337&t.$$.dirty[0]|131072&t.$$.dirty[3]&&n(45,N=Lt==="preset"&&(ti.length>0||xe||In)),64&t.$$.dirty[1]&&(kt=!Ae(Nt,"x")&&!Ae(Nt,"y")),4194304&t.$$.dirty[4]&&n(44,et=Dt*Ki),131072&t.$$.dirty[3]|1572864&t.$$.dirty[4]&&n(43,Pt=it&&In?be=>dd(()=>In(be,Fo,{...Ht},()=>wr.set({}))):ai),524288&t.$$.dirty[3]&&n(42,wt=Object.keys(gi).reduce((be,$e)=>($e==="beforeAddShape"||gi[$e]===void 0||(be[$e]=gi[$e]),be),{})),16&t.$$.dirty[1]&&(be=>{Vt&&ue.update($e=>$e.map(qn=>(qn._prerender=!!be&&Vp(qn),qn)))})(vt),65536&t.$$.dirty[3]|1572864&t.$$.dirty[4]&&n(30,Q=it&&rn([],Ht,()=>wr.set({}))),1073742336&t.$$.dirty[0]&&n(41,Ut=!!Q.length||!!Object.keys(Gt).some(be=>uo.includes(be))),16&t.$$.dirty[1]|262144&t.$$.dirty[4]&&dt&&Co.set(vt?0:20),t.$$.dirty[4],131072&t.$$.dirty[4]&&n(40,lt=q?`translateY(${q}px)`:"none")},Hr.set(!1),[Lt,un,Y,at,zt,ue,Te,an,nt,Gt,Be,xe,te,me,qe,ze,ui,Oe,Dn,ti,we,Ze,en,hi,wi,pi,Kn,nr,Zn,ko,Q,bt,s,r,c,vt,mt,Nt,re,Xt,lt,Ut,wt,Pt,et,N,V,st,y,A,x,f,h,u,o,Re,nn,Ct,sr,Si,Tr,Yo,pr,ca,_n,Ma,lr,hr,mr,ki,ao,qo,Eo,Ao,xo,Lo,vo,({index:O},Kt)=>{n(27,nr=O),n(0,Lt=er[O])},({value:O},Kt)=>{n(0,Lt=O),(tn||/enter/i.test(Kt.key))&&Dr(O)},O=>{if(Lt==="eraser")Ci=Zn.eraseShape();else if(Lt&&yi[Lt]){const[Kt,En={}]=yi[Lt],je=Ii(Kt);Ch(je),Th(je);const{drawMode:be}=j;g==="selection"&&be==="new"&&sr.set([]);let $e={};g==="selection"&&(bt("selectiondown",[...ke]),i&&(Jr=je.drawMode,$e.drawMode="subtract")),Ci=Zn.createShape({...je,...z,...$e},En)}else Ci=void 0;return!!Ci&&(Ci.start(O),!0)},O=>!!Ci&&(Ci.update(O),!0),O=>!!Ci&&(Ci.release(O),!0),O=>!!Ci&&(Ci.cancel(O),Ci=void 0,!0),O=>{if(!Ci)return!1;if(Ci.end(O),Ci=void 0,g==="selection"){if(O.detail.isTap){const[je]=yi[Lt];je.bitmap||sr.set([])}bt("selectionup",[...ke])}const Kt=Zn.getMarkupItemDraft(),En=se&&(ot===!0||Array.isArray(ot)&&ot.includes(Lt));return Kt&&!Kt.isEditing||!En||n(0,Lt="move"),!0},O=>{const{key:Kt}=O,En=Zn.getMarkupItemDraft();/escape/i.test(Kt)&&En&&(O.preventDefault(),O.stopPropagation(),Zn.discardMarkupItemDraft(),Ci=void 0),/enter/i.test(Kt)&&En&&(O.preventDefault(),O.stopPropagation(),wo(En),Ci=void 0)},function(O){Object.keys(O).forEach(Kt=>{const{retain:En=!0,share:je=!0}=C.settings&&C.settings[Kt]||{};En&&(oe&&je?n(115,_i[Kt]=O[Kt],_i):(_i[Lt]||n(115,_i[Lt]={},_i),n(115,_i[Lt][Kt]=O[Kt],_i)))}),bt("selectstyle",O),I&&(T?w.forEach(Kt=>{Zn.updateMarkupShape(Kt,Br(O,Kt))}):Zn.updateMarkupShape(I,O),clearTimeout(Ko),Ko=setTimeout(()=>{jr()},200))},(O,Kt,En)=>{n(117,Or=Kt),n(118,ei=En)},()=>{n(118,ei=void 0),n(117,Or=void 0)},O=>{bt("markuptap",O)},O=>n(116,Vi=O),()=>{Qr=!1},(O,Kt)=>{if(Qr)return;const{beforeAddShape:En=()=>!0}=gi,je=co(Kt),be=Zn.getMarkupItemDraft(),$e=Hu(Qt,{x:je.x+(Nt.x||0),y:je.y+(Nt.y||0)});if(be&&!$e&&Zn.discardMarkupItemDraft(),$e){if(!be){const qn=yg(O,Qt),Rn=Ji(qn,je);return En(Rn)?(vh(Rn),void Zn.addShape(Rn)):(Qr=!0,void Kt.preventDefault())}Ho(be)&&(je.x-=.5*be.width,je.y-=.5*be.height),O.shape&&(Ae(O.shape,"x")&&(je.x=O.shape.x),Ae(O.shape,"y")&&(je.y=O.shape.y)),Zn.updateMarkupShape(be,je)}},(O,Kt)=>{if(Qr)return;const En=co(Kt);if(!Hu(Qt,{x:En.x+(Nt.x||0),y:En.y+(Nt.y||0)}))return void Zn.discardMarkupItemDraft();const je=Zn.confirmMarkupItemDraft();Zn.selectShape(je),bt("addshape",je),Wi.write()},O=>Fo(O),O=>{return Kt=O.detail.resources,En=co(O.detail.event),Kt.forEach(je=>Fo(je,En));var Kt,En},O=>{if(!pn)return!0;const Kt=rectClone(Yt);return rectScale(Kt,1/ht),rectTranslate(Kt,Ft),rectScale(Kt,mt.scale),pn(O,{...Kt,x:Kt.x+Zt.x,y:Kt.y+Zt.y})},jr,wr,uo,Co,Z,De,ye,cn,tn,ot,se,ge,oe,rn,In,pn,gi,yi,er,_i,Vi,Or,ei,I,gt,ct,w,T,i,g,z,C,rt,H,M,G,k,F,j,v,$,l,d,p,a,q,dt,Ht,it,Vt,Dt,Zt,xt,_,ke,he,function(O){qr.call(this,t,O)},O=>O[0]===Lt,(O,Kt,En)=>{const je=O.filter(([,be])=>!uo.includes(be));return Dn?Dn(je,Kt,En):je},O=>O[0]===nr,O=>{Promise.resolve().then(()=>{bt("addshape",O),jr()})},O=>{bt("selectshape",O)},O=>{Promise.resolve().then(()=>{bt("blurshape",O)})},O=>{bt("tapshape",O)},O=>{bt("updateshape",O),jr()},O=>{bt("removeshape",O),jr()},()=>{jr()},function(O){Hn[O?"unshift":"push"](()=>{Zn=O,n(28,Zn)})},function(O){Hn[O?"unshift":"push"](()=>{ko=O,n(29,ko)})},O=>O.filter(([,Kt])=>uo.includes(Kt)),function(O){qr.call(this,t,O)}]}class g1 extends fn{constructor(e){super(),$n(this,e,m8,h8,dn,{isActive:1,isActiveFraction:2,isVisible:3,stores:100,locale:4,shapes:5,toolbar:101,toolShapes:102,toolActive:0,toolSelectRadius:6,toolRetainStyles:103,toolbarLayout:7,textInputMode:8,shapeControls:9,enableButtonFlipVertical:10,enablePresetSelectImage:11,enablePresetDropImage:12,enableSelectToolToAddShape:104,enableAutoSelectMoveTool:105,enableTapToAddText:13,enableMoveTool:106,enableViewTool:107,enableToolShareStyles:108,enableMultiSelect:14,gridSize:15,snapThreshold:16,enableSnapToContext:17,willRenderHeaderTools:109,willRenderPresetToolbar:110,willRenderShapeStyleControls:18,willStartInteraction:111,shapePresets:19,utilKey:20,mapScreenPointToImagePoint:21,mapImagePointToScreenPoint:22,imageRotation:23,imageFlipX:24,imageFlipY:25,parentRect:26,hooks:112},null,[-1,-1,-1,-1,-1,-1,-1])}get isActive(){return this.$$.ctx[1]}set isActive(e){this.$$set({isActive:e}),E()}get isActiveFraction(){return this.$$.ctx[2]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),E()}get isVisible(){return this.$$.ctx[3]}set isVisible(e){this.$$set({isVisible:e}),E()}get stores(){return this.$$.ctx[100]}set stores(e){this.$$set({stores:e}),E()}get locale(){return this.$$.ctx[4]}set locale(e){this.$$set({locale:e}),E()}get shapes(){return this.$$.ctx[5]}set shapes(e){this.$$set({shapes:e}),E()}get toolbar(){return this.$$.ctx[101]}set toolbar(e){this.$$set({toolbar:e}),E()}get toolShapes(){return this.$$.ctx[102]}set toolShapes(e){this.$$set({toolShapes:e}),E()}get toolActive(){return this.$$.ctx[0]}set toolActive(e){this.$$set({toolActive:e}),E()}get toolSelectRadius(){return this.$$.ctx[6]}set toolSelectRadius(e){this.$$set({toolSelectRadius:e}),E()}get toolRetainStyles(){return this.$$.ctx[103]}set toolRetainStyles(e){this.$$set({toolRetainStyles:e}),E()}get toolbarLayout(){return this.$$.ctx[7]}set toolbarLayout(e){this.$$set({toolbarLayout:e}),E()}get textInputMode(){return this.$$.ctx[8]}set textInputMode(e){this.$$set({textInputMode:e}),E()}get shapeControls(){return this.$$.ctx[9]}set shapeControls(e){this.$$set({shapeControls:e}),E()}get enableButtonFlipVertical(){return this.$$.ctx[10]}set enableButtonFlipVertical(e){this.$$set({enableButtonFlipVertical:e}),E()}get enablePresetSelectImage(){return this.$$.ctx[11]}set enablePresetSelectImage(e){this.$$set({enablePresetSelectImage:e}),E()}get enablePresetDropImage(){return this.$$.ctx[12]}set enablePresetDropImage(e){this.$$set({enablePresetDropImage:e}),E()}get enableSelectToolToAddShape(){return this.$$.ctx[104]}set enableSelectToolToAddShape(e){this.$$set({enableSelectToolToAddShape:e}),E()}get enableAutoSelectMoveTool(){return this.$$.ctx[105]}set enableAutoSelectMoveTool(e){this.$$set({enableAutoSelectMoveTool:e}),E()}get enableTapToAddText(){return this.$$.ctx[13]}set enableTapToAddText(e){this.$$set({enableTapToAddText:e}),E()}get enableMoveTool(){return this.$$.ctx[106]}set enableMoveTool(e){this.$$set({enableMoveTool:e}),E()}get enableViewTool(){return this.$$.ctx[107]}set enableViewTool(e){this.$$set({enableViewTool:e}),E()}get enableToolShareStyles(){return this.$$.ctx[108]}set enableToolShareStyles(e){this.$$set({enableToolShareStyles:e}),E()}get enableMultiSelect(){return this.$$.ctx[14]}set enableMultiSelect(e){this.$$set({enableMultiSelect:e}),E()}get gridSize(){return this.$$.ctx[15]}set gridSize(e){this.$$set({gridSize:e}),E()}get snapThreshold(){return this.$$.ctx[16]}set snapThreshold(e){this.$$set({snapThreshold:e}),E()}get enableSnapToContext(){return this.$$.ctx[17]}set enableSnapToContext(e){this.$$set({enableSnapToContext:e}),E()}get willRenderHeaderTools(){return this.$$.ctx[109]}set willRenderHeaderTools(e){this.$$set({willRenderHeaderTools:e}),E()}get willRenderPresetToolbar(){return this.$$.ctx[110]}set willRenderPresetToolbar(e){this.$$set({willRenderPresetToolbar:e}),E()}get willRenderShapeStyleControls(){return this.$$.ctx[18]}set willRenderShapeStyleControls(e){this.$$set({willRenderShapeStyleControls:e}),E()}get willStartInteraction(){return this.$$.ctx[111]}set willStartInteraction(e){this.$$set({willStartInteraction:e}),E()}get shapePresets(){return this.$$.ctx[19]}set shapePresets(e){this.$$set({shapePresets:e}),E()}get utilKey(){return this.$$.ctx[20]}set utilKey(e){this.$$set({utilKey:e}),E()}get mapScreenPointToImagePoint(){return this.$$.ctx[21]}set mapScreenPointToImagePoint(e){this.$$set({mapScreenPointToImagePoint:e}),E()}get mapImagePointToScreenPoint(){return this.$$.ctx[22]}set mapImagePointToScreenPoint(e){this.$$set({mapImagePointToScreenPoint:e}),E()}get imageRotation(){return this.$$.ctx[23]}set imageRotation(e){this.$$set({imageRotation:e}),E()}get imageFlipX(){return this.$$.ctx[24]}set imageFlipX(e){this.$$set({imageFlipX:e}),E()}get imageFlipY(){return this.$$.ctx[25]}set imageFlipY(e){this.$$set({imageFlipY:e}),E()}get parentRect(){return this.$$.ctx[26]}set parentRect(e){this.$$set({parentRect:e}),E()}get hooks(){return this.$$.ctx[112]}set hooks(e){this.$$set({hooks:e}),E()}}var O0=(t,e,n,i,r,o,a,s,l)=>{const c=Ve(t),d=.5*n.width,u=.5*n.height,p=.5*e.width,h=.5*e.height,$=r.x+i.x,g=r.y+i.y;s&&(c.x=n.width-c.x),l&&(c.y=n.height-c.y);const f=Math.cos(o),x=Math.sin(o);c.x-=d,c.y-=u;const v=c.x*f-c.y*x,w=c.x*x+c.y*f;c.x=d+v,c.y=u+w,c.x*=a,c.y*=a,c.x+=p,c.y+=h,c.x+=$,c.y+=g,c.x-=d*a,c.y-=u*a;const T=(r.x-$)*a,I=(r.y-g)*a,M=T*f-I*x,F=T*x+I*f;return c.x+=M,c.y+=F,c},W0=(t,e,n,i,r,o,a,s,l)=>{const c=Ve(t),d=tc(n),u=tc(e),p=ut(r.x+i.x,r.y+i.y),h=Math.cos(o),$=Math.sin(o);c.x-=u.x,c.y-=u.y;const g=(r.x-p.x)*a,f=(r.y-p.y)*a,x=g*h-f*$,v=g*$+f*h;c.x-=x,c.y-=v,c.x-=p.x,c.y-=p.y,c.x/=a,c.y/=a;const w=c.x*h+c.y*$,T=c.x*$-c.y*h;return c.x=w,c.y=-T,c.x+=d.x,c.y+=d.y,s&&(c.x=n.width-c.x),l&&(c.y=n.height-c.y),c},ic=t=>typeof t=="boolean";function g8(t){let e,n,i;function r(a){t[60](a)}let o={utilKey:t[1],stores:t[5],locale:t[6],isActive:t[2],isActiveFraction:t[3],isVisible:t[4],mapScreenPointToImagePoint:t[46],mapImagePointToScreenPoint:t[45],imageRotation:t[47],imageFlipX:t[44],imageFlipY:t[43],shapes:t[49],toolbar:t[21]||t[7],toolShapes:t[22]||t[8],toolRetainStyles:t[9],enableSelectToolToAddShape:t[31],enableTapToAddText:t[32],enableViewTool:t[30],enableMoveTool:t[34],enableAutoSelectMoveTool:t[33],enableMultiSelect:t[35],snapThreshold:t[16],gridSize:Ne(t[18])?t[18]:t[15],enableSnapToContext:ic(t[19])?t[19]:t[17],enableToolShareStyles:t[13],shapeControls:t[23]||t[10],shapePresets:t[27],enableButtonFlipVertical:t[24],parentRect:t[50],enablePresetDropImage:t[26],enablePresetSelectImage:t[25],toolSelectRadius:t[11],textInputMode:t[12],willStartInteraction:t[14],willRenderPresetToolbar:t[28]||t[20],willRenderShapeStyleControls:t[29],hooks:{willRenderShapeControls:t[36],willRenderShapeTextControls:t[37],beforeAddShape:t[38],beforeRemoveShape:t[39],beforeDeselectShape:t[40],beforeSelectShape:t[41],beforeUpdateShape:t[42]}};return t[0]!==void 0&&(o.toolActive=t[0]),e=new g1({props:o}),Hn.push(()=>Io(e,"toolActive",r)),e.$on("measure",t[61]),{c(){Wt(e.$$.fragment)},m(a,s){Bt(e,a,s),i=!0},p(a,s){const l={};32&s[0]&&(l.stores=a[5]),64&s[0]&&(l.locale=a[6]),4&s[0]&&(l.isActive=a[2]),8&s[0]&&(l.isActiveFraction=a[3]),16&s[0]&&(l.isVisible=a[4]),32768&s[1]&&(l.mapScreenPointToImagePoint=a[46]),16384&s[1]&&(l.mapImagePointToScreenPoint=a[45]),65536&s[1]&&(l.imageRotation=a[47]),8192&s[1]&&(l.imageFlipX=a[44]),4096&s[1]&&(l.imageFlipY=a[43]),2097280&s[0]&&(l.toolbar=a[21]||a[7]),4194560&s[0]&&(l.toolShapes=a[22]||a[8]),512&s[0]&&(l.toolRetainStyles=a[9]),1&s[1]&&(l.enableSelectToolToAddShape=a[31]),2&s[1]&&(l.enableTapToAddText=a[32]),1073741824&s[0]&&(l.enableViewTool=a[30]),8&s[1]&&(l.enableMoveTool=a[34]),4&s[1]&&(l.enableAutoSelectMoveTool=a[33]),16&s[1]&&(l.enableMultiSelect=a[35]),65536&s[0]&&(l.snapThreshold=a[16]),294912&s[0]&&(l.gridSize=Ne(a[18])?a[18]:a[15]),655360&s[0]&&(l.enableSnapToContext=ic(a[19])?a[19]:a[17]),8192&s[0]&&(l.enableToolShareStyles=a[13]),8389632&s[0]&&(l.shapeControls=a[23]||a[10]),134217728&s[0]&&(l.shapePresets=a[27]),16777216&s[0]&&(l.enableButtonFlipVertical=a[24]),67108864&s[0]&&(l.enablePresetDropImage=a[26]),33554432&s[0]&&(l.enablePresetSelectImage=a[25]),2048&s[0]&&(l.toolSelectRadius=a[11]),4096&s[0]&&(l.textInputMode=a[12]),16384&s[0]&&(l.willStartInteraction=a[14]),269484032&s[0]&&(l.willRenderPresetToolbar=a[28]||a[20]),536870912&s[0]&&(l.willRenderShapeStyleControls=a[29]),4064&s[1]&&(l.hooks={willRenderShapeControls:a[36],willRenderShapeTextControls:a[37],beforeAddShape:a[38],beforeRemoveShape:a[39],beforeDeselectShape:a[40],beforeSelectShape:a[41],beforeUpdateShape:a[42]}),!n&&1&s[0]&&(n=!0,l.toolActive=a[0],Go(()=>n=!1)),e.$set(l)},i(a){i||(R(e.$$.fragment,a),i=!0)},o(a){B(e.$$.fragment,a),i=!1},d(a){Ot(e,a)}}}function $8(t,e,n){let i,r,o,a,s,l,c,d,u,{isActive:p}=e,{isActiveFraction:h}=e,{isVisible:$}=e,{stores:g}=e,{locale:f={}}=e,{markupEditorToolbar:x}=e,{markupEditorToolStyles:v}=e,{markupEditorToolRetainStyles:w}=e,{markupEditorShapeStyleControls:T}=e,{markupEditorToolSelectRadius:I}=e,{markupEditorTextInputMode:M}=e,{markupEditorToolShareStyles:F}=e,{markupEditorWillStartInteraction:C}=e,{markupEditorGridSize:z=0}=e,{markupEditorSnapThreshold:j=0}=e,{markupEditorSnapToContext:A=!1}=e,{annotateGridSize:y}=e,{annotateSnapToContext:st}=e,{willRenderShapePresetToolbar:G}=e,{annotateTools:k}=e,{annotateToolShapes:H}=e,{annotateShapeControls:rt}=e,{annotateActiveTool:gt}=e,{annotateEnableButtonFlipVertical:ct=!1}=e,{annotateEnableSelectImagePreset:V=!1}=e,{annotateEnableDropImagePreset:N=!0}=e,{annotatePresets:kt=[]}=e,{annotateWillRenderShapePresetToolbar:bt}=e,{annotateWillRenderShapeStyleControls:et}=e,{enableViewTool:Pt}=e,{enableSelectToolToAddShape:wt}=e,{enableTapToAddText:Q}=e,{enableAutoSelectMoveTool:Ut}=e,{enableMoveTool:lt}=e,{enableMultiSelect:q}=e,{willRenderShapeControls:vt}=e,{willRenderShapeTextControls:dt}=e,{beforeAddShape:Ht}=e,{beforeRemoveShape:it}=e,{beforeDeselectShape:Vt}=e,{beforeSelectShape:Dt}=e,{beforeUpdateShape:Zt}=e;const{rootRect:mt,imageAnnotation:Ft,imageSize:ht,imageRotation:Yt,imageFlipX:Nt,imageFlipY:Qt,imageTransforms:re,imageTransformsInterpolated:xt}=g;return D(t,mt,_=>n(59,d=_)),D(t,ht,_=>n(58,c=_)),D(t,Yt,_=>n(47,u=_)),D(t,Nt,_=>n(44,a=_)),D(t,Qt,_=>n(43,o=_)),D(t,re,_=>n(57,l=_)),D(t,xt,_=>n(56,s=_)),t.$$set=_=>{"isActive"in _&&n(2,p=_.isActive),"isActiveFraction"in _&&n(3,h=_.isActiveFraction),"isVisible"in _&&n(4,$=_.isVisible),"stores"in _&&n(5,g=_.stores),"locale"in _&&n(6,f=_.locale),"markupEditorToolbar"in _&&n(7,x=_.markupEditorToolbar),"markupEditorToolStyles"in _&&n(8,v=_.markupEditorToolStyles),"markupEditorToolRetainStyles"in _&&n(9,w=_.markupEditorToolRetainStyles),"markupEditorShapeStyleControls"in _&&n(10,T=_.markupEditorShapeStyleControls),"markupEditorToolSelectRadius"in _&&n(11,I=_.markupEditorToolSelectRadius),"markupEditorTextInputMode"in _&&n(12,M=_.markupEditorTextInputMode),"markupEditorToolShareStyles"in _&&n(13,F=_.markupEditorToolShareStyles),"markupEditorWillStartInteraction"in _&&n(14,C=_.markupEditorWillStartInteraction),"markupEditorGridSize"in _&&n(15,z=_.markupEditorGridSize),"markupEditorSnapThreshold"in _&&n(16,j=_.markupEditorSnapThreshold),"markupEditorSnapToContext"in _&&n(17,A=_.markupEditorSnapToContext),"annotateGridSize"in _&&n(18,y=_.annotateGridSize),"annotateSnapToContext"in _&&n(19,st=_.annotateSnapToContext),"willRenderShapePresetToolbar"in _&&n(20,G=_.willRenderShapePresetToolbar),"annotateTools"in _&&n(21,k=_.annotateTools),"annotateToolShapes"in _&&n(22,H=_.annotateToolShapes),"annotateShapeControls"in _&&n(23,rt=_.annotateShapeControls),"annotateActiveTool"in _&&n(0,gt=_.annotateActiveTool),"annotateEnableButtonFlipVertical"in _&&n(24,ct=_.annotateEnableButtonFlipVertical),"annotateEnableSelectImagePreset"in _&&n(25,V=_.annotateEnableSelectImagePreset),"annotateEnableDropImagePreset"in _&&n(26,N=_.annotateEnableDropImagePreset),"annotatePresets"in _&&n(27,kt=_.annotatePresets),"annotateWillRenderShapePresetToolbar"in _&&n(28,bt=_.annotateWillRenderShapePresetToolbar),"annotateWillRenderShapeStyleControls"in _&&n(29,et=_.annotateWillRenderShapeStyleControls),"enableViewTool"in _&&n(30,Pt=_.enableViewTool),"enableSelectToolToAddShape"in _&&n(31,wt=_.enableSelectToolToAddShape),"enableTapToAddText"in _&&n(32,Q=_.enableTapToAddText),"enableAutoSelectMoveTool"in _&&n(33,Ut=_.enableAutoSelectMoveTool),"enableMoveTool"in _&&n(34,lt=_.enableMoveTool),"enableMultiSelect"in _&&n(35,q=_.enableMultiSelect),"willRenderShapeControls"in _&&n(36,vt=_.willRenderShapeControls),"willRenderShapeTextControls"in _&&n(37,dt=_.willRenderShapeTextControls),"beforeAddShape"in _&&n(38,Ht=_.beforeAddShape),"beforeRemoveShape"in _&&n(39,it=_.beforeRemoveShape),"beforeDeselectShape"in _&&n(40,Vt=_.beforeDeselectShape),"beforeSelectShape"in _&&n(41,Dt=_.beforeSelectShape),"beforeUpdateShape"in _&&n(42,Zt=_.beforeUpdateShape)},t.$$.update=()=>{503328768&t.$$.dirty[1]&&n(46,i=_=>W0(_,d,c,s.origin,s.translation,l.rotation.z,s.scale,a,o)),503328768&t.$$.dirty[1]&&n(45,r=_=>O0(_,d,c,s.origin,s.translation,l.rotation.z,s.scale,a,o))},[gt,"annotate",p,h,$,g,f,x,v,w,T,I,M,F,C,z,j,A,y,st,G,k,H,rt,ct,V,N,kt,bt,et,Pt,wt,Q,Ut,lt,q,vt,dt,Ht,it,Vt,Dt,Zt,o,a,r,i,u,mt,Ft,ht,Yt,Nt,Qt,re,xt,s,l,c,d,function(_){gt=_,n(0,gt)},function(_){qr.call(this,t,_)}]}var f8={util:["annotate",class extends fn{constructor(t){super(),$n(this,t,$8,g8,dn,{name:1,isActive:2,isActiveFraction:3,isVisible:4,stores:5,locale:6,markupEditorToolbar:7,markupEditorToolStyles:8,markupEditorToolRetainStyles:9,markupEditorShapeStyleControls:10,markupEditorToolSelectRadius:11,markupEditorTextInputMode:12,markupEditorToolShareStyles:13,markupEditorWillStartInteraction:14,markupEditorGridSize:15,markupEditorSnapThreshold:16,markupEditorSnapToContext:17,annotateGridSize:18,annotateSnapToContext:19,willRenderShapePresetToolbar:20,annotateTools:21,annotateToolShapes:22,annotateShapeControls:23,annotateActiveTool:0,annotateEnableButtonFlipVertical:24,annotateEnableSelectImagePreset:25,annotateEnableDropImagePreset:26,annotatePresets:27,annotateWillRenderShapePresetToolbar:28,annotateWillRenderShapeStyleControls:29,enableViewTool:30,enableSelectToolToAddShape:31,enableTapToAddText:32,enableAutoSelectMoveTool:33,enableMoveTool:34,enableMultiSelect:35,willRenderShapeControls:36,willRenderShapeTextControls:37,beforeAddShape:38,beforeRemoveShape:39,beforeDeselectShape:40,beforeSelectShape:41,beforeUpdateShape:42},null,[-1,-1])}get name(){return this.$$.ctx[1]}get isActive(){return this.$$.ctx[2]}set isActive(t){this.$$set({isActive:t}),E()}get isActiveFraction(){return this.$$.ctx[3]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),E()}get isVisible(){return this.$$.ctx[4]}set isVisible(t){this.$$set({isVisible:t}),E()}get stores(){return this.$$.ctx[5]}set stores(t){this.$$set({stores:t}),E()}get locale(){return this.$$.ctx[6]}set locale(t){this.$$set({locale:t}),E()}get markupEditorToolbar(){return this.$$.ctx[7]}set markupEditorToolbar(t){this.$$set({markupEditorToolbar:t}),E()}get markupEditorToolStyles(){return this.$$.ctx[8]}set markupEditorToolStyles(t){this.$$set({markupEditorToolStyles:t}),E()}get markupEditorToolRetainStyles(){return this.$$.ctx[9]}set markupEditorToolRetainStyles(t){this.$$set({markupEditorToolRetainStyles:t}),E()}get markupEditorShapeStyleControls(){return this.$$.ctx[10]}set markupEditorShapeStyleControls(t){this.$$set({markupEditorShapeStyleControls:t}),E()}get markupEditorToolSelectRadius(){return this.$$.ctx[11]}set markupEditorToolSelectRadius(t){this.$$set({markupEditorToolSelectRadius:t}),E()}get markupEditorTextInputMode(){return this.$$.ctx[12]}set markupEditorTextInputMode(t){this.$$set({markupEditorTextInputMode:t}),E()}get markupEditorToolShareStyles(){return this.$$.ctx[13]}set markupEditorToolShareStyles(t){this.$$set({markupEditorToolShareStyles:t}),E()}get markupEditorWillStartInteraction(){return this.$$.ctx[14]}set markupEditorWillStartInteraction(t){this.$$set({markupEditorWillStartInteraction:t}),E()}get markupEditorGridSize(){return this.$$.ctx[15]}set markupEditorGridSize(t){this.$$set({markupEditorGridSize:t}),E()}get markupEditorSnapThreshold(){return this.$$.ctx[16]}set markupEditorSnapThreshold(t){this.$$set({markupEditorSnapThreshold:t}),E()}get markupEditorSnapToContext(){return this.$$.ctx[17]}set markupEditorSnapToContext(t){this.$$set({markupEditorSnapToContext:t}),E()}get annotateGridSize(){return this.$$.ctx[18]}set annotateGridSize(t){this.$$set({annotateGridSize:t}),E()}get annotateSnapToContext(){return this.$$.ctx[19]}set annotateSnapToContext(t){this.$$set({annotateSnapToContext:t}),E()}get willRenderShapePresetToolbar(){return this.$$.ctx[20]}set willRenderShapePresetToolbar(t){this.$$set({willRenderShapePresetToolbar:t}),E()}get annotateTools(){return this.$$.ctx[21]}set annotateTools(t){this.$$set({annotateTools:t}),E()}get annotateToolShapes(){return this.$$.ctx[22]}set annotateToolShapes(t){this.$$set({annotateToolShapes:t}),E()}get annotateShapeControls(){return this.$$.ctx[23]}set annotateShapeControls(t){this.$$set({annotateShapeControls:t}),E()}get annotateActiveTool(){return this.$$.ctx[0]}set annotateActiveTool(t){this.$$set({annotateActiveTool:t}),E()}get annotateEnableButtonFlipVertical(){return this.$$.ctx[24]}set annotateEnableButtonFlipVertical(t){this.$$set({annotateEnableButtonFlipVertical:t}),E()}get annotateEnableSelectImagePreset(){return this.$$.ctx[25]}set annotateEnableSelectImagePreset(t){this.$$set({annotateEnableSelectImagePreset:t}),E()}get annotateEnableDropImagePreset(){return this.$$.ctx[26]}set annotateEnableDropImagePreset(t){this.$$set({annotateEnableDropImagePreset:t}),E()}get annotatePresets(){return this.$$.ctx[27]}set annotatePresets(t){this.$$set({annotatePresets:t}),E()}get annotateWillRenderShapePresetToolbar(){return this.$$.ctx[28]}set annotateWillRenderShapePresetToolbar(t){this.$$set({annotateWillRenderShapePresetToolbar:t}),E()}get annotateWillRenderShapeStyleControls(){return this.$$.ctx[29]}set annotateWillRenderShapeStyleControls(t){this.$$set({annotateWillRenderShapeStyleControls:t}),E()}get enableViewTool(){return this.$$.ctx[30]}set enableViewTool(t){this.$$set({enableViewTool:t}),E()}get enableSelectToolToAddShape(){return this.$$.ctx[31]}set enableSelectToolToAddShape(t){this.$$set({enableSelectToolToAddShape:t}),E()}get enableTapToAddText(){return this.$$.ctx[32]}set enableTapToAddText(t){this.$$set({enableTapToAddText:t}),E()}get enableAutoSelectMoveTool(){return this.$$.ctx[33]}set enableAutoSelectMoveTool(t){this.$$set({enableAutoSelectMoveTool:t}),E()}get enableMoveTool(){return this.$$.ctx[34]}set enableMoveTool(t){this.$$set({enableMoveTool:t}),E()}get enableMultiSelect(){return this.$$.ctx[35]}set enableMultiSelect(t){this.$$set({enableMultiSelect:t}),E()}get willRenderShapeControls(){return this.$$.ctx[36]}set willRenderShapeControls(t){this.$$set({willRenderShapeControls:t}),E()}get willRenderShapeTextControls(){return this.$$.ctx[37]}set willRenderShapeTextControls(t){this.$$set({willRenderShapeTextControls:t}),E()}get beforeAddShape(){return this.$$.ctx[38]}set beforeAddShape(t){this.$$set({beforeAddShape:t}),E()}get beforeRemoveShape(){return this.$$.ctx[39]}set beforeRemoveShape(t){this.$$set({beforeRemoveShape:t}),E()}get beforeDeselectShape(){return this.$$.ctx[40]}set beforeDeselectShape(t){this.$$set({beforeDeselectShape:t}),E()}get beforeSelectShape(){return this.$$.ctx[41]}set beforeSelectShape(t){this.$$set({beforeSelectShape:t}),E()}get beforeUpdateShape(){return this.$$.ctx[42]}set beforeUpdateShape(t){this.$$set({beforeUpdateShape:t}),E()}}]};function y8(t){let e,n,i;function r(a){t[52](a)}let o={utilKey:t[1],stores:t[5],locale:t[6],isActive:t[2],isActiveFraction:t[3],isVisible:t[4],mapScreenPointToImagePoint:t[44],mapImagePointToScreenPoint:t[43],shapes:t[46],toolbar:t[20]||t[7],toolShapes:t[21]||t[8],toolRetainStyles:t[9],shapeControls:t[22]||t[10],shapePresets:t[26],enableSelectToolToAddShape:t[29],enableTapToAddText:t[30],enableViewTool:t[31],enableMoveTool:t[32],enableAutoSelectMoveTool:t[33],enableMultiSelect:t[34],snapThreshold:t[16],gridSize:Ne(t[18])?t[18]:t[15],enableSnapToContext:ic(t[19])?t[19]:t[17],enableToolShareStyles:t[13],enablePresetSelectImage:t[24],enablePresetDropImage:t[25],enableButtonFlipVertical:t[23],parentRect:t[45],toolSelectRadius:t[11],textInputMode:t[12],willStartInteraction:t[42],willRenderPresetToolbar:t[27]||t[14],willRenderShapeStyleControls:t[28],hooks:{willRenderShapeControls:t[35],willRenderShapeTextControls:t[36],beforeAddShape:t[37],beforeRemoveShape:t[38],beforeDeselectShape:t[39],beforeSelectShape:t[40],beforeUpdateShape:t[41]}};return t[0]!==void 0&&(o.toolActive=t[0]),e=new g1({props:o}),Hn.push(()=>Io(e,"toolActive",r)),e.$on("measure",t[53]),{c(){Wt(e.$$.fragment)},m(a,s){Bt(e,a,s),i=!0},p(a,s){const l={};32&s[0]&&(l.stores=a[5]),64&s[0]&&(l.locale=a[6]),4&s[0]&&(l.isActive=a[2]),8&s[0]&&(l.isActiveFraction=a[3]),16&s[0]&&(l.isVisible=a[4]),8192&s[1]&&(l.mapScreenPointToImagePoint=a[44]),4096&s[1]&&(l.mapImagePointToScreenPoint=a[43]),1048704&s[0]&&(l.toolbar=a[20]||a[7]),2097408&s[0]&&(l.toolShapes=a[21]||a[8]),512&s[0]&&(l.toolRetainStyles=a[9]),4195328&s[0]&&(l.shapeControls=a[22]||a[10]),67108864&s[0]&&(l.shapePresets=a[26]),536870912&s[0]&&(l.enableSelectToolToAddShape=a[29]),1073741824&s[0]&&(l.enableTapToAddText=a[30]),1&s[1]&&(l.enableViewTool=a[31]),2&s[1]&&(l.enableMoveTool=a[32]),4&s[1]&&(l.enableAutoSelectMoveTool=a[33]),8&s[1]&&(l.enableMultiSelect=a[34]),65536&s[0]&&(l.snapThreshold=a[16]),294912&s[0]&&(l.gridSize=Ne(a[18])?a[18]:a[15]),655360&s[0]&&(l.enableSnapToContext=ic(a[19])?a[19]:a[17]),8192&s[0]&&(l.enableToolShareStyles=a[13]),16777216&s[0]&&(l.enablePresetSelectImage=a[24]),33554432&s[0]&&(l.enablePresetDropImage=a[25]),8388608&s[0]&&(l.enableButtonFlipVertical=a[23]),2048&s[0]&&(l.toolSelectRadius=a[11]),4096&s[0]&&(l.textInputMode=a[12]),2048&s[1]&&(l.willStartInteraction=a[42]),134234112&s[0]&&(l.willRenderPresetToolbar=a[27]||a[14]),268435456&s[0]&&(l.willRenderShapeStyleControls=a[28]),2032&s[1]&&(l.hooks={willRenderShapeControls:a[35],willRenderShapeTextControls:a[36],beforeAddShape:a[37],beforeRemoveShape:a[38],beforeDeselectShape:a[39],beforeSelectShape:a[40],beforeUpdateShape:a[41]}),!n&&1&s[0]&&(n=!0,l.toolActive=a[0],Go(()=>n=!1)),e.$set(l)},i(a){i||(R(e.$$.fragment,a),i=!0)},o(a){B(e.$$.fragment,a),i=!1},d(a){Ot(e,a)}}}function b8(t,e,n){let i,r,o,a,s,{isActive:l}=e,{isActiveFraction:c}=e,{isVisible:d}=e,{stores:u}=e,{locale:p={}}=e,{markupEditorToolbar:h}=e,{markupEditorToolStyles:$}=e,{markupEditorToolRetainStyles:g}=e,{markupEditorShapeStyleControls:f}=e,{markupEditorToolSelectRadius:x}=e,{markupEditorTextInputMode:v}=e,{markupEditorToolShareStyles:w}=e,{willRenderShapePresetToolbar:T}=e,{markupEditorGridSize:I}=e,{markupEditorSnapThreshold:M}=e,{markupEditorSnapToContext:F=!0}=e,{decorateGridSize:C}=e,{decorateSnapToContext:z}=e,{decorateTools:j}=e,{decorateToolShapes:A}=e,{decorateShapeControls:y}=e,{decorateActiveTool:st}=e,{decorateEnableButtonFlipVertical:G=!1}=e,{decorateEnableSelectImagePreset:k=!1}=e,{decorateEnableDropImagePreset:H=!0}=e,{decoratePresets:rt=[]}=e,{decorateWillRenderShapePresetToolbar:gt}=e,{decorateWillRenderShapeStyleControls:ct}=e,{enableSelectToolToAddShape:V}=e,{enableTapToAddText:N}=e,{enableViewTool:kt}=e,{enableMoveTool:bt}=e,{enableAutoSelectMoveTool:et}=e,{enableMultiSelect:Pt}=e,{willRenderShapeControls:wt}=e,{willRenderShapeTextControls:Q}=e,{beforeAddShape:Ut}=e,{beforeRemoveShape:lt}=e,{beforeDeselectShape:q}=e,{beforeSelectShape:vt}=e,{beforeUpdateShape:dt}=e,{markupEditorWillStartInteraction:Ht}=e;const{imageCropRect:it,imageDecoration:Vt,imageSelectionRectPresentation:Dt,imageTransformsInterpolated:Zt}=u;return D(t,Dt,mt=>n(50,a=mt)),D(t,Zt,mt=>n(51,s=mt)),t.$$set=mt=>{"isActive"in mt&&n(2,l=mt.isActive),"isActiveFraction"in mt&&n(3,c=mt.isActiveFraction),"isVisible"in mt&&n(4,d=mt.isVisible),"stores"in mt&&n(5,u=mt.stores),"locale"in mt&&n(6,p=mt.locale),"markupEditorToolbar"in mt&&n(7,h=mt.markupEditorToolbar),"markupEditorToolStyles"in mt&&n(8,$=mt.markupEditorToolStyles),"markupEditorToolRetainStyles"in mt&&n(9,g=mt.markupEditorToolRetainStyles),"markupEditorShapeStyleControls"in mt&&n(10,f=mt.markupEditorShapeStyleControls),"markupEditorToolSelectRadius"in mt&&n(11,x=mt.markupEditorToolSelectRadius),"markupEditorTextInputMode"in mt&&n(12,v=mt.markupEditorTextInputMode),"markupEditorToolShareStyles"in mt&&n(13,w=mt.markupEditorToolShareStyles),"willRenderShapePresetToolbar"in mt&&n(14,T=mt.willRenderShapePresetToolbar),"markupEditorGridSize"in mt&&n(15,I=mt.markupEditorGridSize),"markupEditorSnapThreshold"in mt&&n(16,M=mt.markupEditorSnapThreshold),"markupEditorSnapToContext"in mt&&n(17,F=mt.markupEditorSnapToContext),"decorateGridSize"in mt&&n(18,C=mt.decorateGridSize),"decorateSnapToContext"in mt&&n(19,z=mt.decorateSnapToContext),"decorateTools"in mt&&n(20,j=mt.decorateTools),"decorateToolShapes"in mt&&n(21,A=mt.decorateToolShapes),"decorateShapeControls"in mt&&n(22,y=mt.decorateShapeControls),"decorateActiveTool"in mt&&n(0,st=mt.decorateActiveTool),"decorateEnableButtonFlipVertical"in mt&&n(23,G=mt.decorateEnableButtonFlipVertical),"decorateEnableSelectImagePreset"in mt&&n(24,k=mt.decorateEnableSelectImagePreset),"decorateEnableDropImagePreset"in mt&&n(25,H=mt.decorateEnableDropImagePreset),"decoratePresets"in mt&&n(26,rt=mt.decoratePresets),"decorateWillRenderShapePresetToolbar"in mt&&n(27,gt=mt.decorateWillRenderShapePresetToolbar),"decorateWillRenderShapeStyleControls"in mt&&n(28,ct=mt.decorateWillRenderShapeStyleControls),"enableSelectToolToAddShape"in mt&&n(29,V=mt.enableSelectToolToAddShape),"enableTapToAddText"in mt&&n(30,N=mt.enableTapToAddText),"enableViewTool"in mt&&n(31,kt=mt.enableViewTool),"enableMoveTool"in mt&&n(32,bt=mt.enableMoveTool),"enableAutoSelectMoveTool"in mt&&n(33,et=mt.enableAutoSelectMoveTool),"enableMultiSelect"in mt&&n(34,Pt=mt.enableMultiSelect),"willRenderShapeControls"in mt&&n(35,wt=mt.willRenderShapeControls),"willRenderShapeTextControls"in mt&&n(36,Q=mt.willRenderShapeTextControls),"beforeAddShape"in mt&&n(37,Ut=mt.beforeAddShape),"beforeRemoveShape"in mt&&n(38,lt=mt.beforeRemoveShape),"beforeDeselectShape"in mt&&n(39,q=mt.beforeDeselectShape),"beforeSelectShape"in mt&&n(40,vt=mt.beforeSelectShape),"beforeUpdateShape"in mt&&n(41,dt=mt.beforeUpdateShape),"markupEditorWillStartInteraction"in mt&&n(42,Ht=mt.markupEditorWillStartInteraction)},t.$$.update=()=>{1048576&t.$$.dirty[1]&&n(49,i=s?s.scale:1),786432&t.$$.dirty[1]&&n(44,r=mt=>{const Ft=Ve(mt);return Ft.x-=a.x,Ft.y-=a.y,Ft.x/=i,Ft.y/=i,Ft}),786432&t.$$.dirty[1]&&n(43,o=mt=>{const Ft=Ve(mt);return Ft.x*=i,Ft.y*=i,Ft.x+=a.x,Ft.y+=a.y,Ft})},[st,"decorate",l,c,d,u,p,h,$,g,f,x,v,w,T,I,M,F,C,z,j,A,y,G,k,H,rt,gt,ct,V,N,kt,bt,et,Pt,wt,Q,Ut,lt,q,vt,dt,Ht,o,r,it,Vt,Dt,Zt,i,a,s,function(mt){st=mt,n(0,st)},function(mt){qr.call(this,t,mt)}]}var x8={util:["decorate",class extends fn{constructor(t){super(),$n(this,t,b8,y8,dn,{name:1,isActive:2,isActiveFraction:3,isVisible:4,stores:5,locale:6,markupEditorToolbar:7,markupEditorToolStyles:8,markupEditorToolRetainStyles:9,markupEditorShapeStyleControls:10,markupEditorToolSelectRadius:11,markupEditorTextInputMode:12,markupEditorToolShareStyles:13,willRenderShapePresetToolbar:14,markupEditorGridSize:15,markupEditorSnapThreshold:16,markupEditorSnapToContext:17,decorateGridSize:18,decorateSnapToContext:19,decorateTools:20,decorateToolShapes:21,decorateShapeControls:22,decorateActiveTool:0,decorateEnableButtonFlipVertical:23,decorateEnableSelectImagePreset:24,decorateEnableDropImagePreset:25,decoratePresets:26,decorateWillRenderShapePresetToolbar:27,decorateWillRenderShapeStyleControls:28,enableSelectToolToAddShape:29,enableTapToAddText:30,enableViewTool:31,enableMoveTool:32,enableAutoSelectMoveTool:33,enableMultiSelect:34,willRenderShapeControls:35,willRenderShapeTextControls:36,beforeAddShape:37,beforeRemoveShape:38,beforeDeselectShape:39,beforeSelectShape:40,beforeUpdateShape:41,markupEditorWillStartInteraction:42},null,[-1,-1])}get name(){return this.$$.ctx[1]}get isActive(){return this.$$.ctx[2]}set isActive(t){this.$$set({isActive:t}),E()}get isActiveFraction(){return this.$$.ctx[3]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),E()}get isVisible(){return this.$$.ctx[4]}set isVisible(t){this.$$set({isVisible:t}),E()}get stores(){return this.$$.ctx[5]}set stores(t){this.$$set({stores:t}),E()}get locale(){return this.$$.ctx[6]}set locale(t){this.$$set({locale:t}),E()}get markupEditorToolbar(){return this.$$.ctx[7]}set markupEditorToolbar(t){this.$$set({markupEditorToolbar:t}),E()}get markupEditorToolStyles(){return this.$$.ctx[8]}set markupEditorToolStyles(t){this.$$set({markupEditorToolStyles:t}),E()}get markupEditorToolRetainStyles(){return this.$$.ctx[9]}set markupEditorToolRetainStyles(t){this.$$set({markupEditorToolRetainStyles:t}),E()}get markupEditorShapeStyleControls(){return this.$$.ctx[10]}set markupEditorShapeStyleControls(t){this.$$set({markupEditorShapeStyleControls:t}),E()}get markupEditorToolSelectRadius(){return this.$$.ctx[11]}set markupEditorToolSelectRadius(t){this.$$set({markupEditorToolSelectRadius:t}),E()}get markupEditorTextInputMode(){return this.$$.ctx[12]}set markupEditorTextInputMode(t){this.$$set({markupEditorTextInputMode:t}),E()}get markupEditorToolShareStyles(){return this.$$.ctx[13]}set markupEditorToolShareStyles(t){this.$$set({markupEditorToolShareStyles:t}),E()}get willRenderShapePresetToolbar(){return this.$$.ctx[14]}set willRenderShapePresetToolbar(t){this.$$set({willRenderShapePresetToolbar:t}),E()}get markupEditorGridSize(){return this.$$.ctx[15]}set markupEditorGridSize(t){this.$$set({markupEditorGridSize:t}),E()}get markupEditorSnapThreshold(){return this.$$.ctx[16]}set markupEditorSnapThreshold(t){this.$$set({markupEditorSnapThreshold:t}),E()}get markupEditorSnapToContext(){return this.$$.ctx[17]}set markupEditorSnapToContext(t){this.$$set({markupEditorSnapToContext:t}),E()}get decorateGridSize(){return this.$$.ctx[18]}set decorateGridSize(t){this.$$set({decorateGridSize:t}),E()}get decorateSnapToContext(){return this.$$.ctx[19]}set decorateSnapToContext(t){this.$$set({decorateSnapToContext:t}),E()}get decorateTools(){return this.$$.ctx[20]}set decorateTools(t){this.$$set({decorateTools:t}),E()}get decorateToolShapes(){return this.$$.ctx[21]}set decorateToolShapes(t){this.$$set({decorateToolShapes:t}),E()}get decorateShapeControls(){return this.$$.ctx[22]}set decorateShapeControls(t){this.$$set({decorateShapeControls:t}),E()}get decorateActiveTool(){return this.$$.ctx[0]}set decorateActiveTool(t){this.$$set({decorateActiveTool:t}),E()}get decorateEnableButtonFlipVertical(){return this.$$.ctx[23]}set decorateEnableButtonFlipVertical(t){this.$$set({decorateEnableButtonFlipVertical:t}),E()}get decorateEnableSelectImagePreset(){return this.$$.ctx[24]}set decorateEnableSelectImagePreset(t){this.$$set({decorateEnableSelectImagePreset:t}),E()}get decorateEnableDropImagePreset(){return this.$$.ctx[25]}set decorateEnableDropImagePreset(t){this.$$set({decorateEnableDropImagePreset:t}),E()}get decoratePresets(){return this.$$.ctx[26]}set decoratePresets(t){this.$$set({decoratePresets:t}),E()}get decorateWillRenderShapePresetToolbar(){return this.$$.ctx[27]}set decorateWillRenderShapePresetToolbar(t){this.$$set({decorateWillRenderShapePresetToolbar:t}),E()}get decorateWillRenderShapeStyleControls(){return this.$$.ctx[28]}set decorateWillRenderShapeStyleControls(t){this.$$set({decorateWillRenderShapeStyleControls:t}),E()}get enableSelectToolToAddShape(){return this.$$.ctx[29]}set enableSelectToolToAddShape(t){this.$$set({enableSelectToolToAddShape:t}),E()}get enableTapToAddText(){return this.$$.ctx[30]}set enableTapToAddText(t){this.$$set({enableTapToAddText:t}),E()}get enableViewTool(){return this.$$.ctx[31]}set enableViewTool(t){this.$$set({enableViewTool:t}),E()}get enableMoveTool(){return this.$$.ctx[32]}set enableMoveTool(t){this.$$set({enableMoveTool:t}),E()}get enableAutoSelectMoveTool(){return this.$$.ctx[33]}set enableAutoSelectMoveTool(t){this.$$set({enableAutoSelectMoveTool:t}),E()}get enableMultiSelect(){return this.$$.ctx[34]}set enableMultiSelect(t){this.$$set({enableMultiSelect:t}),E()}get willRenderShapeControls(){return this.$$.ctx[35]}set willRenderShapeControls(t){this.$$set({willRenderShapeControls:t}),E()}get willRenderShapeTextControls(){return this.$$.ctx[36]}set willRenderShapeTextControls(t){this.$$set({willRenderShapeTextControls:t}),E()}get beforeAddShape(){return this.$$.ctx[37]}set beforeAddShape(t){this.$$set({beforeAddShape:t}),E()}get beforeRemoveShape(){return this.$$.ctx[38]}set beforeRemoveShape(t){this.$$set({beforeRemoveShape:t}),E()}get beforeDeselectShape(){return this.$$.ctx[39]}set beforeDeselectShape(t){this.$$set({beforeDeselectShape:t}),E()}get beforeSelectShape(){return this.$$.ctx[40]}set beforeSelectShape(t){this.$$set({beforeSelectShape:t}),E()}get beforeUpdateShape(){return this.$$.ctx[41]}set beforeUpdateShape(t){this.$$set({beforeUpdateShape:t}),E()}get markupEditorWillStartInteraction(){return this.$$.ctx[42]}set markupEditorWillStartInteraction(t){this.$$set({markupEditorWillStartInteraction:t}),E()}}]};function v8(t){let e,n;return e=new g1({props:{stores:t[3],locale:t[4],isActive:t[0],isActiveFraction:t[1],isVisible:t[2],mapScreenPointToImagePoint:t[26],mapImagePointToScreenPoint:t[25],utilKey:"sticker",shapePresets:t[5],shapes:t[6]?t[35]:t[36],toolActive:"preset",imageFlipX:!!t[6]&&t[24],imageFlipY:!!t[6]&&t[23],imageRotation:t[6]?t[31]:0,parentRect:t[6]?t[37]:t[33],snapThreshold:t[29],gridSize:t[28],enableMultiSelect:t[12],enableSnapToContext:t[27],enablePresetDropImage:t[7],enablePresetSelectImage:t[30],enableButtonFlipVertical:t[10]||t[8],toolSelectRadius:t[15],willStartInteraction:t[22],willRenderPresetToolbar:t[11]||t[9]||t[16],hooks:{willRenderShapeControls:t[13],willRenderShapeTextControls:t[14],beforeAddShape:t[17],beforeRemoveShape:t[18],beforeDeselectShape:t[19],beforeSelectShape:t[20],beforeUpdateShape:t[21]}}}),e.$on("measure",t[60]),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};8&r[0]&&(o.stores=i[3]),16&r[0]&&(o.locale=i[4]),1&r[0]&&(o.isActive=i[0]),2&r[0]&&(o.isActiveFraction=i[1]),4&r[0]&&(o.isVisible=i[2]),67108864&r[0]&&(o.mapScreenPointToImagePoint=i[26]),33554432&r[0]&&(o.mapImagePointToScreenPoint=i[25]),32&r[0]&&(o.shapePresets=i[5]),64&r[0]&&(o.shapes=i[6]?i[35]:i[36]),16777280&r[0]&&(o.imageFlipX=!!i[6]&&i[24]),8388672&r[0]&&(o.imageFlipY=!!i[6]&&i[23]),64&r[0]|1&r[1]&&(o.imageRotation=i[6]?i[31]:0),64&r[0]&&(o.parentRect=i[6]?i[37]:i[33]),536870912&r[0]&&(o.snapThreshold=i[29]),268435456&r[0]&&(o.gridSize=i[28]),4096&r[0]&&(o.enableMultiSelect=i[12]),134217728&r[0]&&(o.enableSnapToContext=i[27]),128&r[0]&&(o.enablePresetDropImage=i[7]),1073741824&r[0]&&(o.enablePresetSelectImage=i[30]),1280&r[0]&&(o.enableButtonFlipVertical=i[10]||i[8]),32768&r[0]&&(o.toolSelectRadius=i[15]),4194304&r[0]&&(o.willStartInteraction=i[22]),68096&r[0]&&(o.willRenderPresetToolbar=i[11]||i[9]||i[16]),4087808&r[0]&&(o.hooks={willRenderShapeControls:i[13],willRenderShapeTextControls:i[14],beforeAddShape:i[17],beforeRemoveShape:i[18],beforeDeselectShape:i[19],beforeSelectShape:i[20],beforeUpdateShape:i[21]}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function w8(t,e,n){let i,r,o,a,s,l,c,d,u,p,h,$,g,f,x,{isActive:v}=e,{isActiveFraction:w}=e,{isVisible:T}=e,{stores:I}=e,{locale:M={}}=e,{stickers:F=[]}=e,{stickerForceEnable:C=!1}=e,{stickerStickToImage:z=!1}=e,{stickerEnableSelectImagePreset:j=!0}=e,{stickerEnableDropImagePreset:A=!0}=e,{stickerEnableButtonFlipVertical:y=!1}=e,{stickerWillRenderShapePresetToolbar:st}=e,{stickerEnableSelectImage:G=!0}=e,{stickersEnableButtonFlipVertical:k=!1}=e,{stickersWillRenderShapePresetToolbar:H}=e,{markupEditorGridSize:rt=0}=e,{markupEditorSnapThreshold:gt=0}=e,{markupEditorSnapToContext:ct=!1}=e,{enableMultiSelect:V}=e,{annotateGridSize:N}=e,{annotateSnapToContext:kt}=e,{decorateGridSize:bt}=e,{decorateSnapToContext:et}=e,{willRenderShapeControls:Pt}=e,{willRenderShapeTextControls:wt}=e,{markupEditorToolSelectRadius:Q}=e,{willRenderShapePresetToolbar:Ut}=e,{beforeAddShape:lt}=e,{beforeRemoveShape:q}=e,{beforeDeselectShape:vt}=e,{beforeSelectShape:dt}=e,{beforeUpdateShape:Ht}=e,{markupEditorWillStartInteraction:it}=e;const{rootRect:Vt,imageCropRect:Dt,imageSelectionRectPresentation:Zt,imageAnnotation:mt,imageDecoration:Ft,imageSize:ht,imageTransforms:Yt,imageTransformsInterpolated:Nt,imageRotation:Qt,imageFlipX:re,imageFlipY:xt}=I;return D(t,Vt,_=>n(59,f=_)),D(t,Zt,_=>n(55,d=_)),D(t,ht,_=>n(58,g=_)),D(t,Yt,_=>n(57,$=_)),D(t,Nt,_=>n(56,h=_)),D(t,Qt,_=>n(31,x=_)),D(t,re,_=>n(24,p=_)),D(t,xt,_=>n(23,u=_)),t.$$set=_=>{"isActive"in _&&n(0,v=_.isActive),"isActiveFraction"in _&&n(1,w=_.isActiveFraction),"isVisible"in _&&n(2,T=_.isVisible),"stores"in _&&n(3,I=_.stores),"locale"in _&&n(4,M=_.locale),"stickers"in _&&n(5,F=_.stickers),"stickerForceEnable"in _&&n(44,C=_.stickerForceEnable),"stickerStickToImage"in _&&n(6,z=_.stickerStickToImage),"stickerEnableSelectImagePreset"in _&&n(45,j=_.stickerEnableSelectImagePreset),"stickerEnableDropImagePreset"in _&&n(7,A=_.stickerEnableDropImagePreset),"stickerEnableButtonFlipVertical"in _&&n(8,y=_.stickerEnableButtonFlipVertical),"stickerWillRenderShapePresetToolbar"in _&&n(9,st=_.stickerWillRenderShapePresetToolbar),"stickerEnableSelectImage"in _&&n(46,G=_.stickerEnableSelectImage),"stickersEnableButtonFlipVertical"in _&&n(10,k=_.stickersEnableButtonFlipVertical),"stickersWillRenderShapePresetToolbar"in _&&n(11,H=_.stickersWillRenderShapePresetToolbar),"markupEditorGridSize"in _&&n(47,rt=_.markupEditorGridSize),"markupEditorSnapThreshold"in _&&n(48,gt=_.markupEditorSnapThreshold),"markupEditorSnapToContext"in _&&n(49,ct=_.markupEditorSnapToContext),"enableMultiSelect"in _&&n(12,V=_.enableMultiSelect),"annotateGridSize"in _&&n(50,N=_.annotateGridSize),"annotateSnapToContext"in _&&n(51,kt=_.annotateSnapToContext),"decorateGridSize"in _&&n(52,bt=_.decorateGridSize),"decorateSnapToContext"in _&&n(53,et=_.decorateSnapToContext),"willRenderShapeControls"in _&&n(13,Pt=_.willRenderShapeControls),"willRenderShapeTextControls"in _&&n(14,wt=_.willRenderShapeTextControls),"markupEditorToolSelectRadius"in _&&n(15,Q=_.markupEditorToolSelectRadius),"willRenderShapePresetToolbar"in _&&n(16,Ut=_.willRenderShapePresetToolbar),"beforeAddShape"in _&&n(17,lt=_.beforeAddShape),"beforeRemoveShape"in _&&n(18,q=_.beforeRemoveShape),"beforeDeselectShape"in _&&n(19,vt=_.beforeDeselectShape),"beforeSelectShape"in _&&n(20,dt=_.beforeSelectShape),"beforeUpdateShape"in _&&n(21,Ht=_.beforeUpdateShape),"markupEditorWillStartInteraction"in _&&n(22,it=_.markupEditorWillStartInteraction)},t.$$.update=()=>{33554432&t.$$.dirty[1]&&n(54,i=h?h.scale:1),49152&t.$$.dirty[1]&&n(30,r=j!==!1&&G),131072&t.$$.dirty[1]&&n(29,o=gt),64&t.$$.dirty[0]|2686976&t.$$.dirty[1]&&n(28,a=z?Ne(N)?N:rt:Ne(bt)?bt:rt),64&t.$$.dirty[0]|5505024&t.$$.dirty[1]&&n(27,s=z?ic(kt)?kt:ct:ic(et)?et:ct),25165888&t.$$.dirty[0]|528482304&t.$$.dirty[1]&&n(26,l=z?_=>W0(_,f,g,h.origin,h.translation,$.rotation.z,h.scale,p,u):_=>{const ke=Ve(_);return ke.x-=d.x,ke.y-=d.y,ke.x/=i,ke.y/=i,ke}),25165888&t.$$.dirty[0]|528482304&t.$$.dirty[1]&&n(25,c=z?_=>O0(_,f,g,h.origin,h.translation,$.rotation.z,h.scale,p,u):_=>{const ke=Ve(_);return ke.x*=i,ke.y*=i,ke.x+=d.x,ke.y+=d.y,ke})},[v,w,T,I,M,F,z,A,y,st,k,H,V,Pt,wt,Q,Ut,lt,q,vt,dt,Ht,it,u,p,c,l,s,a,o,r,x,Vt,Dt,Zt,mt,Ft,ht,Yt,Nt,Qt,re,xt,"sticker",C,j,G,rt,gt,ct,N,kt,bt,et,i,d,h,$,g,f,function(_){qr.call(this,t,_)}]}var S8={util:["sticker",class extends fn{constructor(t){super(),$n(this,t,w8,v8,dn,{name:43,isActive:0,isActiveFraction:1,isVisible:2,stores:3,locale:4,stickers:5,stickerForceEnable:44,stickerStickToImage:6,stickerEnableSelectImagePreset:45,stickerEnableDropImagePreset:7,stickerEnableButtonFlipVertical:8,stickerWillRenderShapePresetToolbar:9,stickerEnableSelectImage:46,stickersEnableButtonFlipVertical:10,stickersWillRenderShapePresetToolbar:11,markupEditorGridSize:47,markupEditorSnapThreshold:48,markupEditorSnapToContext:49,enableMultiSelect:12,annotateGridSize:50,annotateSnapToContext:51,decorateGridSize:52,decorateSnapToContext:53,willRenderShapeControls:13,willRenderShapeTextControls:14,markupEditorToolSelectRadius:15,willRenderShapePresetToolbar:16,beforeAddShape:17,beforeRemoveShape:18,beforeDeselectShape:19,beforeSelectShape:20,beforeUpdateShape:21,markupEditorWillStartInteraction:22},null,[-1,-1])}get name(){return this.$$.ctx[43]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),E()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),E()}get isVisible(){return this.$$.ctx[2]}set isVisible(t){this.$$set({isVisible:t}),E()}get stores(){return this.$$.ctx[3]}set stores(t){this.$$set({stores:t}),E()}get locale(){return this.$$.ctx[4]}set locale(t){this.$$set({locale:t}),E()}get stickers(){return this.$$.ctx[5]}set stickers(t){this.$$set({stickers:t}),E()}get stickerForceEnable(){return this.$$.ctx[44]}set stickerForceEnable(t){this.$$set({stickerForceEnable:t}),E()}get stickerStickToImage(){return this.$$.ctx[6]}set stickerStickToImage(t){this.$$set({stickerStickToImage:t}),E()}get stickerEnableSelectImagePreset(){return this.$$.ctx[45]}set stickerEnableSelectImagePreset(t){this.$$set({stickerEnableSelectImagePreset:t}),E()}get stickerEnableDropImagePreset(){return this.$$.ctx[7]}set stickerEnableDropImagePreset(t){this.$$set({stickerEnableDropImagePreset:t}),E()}get stickerEnableButtonFlipVertical(){return this.$$.ctx[8]}set stickerEnableButtonFlipVertical(t){this.$$set({stickerEnableButtonFlipVertical:t}),E()}get stickerWillRenderShapePresetToolbar(){return this.$$.ctx[9]}set stickerWillRenderShapePresetToolbar(t){this.$$set({stickerWillRenderShapePresetToolbar:t}),E()}get stickerEnableSelectImage(){return this.$$.ctx[46]}set stickerEnableSelectImage(t){this.$$set({stickerEnableSelectImage:t}),E()}get stickersEnableButtonFlipVertical(){return this.$$.ctx[10]}set stickersEnableButtonFlipVertical(t){this.$$set({stickersEnableButtonFlipVertical:t}),E()}get stickersWillRenderShapePresetToolbar(){return this.$$.ctx[11]}set stickersWillRenderShapePresetToolbar(t){this.$$set({stickersWillRenderShapePresetToolbar:t}),E()}get markupEditorGridSize(){return this.$$.ctx[47]}set markupEditorGridSize(t){this.$$set({markupEditorGridSize:t}),E()}get markupEditorSnapThreshold(){return this.$$.ctx[48]}set markupEditorSnapThreshold(t){this.$$set({markupEditorSnapThreshold:t}),E()}get markupEditorSnapToContext(){return this.$$.ctx[49]}set markupEditorSnapToContext(t){this.$$set({markupEditorSnapToContext:t}),E()}get enableMultiSelect(){return this.$$.ctx[12]}set enableMultiSelect(t){this.$$set({enableMultiSelect:t}),E()}get annotateGridSize(){return this.$$.ctx[50]}set annotateGridSize(t){this.$$set({annotateGridSize:t}),E()}get annotateSnapToContext(){return this.$$.ctx[51]}set annotateSnapToContext(t){this.$$set({annotateSnapToContext:t}),E()}get decorateGridSize(){return this.$$.ctx[52]}set decorateGridSize(t){this.$$set({decorateGridSize:t}),E()}get decorateSnapToContext(){return this.$$.ctx[53]}set decorateSnapToContext(t){this.$$set({decorateSnapToContext:t}),E()}get willRenderShapeControls(){return this.$$.ctx[13]}set willRenderShapeControls(t){this.$$set({willRenderShapeControls:t}),E()}get willRenderShapeTextControls(){return this.$$.ctx[14]}set willRenderShapeTextControls(t){this.$$set({willRenderShapeTextControls:t}),E()}get markupEditorToolSelectRadius(){return this.$$.ctx[15]}set markupEditorToolSelectRadius(t){this.$$set({markupEditorToolSelectRadius:t}),E()}get willRenderShapePresetToolbar(){return this.$$.ctx[16]}set willRenderShapePresetToolbar(t){this.$$set({willRenderShapePresetToolbar:t}),E()}get beforeAddShape(){return this.$$.ctx[17]}set beforeAddShape(t){this.$$set({beforeAddShape:t}),E()}get beforeRemoveShape(){return this.$$.ctx[18]}set beforeRemoveShape(t){this.$$set({beforeRemoveShape:t}),E()}get beforeDeselectShape(){return this.$$.ctx[19]}set beforeDeselectShape(t){this.$$set({beforeDeselectShape:t}),E()}get beforeSelectShape(){return this.$$.ctx[20]}set beforeSelectShape(t){this.$$set({beforeSelectShape:t}),E()}get beforeUpdateShape(){return this.$$.ctx[21]}set beforeUpdateShape(t){this.$$set({beforeUpdateShape:t}),E()}get markupEditorWillStartInteraction(){return this.$$.ctx[22]}set markupEditorWillStartInteraction(t){this.$$set({markupEditorWillStartInteraction:t}),E()}},({stickers:t,stickerEnableSelectImage:e,stickerEnableSelectImagePreset:n,stickerEnableDropImagePreset:i,stickerForceEnable:r})=>t&&t.length||e||n||i||r]};function k8(t){let e,n,i=(t[14](t[36].value)||"")+"";return{c(){e=new y0(!1),n=Di(),e.a=n},m(r,o){e.m(i,r,o),tt(r,n,o)},p(r,o){32&o[1]&&i!==(i=(r[14](r[36].value)||"")+"")&&e.p(i)},i:Ke,o:Ke,d(r){r&&J(n),r&&e.d()}}}function C8(t){let e,n;return e=new Kr({props:{items:t[16](t[36].value)}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};32&r[1]&&(o.items=i[16](i[36].value)),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function T8(t){let e,n,i,r,o,a,s,l,c=(Un(t[36].label)?t[36].label(t[1]):t[36].label)+"";const d=[C8,k8],u=[];function p(h,$){return 32&$[1]&&(n=null),n==null&&(n=!!h[15](h[36].value)),n?0:1}return i=p(t,[-1,-1]),r=u[i]=d[i](t),{c(){e=$t("div"),r.c(),o=ce(),a=$t("span"),s=Ti(c),S(e,"slot","option")},m(h,$){tt(h,e,$),u[i].m(e,null),At(e,o),At(e,a),At(a,s),l=!0},p(h,$){let g=i;i=p(h,$),i===g?u[i].p(h,$):(Le(),B(u[g],1,1,()=>{u[g]=null}),Fe(),r=u[i],r?r.p(h,$):(r=u[i]=d[i](h),r.c()),R(r,1),r.m(e,o)),(!l||2&$[0]|32&$[1])&&c!==(c=(Un(h[36].label)?h[36].label(h[1]):h[36].label)+"")&&Yi(s,c)},i(h){l||(R(r),l=!0)},o(h){B(r),l=!1},d(h){h&&J(e),u[i].d()}}}function M8(t){let e,n;return e=new vs({props:{locale:t[1],class:"PinturaControlList",layout:"row",options:t[2],selectedIndex:t[6],onchange:t[12],$$slots:{option:[T8,({option:i})=>({36:i}),({option:i})=>[0,i?32:0]]},$$scope:{ctx:t}}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};2&r[0]&&(o.locale=i[1]),4&r[0]&&(o.options=i[2]),64&r[0]&&(o.selectedIndex=i[6]),2&r[0]|96&r[1]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function P8(t){let e,n,i,r,o;return n=new m1({props:{locale:t[1],class:"PinturaControlPanels",shapeProps:t[4],onchange:t[13],controls:t[3],scrollElasticity:t[7]}}),r=new _a({props:{elasticity:t[10],$$slots:{default:[M8]},$$scope:{ctx:t}}}),{c(){e=$t("div"),Wt(n.$$.fragment),i=ce(),Wt(r.$$.fragment),S(e,"slot","footer"),Tt(e,"transform",t[5])},m(a,s){tt(a,e,s),Bt(n,e,null),At(e,i),Bt(r,e,null),o=!0},p(a,s){const l={};2&s[0]&&(l.locale=a[1]),16&s[0]&&(l.shapeProps=a[4]),8&s[0]&&(l.controls=a[3]),128&s[0]&&(l.scrollElasticity=a[7]),n.$set(l);const c={};70&s[0]|64&s[1]&&(c.$$scope={dirty:s,ctx:a}),r.$set(c),32&s[0]&&Tt(e,"transform",a[5])},i(a){o||(R(n.$$.fragment,a),R(r.$$.fragment,a),o=!0)},o(a){B(n.$$.fragment,a),B(r.$$.fragment,a),o=!1},d(a){a&&J(e),Ot(n),Ot(r)}}}function R8(t){let e,n;return e=new wl({props:{$$slots:{footer:[P8]},$$scope:{ctx:t}}}),e.$on("measure",t[25]),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};254&r[0]|64&r[1]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function I8(t,e,n){let i,r,o,a,s,l,c,d,u=Ke,p=()=>(u(),u=Xr(h,k=>n(22,s=k)),h);t.$$.on_destroy.push(()=>u());let{isActive:h}=e;p();let{stores:$}=e,{locale:g={}}=e,{frameStyles:f={}}=e,{frameOptions:x=[]}=e,{markupEditorShapeStyleControls:v}=e;const w=mi("elasticityMultiplier");D(t,w,k=>n(24,d=k));const{history:T,animation:I,scrollElasticity:M,imageFrame:F,allowPan:C,allowZoom:z,allowZoomControls:j,allowPlayPause:A}=$;D(t,I,k=>n(23,l=k)),D(t,F,k=>n(4,c=k));let y={},st;const G=mn(l?20:0);return D(t,G,k=>n(21,a=k)),t.$$set=k=>{"isActive"in k&&p(n(0,h=k.isActive)),"stores"in k&&n(19,$=k.stores),"locale"in k&&n(1,g=k.locale),"frameStyles"in k&&n(20,f=k.frameStyles),"frameOptions"in k&&n(2,x=k.frameOptions),"markupEditorShapeStyleControls"in k&&n(3,v=k.markupEditorShapeStyleControls)},t.$$.update=()=>{4194304&t.$$.dirty[0]&&C.set(s),4194304&t.$$.dirty[0]&&z.set(s),4194304&t.$$.dirty[0]&&j.set(s),4194304&t.$$.dirty[0]&&s&&A.set(!0),16777216&t.$$.dirty[0]&&n(7,i=d*M),20&t.$$.dirty[0]&&n(6,r=c?x.findIndex(([k])=>k===c.id):0),12582912&t.$$.dirty[0]&&l&&G.set(s?0:20),2097152&t.$$.dirty[0]&&n(5,o=a?`translateY(${a}px)`:"none")},[h,g,x,v,c,o,r,i,w,I,M,F,({value:k})=>{const H=f[k];if(!H||!H.shape)return F.set(void 0),void T.write();const{shape:rt}=H,gt={id:k,...Ii(rt),...Object.keys(y).reduce((ct,V)=>(rt[V]&&(ct[V]=y[V]),ct),{})};F.set(gt),T.write()},function(k){Ae(k,"frameColor")&&(y.frameColor=k.frameColor),c&&(Da(c,k),F.set(c),clearTimeout(st),st=setTimeout(()=>{T.write()},200))},k=>{const H=f[k];var rt;if(H&&H.thumb)return rt=H.thumb,/div/i.test(rt)||Vb(rt)?rt:/rect|path|circle|line|<g>/i.test(rt)?`<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" stroke-width="1" stroke="currentColor" fill="none" aria-hidden="true" focusable="false" stroke-linecap="round" stroke-linejoin="round">${rt}</svg>`:`<img src="${rt}" alt=""/>`},k=>{const H=f[k];return!(!H||!H.thumb)&&Ei(H.thumb)},k=>f[k].thumb,G,"frame",$,f,a,s,l,d,function(k){qr.call(this,t,k)}]}var E8={util:["frame",class extends fn{constructor(t){super(),$n(this,t,I8,R8,dn,{name:18,isActive:0,stores:19,locale:1,frameStyles:20,frameOptions:2,markupEditorShapeStyleControls:3},null,[-1,-1])}get name(){return this.$$.ctx[18]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),E()}get stores(){return this.$$.ctx[19]}set stores(t){this.$$set({stores:t}),E()}get locale(){return this.$$.ctx[1]}set locale(t){this.$$set({locale:t}),E()}get frameStyles(){return this.$$.ctx[20]}set frameStyles(t){this.$$set({frameStyles:t}),E()}get frameOptions(){return this.$$.ctx[2]}set frameOptions(t){this.$$set({frameOptions:t}),E()}get markupEditorShapeStyleControls(){return this.$$.ctx[3]}set markupEditorShapeStyleControls(t){this.$$set({markupEditorShapeStyleControls:t}),E()}},({src:t})=>t&&!ac(t)]};function A8(t){let e,n,i,r,o,a,s,l;return{c(){e=$t("div"),n=$t("input"),r=ce(),o=$t("label"),a=Ti(t[1]),S(n,"id",t[0]),S(n,"type","number"),S(n,"min","1"),S(n,"inputmode","numeric"),S(n,"pattern","[0-9]*"),S(n,"data-state",t[3]),S(n,"autocomplete","off"),S(n,"placeholder",t[4]),n.value=i=t[5]===void 0?"":t[7](t[5]+""),S(o,"for",t[0]),S(o,"title",t[2]),S(o,"aria-label",t[2]),S(e,"class","PinturaInputDimension")},m(c,d){tt(c,e,d),At(e,n),At(e,r),At(e,o),At(o,a),s||(l=Mt(n,"input",t[8]),s=!0)},p(c,[d]){1&d&&S(n,"id",c[0]),8&d&&S(n,"data-state",c[3]),16&d&&S(n,"placeholder",c[4]),160&d&&i!==(i=c[5]===void 0?"":c[7](c[5]+""))&&n.value!==i&&(n.value=i),2&d&&Yi(a,c[1]),1&d&&S(o,"for",c[0]),4&d&&S(o,"title",c[2]),4&d&&S(o,"aria-label",c[2])},i:Ke,o:Ke,d(c){c&&J(e),s=!1,l()}}}function L8(t,e,n){let{id:i}=e,{label:r}=e,{title:o}=e,{state:a}=e,{placeholder:s}=e,{value:l}=e,{onchange:c}=e,{format:d=u=>u.replace(/\D/g,"")}=e;return t.$$set=u=>{"id"in u&&n(0,i=u.id),"label"in u&&n(1,r=u.label),"title"in u&&n(2,o=u.title),"state"in u&&n(3,a=u.state),"placeholder"in u&&n(4,s=u.placeholder),"value"in u&&n(5,l=u.value),"onchange"in u&&n(6,c=u.onchange),"format"in u&&n(7,d=u.format)},[i,r,o,a,s,l,c,d,u=>c(d(u.currentTarget.value))]}class C2 extends fn{constructor(e){super(),$n(this,e,L8,A8,dn,{id:0,label:1,title:2,state:3,placeholder:4,value:5,onchange:6,format:7})}}function F8(t){let e;return{c(){e=Er("g")},m(n,i){tt(n,e,i),e.innerHTML=t[2]},p(n,i){4&i&&(e.innerHTML=n[2])},d(n){n&&J(e)}}}function z8(t){let e,n,i,r,o,a,s,l;return o=new Zo({props:{$$slots:{default:[F8]},$$scope:{ctx:t}}}),{c(){e=$t("div"),n=$t("input"),i=ce(),r=$t("label"),Wt(o.$$.fragment),S(n,"id",t[0]),S(n,"class","implicit"),S(n,"type","checkbox"),n.checked=t[1],S(r,"for",t[0]),S(r,"title",t[3])},m(c,d){tt(c,e,d),At(e,n),At(e,i),At(e,r),Bt(o,r,null),a=!0,s||(l=Mt(n,"change",t[5]),s=!0)},p(c,[d]){(!a||1&d)&&S(n,"id",c[0]),(!a||2&d)&&(n.checked=c[1]);const u={};68&d&&(u.$$scope={dirty:d,ctx:c}),o.$set(u),(!a||1&d)&&S(r,"for",c[0]),(!a||8&d)&&S(r,"title",c[3])},i(c){a||(R(o.$$.fragment,c),a=!0)},o(c){B(o.$$.fragment,c),a=!1},d(c){c&&J(e),Ot(o),s=!1,l()}}}function D8(t,e,n){let{id:i}=e,{locked:r}=e,{icon:o}=e,{title:a}=e,{onchange:s}=e;return t.$$set=l=>{"id"in l&&n(0,i=l.id),"locked"in l&&n(1,r=l.locked),"icon"in l&&n(2,o=l.icon),"title"in l&&n(3,a=l.title),"onchange"in l&&n(4,s=l.onchange)},[i,r,o,a,s,l=>s(l.currentTarget.checked)]}class B8 extends fn{constructor(e){super(),$n(this,e,D8,z8,dn,{id:0,locked:1,icon:2,title:3,onchange:4})}}function O8(t){let e;return{c(){e=Ti("Save")},m(n,i){tt(n,e,i)},d(n){n&&J(e)}}}function W8(t){let e,n,i,r,o,a,s,l,c,d,u,p,h,$=t[1].resizeLabelFormCaption+"";return l=new Kr({props:{items:t[4]}}),d=new Ss({props:{type:"submit",class:"implicit",$$slots:{default:[O8]},$$scope:{ctx:t}}}),{c(){e=$t("form"),n=$t("div"),i=$t("fieldset"),r=$t("legend"),o=Ti($),a=ce(),s=$t("div"),Wt(l.$$.fragment),c=ce(),Wt(d.$$.fragment),S(r,"class","implicit"),S(s,"class","PinturaFieldsetInner"),S(n,"class","PinturaFormInner"),S(e,"slot","footer"),Tt(e,"transform",t[3])},m(g,f){tt(g,e,f),At(e,n),At(n,i),At(i,r),At(r,o),At(i,a),At(i,s),Bt(l,s,null),t[66](s),At(n,c),Bt(d,n,null),u=!0,p||(h=[Mt(s,"focusin",t[15]),Mt(s,"focusout",t[16]),Mt(e,"submit",Ov(t[17]))],p=!0)},p(g,f){(!u||2&f[0])&&$!==($=g[1].resizeLabelFormCaption+"")&&Yi(o,$);const x={};16&f[0]&&(x.items=g[4]),l.$set(x);const v={};32&f[3]&&(v.$$scope={dirty:f,ctx:g}),d.$set(v),8&f[0]&&Tt(e,"transform",g[3])},i(g){u||(R(l.$$.fragment,g),R(d.$$.fragment,g),u=!0)},o(g){B(l.$$.fragment,g),B(d.$$.fragment,g),u=!1},d(g){g&&J(e),Ot(l),t[66](null),Ot(d),p=!1,Gn(h)}}}function _8(t){let e,n;return e=new wl({props:{$$slots:{footer:[W8]},$$scope:{ctx:t}}}),e.$on("measure",t[67]),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};30&r[0]|32&r[3]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function V8(t,e,n){let i,r,o,a,s,l,c,d,u,p,h,$,g,f,x,v,w,T,I,M,F,C,z,j,A,y,st,G,k,H,rt=Ke,gt=()=>(rt(),rt=Xr(V,nt=>n(50,h=nt)),V);t.$$.on_destroy.push(()=>rt());const ct=(nt,Gt=0,Be=9999)=>{if(He(nt)&&!(nt=nt.replace(/\D/g,"")).length)return;const xe=Math.round(nt);return Number.isNaN(xe)?void 0:di(xe,Gt,Be)};let{isActive:V}=e;gt();let{stores:N}=e,{locale:kt={}}=e,{resizeMinSize:bt=Fi(1,1)}=e,{resizeMaxSize:et=Fi(9999,9999)}=e,{resizeAspectRatioLocked:Pt=!1}=e,{resizeEnableButtonLockAspectRatio:wt=!0}=e,{resizeSizePresetOptions:Q}=e,{resizeWidthPresetOptions:Ut}=e,{resizeHeightPresetOptions:lt}=e,{resizeWillRenderFooter:q=ai}=e,{resizeFormatIconButtonMaintainAspectRatio:vt=function(nt){const{active:Gt,activeFraction:Be}=nt;return{active:Gt,activeFraction:3*(Be-1)}}}=e;const dt=mn(0,{stiffness:.15,damping:.3});D(t,dt,nt=>n(55,v=nt));const{animation:Ht,imageSize:it,imageCropRect:Vt,imageCropRectAspectRatio:Dt,imageCropAspectRatio:Zt,imageOutputSize:mt,imageSelectionZoom:Ft,imageSelectionPan:ht,history:Yt,env:Nt,allowPan:Qt,allowZoom:re,allowZoomControls:xt,allowPlayPause:_}=N;D(t,Ht,nt=>n(51,$=nt)),D(t,it,nt=>n(74,G=nt)),D(t,Vt,nt=>n(53,f=nt)),D(t,Dt,nt=>n(54,x=nt)),D(t,Zt,nt=>n(73,j=nt)),D(t,mt,nt=>n(62,z=nt)),D(t,Ft,nt=>n(75,k=nt)),D(t,ht,nt=>n(76,H=nt)),D(t,Nt,nt=>n(52,g=nt));const ke=la();let ne,Xt,he,ae,Re,nn,Ct=ci();const de=(nt,Gt,Be,xe,te)=>nt!=null&&Be!==Gt?nt>=xe[Gt]&&nt<=te[Gt]?"valid":"invalid":"undetermined",ln=(nt,Gt,Be)=>Math.round(nt!=null?nt/Gt:Be.height),Je=()=>{Pt&&Xt&&he&&(ae==="width"?n(40,he=Math.round(Xt/x)):ae==="height"?n(39,Xt=Math.round(he*x)):(Re==="width"?n(40,he=Math.round(Xt/x)):Re==="height"&&n(39,Xt=Math.round(he*x)),Qe()))},Qe=nt=>{let Gt=ct(Xt),Be=ct(he),xe=Gt,te=Be,tn=xe&&te,ot=nt||x;if(!xe&&!te)return;xe&&!te?te=Math.round(xe/ot):te&&!xe&&(xe=Math.round(te*ot)),ot=nt||tn?ga(xe,te):x;let me=Fi(xe,te);Nu(et,me)||(me=oo(et,ot)),Nu(me,bt)||(me=fs(bt,ot)),n(39,Xt=Gt!=null?Math.round(me.width):void 0),n(40,he=Be!=null?Math.round(me.height):void 0)},Ie=()=>{Qe();const{width:nt,height:Gt}=z||{};nt===Xt&&Gt===he||(Xt||he?(Xt&&he&&It(Zt,j=Xt/he,j),It(mt,z=Fi(Xt,he),z)):(It(Zt,j=G.width/G.height,j),It(Zt,j=void 0,j),It(mt,z=void 0,z)),Yt.write())},Ye=mt.subscribe(nt=>{if(!nt)return n(39,Xt=void 0),void n(40,he=void 0);n(39,Xt=nt.width),n(40,he=nt.height),Qe()}),yn=Zt.subscribe(nt=>{(Xt||he)&&nt&&(Xt&&he&&ga(Xt,he)!==nt?(n(40,he=Xt/nt),Qe(nt)):Qe())}),Sn=nt=>He(nt[0])?(nt[1]=nt[1].map(Sn),nt):Ne(nt)?[nt,""+nt]:nt,Fn=nt=>{if(He(nt[0]))return nt[1]=nt[1].map(Fn),nt;let[Gt,Be]=nt;if(Ne(Gt)&&Ne(Be)){const[xe,te]=[Gt,Be];Be=`${xe} &times; ${te}`,Gt=[xe,te]}return[Gt,Be]},zn=fe();D(t,zn,nt=>n(61,C=nt));const un=fe();D(t,un,nt=>n(65,st=nt));const Y=fe();D(t,Y,nt=>n(59,M=nt));const at=fe();D(t,at,nt=>n(64,y=nt));const Z=fe();D(t,Z,nt=>n(57,T=nt));const zt=fe();D(t,zt,nt=>n(63,A=nt));const ue=Nn([mt,un],([nt,Gt],Be)=>{if(!Gt)return Be(-1);const xe=Gt.findIndex(([te])=>{if(!te&&!nt)return!0;if(!te)return!1;const[tn,ot]=te;return nt.width===tn&&nt.height===ot});Be(xe<0?0:xe)});D(t,ue,nt=>n(60,F=nt));const De=Nn([mt,at],([nt,Gt],Be)=>{if(!Gt)return Be(-1);const xe=Gt.findIndex(([te])=>!te&&!nt||!!te&&nt.width===te);Be(xe<0?0:xe)});D(t,De,nt=>n(58,I=nt));const ye=Nn([mt,zt],([nt,Gt],Be)=>{if(!Gt)return Be(-1);const xe=Gt.findIndex(([te])=>!te&&!nt||!!te&&nt.height===te);Be(xe<0?0:xe)});D(t,ye,nt=>n(56,w=nt));let Lt,Te;const cn=mi("redrawTrigger"),an=mn($?20:0);return D(t,an,nt=>n(49,p=nt)),Xo(()=>{Ye(),yn()}),t.$$set=nt=>{"isActive"in nt&&gt(n(0,V=nt.isActive)),"stores"in nt&&n(30,N=nt.stores),"locale"in nt&&n(1,kt=nt.locale),"resizeMinSize"in nt&&n(31,bt=nt.resizeMinSize),"resizeMaxSize"in nt&&n(32,et=nt.resizeMaxSize),"resizeAspectRatioLocked"in nt&&n(28,Pt=nt.resizeAspectRatioLocked),"resizeEnableButtonLockAspectRatio"in nt&&n(33,wt=nt.resizeEnableButtonLockAspectRatio),"resizeSizePresetOptions"in nt&&n(34,Q=nt.resizeSizePresetOptions),"resizeWidthPresetOptions"in nt&&n(35,Ut=nt.resizeWidthPresetOptions),"resizeHeightPresetOptions"in nt&&n(36,lt=nt.resizeHeightPresetOptions),"resizeWillRenderFooter"in nt&&n(37,q=nt.resizeWillRenderFooter),"resizeFormatIconButtonMaintainAspectRatio"in nt&&n(38,vt=nt.resizeFormatIconButtonMaintainAspectRatio)},t.$$.update=()=>{524288&t.$$.dirty[1]&&Qt.set(!h),524288&t.$$.dirty[1]&&re.set(!h),524288&t.$$.dirty[1]&&xt.set(!h),524288&t.$$.dirty[1]&&h&&_.set(!0),1073741832&t.$$.dirty[1]&&Q&&(It(zn,C=Q.map(Fn),C),It(un,st=Ws(C),st)),1073741824&t.$$.dirty[1]&&n(48,a=!!C),536870912&t.$$.dirty[1]|8&t.$$.dirty[2]&&n(47,i=F>-1&&st[F][1]),268435472&t.$$.dirty[1]&&Ut&&(It(Y,M=Ut.map(Sn),M),It(at,y=Ws(M),y)),268566528&t.$$.dirty[1]&&n(45,s=!a&&M),134217728&t.$$.dirty[1]|4&t.$$.dirty[2]&&n(46,r=I>-1&&y[I][1]),67108896&t.$$.dirty[1]&&lt&&(It(Z,T=lt.map(Sn),T),It(zt,A=Ws(T),A)),67239936&t.$$.dirty[1]&&n(44,l=!a&&T),33554432&t.$$.dirty[1]|2&t.$$.dirty[2]&&n(43,o=w>-1&&A[w][1]),155648&t.$$.dirty[1]&&n(42,c=!a&&!s&&!l),268435458&t.$$.dirty[0]|2145648583&t.$$.dirty[1]&&n(4,d=cn&&dd(()=>{return q([a&&["Dropdown","size-presets",{label:i,options:C,onchange:xe=>{return(te=xe.value)&&!Lt&&(Lt={...f},Te=j),te?(It(Zt,j=ga(te[0],te[1]),j),It(mt,z=W2(te),z)):(It(Vt,f=Lt,f),It(Zt,j=Te,j),It(mt,z=void 0,z),Lt=void 0,Te=void 0),void Yt.write();var te},selectedIndex:F}],s&&["Dropdown","width-presets",{label:r,options:M,onchange:xe=>{n(39,Xt=xe.value),Ie()},selectedIndex:I}],s&&l&&["span","times",{class:"PinturaResizeLabel",innerHTML:"&times;"}],l&&["Dropdown","height-presets",{label:o,options:T,onchange:xe=>{n(40,he=xe.value),Ie()},selectedIndex:w}],c&&[C2,"width-input",{id:"width-"+ke,title:kt.resizeTitleInputWidth,label:kt.resizeLabelInputWidth,placeholder:(nt=ct(he),Gt=x,Be=f,Math.round(nt!=null?nt*Gt:Be.width)),value:Xt,state:de(ct(Xt),"width",ae,bt,et),onchange:xe=>{n(39,Xt=xe),Je()}}],c&&wt&&[B8,"aspect-ratio-lock",{id:"aspect-ratio-lock-"+ke,title:kt.resizeTitleButtonMaintainAspectRatio,icon:Un(kt.resizeIconButtonMaintainAspectRatio)?kt.resizeIconButtonMaintainAspectRatio(Pt,v):Bs(kt.resizeIconButtonMaintainAspectRatio,vt({active:Pt,activeFraction:v}),"{","}"),locked:Pt,onchange:xe=>{n(28,Pt=xe),Je()}}],c&&[C2,"height-input",{id:"height-"+ke,title:kt.resizeTitleInputHeight,label:kt.resizeLabelInputHeight,placeholder:ln(ct(Xt),x,f),value:he,state:de(ct(he),"height",ae,bt,et),onchange:xe=>{n(40,he=xe),Je()}}]].filter(Boolean),{...g},()=>cn.set({}));var nt,Gt,Be}).filter(Boolean)),268435456&t.$$.dirty[0]&&dt.set(Pt?1:0),1024&t.$$.dirty[1]&&ae&&(Re=ae),524288&t.$$.dirty[1]&&h&&(Ct=H,nn=k),524288&t.$$.dirty[1]|1&t.$$.dirty[2]&&(h?setTimeout(()=>{return nt=z,It(ht,H=ci(),H),void It(Ft,k=nt&&f?nt.width/f.width||nt.height/f.height:1,k);var nt},0):(It(ht,H=Ct,H),It(Ft,k=nn,k))),1572864&t.$$.dirty[1]&&$&&an.set(h?0:20),262144&t.$$.dirty[1]&&n(3,u=p?`translateY(${p}px)`:"none")},[V,kt,ne,u,d,dt,Ht,it,Vt,Dt,Zt,mt,Ft,ht,Nt,nt=>{const Gt=nt.target.id;/width/.test(Gt)?n(41,ae="width"):/height/.test(Gt)?n(41,ae="height"):/aspectRatio/i.test(Gt)?n(41,ae="lock"):n(41,ae=void 0)},nt=>{ne.contains(nt.relatedTarget)||Ie(),n(41,ae=void 0)},Ie,zn,un,Y,at,Z,zt,ue,De,ye,an,Pt,"resize",N,bt,et,wt,Q,Ut,lt,q,vt,Xt,he,ae,c,o,l,s,r,i,a,p,h,$,g,f,x,v,w,T,I,M,F,C,z,A,y,st,function(nt){Hn[nt?"unshift":"push"](()=>{ne=nt,n(2,ne)})},function(nt){qr.call(this,t,nt)}]}var N8={util:["resize",class extends fn{constructor(t){super(),$n(this,t,V8,_8,dn,{name:29,isActive:0,stores:30,locale:1,resizeMinSize:31,resizeMaxSize:32,resizeAspectRatioLocked:28,resizeEnableButtonLockAspectRatio:33,resizeSizePresetOptions:34,resizeWidthPresetOptions:35,resizeHeightPresetOptions:36,resizeWillRenderFooter:37,resizeFormatIconButtonMaintainAspectRatio:38},null,[-1,-1,-1,-1])}get name(){return this.$$.ctx[29]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),E()}get stores(){return this.$$.ctx[30]}set stores(t){this.$$set({stores:t}),E()}get locale(){return this.$$.ctx[1]}set locale(t){this.$$set({locale:t}),E()}get resizeMinSize(){return this.$$.ctx[31]}set resizeMinSize(t){this.$$set({resizeMinSize:t}),E()}get resizeMaxSize(){return this.$$.ctx[32]}set resizeMaxSize(t){this.$$set({resizeMaxSize:t}),E()}get resizeAspectRatioLocked(){return this.$$.ctx[28]}set resizeAspectRatioLocked(t){this.$$set({resizeAspectRatioLocked:t}),E()}get resizeEnableButtonLockAspectRatio(){return this.$$.ctx[33]}set resizeEnableButtonLockAspectRatio(t){this.$$set({resizeEnableButtonLockAspectRatio:t}),E()}get resizeSizePresetOptions(){return this.$$.ctx[34]}set resizeSizePresetOptions(t){this.$$set({resizeSizePresetOptions:t}),E()}get resizeWidthPresetOptions(){return this.$$.ctx[35]}set resizeWidthPresetOptions(t){this.$$set({resizeWidthPresetOptions:t}),E()}get resizeHeightPresetOptions(){return this.$$.ctx[36]}set resizeHeightPresetOptions(t){this.$$set({resizeHeightPresetOptions:t}),E()}get resizeWillRenderFooter(){return this.$$.ctx[37]}set resizeWillRenderFooter(t){this.$$set({resizeWillRenderFooter:t}),E()}get resizeFormatIconButtonMaintainAspectRatio(){return this.$$.ctx[38]}set resizeFormatIconButtonMaintainAspectRatio(t){this.$$set({resizeFormatIconButtonMaintainAspectRatio:t}),E()}}]};function H8(t){let e,n;return e=new g1({props:{stores:t[3],locale:t[4],isActive:t[0],isActiveFraction:t[1],isVisible:t[2],mapScreenPointToImagePoint:t[10],mapImagePointToScreenPoint:t[9],enableMultiSelect:t[6],utilKey:"redact",imageRotation:t[11],imageFlipX:t[8],imageFlipY:t[7],shapes:t[12],toolbar:["rect"],toolShapes:{rectangle:[{x:0,y:0,width:0,height:0}]},toolActive:"rectangle",parentRect:t[14],enablePresetDropImage:!1,enablePresetSelectImage:!1,willStartInteraction:t[5],hooks:{willRenderShapeControls:t[25]}}}),e.$on("measure",t[26]),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,[r]){const o={};8&r&&(o.stores=i[3]),16&r&&(o.locale=i[4]),1&r&&(o.isActive=i[0]),2&r&&(o.isActiveFraction=i[1]),4&r&&(o.isVisible=i[2]),1024&r&&(o.mapScreenPointToImagePoint=i[10]),512&r&&(o.mapImagePointToScreenPoint=i[9]),64&r&&(o.enableMultiSelect=i[6]),2048&r&&(o.imageRotation=i[11]),256&r&&(o.imageFlipX=i[8]),128&r&&(o.imageFlipY=i[7]),32&r&&(o.willStartInteraction=i[5]),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function j8(t,e,n){let i,r,o,a,s,l,c,d,u,{isActive:p}=e,{isActiveFraction:h}=e,{isVisible:$}=e,{stores:g}=e,{locale:f={}}=e,{markupEditorWillStartInteraction:x}=e,{enableMultiSelect:v}=e;const{imageRedaction:w,rootRect:T,imageSize:I,imageRotation:M,imageFlipX:F,imageFlipY:C,imageTransforms:z,imageTransformsInterpolated:j}=g;return D(t,T,A=>n(24,d=A)),D(t,I,A=>n(23,c=A)),D(t,M,A=>n(11,u=A)),D(t,F,A=>n(8,a=A)),D(t,C,A=>n(7,o=A)),D(t,z,A=>n(22,l=A)),D(t,j,A=>n(21,s=A)),t.$$set=A=>{"isActive"in A&&n(0,p=A.isActive),"isActiveFraction"in A&&n(1,h=A.isActiveFraction),"isVisible"in A&&n(2,$=A.isVisible),"stores"in A&&n(3,g=A.stores),"locale"in A&&n(4,f=A.locale),"markupEditorWillStartInteraction"in A&&n(5,x=A.markupEditorWillStartInteraction),"enableMultiSelect"in A&&n(6,v=A.enableMultiSelect)},t.$$.update=()=>{31457664&t.$$.dirty&&n(10,i=A=>W0(A,d,c,s.origin,s.translation,l.rotation.z,s.scale,a,o)),31457664&t.$$.dirty&&n(9,r=A=>O0(A,d,c,s.origin,s.translation,l.rotation.z,s.scale,a,o))},[p,h,$,g,f,x,v,o,a,r,i,u,w,T,I,M,F,C,z,j,"redact",s,l,c,d,A=>{const y=Nh(A[0]);return $w("to-front",y),A},function(A){qr.call(this,t,A)}]}var U8={util:["redact",class extends fn{constructor(t){super(),$n(this,t,j8,H8,dn,{name:20,isActive:0,isActiveFraction:1,isVisible:2,stores:3,locale:4,markupEditorWillStartInteraction:5,enableMultiSelect:6})}get name(){return this.$$.ctx[20]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),E()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),E()}get isVisible(){return this.$$.ctx[2]}set isVisible(t){this.$$set({isVisible:t}),E()}get stores(){return this.$$.ctx[3]}set stores(t){this.$$set({stores:t}),E()}get locale(){return this.$$.ctx[4]}set locale(t){this.$$set({locale:t}),E()}get markupEditorWillStartInteraction(){return this.$$.ctx[5]}set markupEditorWillStartInteraction(t){this.$$set({markupEditorWillStartInteraction:t}),E()}get enableMultiSelect(){return this.$$.ctx[6]}set enableMultiSelect(t){this.$$set({enableMultiSelect:t}),E()}},({src:t})=>t&&!ac(t)]};function G8(t){let e;return{c(){e=$t("div")},m(n,i){tt(n,e,i)},p:Ke,d(n){n&&J(e)}}}function Z8(t){let e,n,i,r;return{c(){e=$t("div"),S(e,"class","PinturaFillTile")},m(o,a){tt(o,e,a),i||(r=Tn(n=Q8.call(null,e,t[31].value)),i=!0)},p(o,a){n&&Cn(n.update)&&1&a[1]&&n.update.call(null,o[31].value)},d(o){o&&J(e),i=!1,r()}}}function X8(t){let e,n,i;return{c(){e=$t("div"),n=$t("img"),Rg(n.src,i=t[31].value)||S(n,"src",i),S(n,"alt",""),S(n,"width","48"),S(n,"height","64"),S(e,"class","PinturaFillTile")},m(r,o){tt(r,e,o),At(e,n)},p(r,o){1&o[1]&&!Rg(n.src,i=r[31].value)&&S(n,"src",i)},d(r){r&&J(e)}}}function T2(t){let e,n,i=(Un(t[31].label)?t[31].label(t[1]):t[31].label)+"";return{c(){e=$t("span"),n=Ti(i)},m(r,o){tt(r,e,o),At(e,n)},p(r,o){2&o[0]|1&o[1]&&i!==(i=(Un(r[31].label)?r[31].label(r[1]):r[31].label)+"")&&Yi(n,i)},d(r){r&&J(e)}}}function Y8(t){let e,n,i,r;function o(c,d){return 1&d[1]&&(n=null),1&d[1]&&(i=null),n==null&&(n=!!He(c[31].value)),n?X8:(i==null&&(i=!!Ei(c[31].value)),i?Z8:G8)}let a=o(t,[-1,-1]),s=a(t),l=t[31].label&&T2(t);return{c(){e=$t("div"),s.c(),r=ce(),l&&l.c(),S(e,"slot","option")},m(c,d){tt(c,e,d),s.m(e,null),At(e,r),l&&l.m(e,null)},p(c,d){a===(a=o(c,d))&&s?s.p(c,d):(s.d(1),s=a(c),s&&(s.c(),s.m(e,r))),c[31].label?l?l.p(c,d):(l=T2(c),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},d(c){c&&J(e),s.d(),l&&l.d()}}}function q8(t){let e,n;return e=new vs({props:{locale:t[1],class:"PinturaControlList",layout:"row",options:t[2],selectedIndex:t[4],onchange:t[10],$$slots:{option:[Y8,({option:i})=>({31:i}),({option:i})=>[0,i?1:0]]},$$scope:{ctx:t}}}),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};2&r[0]&&(o.locale=i[1]),4&r[0]&&(o.options=i[2]),16&r[0]&&(o.selectedIndex=i[4]),2&r[0]|3&r[1]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function K8(t){let e,n,i;return n=new _a({props:{elasticity:t[5],$$slots:{default:[q8]},$$scope:{ctx:t}}}),{c(){e=$t("div"),Wt(n.$$.fragment),S(e,"slot","footer"),Tt(e,"transform",t[3])},m(r,o){tt(r,e,o),Bt(n,e,null),i=!0},p(r,o){const a={};32&o[0]&&(a.elasticity=r[5]),22&o[0]|2&o[1]&&(a.$$scope={dirty:o,ctx:r}),n.$set(a),8&o[0]&&Tt(e,"transform",r[3])},i(r){i||(R(n.$$.fragment,r),i=!0)},o(r){B(n.$$.fragment,r),i=!1},d(r){r&&J(e),Ot(n)}}}function J8(t){let e,n;return e=new wl({props:{$$slots:{footer:[K8]},$$scope:{ctx:t}}}),e.$on("measure",t[21]),{c(){Wt(e.$$.fragment)},m(i,r){Bt(e,i,r),n=!0},p(i,r){const o={};62&r[0]|2&r[1]&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(R(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){Ot(e,i)}}}function Q8(t){const e=document.createElement("div");return t.append(e),{update(n){const[i,r,o,a]=n.map((s,l)=>l<3?Math.round(255*s):s);t.dataset.transparent=a<1,e.style.backgroundColor=`rgba(${i},${r},${o},${a})`}}}function tk(t,e,n){let i,r,o,a,s,l,c,d,u,p,h=Ke,$=()=>(h(),h=Xr(g,k=>n(16,l=k)),g);t.$$.on_destroy.push(()=>h());let{isActive:g}=e;$();let{stores:f}=e,{locale:x={}}=e,{fillOptions:v=[]}=e;const w=k=>k.map(H=>(rt=>Ei(rt)&&He(rt[0])&&Ei(rt[1]))(H)?[H[0],w(H[1]),H[2]]:(rt=>[Array.isArray(rt)&&rt.length===3?[...rt,1]:rt,void 0,{disabled:!1}])(H)),T=mi("elasticityMultiplier");D(t,T,k=>n(20,p=k));const{history:I,animation:M,scrollElasticity:F,imageBackgroundColor:C,imageBackgroundImage:z,allowPan:j,allowZoom:A,allowZoomControls:y,allowPlayPause:st}=f;D(t,M,k=>n(17,c=k)),D(t,C,k=>n(19,u=k)),D(t,z,k=>n(18,d=k));const G=mn(c?20:0);return D(t,G,k=>n(15,s=k)),t.$$set=k=>{"isActive"in k&&$(n(0,g=k.isActive)),"stores"in k&&n(13,f=k.stores),"locale"in k&&n(1,x=k.locale),"fillOptions"in k&&n(14,v=k.fillOptions)},t.$$.update=()=>{16384&t.$$.dirty[0]&&n(2,i=w(v)),65536&t.$$.dirty[0]&&j.set(l),65536&t.$$.dirty[0]&&A.set(l),65536&t.$$.dirty[0]&&y.set(l),65536&t.$$.dirty[0]&&l&&st.set(!0),1048576&t.$$.dirty[0]&&n(5,r=p*F),786436&t.$$.dirty[0]&&n(4,o=i.findIndex(([k])=>d?k===d:Array.isArray(k)?ys(k,u):void 0)||0),196608&t.$$.dirty[0]&&c&&G.set(l?0:20),32768&t.$$.dirty[0]&&n(3,a=s?`translateY(${s}px)`:"none")},[g,x,i,a,o,r,T,M,C,z,({value:k})=>{He(k)&&(It(C,u=void 0,u),It(z,d=k,d)),Ei(k)&&(It(C,u=k,u),It(z,d=void 0,d)),I.write()},G,"fill",f,v,s,l,c,d,u,p,function(k){qr.call(this,t,k)}]}var ek={util:["fill",class extends fn{constructor(t){super(),$n(this,t,tk,J8,dn,{name:12,isActive:0,stores:13,locale:1,fillOptions:14},null,[-1,-1])}get name(){return this.$$.ctx[12]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),E()}get stores(){return this.$$.ctx[13]}set stores(t){this.$$set({stores:t}),E()}get locale(){return this.$$.ctx[1]}set locale(t){this.$$set({locale:t}),E()}get fillOptions(){return this.$$.ctx[14]}set fillOptions(t){this.$$set({fillOptions:t}),E()}},({src:t,fillOptions:e})=>t&&!ac(t)&&e&&e.length]};const M2='<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"></path></path></g>',$h='<path fill="none" d="M9 15 L12 9 L15 15 M10 13.5 h3" stroke="currentColor" stroke-width=".125em"/>';var nk={labelReset:"Reset",labelDefault:"Default",labelAuto:"Auto",labelNone:"None",labelEdit:"Edit",labelClose:"Close",labelSupportError:"{features} not supported on this browser",labelColor:"Color",labelWidth:"Width",labelSize:"Size",labelOffset:"Offset",labelAmount:"Amount",labelInset:"Inset",labelRadius:"Radius",labelColorPalette:"Color palette",labelSizeExtraSmall:"Extra small",labelSizeSmall:"Small",labelSizeMediumSmall:"Medium small",labelSizeMedium:"Medium",labelSizeMediumLarge:"Medium large",labelSizeLarge:"Large",labelSizeExtraLarge:"Extra large",labelButtonCancel:"Cancel",labelButtonUndo:"Undo",labelButtonRedo:"Redo",labelButtonRevert:"Revert",labelButtonExport:"Done",labelZoom:"Zoom",labelZoomIn:"Zoom in",labelZoomOut:"Zoom out",labelZoomFit:"Fit to view",labelZoomActual:"Actual size",iconZoomIn:'<path stroke="currentColor" stroke-width=".125em" d="M8 12 h8 M12 8 v8" />',iconZoomOut:'<path stroke="currentColor" stroke-width=".125em" d="M9 12 h6" />',iconSupportError:'<g fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><g><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></g>',iconButtonClose:M2,iconButtonRevert:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M7.388 18.538a8 8 0 10-2.992-9.03"/><path fill="currentColor" d="M2.794 11.696L2.37 6.714l5.088 3.18z"/><path d="M12 8v4M12 12l4 2"/></g>',iconButtonUndo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M10 8h4c2.485 0 5 2 5 5s-2.515 5-5 5h-4"/><path fill="currentColor" d="M5 8l4-3v6z"/></g>',iconButtonRedo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M14 8h-4c-2.485 0-5 2-5 5s2.515 5 5 5h4"/><path fill="currentColor" d="M19 8l-4-3v6z"/></g>',iconButtonExport:'<polyline points="20 6 9 17 4 12" fill="none" stroke="currentColor" stroke-width=".125em"></polyline>',statusLabelButtonClose:"Close",statusIconButtonClose:M2,statusImageLoadNone:"Waiting for image",statusImageLoadMinSize:"Minimum image size is {minWidth} &times; {minHeight}",statusImageLoadPrepare:"Preparing image&hellip;",statusImageLoadBusy:"Loading image&hellip;",statusImageLoadError:"Error loading image",statusImageProcessBusy:"Processing image&hellip;",statusImageProcessError:"Error processing image",statusImageUploadBusy:"Uploading image&hellip;",statusImageUploadError:"Error uploading image"};const ik={shapeLabelButtonSelectSticker:"Select image",shapeIconButtonSelectSticker:'<g fill="none" stroke="currentColor" stroke-width="0.0625em"><path d="M8 21 L15 11 L19 15"/><path d="M15 2 v5 h5"/><path d="M8 2 h8 l4 4 v12 q0 4 -4 4 h-8 q-4 0 -4 -4 v-12 q0 -4 4 -4z"/></g><circle fill="currentColor" cx="10" cy="8" r="1.5"/>',shapeIconButtonFlipHorizontal:'<g stroke="currentColor" stroke-width=".125em"><path fill="none" d="M6 6.5h5v11H6z"/><path fill="currentColor" d="M15 6.5h3v11h-3z"/><path d="M11 4v16" fill="currentColor"/></g>',shapeIconButtonFlipVertical:'<g stroke="currentColor" stroke-width=".125em"><rect x="7" y="8" width="11" height="5" fill="none"/><rect x="7" y="17" width="11" height="2" fill="currentColor"/><line x1="5" y1="13" x2="20" y2="13"/></g>',shapeIconButtonRemove:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M7.5 7h9z"/><path d="M7.916 9h8.168a1 1 0 01.99 1.14l-.972 6.862a2 2 0 01-1.473 1.653c-.877.23-1.753.345-2.629.345-.876 0-1.752-.115-2.628-.345a2 2 0 01-1.473-1.653l-.973-6.862A1 1 0 017.916 9z" fill="currentColor"/><rect fill="currentColor" x="10" y="5" width="4" height="3" rx="1"/></g>',shapeIconButtonDuplicate:'<g fill="none" fill-rule="evenodd"><path d="M15 13.994V16a2 2 0 01-2 2H8a2 2 0 01-2-2v-5a2 2 0 012-2h2.142" stroke="currentColor" stroke-width=".125em"/><path d="M15 9V8a1 1 0 00-2 0v1h-1a1 1 0 000 2h1v1a1 1 0 002 0v-1h1a1 1 0 000-2h-1zm-4-4h6a2 2 0 012 2v6a2 2 0 01-2 2h-6a2 2 0 01-2-2V7a2 2 0 012-2z" fill="currentColor"/></g>',shapeIconButtonMoveToFront:'<g fill="none" fill-rule="evenodd"><rect fill="currentColor" x="11" y="13" width="8" height="2" rx="1"/><rect fill="currentColor" x="9" y="17" width="10" height="2" rx="1"/><path d="M11.364 8H10a5 5 0 000 10M12 6.5L14.5 8 12 9.5z" stroke="currentColor" stroke-width=".125em" stroke-linecap="round"/></g>',shapeIconButtonTextLayoutAutoWidth:""+$h,shapeIconButtonTextLayoutAutoHeight:'<g fill="currentColor"><circle cx="4" cy="12" r="1.5"/><circle cx="20" cy="12" r="1.5"/></g>'+$h,shapeIconButtonTextLayoutFixedSize:'<g fill="currentColor"><circle cx="5" cy="6" r="1.5"/><circle cx="19" cy="6" r="1.5"/><circle cx="19" cy="19" r="1.5"/><circle cx="5" cy="19" r="1.5"/></g>'+$h,shapeTitleButtonTextLayoutAutoWidth:"Auto width",shapeTitleButtonTextLayoutAutoHeight:"Auto height",shapeTitleButtonTextLayoutFixedSize:"Fixed size",shapeTitleButtonFlipHorizontal:"Flip Horizontal",shapeTitleButtonFlipVertical:"Flip Vertical",shapeTitleButtonRemove:"Remove",shapeTitleButtonDuplicate:"Duplicate",shapeTitleButtonMoveToFront:"Move to front",shapeLabelInputText:"Edit text",shapeIconInputCancel:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"/></g>',shapeIconInputConfirm:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><polyline points="20 6 9 17 4 12"/></g>',shapeLabelInputCancel:"Cancel",shapeLabelInputConfirm:"Confirm",shapeLabelStrokeNone:"No outline",shapeLabelFontStyleNormal:"Normal",shapeLabelFontStyleBold:"Bold",shapeLabelFontStyleItalic:"Italic",shapeLabelFontStyleItalicBold:"Bold Italic",shapeTitleBackgroundColor:"Fill color",shapeTitleCornerRadius:"Corner radius",shapeTitleFontFamily:"Font",shapeTitleFontSize:"Font size",shapeTitleFontStyle:"Font style",shapeTitleLineHeight:"Line height",shapeTitleLineStart:"Start",shapeTitleLineEnd:"End",shapeTitleStrokeWidth:"Line width",shapeTitleStrokeColor:"Line color",shapeTitleLineDecorationBar:"Bar",shapeTitleLineDecorationCircle:"Circle",shapeTitleLineDecorationSquare:"Square",shapeTitleLineDecorationArrow:"Arrow",shapeTitleLineDecorationCircleSolid:"Circle solid",shapeTitleLineDecorationSquareSolid:"Square solid",shapeTitleLineDecorationArrowSolid:"Arrow solid",shapeIconLineDecorationBar:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M16,8 V16"/></g>',shapeIconLineDecorationCircle:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="none" stroke-width=".125em" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquare:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="none" stroke-width=".125em" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrow:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16 M13,7 l6,5 l-6,5" fill="none"/></g>',shapeIconLineDecorationCircleSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="currentColor" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquareSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="currentColor" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrowSolid:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M13,7 l6,5 l-6,5z" fill="currentColor"/></g>',shapeTitleColorTransparent:"Transparent",shapeTitleColorWhite:"White",shapeTitleColorSilver:"Silver",shapeTitleColorGray:"Gray",shapeTitleColorBlack:"Black",shapeTitleColorNavy:"Navy",shapeTitleColorBlue:"Blue",shapeTitleColorAqua:"Aqua",shapeTitleColorTeal:"Teal",shapeTitleColorOlive:"Olive",shapeTitleColorGreen:"Green",shapeTitleColorYellow:"Yellow",shapeTitleColorOrange:"Orange",shapeTitleColorRed:"Red",shapeTitleColorMaroon:"Maroon",shapeTitleColorFuchsia:"Fuchsia",shapeTitleColorPurple:"Purple",shapeTitleTextOutline:"Text outline",shapeTitleTextOutlineWidth:"Width",shapeTitleTextShadow:"Text shadow",shapeTitleTextShadowBlur:"Blur",shapeTitleTextColor:"Font color",shapeTitleTextAlign:"Text align",shapeTitleTextAlignLeft:"Left align text",shapeTitleTextAlignCenter:"Center align text",shapeTitleTextAlignRight:"Right align text",shapeIconTextAlignLeft:'<g stroke-width=".125em" stroke="currentColor"><line x1="5" y1="8" x2="15" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="5" y1="16" x2="14" y2="16"/></g>',shapeIconTextAlignCenter:'<g stroke-width=".125em" stroke="currentColor"><line x1="7" y1="8" x2="17" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="8" y1="16" x2="16" y2="16"/></g>',shapeIconTextAlignRight:'<g stroke-width=".125em" stroke="currentColor"><line x1="9" y1="8" x2="19" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="11" y1="16" x2="19" y2="16"/></g>',shapeLabelToolMove:"Move",shapeLabelToolView:"View",shapeLabelToolSharpie:"Sharpie",shapeLabelToolEraser:"Eraser",shapeLabelToolPath:"Path",shapeLabelToolRectangle:"Rectangle",shapeLabelToolEllipse:"Ellipse",shapeLabelToolArrow:"Arrow",shapeLabelToolLine:"Line",shapeLabelToolText:"Text",shapeLabelToolPreset:"Stickers",shapeIconToolView:'<g stroke-width=".125em" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M10.98 9.703V2.567c0-1.19 1.19-1.785 1.784-1.785.595 0 1.784.595 1.784 1.785v3.568"/><path d="M14.548 9.703V4.35c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.594 1.784 1.784v2.973"/><path d="M18.116 10.244V7.271c0-1.19 1.19-1.784 1.784-1.784.595 0 1.785.595 1.785 1.784 0 1.19 0 8.92-1.19 12.488-1.19 3.569-10.704 4.758-13.678 0-2.973-4.757-2.973-4.757-4.163-6.541-1.189-1.784-1.153-2.974-.594-3.568.558-.595 1.784-1.19 2.973.594 1.277 1.916 2.07 2.907 2.379 2.974V5.487c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.595 1.784 1.784V8.46"/></g>',shapeIconToolMove:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M6 2 L6 19 L18 13 Z M13 18 L16 24" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolSharpie:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolEraser:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" fill="none"><g transform="translate(3, 15) rotate(-45)"><rect x="0" y="0" width="18" height="10" rx="3"/></g><line x1="11" y1="21" x2="18" y2="21"/><line x1="20" y1="21" x2="22" y2="21"/></g>',shapeIconToolPath:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none"><circle cx="21" cy="3" r="2"/><circle cx="9" cy="9" r="2"/><circle cx="3" cy="21" r="2"/><path d="M19 4 11 8 M8 11 4 19"/></g>',shapeIconToolRectangle:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="1" y="1" width="22" height="22" rx="4"/></g>',shapeIconToolEllipse:'<g stroke-width=".125em" stroke="currentColor" fill="none"><circle cx="12" cy="12" r="11"/></g>',shapeIconToolArrow:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/><path d="m10 6 L21.5 1 L20 13.5" fill="currentColor" stroke="none"/></g>',shapeIconToolLine:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/></g>',shapeIconToolText:'<g stroke="none" fill="currentColor" transform="translate(6,0)"><path d="M8.14 20.085c.459 0 .901-.034 1.329-.102a8.597 8.597 0 001.015-.21v1.984c-.281.135-.695.247-1.242.336a9.328 9.328 0 01-1.477.133c-3.312 0-4.968-1.745-4.968-5.235V6.804H.344v-1.25l2.453-1.078L3.89.819h1.5v3.97h4.97v2.015H5.39v10.078c0 1.031.245 1.823.735 2.375s1.161.828 2.015.828z"/>',shapeIconToolPreset:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"></path><path d="M20 17c-3 3-5 5-8 5"></path></g>',shapeTitleSelectionMode:"Selection mode",shapeTitleBrushSize:"Brush size",shapeLabelSelectionModeNew:"New",shapeLabelSelectionModeAdd:"Add",shapeLabelSelectionModeSubtract:"Remove",shapeLabelToolSelectionBrush:"Brush",shapeLabelToolSelectionLassoo:"Lassoo",shapeLabelToolSelectionRectangle:"Rectangle marquee",shapeLabelToolSelectionEllipse:"Ellipse marquee",shapeIconSelectionModeNew:'<g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M6.5 17H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v1.5"/><rect width="12" height="12" x="9" y="9" fill="currentColor" fill-opacity=".25" rx="2"/></g>',shapeIconSelectionModeAdd:'<g fill="none" fill-rule="evenodd" stroke="currentColor"><path fill="currentColor" fill-opacity=".25" stroke-linecap="round" stroke-linejoin="round" d="M15 3a2 2 0 0 1 2 2v4h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2v-2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10Z"/><path d="M13 15h4M15 13v4"/></g>',shapeIconSelectionModeSubtract:'<g fill="none" fill-rule="evenodd" stroke="currentColor"><path fill="currentColor" fill-opacity=".25" stroke-linecap="round" stroke-linejoin="round" d="M15 3a2 2 0 0 1 2 2v4h-6a2 2 0 0 0-1.995 1.85L9 11v6H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10Z"/><rect width="12" height="12" x="9" y="9" stroke-linecap="round" stroke-linejoin="round" rx="2"/><path d="M13 15h4"/></g>',shapeIconToolSelectionBrush:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolSelectionLassoo:'<g fill="none" fill-rule="evenodd" stroke-width=".125em" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.428 17.702a18.46 18.46 0 0 0 4.085-1.595c5.851-3.112 9.019-8.599 7.074-12.256-1.945-3.657-8.265-4.1-14.116-.988C2.619 5.974-.55 11.46 1.396 15.118c.63 1.186 1.72 2.033 3.105 2.532"/><ellipse cx="8" cy="18.5" rx="3.5" ry="2.833" transform="rotate(-15 8 18.5)"/><path stroke-linecap="round" d="M5 18c3.347 1.048 5.514 1.881 6.5 2.5.859.54 1.517.994 1.5 2.364"/></g>',shapeIconToolSelectionRectangle:'<g stroke-width=".125em" stroke="currentColor"><path d="M9 1 h6 m4 0 h4v4 m0 4 v6 m0 4 v4h-4 m-4 0 h-6 m-4 0 h-4v-4 m0 -4 v-6 m0 -4 v-4h4" fill="none" /></g>',shapeIconToolSelectionEllipse:'<path stroke-width=".125em" stroke="currentColor" d="M1.21 9.853a11.054 11.054 0 0 0 0 4.294m1.643 3.965a11.054 11.054 0 0 0 3.035 3.035m3.965 1.644a11.054 11.054 0 0 0 4.294 0m3.965-1.644a11.054 11.054 0 0 0 3.035-3.035m1.644-3.965a11.054 11.054 0 0 0 0-4.294m-1.644-3.965a11.054 11.054 0 0 0-3.035-3.035m-3.965-1.644a11.054 11.054 0 0 0-4.294 0M5.888 2.853a11.054 11.054 0 0 0-3.035 3.035"/>'};var rk={cropLabel:"Crop",cropIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M23 17H9a2 2 0 0 1-2-2v-5m0-3V1 M1 7h14a2 2 0 0 1 2 2v7m0 4v3"/></g>',cropIconButtonRecenter:'<path stroke="currentColor" fill="none" stroke-width="2" stroke-linejoin="bevel" d="M1.5 7.5v-6h6M1.5 16.5v6h6M22.5 16.5v6h-6M22.5 7.5v-6h-6"/><circle cx="12" cy="12" r="3.5" fill="currentColor" stroke="none"/>',cropIconButtonRotateLeft:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><rect x="3" rx="1" height="12" width="12" y="9"/><path d="M15 5h-1a5 5 0 015 5 1 1 0 002 0 7 7 0 00-7-7h-1.374l.747-.747A1 1 0 0011.958.84L9.603 3.194a1 1 0 000 1.415l2.355 2.355a1 1 0 001.415-1.414l-.55-.55H15z"/></g>',cropIconButtonRotateRight:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><path d="M11.177 5H10a5 5 0 00-5 5 1 1 0 01-2 0 7 7 0 017-7h1.374l-.747-.747A1 1 0 0112.042.84l2.355 2.355a1 1 0 010 1.415l-2.355 2.354a1 1 0 01-1.415-1.414l.55-.55z"/><rect rx="1" height="12" width="12" y="9" x="9"/></g>',cropIconButtonFlipVertical:'<g stroke="none" fill="currentColor"><path d="M19.993 12.143H7a1 1 0 0 1-1-1V5.994a1 1 0 0 1 1.368-.93l12.993 5.15a1 1 0 0 1-.368 1.93z"/><path d="M19.993 14a1 1 0 0 1 .368 1.93L7.368 21.078A1 1 0 0 1 6 20.148V15a1 1 0 0 1 1-1h12.993z" opacity=".6"/></g>',cropIconButtonFlipHorizontal:'<g stroke="none" fill="currentColor"><path d="M11.93 7.007V20a1 1 0 0 1-1 1H5.78a1 1 0 0 1-.93-1.368l5.15-12.993a1 1 0 0 1 1.929.368z"/><path d="M14 7.007V20a1 1 0 0 0 1 1h5.149a1 1 0 0 0 .93-1.368l-5.15-12.993A1 1 0 0 0 14 7.007z" opacity=".6"/></g>',cropIconSelectPreset:`<g fill="currentColor">
        <rect opacity="{a}" x="2" y="4" width="10" height="18" rx="1"/>
        <rect opacity="{b}" x="4" y="8" width="14" height="14" rx="1"/>
        <rect opacity="{c}" x="6" y="12" width="17" height="10" rx="1"/>
    </g>`,cropIconCropBoundary:`<g fill="currentColor">
        <rect opacity="{a}" x="2" y="3" width="20" height="20" rx="1"/>
        <rect opacity="{b}" x="7" y="8" width="10" height="10" rx="1"/>
        <rect opacity="{c}" x="4" y="8" width="14" height="14" rx="1"/>
        <rect opacity="{d}" x="12" y="4" width="10" height="10" rx="1"/>
    </g>`,cropLabelButtonRecenter:"Recenter",cropLabelButtonRotateLeft:"Rotate left",cropLabelButtonRotateRight:"Rotate right",cropLabelButtonFlipHorizontal:"Flip horizontal",cropLabelButtonFlipVertical:"Flip vertical",cropLabelSelectPreset:"Crop shape",cropLabelCropBoundary:"Crop boundary",cropLabelCropBoundaryEdge:"Edge of image",cropLabelCropBoundaryNone:"None",cropLabelTabRotation:"Rotation",cropLabelTabZoom:"Scale"},ok={fillLabel:"Fill",fillIcon:`
    <g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">
        <g transform="rotate(60, 12, 12)">
            <rect x="4" y="4" width="14" height="16" rx="3"/>
        </g>
        <path d="M21 13 L21 21"></path>
        <path d="M4.5 12.5 L19 12.5"></path>
    </g>
    `},ak={resizeLabel:"Resize",resizeIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="2" y="12" width="10" height="10" rx="2"/><path d="M4 11.5V4a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-5.5"/><path d="M14 10l3.365-3.365M14 6h4v4"/></g>',resizeLabelFormCaption:"Image output size",resizeLabelInputWidth:"w",resizeTitleInputWidth:"Width",resizeLabelInputHeight:"h",resizeTitleInputHeight:"Height",resizeTitleButtonMaintainAspectRatio:"Maintain aspectratio",resizeIconButtonMaintainAspectRatio:'<defs><mask id="mask1" x="-2" y="-2" width="24" height="24"><rect x="0" y="0" width="24" height="10" fill="#fff" stroke="none"/></mask></defs><g fill="none" fill-rule="evenodd"><g mask="url(#mask1)"><path transform="translate(0 {activeFraction})" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" d="M9.401 10.205v-.804a2.599 2.599 0 0 1 5.198 0V17"/></g><rect fill="currentColor" x="7" y="10" width="10" height="7" rx="1.5"/></g>'},sk={frameLabel:"Frame",frameIcon:`<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">
            <rect x="2" y="2" width="20" height="20" rx="4"/>
            <rect x="6" y="6" width="12" height="12" rx="1"/>
        </g>`,frameLabelMatSharp:"Mat",frameLabelMatRound:"Bevel",frameLabelLineSingle:"Line",frameLabelLineMultiple:"Zebra",frameLabelEdgeSeparate:"Inset",frameLabelEdgeOverlap:"Plus",frameLabelEdgeCross:"Lumber",frameLabelCornerHooks:"Hook",frameLabelPolaroid:"Polaroid"},lk={redactLabel:"Redact",redactIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M 4 5 l 1 -1"/><path d="M 4 10 l 6 -6"/><path d="M 4 15 l 11 -11"/><path d="M 4 20 l 16 -16"/><path d="M 9 20 l 11 -11"/><path d="M 14 20 l 6 -6"/><path d="M 19 20 l 1 -1"/></g>'},e1=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t);Object.keys(n).forEach(i=>{n[i].get?Object.defineProperty(e,i,{get:()=>t[i],set:r=>t[i]=r}):e[i]=t[i]})},Hb=t=>{const e={},{sub:n,pub:i}=Ja();ar()&&document.doctype!==null||console.warn("Browser is in quirks mode, add <!DOCTYPE html> to page to fix render issues");const r=Ny();e1(r,e);const o=((c,d)=>{const u={},p=new Map,h=new Tf({target:c,props:{stores:d,pluginComponents:Array.from(Vh)}});let $=!1;const g=()=>{$||(ar()&&window.removeEventListener("pagehide",g),h&&($=!0,h.$destroy()))};function f(v,w){return p.get(v)===w||(p.set(v,w),!1)}uh||(uh=new Set(P0(Tf).filter(v=>!uw.includes(v)))),uh.forEach(v=>{Object.defineProperty(u,v,{get:()=>h[v],set:pw.includes(v)?w=>{f(v,w)||(h[v]={...h[v],...w})}:w=>{f(v,w)||(h[v]=w)}})}),Object.defineProperty(u,"previewImageData",{get:()=>h.imagePreviewCurrent}),wb.forEach(v=>{const w=Wu[v],T=w[0];Object.defineProperty(u,v,{get:()=>h.pluginInterface[T][v],set:I=>{if(f(v,I))return;const M=w.reduce((F,C)=>(F[C]={...h.pluginOptions[C],[v]:I},F),{});h.pluginOptions={...h.pluginOptions,...M}}})}),Object.defineProperty(u,"element",{get:()=>h.root,set:()=>{}});const x=h.history;return ld(u,{on:(v,w)=>{if($)return()=>{};if(/undo|redo|revert|writehistory/.test(v))return x.on(v,w);const T=[h.sub(v,w),h.$on(v,I=>w(I instanceof CustomEvent&&!I.detail?void 0:I))].filter(Boolean);return()=>T.forEach(I=>I())},updateImagePreview:v=>{h.imagePreviewSrc=v},close:()=>!$&&h.pub("close"),destroy:g}),Object.defineProperty(u,"history",{get:()=>({undo:()=>x.undo(),redo:()=>x.redo(),revert:()=>x.revert(),get:()=>x.get(),getCollapsed:()=>x.get().splice(0,x.index+1),set:v=>x.set(v),write:v=>x.write(v),get length(){return x.length()},get index(){return x.index},set index(v){x.index=v}})}),ar()&&window.addEventListener("pagehide",g),u})(t,r.stores);e1(o,e);const a=["loadImage","processImage","abortProcessImage","abortLoadImage"].map(c=>o.on(c,d=>{const u=r[c](d&&d.detail);u instanceof Promise&&u.catch(pe)})),s=(c,d)=>{const u=n(c,d),p=r.on(c,d),h=o.on(c,d);return()=>{u(),p(),h()}};e.handleEvent=pe;const l=Sb.map(c=>s(c,d=>e.handleEvent(c,d)));return ld(e,{on:s,updateImage:c=>new Promise((d,u)=>{const p=e.history.get(),h=e.history.index,$=e.imageState;r.loadImage(c).then(g=>{e.history.set(p),e.history.index=h,e.imageState=$,d(g)}).catch(u)}),close:()=>{i("close")},destroy:()=>{[...a,...l].forEach(c=>c()),o.destroy(),r.destroy(),i("destroy")}}),setTimeout(()=>i("init",e),0),e};ar();const{document:fh,window:_u}=b0;function ck(t){let e,n,i,r;return xl(t[30]),{c(){e=ce(),n=$t("div"),S(n,"class",t[4]),S(n,"aria-modal","true"),S(n,"aria-label","Pintura"),S(n,"role","dialog"),S(n,"tabindex","-1"),Tt(n,"--editor-modal",1),Tt(n,"--viewport-pad-footer",t[5]),Tt(n,"opacity",t[7]),Tt(n,"height",t[6])},m(o,a){tt(o,e,a),tt(o,n,a),t[31](n),i||(r=[Mt(_u,"keydown",t[13]),Mt(_u,"orientationchange",t[14]),Mt(_u,"resize",t[30]),Mt(fh.body,"focusin",function(){Cn(!t[1]&&t[10])&&(!t[1]&&t[10]).apply(this,arguments)}),Mt(fh.body,"focusout",function(){Cn(t[2]&&t[11])&&(t[2]&&t[11]).apply(this,arguments)}),Mt(fh.body,"keydown",t[9]),Mt(n,"wheel",t[12],{passive:!1})],i=!0)},p(o,a){t=o,16&a[0]&&S(n,"class",t[4]),32&a[0]&&Tt(n,"--viewport-pad-footer",t[5]),128&a[0]&&Tt(n,"opacity",t[7]),64&a[0]&&Tt(n,"height",t[6])},i:Ke,o:Ke,d(o){o&&J(e),o&&J(n),t[31](null),i=!1,Gn(r)}}}function dk(t,e,n){let i,r,o,a,s,l,c,d,u;const p=Ta();let{root:h}=e,{preventZoomViewport:$=!0}=e,{preventScrollBodyIfNeeded:g=!0}=e,{preventFooterOverlapIfNeeded:f=!0}=e,{preventModalAutoFocus:x=!1}=e,{class:v}=e,w=!0,T=!1,I=!1,M=ar()&&document.documentElement,F=ar()&&document.body,C=ar()&&document.head;const z=mn(0,{precision:.001,damping:.5});D(t,z,Q=>n(29,u=Q));const j=z.subscribe(Q=>{I&&Q>=1?(n(23,I=!1),n(1,w=!1),p("show")):T&&Q<=0&&(n(22,T=!1),n(1,w=!0),p("hide"))});let A=!1,y,st,G;const k=()=>document.querySelector("meta[name=viewport]"),H=()=>Array.from(document.querySelectorAll("meta[name=theme-color]")),rt=Q=>Q.type==="radio"?Array.from(h.querySelectorAll(`input[name="${Q.name}"]`)):[Q];let gt;const ct=(Q,Ut)=>{const lt=()=>{Q()?Ut():requestAnimationFrame(lt)};requestAnimationFrame(lt)};let V,N,kt=0,bt;const et=()=>{N||(N=fi("div",{style:"position:fixed;height:100vh;top:0"}),F.append(N))};bs(()=>{x||h.focus(),f&&Uo()&&et()}),Iy(()=>{N&&(n(25,bt=N.offsetHeight),N.remove(),N=void 0)});let Pt;const wt=()=>M.style.setProperty("--pintura-document-height",window.innerHeight+"px");return Xo(()=>{M.classList.remove("PinturaModalBodyLock"),j()}),t.$$set=Q=>{"root"in Q&&n(0,h=Q.root),"preventZoomViewport"in Q&&n(15,$=Q.preventZoomViewport),"preventScrollBodyIfNeeded"in Q&&n(16,g=Q.preventScrollBodyIfNeeded),"preventFooterOverlapIfNeeded"in Q&&n(17,f=Q.preventFooterOverlapIfNeeded),"preventModalAutoFocus"in Q&&n(18,x=Q.preventModalAutoFocus),"class"in Q&&n(19,v=Q.class)},t.$$.update=()=>{549453826&t.$$.dirty[0]&&n(28,i=I||T?u:w?0:1),32768&t.$$.dirty[0]&&(r="width=device-width,height=device-height,initial-scale=1"+($?",maximum-scale=1,user-scalable=0":"")),12582914&t.$$.dirty[0]&&n(26,o=!I&&!w&&!T),12&t.$$.dirty[0]&&(A||n(24,V=kt)),268435456&t.$$.dirty[0]&&n(7,a=i),16777216&t.$$.dirty[0]&&n(6,s=V+"px"),33554440&t.$$.dirty[0]&&n(5,l=Ne(bt)?"--viewport-pad-footer:"+(bt>kt?0:1):void 0),524288&t.$$.dirty[0]&&n(4,c=bn(["pintura-editor","PinturaModal",v])),65536&t.$$.dirty[0]&&n(27,d=g&&Uo()&&/15_/.test(navigator.userAgent)),201326592&t.$$.dirty[0]&&d&&(Q=>{Q?(Pt=window.scrollY,M.classList.add("PinturaDocumentLock"),wt(),window.addEventListener("resize",wt)):(window.removeEventListener("resize",wt),M.classList.remove("PinturaDocumentLock"),Ne(Pt)&&window.scrollTo(0,Pt),Pt=void 0)})(o)},[h,w,A,kt,c,l,s,a,z,Q=>{if(Q.key!=="Tab")return;const Ut=document.activeElement,lt=h.querySelectorAll('button:not([disabled]),textarea:not([disabled]),input:not([disabled]),select:not([disabled]),[tabindex="0"]'),q=rt(lt[0]),vt=rt(lt[lt.length-1]);let dt;Q.shiftKey&&q.includes(Ut)?dt=vt[0]:!Q.shiftKey&&vt.includes(Ut)&&(dt=q[0]),dt&&(dt.focus(),Q.preventDefault())},Q=>{Os(Q.target)&&(n(2,A=!0),gt=kt)},Q=>{if(Os(Q.target))if(clearTimeout(void 0),gt===kt)n(2,A=!1);else{const Ut=kt;ct(()=>kt!==Ut,()=>n(2,A=!1))}},Q=>{Q.target&&/PinturaStage/.test(Q.target.className)&&Q.preventDefault()},Q=>{const{key:Ut}=Q;if(!/escape/i.test(Ut))return;const lt=Q.target;if(lt&&/input|textarea/i.test(lt.nodeName))return;const q=document.querySelectorAll(".PinturaModal");q[q.length-1]===h&&p("close")},et,$,g,f,x,v,()=>{if(I||!w)return;n(23,I=!0);const Q=k()||fi("meta",{name:"viewport"});y=!y&&Q.getAttribute("content"),Q.setAttribute("content",r+(/cover/.test(y)?",viewport-fit=cover":"")),Q.parentNode||C.append(Q);const Ut=getComputedStyle(h).getPropertyValue("--color-background"),lt=H();if(lt.length)st=lt.map(q=>q.getAttribute("content"));else{const q=fi("meta",{name:"theme-color"});C.append(q),lt.push(q)}lt.forEach(q=>q.setAttribute("content",`rgb(${Ut})`)),clearTimeout(G),G=setTimeout(()=>z.set(1),250)},()=>{if(T||w)return;clearTimeout(G),n(22,T=!0);const Q=k();y?Q.setAttribute("content",y):Q.remove();const Ut=H();st?Ut.forEach((lt,q)=>{lt.setAttribute("content",st[q])}):Ut.forEach(lt=>lt.remove()),z.set(0)},T,I,V,bt,o,d,i,u,function(){n(3,kt=_u.innerHeight)},function(Q){Hn[Q?"unshift":"push"](()=>{h=Q,n(0,h)})}]}class uk extends fn{constructor(e){super(),$n(this,e,dk,ck,dn,{root:0,preventZoomViewport:15,preventScrollBodyIfNeeded:16,preventFooterOverlapIfNeeded:17,preventModalAutoFocus:18,class:19,show:20,hide:21},null,[-1,-1])}get root(){return this.$$.ctx[0]}set root(e){this.$$set({root:e}),E()}get preventZoomViewport(){return this.$$.ctx[15]}set preventZoomViewport(e){this.$$set({preventZoomViewport:e}),E()}get preventScrollBodyIfNeeded(){return this.$$.ctx[16]}set preventScrollBodyIfNeeded(e){this.$$set({preventScrollBodyIfNeeded:e}),E()}get preventFooterOverlapIfNeeded(){return this.$$.ctx[17]}set preventFooterOverlapIfNeeded(e){this.$$set({preventFooterOverlapIfNeeded:e}),E()}get preventModalAutoFocus(){return this.$$.ctx[18]}set preventModalAutoFocus(e){this.$$set({preventModalAutoFocus:e}),E()}get class(){return this.$$.ctx[19]}set class(e){this.$$set({class:e}),E()}get show(){return this.$$.ctx[20]}get hide(){return this.$$.ctx[21]}}const P2=(t,e,n,i)=>{const r=ut(e.x-t.x,e.y-t.y),o=yo(r),a=5*n;let s;s=i?.5*a:Math.ceil(.5*(a-1));const l=Vr(Ve(o),s);return{anchor:Ve(t),offset:l,normal:o,solid:i,size:a,sizeHalf:s}},pk=(t,e,n)=>{const{strokeWidth:i,strokeColor:r,strokeJoin:o,strokeCap:a,...s}=t,{anchor:l,offset:c,normal:d,solid:u,size:p,sizeHalf:h}=e,$=l.x,g=l.y,f=Vr(Ve(d),p),x=ut($+f.x,g+f.y);if(Vr(f,.55),u){Zi(n,c);const v=Vr(Ve(d),.5*h);return[{...s,points:[ut($-v.x,g-v.y),ut(x.x-f.y,x.y+f.x),ut(x.x+f.y,x.y-f.x)],pathClose:!0,backgroundColor:r}]}{const v=Vr((I=>{const M=I.x;return I.x=-I.y,I.y=M,I})(Ve(d)),.5),w=ut($-v.x,g-v.y),T=ut($+v.x,g+v.y);return[{...s,points:[ut(x.x+f.y,x.y-f.x),w,ut($,g),T,ut(x.x-f.y,x.y+f.x)],pathClose:!1,strokeWidth:i,strokeColor:r,strokeJoin:o,strokeCap:a}]}},hk=(t,e,n)=>{const{strokeWidth:i,strokeColor:r,...o}=t,{anchor:a,solid:s,offset:l,normal:c,sizeHalf:d}=e;return Zi(n,l),s&&Zi(n,Yl(Ve(c))),[{...o,x:a.x,y:a.y,rx:d,ry:d,backgroundColor:s?r:void 0,strokeWidth:s?void 0:i,strokeColor:s?void 0:r}]},mk=(t,e)=>{const{strokeWidth:n,strokeColor:i,strokeJoin:r,strokeCap:o,...a}=t,{anchor:s,offset:l}=e;return[{...a,points:[ut(s.x-l.y,s.y+l.x),ut(s.x+l.y,s.y-l.x)],strokeWidth:n,strokeColor:i,strokeJoin:r,strokeCap:o}]},gk=(t,e,n)=>{const{strokeWidth:i,strokeColor:r,...o}=t,{anchor:a,solid:s,offset:l,normal:c,sizeHalf:d}=e;return Zi(n,l),[{...o,x:a.x-d,y:a.y-d,width:2*d,height:2*d,rotation:(u=c,Math.atan2(u.y,u.x)),backgroundColor:s?r:void 0,strokeWidth:s?void 0:i,strokeColor:s?void 0:r}];var u},$k=(t={})=>e=>{if(!e.lineStart&&!e.lineEnd)return;const n=[],{x1:i,y1:r,x2:o,y2:a,lineStart:s,lineEnd:l,strokeWidth:c,strokeColor:d,strokeJoin:u,strokeCap:p,strokeDash:h,bitmap:$,aboveFrame:g,opacity:f}=e,x=ut(i,r),v=ut(o,a),w=[x,v],T={bitmap:$,aboveFrame:g,opacity:f,strokeColor:d,strokeWidth:c,strokeJoin:u,strokeCap:p};if(s){const[I,M]=s.split("-"),F=t[I];if(F){const C=P2(x,v,c,!!M);n.push(...F(T,C,x))}}if(l){const[I,M]=l.split("-"),F=t[I];if(F){const C=P2(v,x,c,!!M);n.push(...F(T,C,v))}}return[{...T,strokeDash:h,points:w},...n]},fk=()=>({arrow:pk,circle:hk,square:gk,bar:mk}),Uh=(t,e)=>{const n=parseFloat(t)*e;return He(t)?n+"%":n},ba=(t,e)=>He(t)?Yu(t,e):t,yk=t=>[{...t,frameStyle:"line",frameInset:0,frameOffset:0,frameSize:t.frameSize?Uh(t.frameSize,2):"2.5%",frameRadius:t.frameRound?Uh(t.frameSize,2):0}],bk=({width:t,height:e,frameImage:n,frameSize:i="15%",frameOutset:r=0,frameSlices:o={x1:.15,y1:.15,x2:.85,y2:.85}},{isPreview:a})=>{if(!n)return[];const s=Math.sqrt(t*e),l=ba(i,s),c=a?l:Math.round(l),d=c,u=ba(r,s),p=2*u,{x1:h,x2:$,y1:g,y2:f}=o,x={x0:0,y0:0,x1:c,y1:d,x2:t-c,y2:e-d,x3:t,y3:e,cw:c,ch:d,ew:t-c-c,eh:e-d-d},v=a?1:0,w=2*v,T=u>0,I={expandsCanvas:T,width:x.cw,height:x.ch,backgroundImage:n};return[{expandsCanvas:T,x:x.x1-v-u,y:x.y0-u,width:x.ew+w+p,height:x.ch,backgroundCorners:[{x:h,y:0},{x:$,y:0},{x:$,y:g},{x:h,y:g}],backgroundImage:n},{expandsCanvas:T,x:x.x1-v-u,y:x.y2+u,width:x.ew+w+p,height:x.ch,backgroundCorners:[{x:h,y:f},{x:$,y:f},{x:$,y:1},{x:h,y:1}],backgroundImage:n},{expandsCanvas:T,x:x.x0-u,y:x.y1-v-u,width:x.cw,height:x.eh+w+p,backgroundCorners:[{x:0,y:g},{x:h,y:g},{x:h,y:f},{x:0,y:f}],backgroundImage:n},{expandsCanvas:T,x:x.x2+u,y:x.y1-v-u,width:x.cw,height:x.eh+w+p,backgroundCorners:[{x:$,y:g},{x:1,y:g},{x:1,y:f},{x:$,y:f}],backgroundImage:n},{...I,x:x.x0-u,y:x.y0-u,backgroundCorners:[{x:0,y:0},{x:h,y:0},{x:h,y:g},{x:0,y:g}]},{...I,x:x.x2+u,y:x.y0-u,backgroundCorners:[{x:$,y:0},{x:1,y:0},{x:1,y:g},{x:$,y:g}]},{...I,x:x.x2+u,y:x.y2+u,backgroundCorners:[{x:$,y:f},{x:1,y:f},{x:1,y:1},{x:$,y:1}]},{...I,x:x.x0-u,y:x.y2+u,backgroundCorners:[{x:0,y:f},{x:h,y:f},{x:h,y:1},{x:0,y:1}]}]},xk=({x:t,y:e,width:n,height:i,frameInset:r="3.5%",frameSize:o=".25%",frameColor:a=[1,1,1],frameOffset:s="5%",frameAmount:l=1,frameRadius:c=0,expandsCanvas:d=!1},{isPreview:u})=>{const p=Math.sqrt(n*i);let h=ba(o,p);const $=ba(r,p),g=ba(s,p);let f=0;u||(h=Math.max(1,Math.round(h)),f=h%2==0?0:.5);const x=ba(Uh(c,l),p);return new Array(l).fill(void 0).map((v,w)=>{const T=g*w;let I=t+$+T,M=e+$+T,F=t+n-$-T,C=e+i-$-T;return u||(I=Math.round(I),M=Math.round(M),F=Math.round(F),C=Math.round(C)),{x:I+f,y:M+f,width:F-I,height:C-M,cornerRadius:x>0?x-T:0,strokeWidth:h,strokeColor:a,expandsCanvas:d}})},vk=({x:t,y:e,width:n,height:i,frameSize:r=".25%",frameOffset:o=0,frameInset:a="2.5%",frameColor:s=[1,1,1]},{isPreview:l})=>{const c=Math.sqrt(n*i);let d=ba(r,c),u=ba(a,c),p=ba(o,c),h=0;l||(d=Math.max(1,Math.round(d)),u=Math.round(u),p=Math.round(p),h=d%2==0?0:.5);const $=p-u,g=t+u+h,f=e+u+h,x=t+n-u-h,v=e+i-u-h;return[{points:[ut(g+$,f),ut(x-$,f)]},{points:[ut(x,f+$),ut(x,v-$)]},{points:[ut(x-$,v),ut(g+$,v)]},{points:[ut(g,v-$),ut(g,f+$)]}].map(w=>(w.strokeWidth=d,w.strokeColor=s,w))},wk=({x:t,y:e,width:n,height:i,frameSize:r=".25%",frameInset:o="2.5%",frameLength:a="2.5%",frameColor:s=[1,1,1]},{isPreview:l})=>{const c=Math.sqrt(n*i);let d=ba(r,c),u=ba(o,c),p=ba(a,c),h=0;l||(d=Math.max(1,Math.round(d)),u=Math.round(u),p=Math.round(p),h=d%2==0?0:.5);const $=t+u+h,g=e+u+h,f=t+n-u-h,x=e+i-u-h;return[{points:[ut($,g+p),ut($,g),ut($+p,g)]},{points:[ut(f-p,g),ut(f,g),ut(f,g+p)]},{points:[ut(f,x-p),ut(f,x),ut(f-p,x)]},{points:[ut($+p,x),ut($,x),ut($,x-p)]}].map(v=>(v.strokeWidth=d,v.strokeColor=s,v))},Sk=({x:t,y:e,width:n,height:i,frameColor:r=[1,1,1]},{isPreview:o})=>{const a=Math.sqrt(n*i),s=.1*a;let l=.2*a,c=0;const d=.5*s;return o?c=1:l=Math.ceil(l),r.length=3,[{id:"border",x:t-d+c,y:e-d+c,width:n+s-2*c,height:i+l-2*c,frameStyle:"line",frameInset:0,frameOffset:0,frameSize:s,frameColor:r,expandsCanvas:!0},{id:"chin",x:t-d,y:i-c,width:n+s,height:l,backgroundColor:r,expandsCanvas:!0}].filter(Boolean)},kk=(t={})=>(e,n)=>{if(!Ae(e,"frameStyle"))return;const i=e.frameStyle,r=t[i];if(!r)return;const{frameStyle:o,...a}=e;return r(a,n)},Ck=()=>({solid:yk,hook:wk,line:xk,edge:vk,polaroid:Sk,nine:bk}),Tk=t=>{const e=(n,i={isPreview:!0})=>{const r=t.map(o=>{const a=o(n,i);if(a)return a.map(s=>e(s,i))}).filter(Boolean).flat();return r.length?r.flat().map((o,a)=>(o.id=n.id+"_"+a,o)):n};return e};typeof window<"u"&&(t=>{if(!t)return;const[e,n,i,r]=[[108,111,99,97,116,105,111,110],[82,101,103,69,120,112],[116,101,115,116],[112,113,105,110,97,92,46,110,108]].map(o=>o.map(a=>String.fromCharCode(a)).join(""));t._v7q0jhw=new t[n](r)[i](t[e])})(window);const Gh=tb,Zh=eb,Mk=()=>({read:Vx,apply:A2}),Pk=(t={})=>{const{blurAmount:e,dataSizeScalar:n,scrambleAmount:i,backgroundColor:r}=t;return(o,a)=>(async(s,l={})=>{if(!s)return;const{width:c,height:d}=s,{dataSize:u=96,dataSizeScalar:p=1,scrambleAmount:h=4,blurAmount:$=6,outputFormat:g="canvas",backgroundColor:f=[0,0,0]}=l,x=Math.round(u*p),v=Math.min(x/c,x/d),w=Math.floor(c*v),T=Math.floor(d*v),I=fi("canvas",{width:w,height:T}),M=I.getContext("2d",{willReadFrequently:!0});if(f.length=3,M.fillStyle=Ir(f),M.fillRect(0,0,w,T),Ql(s)){const j=fi("canvas",{width:c,height:d});j.getContext("2d",{willReadFrequently:!0}).putImageData(s,0,0),M.drawImage(j,0,0,w,T),or(j)}else M.drawImage(s,0,0,w,T);const F=M.getImageData(0,0,w,T),C=[];if(h>0&&C.push([E5,{amount:h}]),$>0)for(let j=0;j<$;j++)C.push([ny,{matrix:A5}]);let z;if(C.length){const j=(st,G)=>`(err, imageData) => {
(${st[G][0].toString()})(Object.assign({ imageData: imageData }, filterInstructions[${G}]), 
${st[G+1]?j(st,G+1):"done"})
}`,A=`function (options, done) {
const filterInstructions = options.filterInstructions;
const imageData = options.imageData;
(${j(C,0)})(null, imageData)
}`,y=await hd(A,[{imageData:F,filterInstructions:C.map(st=>st[1])}],[F.data.buffer]);z=s0(y)}else z=F;return g==="canvas"?(M.putImageData(z,0,0),I):z})(o,{blurAmount:e,scrambleAmount:i,backgroundColor:r,...a,dataSizeScalar:n||a.dataSizeScalar})},Rk=Mb,Ik=zb,Ek={markupEditorToolbar:tS(),markupEditorToolStyles:Mb(),markupEditorShapeStyleControls:zb()},Ak=a6,Lk=p6,Fk=b6,zk=f8,Dk=x8,Bk=S8,Ok=E8,Wk=U8,_k=N8,Vk=ek,Nk=_w,Hk=Ew,jk=qw,Uk=nk,Gk=ik,Zk=rk,Xk=ok,Yk={filterLabel:"Filter",filterIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M18.347 9.907a6.5 6.5 0 1 0-1.872 3.306M3.26 11.574a6.5 6.5 0 1 0 2.815-1.417 M10.15 17.897A6.503 6.503 0 0 0 16.5 23a6.5 6.5 0 1 0-6.183-8.51"/></g>',filterLabelChrome:"Chrome",filterLabelFade:"Fade",filterLabelCold:"Cold",filterLabelWarm:"Warm",filterLabelPastel:"Pastel",filterLabelMonoDefault:"Mono",filterLabelMonoNoir:"Noir",filterLabelMonoWash:"Wash",filterLabelMonoStark:"Stark",filterLabelSepiaDefault:"Sepia",filterLabelSepiaBlues:"Blues",filterLabelSepiaRust:"Rust",filterLabelSepiaColor:"Color"},qk={finetuneLabel:"Finetune",finetuneIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M4 1v5.5m0 3.503V23M12 1v10.5m0 3.5v8M20 1v15.5m0 3.5v3M2 7h4M10 12h4M18 17h4"/></g>',finetuneLabelBrightness:"Brightness",finetuneLabelContrast:"Contrast",finetuneLabelSaturation:"Saturation",finetuneLabelExposure:"Exposure",finetuneLabelTemperature:"Temperature",finetuneLabelGamma:"Gamma",finetuneLabelClarity:"Clarity",finetuneLabelVignette:"Vignette"},Kk=ak,Jk={decorateLabel:"Decorate",decorateIcon:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width=".125em" stroke-linecap="round" stroke-linejoin="round" d="M12 18.5l-6.466 3.4 1.235-7.2-5.23-5.1 7.228-1.05L12 2l3.233 6.55 7.229 1.05-5.231 5.1 1.235 7.2z"/></g>'},Qk={annotateLabel:"Annotate",annotateIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M17.086 2.914a2.828 2.828 0 1 1 4 4l-14.5 14.5-5.5 1.5 1.5-5.5 14.5-14.5z"/></g>'},tC={stickerLabel:"Sticker",stickerIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"/><path d="M20 17c-3 3-5 5-8 5"/></g>'},eC=sk,nC=lk,iC=(t={},e)=>{const{sub:n,pub:i}=Ja(),r={},o=((p={},h)=>new uk({target:document.body,props:{class:p.class,preventModalAutoFocus:p.preventModalAutoFocus,preventZoomViewport:p.preventZoomViewport,preventScrollBodyIfNeeded:p.preventScrollBodyIfNeeded,preventFooterOverlapIfNeeded:p.preventFooterOverlapIfNeeded}}))(t),a=()=>{o.hide&&o.hide()},s=()=>{o.show&&o.show()},l=Hb(o.root);e1(l,r),r.handleEvent=pe,l.handleEvent=(p,h)=>{if(p==="init")return r.handleEvent(p,r);r.handleEvent(p,h)},l.on("close",async()=>{const{willClose:p}=t;if(!p)return a();await p()&&a()});const c=(p,h)=>/show|hide/.test(p)?n(p,h):l.on(p,h),d=["show","hide"].map(p=>c(p,h=>r.handleEvent(p,h))),u=()=>{d.forEach(p=>p()),a(),o.$destroy(),l.destroy()};return ld(r,{on:c,destroy:u,hide:a,show:s}),Object.defineProperty(r,"modal",{get:()=>o.root,set:()=>{}}),o.$on("close",l.close),o.$on("show",()=>i("show")),o.$on("hide",()=>{i("hide"),t.enableAutoDestroy!==!1&&u()}),t.enableAutoHide!==!1&&l.on("process",a),l.on("loadstart",s),t.enableButtonClose!==!1&&(t.enableButtonClose=!0),delete t.class,Object.assign(r,t),r},rC=(t=[])=>Tk([kk(Ck()),$k(fk()),...t]),oC=(t={})=>{let e,n;Array.isArray(t.imageReader)||(n=t.imageReader,delete t.imageReader),Array.isArray(t.imageWriter)?e=Zh():(e=Un(t.imageWriter)?t.imageWriter:Zh(t.imageWriter),delete t.imageWriter);let i;return Un(t.imageScrambler)||(i=t.imageScrambler,delete t.imageScrambler),{imageReader:Gh(n),imageWriter:e,imageOrienter:Mk(),imageScrambler:Pk(i)}},R2=(t={})=>{hw(Ak,Lk,Fk,zk,Dk,Bk,Ok,Wk,_k,Vk);const e=oC(t),n={...Uk,...Gk,...Zk,...Xk,...Yk,...qk,...eC,...nC,...Kk,...Jk,...Qk,...tC,...t.locale};delete t.locale;const i=typeof t.shapePreprocessor=="function"?t.shapePreprocessor:rC(t.shapePreprocessor);return delete t.shapePreprocessor,t.markupEditorShapeStyleControls&&Object.entries(t.markupEditorShapeStyleControls).every(([r,o])=>/Options$/.test(r)||!Array.isArray(o))&&(t.markupEditorShapeStyleControls=Ik({...t.markupEditorShapeStyleControls})),t.markupEditorToolStyles&&Object.values(t.markupEditorToolStyles).every(r=>!Array.isArray(r))&&(t.markupEditorToolStyles=Object.entries(t.markupEditorToolStyles).reduce((r,[o,a])=>(r[o]=hs(o,a),r),Rk())),zy([{...e,shapePreprocessor:i,utils:["trim","crop","filter","finetune","retouch","annotate","decorate","sticker","fill","frame","redact","resize"],...Nk,...Hk,...jk,...Ek,stickerStickToImage:!0,locale:n},t])},aC={methods:{show(){this.editor.show()},hide(){this.editor.hide()}},mounted(){this.editor=iC(Object.assign({},this.$attrs)),this.unsubs=kb(this.editor,this.$refs.elementRef)},beforeUpdate(){Object.assign(this.editor,Object.assign({},this.$attrs))},beforeUnmount(){this.editor&&(this.unsubs.forEach(t=>t()),this.unsubs=[],this.editor=void 0)},render(){return Px("div",{ref:"elementRef"})}},sC={class:"home gp30 p30"},lC={key:0,class:"loading-overlay"},cC={class:"grid gc5 gr1 gp10 img_List"},dC=["src","onClick"],uC=["onClick"],pC={class:"grid gc4 gr2 gp10 input-form"},hC={class:"grid gc2 gr2 gp10 input-form"},mC={class:"menu-wrap"},gC={key:0,class:"map-info"},$C={class:"buttonzone"},fC={__name:"index",setup(t){const e=Bx(),n={labels:{crop:"자르기",rotate:"회전",flip:"뒤집기",edit:"편집",close:"닫기",apply:"적용",cancel:"취소"},tooltips:{crop:"이미지 자르기",rotate:"이미지 회전",flip:"이미지 뒤집기"},errors:{default:"오류가 발생했습니다."}},i={...R2(),imageReader:Gh(),imageWriter:Zh({mimeType:"image/jpeg",quality:.9}),locale:n},{locale:r}=R2(),o=Gh(),a=ia([]),s=ia(null),l=ia(!1),c=ia(null),d=ia(""),u=ia(""),p=ia(""),h=ia([]),$=ct=>{const V=ct.target.files;for(let N=0;N<V.length;N++){const kt=V[N];h.value.push(kt);const bt=URL.createObjectURL(kt);a.value.push(bt)}},g=ct=>{a.value.splice(ct,1)},f=(ct,V)=>{s.value=ct,c.value=V,l.value=!0},x=ct=>{if(console.log("Image processed",ct.detail),c.value!==null&&ct.detail.dest){const V=ct.detail.dest,N=new File([V],`edited-image-${c.value}.jpg`,{type:"image/jpeg"});URL.revokeObjectURL(a.value[c.value]),a.value.splice(c.value,1,URL.createObjectURL(V)),h.value[c.value]=N,console.log("Updated files array:",h.value)}l.value=!1},v=()=>{console.log("Editor shown")},w=()=>{console.log("Editor closed"),l.value=!1},T=ct=>{console.log("Editor loaded",ct.detail)};Rx(()=>p.value,async(ct,V)=>{if(!ct||ct.endsWith(" "))return;const N=ct.split(" ").map(kt=>kt.startsWith("#")?kt:"#"+kt).join(" ");p.value=N});const I=ia(null),M=ia(""),F=ia([]);let C,z;Ix(()=>{if(!window.kakao||!window.kakao.maps){const ct=document.createElement("script");ct.src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=YOUR_APP_KEY&libraries=services",ct.onload=()=>{kakao.maps.load(()=>{j()})},document.head.appendChild(ct)}else kakao.maps.load(()=>{j()})});const j=()=>{console.log("Initializing Kakao Map and Services");const ct={center:new kakao.maps.LatLng(37.566826,126.9786567),level:3};C=new kakao.maps.Map(I.value,ct),z=new kakao.maps.services.Places,new kakao.maps.InfoWindow({zIndex:1}),console.log("Map and PS initialized:",{map:C,ps:z})},A=()=>{if(!M.value.trim()){alert("장소를 입력해주세요!");return}if(!z){console.error("PS 객체가 초기화되지 않았습니다.");return}z.keywordSearch(M.value,y)};function y(ct,V,N){V===kakao.maps.services.Status.OK?G(ct):V===kakao.maps.services.Status.ZERO_RESULT&&alert("검색 결과가 없습니다.")}const st=ia(null);function G(ct){const V=new kakao.maps.LatLngBounds;H(),ct.forEach((N,kt)=>{const bt=new kakao.maps.LatLng(N.y,N.x),et=k(bt);kakao.maps.event.addListener(et,"click",()=>{console.log(N),st.value=N}),V.extend(bt)}),C.setBounds(V)}function k(ct){const V=new kakao.maps.Marker({position:ct,map:C});return F.value.push(V),V}function H(){F.value.forEach(ct=>ct.setMap(null)),F.value=[]}const rt=ia(!1),gt=()=>{Gm.fire({title:"엠버서더 피드를 업로드 하시겠습니까?",text:" ",icon:"success",showCancelButton:!0,confirmButtonText:"업로드",cancelButtonText:"취소"}).then(async ct=>{if(ct.isConfirmed){rt.value=!0;const V=new FormData;V.append("Title",d.value),V.append("comment",u.value),V.append("tag",p.value),V.append("Place",JSON.stringify(st.value)),h.value.forEach(N=>{V.append("image",N)}),Dx.post("/ambassador/Post_Save",V,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}}).then(N=>{N.status===200&&(console.log("게시물 작성 성공"),Gm.fire("엠버서더 피드","엠버서더 피드가 업로드 완료 되었습니다.","success"),e.push("/AmbassadorHome"))}).catch(N=>{console.error("오류 발생:",N)}).finally(()=>{rt.value=!1})}})};return(ct,V)=>(Vl(),Bc("div",sC,[rt.value?(Vl(),Bc("div",lC,V[5]||(V[5]=[Gi("div",{class:"spinner"},null,-1),Gi("p",null,"업로드 중입니다. 잠시만 기다려주세요...",-1)]))):Rp("",!0),Gi("div",cC,[(Vl(!0),Bc(Ex,null,Ax(a.value,(N,kt)=>(Vl(),Bc("div",{key:kt,class:"image-container"},[Gi("img",{src:N,class:"preview-img",onClick:bt=>f(N,kt)},null,8,dC),Gi("div",{class:"delete-btn",onClick:bt=>g(kt)},"X",8,uC)]))),128)),V[6]||(V[6]=Gi("label",{for:"imgInput"},[Gi("div",{class:"flex br10 img_insert"},"+")],-1)),Gi("input",{id:"imgInput",type:"file",accept:"image/*",multiple:"",onChange:$},null,32)]),Gi("div",pC,[Gi("div",null,[V[7]||(V[7]=Gi("h4",null,"엠버서더 피드 제목",-1)),lu(Gi("input",{"onUpdate:modelValue":V[0]||(V[0]=N=>d.value=N),class:"input-title",type:"text",placeholder:"제목"},null,512),[[cu,d.value]])]),Gi("div",null,[V[8]||(V[8]=Gi("h4",null,"엠버서더 피드 내용",-1)),lu(Gi("textarea",{"onUpdate:modelValue":V[1]||(V[1]=N=>u.value=N),class:"input-content",placeholder:"내용"},null,512),[[cu,u.value]])]),Gi("div",null,[V[9]||(V[9]=Gi("h4",null,"피드 태그",-1)),lu(Gi("input",{"onUpdate:modelValue":V[2]||(V[2]=N=>p.value=N),class:"input-tag",type:"text",placeholder:"#태그"},null,512),[[cu,p.value]])])]),Gi("div",hC,[Gi("div",mC,[lu(Gi("input",{class:"keyword",type:"text","onUpdate:modelValue":V[3]||(V[3]=N=>M.value=N),placeholder:"장소를 입력하세요",onKeyup:Lx(A,["enter"])},null,544),[[cu,M.value]])]),Gi("div",{class:"map-container",ref_key:"mapContainer",ref:I},[st.value?(Vl(),Bc("div",gC,[V[10]||(V[10]=Gi("h3",null,"선택된 플레이스",-1)),Gi("h3",null,Um(st.value.place_name),1),Gi("p",null,Um(st.value.address_name),1)])):Rp("",!0)],512),Gi("div",$C,[Gi("button",{onClick:V[4]||(V[4]=N=>gt()),class:"save-btn mt10"},"작성완료")])]),l.value?(Vl(),Fx(Ip(aC),zx({key:1},i,{src:s.value,locale:Ip(r),imageReader:Ip(o),"onPintura:process":x,"onPintura:show":v,"onPintura:close":w,"onPintura:load":T}),null,16,["src","locale","imageReader"])):Rp("",!0)]))}},vC=Ox(fC,[["__scopeId","data-v-83a07415"]]);export{vC as default};
