import{c as b,r as l,o as j,a as B,e as i,f as t,g as J,h as P,q as h,j as _,t as S,w,m as y,i as x,n as M,F as k,k as U,A as O,d as n,p as Q,x as W,u as Y}from"./index-HUFp0Dkx.js";import{P as Z,N as G,S as H,a as X}from"./pagination-CMOR0lCz.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";const D="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAKCAYAAAC5Sw6hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsEAAA7BAbiRa+0AAADLSURBVChTlZExCoQwEEWzeg1BsLGwsfASXsfzeAEbWw9h4SUsBEFBEMtZ3mDEXaPLPjCRyf+PQMy2bVKWpSzLIv9CpygKWddVTNu24nmeZFkm8zzvkd+QpUO36zoxDOu6Ft/3JU1TmaZJg0+QIUuHLqgIrCxJEhnHcZ9e4YzMWQKHCKwsjmOnbBgGPfuWwIcIzjKKlr7vJYoipwQuIrAyigj4wjC8lYBTBFVV6YsgC4JA/5ndcSsCe7Onm1heLOaBpml0z/NcdzfGvAEbpCUv56uhAAAAAABJRU5ErkJggg==",q={class:"writepot"},ee={class:"writecontainer"},te={class:"articlebox"},se={class:"photobox"},oe={key:0,class:"photobox"},ae=["src"],le={key:0,class:"commentbox"},ne={class:"userinfo"},ie=["src"],re={class:"userid"},ue={class:"articlecomment"},ce={key:0,class:"tagbox"},de={id:"result",class:"tagresult"},pe=["onClick"],me={key:1,class:"locatebox"},ge={__name:"modify",setup(_e){const I=O();W();const c=Y(),T=b(()=>c.state.User_ID);b(()=>c.state.Profile_Img);const d=l(""),p=l(""),m=l(""),E=l(null),C=l([]),r=l([]),u=l([]),g=l(null);j(async()=>{try{const{data:s}=await B.get("/Feeds/Post_detail/"+I.params.Post_ID,{withCredentials:!0});console.log(s),g.value=s,p.value=s.post.Post_Title,m.value=s.post.Post_Caption,u.value=[...s.tags],r.value=s.post.Image_Srcs}catch(s){console.error("게시물 불러오기 오류:",s)}});const V=()=>{u.value.push(d.value),d.value=""},z=s=>{u.value.splice(s,1)};function F(s){const e=s.target.files;for(let o=0;o<e.length;o++){const a=e[o];if(C.value.push(a),a&&a.type.startsWith("image")){const v=new FileReader;v.onload=()=>{r.value.push(v.result)},v.readAsDataURL(a)}else alert("이미지 파일을 선택해주세요.")}}const N=()=>{var o;const s=I.params.Post_ID||((o=g.value)==null?void 0:o.Post_ID);if(console.log("Post ID:",s),!s){console.error("Post_ID가 정의되지 않았습니다.");return}const e=new FormData;e.append("postId",s),e.append("Title",p.value),e.append("comment",m.value),e.append("tag",u.value),C.value.forEach(a=>{e.append("newImages",a)}),e.append("existingImages",JSON.stringify(r.value)),B.post("/feeds/Post_modify",e,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}}).then(a=>{a.status===200&&(c.commit("Switch_isModify"),location.reload()),console.log("수정 완료:",a)}).catch(a=>{console.error("수정 중 오류 발생:",a)})},A=l(!1),R=()=>{A.value=!A.value},f=l(!1),K=()=>{f.value=!f.value},L=[Z,G];return(s,e)=>(n(),i("div",q,[t("div",ee,[e[7]||(e[7]=t("span",{class:"newarticle"},"게시물 수정",-1)),t("div",te,[t("div",se,[t("input",{type:"file",id:"chooseFile",name:"chooseFile",accept:"image/*",class:"inputphoto",style:{display:"none"},ref_key:"Input_Img",ref:E,multiple:"",onChange:F},null,544),r.value&&r.value.length>0?(n(),i("div",oe,[J(h(X),{spaceBetween:10,slidesPerView:1,pagination:!0,navigation:!0,modules:L,class:"mySwiper"},{default:P(()=>[(n(!0),i(k,null,U(r.value,(o,a)=>(n(),Q(h(H),{key:a},{default:P(()=>[t("img",{src:o,alt:"Image preview",style:{width:"500px",height:"580px"}},null,8,ae)]),_:2},1024))),128))]),_:1})])):_("",!0)]),g.value?(n(),i("div",le,[t("div",ne,[t("span",null,[t("img",{src:g.value.post.Profile_Img,alt:"",class:"profile"},null,8,ie)]),t("span",re,S(T.value),1)]),t("div",null,[t("span",null,[w(t("input",{class:"Title",type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>p.value=o),placeholder:"제목을 입력하세요."},null,512),[[y,p.value]])])]),t("div",ue,[w(t("textarea",{class:"Content",type:"text",placeholder:"글내용을 입력하세요.","onUpdate:modelValue":e[1]||(e[1]=o=>m.value=o)},null,512),[[y,m.value]]),t("button",{class:"dropdown-button",onClick:K},e[4]||(e[4]=[x(" add tag "),t("img",{src:D,alt:"",class:"down-icon"},null,-1)])),f.value?(n(),i("div",ce,[w(t("input",{class:"inputtag",type:"text","onUpdate:modelValue":e[2]||(e[2]=o=>d.value=o),onKeyup:M(V,["enter"]),placeholder:"이 곳에서 Tag를 추가해보세요."},null,544),[[y,d.value]]),t("div",de,[(n(!0),i(k,null,U(u.value,(o,a)=>(n(),i("span",{key:a,class:"tag"},[x(S(o)+" ",1),t("button",{class:"deleteTagButton",onClick:v=>z(a)}," x ",8,pe)]))),128))])])):_("",!0),t("button",{class:"dropdown-button",onClick:R},e[5]||(e[5]=[x(" add location "),t("img",{src:D,alt:"",class:"down-icon"},null,-1)])),A.value?(n(),i("div",me,e[6]||(e[6]=[t("div",{id:"map"},null,-1)]))):_("",!0),t("div",{class:"buttonzone"},[t("button",{class:"complete",onClick:N},"완료")])])])):_("",!0)])]),t("div",{class:"blur",onClick:e[3]||(e[3]=o=>h(c).commit("Switch_isModify"))})]))}},ve=$(ge,[["__scopeId","data-v-247ef4a0"]]),we=Object.freeze(Object.defineProperty({__proto__:null,default:ve},Symbol.toStringTag,{value:"Module"}));export{D as _,we as a,ve as m};
