import{c as S,r as l,o as J,a as B,e as i,f as t,g as K,h as P,q as A,j as f,t as b,w as h,m as w,i as k,n as O,F as y,k as U,A as j,d as n,p as M,x as Q,u as L}from"./index-Cp1J-Kyg.js";import{P as W,N as Y,S as Z,a as $}from"./pagination-BeehCn9_.js";/* empty css                                                                 */import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAKCAYAAAC5Sw6hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsEAAA7BAbiRa+0AAADLSURBVChTlZExCoQwEEWzeg1BsLGwsfASXsfzeAEbWw9h4SUsBEFBEMtZ3mDEXaPLPjCRyf+PQMy2bVKWpSzLIv9CpygKWddVTNu24nmeZFkm8zzvkd+QpUO36zoxDOu6Ft/3JU1TmaZJg0+QIUuHLqgIrCxJEhnHcZ9e4YzMWQKHCKwsjmOnbBgGPfuWwIcIzjKKlr7vJYoipwQuIrAyigj4wjC8lYBTBFVV6YsgC4JA/5ndcSsCe7Onm1heLOaBpml0z/NcdzfGvAEbpCUv56uhAAAAAABJRU5ErkJggg==",X={class:"writepot"},q={class:"writecontainer"},ee={class:"articlebox"},te={class:"photobox"},se={key:0,class:"photobox"},oe=["src"],ae={key:0,class:"commentbox"},le={class:"userinfo"},ne=["src"],ie={class:"userid"},re={class:"articlecomment"},ce={key:0,class:"tagbox"},ue={id:"result",class:"tagresult"},de=["onClick"],pe={class:"buttonzone"},me={__name:"modify",setup(ve){const I=j();Q();const u=L(),D=S(()=>u.state.User_ID);S(()=>u.state.Profile_Img);const C=l([]),d=l(""),p=l(""),m=l(""),T=l(null),x=l([]),r=l([]),c=l([]),g=l(null);J(async()=>{try{const{data:s}=await B.get(`/Feeds/Post_detail/${I.params.Post_ID}`,{withCredentials:!0});console.log(s),g.value=s,p.value=s.post.Post_Title,m.value=s.post.Post_Caption,c.value=[...s.tags],r.value=s.post.Image_Srcs,s.locate&&(C.value=[...s.locate])}catch(s){console.error("게시물 불러오기 오류:",s)}});const E=()=>{c.value.push(d.value),d.value=""},V=s=>{c.value.splice(s,1)};function z(s){const e=s.target.files;for(let o=0;o<e.length;o++){const a=e[o];if(x.value.push(a),a&&a.type.startsWith("image")){const v=new FileReader;v.onload=()=>{r.value.push(v.result)},v.readAsDataURL(a)}else alert("이미지 파일을 선택해주세요.")}}const F=()=>{var o;const s=I.params.Post_ID||((o=g.value)==null?void 0:o.Post_ID);if(console.log("Post ID:",s),!s){console.error("Post_ID가 정의되지 않았습니다.");return}const e=new FormData;e.append("postId",s),e.append("Title",p.value),e.append("comment",m.value),e.append("tag",c.value),e.append("locate",JSON.stringify(C.value)),x.value.forEach(a=>{e.append("newImages",a)}),e.append("existingImages",JSON.stringify(r.value)),B.post("/feeds/Post_modify",e,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}}).then(a=>{a.status===200&&(u.commit("Switch_isModify"),location.reload()),console.log("수정 완료:",a)}).catch(a=>{console.error("수정 중 오류 발생:",a)})};l(!1);const _=l(!1),N=()=>{_.value=!_.value},R=[W,Y];return(s,e)=>(n(),i(y,null,[t("div",X,[t("div",q,[e[6]||(e[6]=t("span",{class:"newarticle"},"게시물 수정",-1)),t("div",ee,[t("div",te,[t("input",{type:"file",id:"chooseFile",name:"chooseFile",accept:"image/*",class:"inputphoto",style:{display:"none"},ref_key:"Input_Img",ref:T,multiple:"",onChange:z},null,544),r.value&&r.value.length>0?(n(),i("div",se,[K(A($),{spaceBetween:10,slidesPerView:1,pagination:!0,navigation:!0,modules:R,class:"mySwiper"},{default:P(()=>[(n(!0),i(y,null,U(r.value,(o,a)=>(n(),M(A(Z),{key:a},{default:P(()=>[t("img",{src:o,alt:"Image preview",style:{width:"500px",height:"580px"}},null,8,oe)]),_:2},1024))),128))]),_:1})])):f("",!0)]),g.value?(n(),i("div",ae,[t("div",le,[t("span",null,[t("img",{src:g.value.post.Profile_Img,alt:"",class:"profile"},null,8,ne)]),t("span",ie,b(D.value),1)]),t("div",null,[t("span",null,[h(t("input",{class:"Title",type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>p.value=o),placeholder:"제목을 입력하세요."},null,512),[[w,p.value]])])]),t("div",re,[h(t("textarea",{class:"Content",type:"text",placeholder:"글내용을 입력하세요.","onUpdate:modelValue":e[1]||(e[1]=o=>m.value=o)},null,512),[[w,m.value]]),t("button",{class:"dropdown-button",onClick:N},e[5]||(e[5]=[k(" add tag "),t("img",{src:H,alt:"",class:"down-icon"},null,-1)])),_.value?(n(),i("div",ce,[h(t("input",{class:"inputtag",type:"text","onUpdate:modelValue":e[2]||(e[2]=o=>d.value=o),onKeyup:O(E,["enter"]),placeholder:"이 곳에서 Tag를 추가해보세요."},null,544),[[w,d.value]]),t("div",ue,[(n(!0),i(y,null,U(c.value,(o,a)=>(n(),i("span",{key:a,class:"tag"},[k(b(o)+" ",1),t("button",{class:"deleteTagButton",onClick:v=>V(a)}," x ",8,de)]))),128))])])):f("",!0),t("div",pe,[t("button",{class:"complete",onClick:e[3]||(e[3]=o=>F())},"완료")])])])):f("",!0)])])]),t("div",{class:"blur",onClick:e[4]||(e[4]=o=>A(u).commit("Switch_isModify"))})],64))}},ge=G(me,[["__scopeId","data-v-45c50174"]]),we=Object.freeze(Object.defineProperty({__proto__:null,default:ge},Symbol.toStringTag,{value:"Module"}));export{H as _,we as a,ge as m};
